{"version":3,"file":"vendors~49d0a293-81ecf6ce3bd8596fddf5.js","mappings":"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","sources":["webpack://mirador-integration/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/extends.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/interopRequireWildcard.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/objectWithoutProperties.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/typeof.js","webpack://mirador-integration/./node_modules/@babel/runtime/regenerator/index.js","webpack://mirador-integration/./node_modules/@edsilv/http-status-codes/dist-commonjs/index.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/AnnotationSettings.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/AnnotationsOverlay.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/App.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/AppProviders.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/AttributionPanel.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/AudioViewer.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/BackgroundPluginArea.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/icons/MiradorIcon.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/Branding.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/CanvasAnnotations.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/CanvasInfo.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/CanvasLayers.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/ChangeThemeDialog.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/CollapsibleSection.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/CollectionDialog.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/CollectionInfo.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/CompanionArea.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/CompanionWindow.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/CompanionWindowFactory.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/CustomPanel.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/ErrorContent.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/ErrorDialog.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/FullScreenButton.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/GalleryView.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/GalleryViewThumbnail.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/AccessTokenSender.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/NewWindow.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/IIIFAuthentication.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/IIIFDropTarget.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/IIIFThumbnail.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/LabelValueMetadata.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/LanguageSettings.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/LayersPanel.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/LocalePicker.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/ManifestForm.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/ManifestInfo.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/ManifestListItem.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/ManifestListItemError.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/ManifestRelatedLinks.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/MinimalWindow.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/MiradorMenuButton.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/MosaicRenderPreview.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/OpenSeadragonViewer.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/PluginHook.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/PrimaryWindow.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/SanitizedHtml.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/ScrollIndicatedDialogContent.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/ScrollTo.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/SearchHit.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/SearchPanel.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/SearchPanelControls.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/SearchPanelNavigation.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/SearchResults.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/SelectCollection.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/SidebarIndexItem.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/SidebarIndexList.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/SidebarIndexTableOfContents.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/SidebarIndexThumbnail.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/ThumbnailCanvasGrouping.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/ThumbnailNavigation.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/VideoViewer.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/ViewerInfo.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/ViewerNavigation.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/Window.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WindowAuthenticationBar.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WindowCanvasNavigationControls.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WindowList.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WindowListButton.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WindowSideBar.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WindowSideBarAnnotationsPanel.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/icons/CanvasIndexIcon.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WindowSideBarButtons.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WindowSideBarCanvasPanel.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WindowSideBarCollectionPanel.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WindowSideBarInfoPanel.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/icons/ThumbnailNavigationBottomIcon.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/icons/ThumbnailNavigationRightIcon.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WindowThumbnailSettings.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/icons/WindowMaxIcon.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/icons/WindowMinIcon.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WindowTopBar.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WindowTopBarPluginArea.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WindowTopBarPluginMenu.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WindowTopBarTitle.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WindowTopMenu.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/icons/WindowOptionsIcon.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WindowTopMenuButton.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/icons/BookViewIcon.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/icons/GalleryViewIcon.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WindowViewSettings.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WindowViewer.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/Workspace.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WorkspaceAdd.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WorkspaceAddButton.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WorkspaceArea.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WorkspaceControlPanel.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WorkspaceControlPanelButtons.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WorkspaceElastic.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WorkspaceElasticWindow.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WorkspaceExport.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WorkspaceImport.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/NestedMenu.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WorkspaceMenu.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WorkspaceMenuButton.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WorkspaceMosaic.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WorkspaceOptionsButton.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WorkspaceOptionsMenu.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/icons/WorkspaceTypeElasticIcon.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/icons/WorkspaceTypeMosaicIcon.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/WorkspaceSelectionDialog.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/icons/RestoreZoomIcon.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/components/ZoomControls.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/config/css-ns.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/config/settings.js","webpack://mirador-integration/./node_modules/batch-processor/src/batch-processor.js","webpack://mirador-integration/./node_modules/batch-processor/src/utils.js","webpack://mirador-integration/./node_modules/classnames/index.js","webpack://mirador-integration/./node_modules/clsx/dist/clsx.m.js","webpack://mirador-integration/./node_modules/copy-to-clipboard/index.js","webpack://mirador-integration/./node_modules/css-box-model/dist/css-box-model.esm.js","webpack://mirador-integration/./node_modules/css-vendor/dist/css-vendor.esm.js","webpack://mirador-integration/./node_modules/deepmerge/dist/cjs.js","webpack://mirador-integration/./node_modules/dnd-core/dist/esm/actions/dragDrop/types.js","webpack://mirador-integration/./node_modules/dnd-core/dist/esm/utils/equality.js","webpack://mirador-integration/./node_modules/dnd-core/dist/esm/reducers/dragOffset.js","webpack://mirador-integration/./node_modules/dnd-core/dist/esm/actions/registry.js","webpack://mirador-integration/./node_modules/dnd-core/dist/esm/utils/js_utils.js","webpack://mirador-integration/./node_modules/dnd-core/dist/esm/reducers/dragOperation.js","webpack://mirador-integration/./node_modules/dnd-core/dist/esm/reducers/refCount.js","webpack://mirador-integration/./node_modules/dnd-core/dist/esm/utils/dirtiness.js","webpack://mirador-integration/./node_modules/dnd-core/dist/esm/reducers/dirtyHandlerIds.js","webpack://mirador-integration/./node_modules/dnd-core/dist/esm/reducers/stateId.js","webpack://mirador-integration/./node_modules/dnd-core/dist/esm/reducers/index.js","webpack://mirador-integration/./node_modules/dnd-core/dist/esm/actions/dragDrop/local/setClientOffset.js","webpack://mirador-integration/./node_modules/dnd-core/dist/esm/actions/dragDrop/beginDrag.js","webpack://mirador-integration/./node_modules/dnd-core/dist/esm/actions/dragDrop/publishDragSource.js","webpack://mirador-integration/./node_modules/dnd-core/dist/esm/utils/matchesType.js","webpack://mirador-integration/./node_modules/dnd-core/dist/esm/actions/dragDrop/hover.js","webpack://mirador-integration/./node_modules/dnd-core/dist/esm/actions/dragDrop/drop.js","webpack://mirador-integration/./node_modules/dnd-core/dist/esm/actions/dragDrop/endDrag.js","webpack://mirador-integration/./node_modules/dnd-core/dist/esm/utils/coords.js","webpack://mirador-integration/./node_modules/dnd-core/dist/esm/DragDropMonitorImpl.js","webpack://mirador-integration/./node_modules/dnd-core/dist/esm/interfaces.js","webpack://mirador-integration/./node_modules/dnd-core/dist/esm/utils/getNextUniqueId.js","webpack://mirador-integration/./node_modules/dnd-core/dist/esm/contracts.js","webpack://mirador-integration/./node_modules/dnd-core/dist/esm/HandlerRegistryImpl.js","webpack://mirador-integration/./node_modules/dnd-core/dist/esm/DragDropManagerImpl.js","webpack://mirador-integration/./node_modules/dnd-core/dist/esm/actions/dragDrop/index.js","webpack://mirador-integration/./node_modules/dnd-core/dist/esm/factories.js","webpack://mirador-integration/./node_modules/dnd-multi-backend/dist/esm/createTransition.js","webpack://mirador-integration/./node_modules/dnd-multi-backend/dist/esm/Transitions.js","webpack://mirador-integration/./node_modules/dnd-multi-backend/dist/esm/MultiBackend.js","webpack://mirador-integration/./node_modules/dnd-multi-backend/dist/esm/objectAssign.js","webpack://mirador-integration/./node_modules/dnd-multi-backend/dist/esm/index.js","webpack://mirador-integration/./node_modules/dompurify/dist/purify.js","webpack://mirador-integration/./node_modules/element-resize-detector/src/browser-detector.js","webpack://mirador-integration/./node_modules/element-resize-detector/src/collection-utils.js","webpack://mirador-integration/./node_modules/element-resize-detector/src/detection-strategy/object.js","webpack://mirador-integration/./node_modules/element-resize-detector/src/detection-strategy/scroll.js","webpack://mirador-integration/./node_modules/element-resize-detector/src/element-resize-detector.js","webpack://mirador-integration/./node_modules/element-resize-detector/src/element-utils.js","webpack://mirador-integration/./node_modules/element-resize-detector/src/id-generator.js","webpack://mirador-integration/./node_modules/element-resize-detector/src/id-handler.js","webpack://mirador-integration/./node_modules/element-resize-detector/src/listener-handler.js","webpack://mirador-integration/./node_modules/element-resize-detector/src/reporter.js","webpack://mirador-integration/./node_modules/element-resize-detector/src/state-handler.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/esm/objectSpread.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/esm/objectSpread2.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/esm/toArray.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://mirador-integration/./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js"],"sourcesContent":["function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var _typeof = require(\"@babel/runtime/helpers/typeof\")[\"default\"];\n\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\n\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache(nodeInterop);\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nmodule.exports = _interopRequireWildcard;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose.js\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","module.exports = require(\"regenerator-runtime\");\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CONTINUE = 100;\r\nexports.SWITCHING_PROTOCOLS = 101;\r\nexports.PROCESSING = 102;\r\nexports.OK = 200;\r\nexports.CREATED = 201;\r\nexports.ACCEPTED = 202;\r\nexports.NON_AUTHORITATIVE_INFORMATION = 203;\r\nexports.NO_CONTENT = 204;\r\nexports.RESET_CONTENT = 205;\r\nexports.PARTIAL_CONTENT = 206;\r\nexports.MULTI_STATUS = 207;\r\nexports.MULTIPLE_CHOICES = 300;\r\nexports.MOVED_PERMANENTLY = 301;\r\nexports.MOVED_TEMPORARILY = 302;\r\nexports.SEE_OTHER = 303;\r\nexports.NOT_MODIFIED = 304;\r\nexports.USE_PROXY = 305;\r\nexports.TEMPORARY_REDIRECT = 307;\r\nexports.BAD_REQUEST = 400;\r\nexports.UNAUTHORIZED = 401;\r\nexports.PAYMENT_REQUIRED = 402;\r\nexports.FORBIDDEN = 403;\r\nexports.NOT_FOUND = 404;\r\nexports.METHOD_NOT_ALLOWED = 405;\r\nexports.NOT_ACCEPTABLE = 406;\r\nexports.PROXY_AUTHENTICATION_REQUIRED = 407;\r\nexports.REQUEST_TIME_OUT = 408;\r\nexports.CONFLICT = 409;\r\nexports.GONE = 410;\r\nexports.LENGTH_REQUIRED = 411;\r\nexports.PRECONDITION_FAILED = 412;\r\nexports.REQUEST_ENTITY_TOO_LARGE = 413;\r\nexports.REQUEST_URI_TOO_LARGE = 414;\r\nexports.UNSUPPORTED_MEDIA_TYPE = 415;\r\nexports.REQUESTED_RANGE_NOT_SATISFIABLE = 416;\r\nexports.EXPECTATION_FAILED = 417;\r\nexports.IM_A_TEAPOT = 418;\r\nexports.UNPROCESSABLE_ENTITY = 422;\r\nexports.LOCKED = 423;\r\nexports.FAILED_DEPENDENCY = 424;\r\nexports.UNORDERED_COLLECTION = 425;\r\nexports.UPGRADE_REQUIRED = 426;\r\nexports.PRECONDITION_REQUIRED = 428;\r\nexports.TOO_MANY_REQUESTS = 429;\r\nexports.REQUEST_HEADER_FIELDS_TOO_LARGE = 431;\r\nexports.INTERNAL_SERVER_ERROR = 500;\r\nexports.NOT_IMPLEMENTED = 501;\r\nexports.BAD_GATEWAY = 502;\r\nexports.SERVICE_UNAVAILABLE = 503;\r\nexports.GATEWAY_TIME_OUT = 504;\r\nexports.HTTP_VERSION_NOT_SUPPORTED = 505;\r\nexports.VARIANT_ALSO_NEGOTIATES = 506;\r\nexports.INSUFFICIENT_STORAGE = 507;\r\nexports.BANDWIDTH_LIMIT_EXCEEDED = 509;\r\nexports.NOT_EXTENDED = 510;\r\nexports.NETWORK_AUTHENTICATION_REQUIRED = 511;\r\n//# sourceMappingURL=index.js.map","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport VisibilityIcon from '@material-ui/icons/VisibilitySharp';\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOffSharp';\nimport MiradorMenuButton from '../containers/MiradorMenuButton';\n/**\n * AnnotationSettings is a component to handle various annotation\n * display settings in the Annotation companion window\n*/\n\nexport var AnnotationSettings = /*#__PURE__*/function (_Component) {\n  _inherits(AnnotationSettings, _Component);\n\n  var _super = _createSuper(AnnotationSettings);\n\n  function AnnotationSettings() {\n    _classCallCheck(this, AnnotationSettings);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(AnnotationSettings, [{\n    key: \"render\",\n\n    /**\n     * Returns the rendered component\n    */\n    value: function render() {\n      var _this$props = this.props,\n          displayAll = _this$props.displayAll,\n          displayAllDisabled = _this$props.displayAllDisabled,\n          t = _this$props.t,\n          toggleAnnotationDisplay = _this$props.toggleAnnotationDisplay;\n      return /*#__PURE__*/React.createElement(MiradorMenuButton, {\n        \"aria-label\": t(displayAll ? 'displayNoAnnotations' : 'highlightAllAnnotations'),\n        onClick: toggleAnnotationDisplay,\n        disabled: displayAllDisabled,\n        size: \"small\"\n      }, displayAll ? /*#__PURE__*/React.createElement(VisibilityIcon, null) : /*#__PURE__*/React.createElement(VisibilityOffIcon, null));\n    }\n  }]);\n\n  return AnnotationSettings;\n}(Component);","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport isEqual from 'lodash/isEqual';\nimport debounce from 'lodash/debounce';\nimport flatten from 'lodash/flatten';\nimport sortBy from 'lodash/sortBy';\nimport xor from 'lodash/xor';\nimport OpenSeadragonCanvasOverlay from '../lib/OpenSeadragonCanvasOverlay';\nimport CanvasWorld from '../lib/CanvasWorld';\nimport CanvasAnnotationDisplay from '../lib/CanvasAnnotationDisplay';\n/**\n * Represents a OpenSeadragonViewer in the mirador workspace. Responsible for mounting\n * and rendering OSD.\n */\n\nexport var AnnotationsOverlay = /*#__PURE__*/function (_Component) {\n  _inherits(AnnotationsOverlay, _Component);\n\n  var _super = _createSuper(AnnotationsOverlay);\n\n  _createClass(AnnotationsOverlay, null, [{\n    key: \"annotationsMatch\",\n\n    /**\n     * annotationsMatch - compares previous annotations to current to determine\n     * whether to add a new updateCanvas method to draw annotations\n     * @param  {Array} currentAnnotations\n     * @param  {Array} prevAnnotations\n     * @return {Boolean}\n     */\n    value: function annotationsMatch(currentAnnotations, prevAnnotations) {\n      if (!currentAnnotations && !prevAnnotations) return true;\n      if (currentAnnotations && !prevAnnotations || !currentAnnotations && prevAnnotations) return false;\n      if (currentAnnotations.length === 0 && prevAnnotations.length === 0) return true;\n      if (currentAnnotations.length !== prevAnnotations.length) return false;\n      return currentAnnotations.every(function (annotation, index) {\n        var newIds = annotation.resources.map(function (r) {\n          return r.id;\n        });\n        var prevIds = prevAnnotations[index].resources.map(function (r) {\n          return r.id;\n        });\n        if (newIds.length === 0 && prevIds.length === 0) return true;\n        if (newIds.length !== prevIds.length) return false;\n\n        if (annotation.id === prevAnnotations[index].id && isEqual(newIds, prevIds)) {\n          return true;\n        }\n\n        return false;\n      });\n    }\n    /**\n     * @param {Object} props\n     */\n\n  }]);\n\n  function AnnotationsOverlay(props) {\n    var _this;\n\n    _classCallCheck(this, AnnotationsOverlay);\n\n    _this = _super.call(this, props);\n    _this.ref = /*#__PURE__*/React.createRef();\n    _this.osdCanvasOverlay = null; // An initial value for the updateCanvas method\n\n    _this.updateCanvas = function () {};\n\n    _this.onUpdateViewport = _this.onUpdateViewport.bind(_assertThisInitialized(_this));\n    _this.onCanvasClick = _this.onCanvasClick.bind(_assertThisInitialized(_this));\n    _this.onCanvasMouseMove = debounce(_this.onCanvasMouseMove.bind(_assertThisInitialized(_this)), 10);\n    _this.onCanvasExit = _this.onCanvasExit.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /**\n   * React lifecycle event\n   */\n\n\n  _createClass(AnnotationsOverlay, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.initializeViewer();\n    }\n    /**\n     * When the tileSources change, make sure to close the OSD viewer.\n     * When the annotations change, reset the updateCanvas method to make sure\n     * they are added.\n     * When the viewport state changes, pan or zoom the OSD viewer as appropriate\n     */\n\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props = this.props,\n          drawAnnotations = _this$props.drawAnnotations,\n          drawSearchAnnotations = _this$props.drawSearchAnnotations,\n          annotations = _this$props.annotations,\n          searchAnnotations = _this$props.searchAnnotations,\n          hoveredAnnotationIds = _this$props.hoveredAnnotationIds,\n          selectedAnnotationId = _this$props.selectedAnnotationId,\n          highlightAllAnnotations = _this$props.highlightAllAnnotations,\n          viewer = _this$props.viewer;\n      this.initializeViewer();\n      var annotationsUpdated = !AnnotationsOverlay.annotationsMatch(annotations, prevProps.annotations);\n      var searchAnnotationsUpdated = !AnnotationsOverlay.annotationsMatch(searchAnnotations, prevProps.searchAnnotations);\n      var hoveredAnnotationsUpdated = xor(hoveredAnnotationIds, prevProps.hoveredAnnotationIds).length > 0;\n\n      if (this.osdCanvasOverlay && hoveredAnnotationsUpdated) {\n        if (hoveredAnnotationIds.length > 0) {\n          this.osdCanvasOverlay.canvasDiv.style.cursor = 'pointer';\n        } else {\n          this.osdCanvasOverlay.canvasDiv.style.cursor = '';\n        }\n      }\n\n      var selectedAnnotationsUpdated = selectedAnnotationId !== prevProps.selectedAnnotationId;\n      var redrawAnnotations = drawAnnotations !== prevProps.drawAnnotations || drawSearchAnnotations !== prevProps.drawSearchAnnotations || highlightAllAnnotations !== prevProps.highlightAllAnnotations;\n\n      if (searchAnnotationsUpdated || annotationsUpdated || selectedAnnotationsUpdated || hoveredAnnotationsUpdated || redrawAnnotations) {\n        this.updateCanvas = this.canvasUpdateCallback();\n        viewer.forceRedraw();\n      }\n    }\n    /**\n     */\n\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var viewer = this.props.viewer;\n      viewer.removeHandler('canvas-click', this.onCanvasClick);\n      viewer.removeHandler('canvas-exit', this.onCanvasExit);\n      viewer.removeHandler('update-viewport', this.onUpdateViewport);\n      viewer.removeHandler('mouse-move', this.onCanvasMouseMove);\n    }\n    /** */\n\n  }, {\n    key: \"onCanvasClick\",\n    value: function onCanvasClick(event) {\n      var _this2 = this;\n\n      var canvasWorld = this.props.canvasWorld;\n      var webPosition = event.position,\n          viewport = event.eventSource.viewport;\n      var point = viewport.pointFromPixel(webPosition);\n      var canvas = canvasWorld.canvasAtPoint(point);\n      if (!canvas) return;\n\n      var _canvasWorld$canvasTo = canvasWorld.canvasToWorldCoordinates(canvas.id),\n          _canvasWorld$canvasTo2 = _slicedToArray(_canvasWorld$canvasTo, 4),\n          _canvasX = _canvasWorld$canvasTo2[0],\n          _canvasY = _canvasWorld$canvasTo2[1],\n          canvasWidth = _canvasWorld$canvasTo2[2],\n          canvasHeight // eslint-disable-line no-unused-vars\n      = _canvasWorld$canvasTo2[3]; // get all the annotations that contain the click\n\n\n      var annos = this.annotationsAtPoint(canvas, point);\n\n      if (annos.length > 0) {\n        event.preventDefaultAction = true; // eslint-disable-line no-param-reassign\n      }\n\n      if (annos.length === 1) {\n        this.toggleAnnotation(annos[0].id);\n      } else if (annos.length > 0) {\n        /**\n         * Try to find the \"right\" annotation to select after a click.\n         *\n         * This is perhaps a naive method, but seems to deal with rectangles and SVG shapes:\n         *\n         * - figure out how many points around a circle are inside the annotation shape\n         * - if there's a shape with the fewest interior points, it's probably the one\n         *       with the closest boundary?\n         * - if there's a tie, make the circle bigger and try again.\n         */\n        var annosWithClickScore = function annosWithClickScore(radius) {\n          var degreesToRadians = Math.PI / 180;\n          return function (anno) {\n            var score = 0;\n\n            for (var degrees = 0; degrees < 360; degrees += 1) {\n              var x = Math.cos(degrees * degreesToRadians) * radius + point.x;\n              var y = Math.sin(degrees * degreesToRadians) * radius + point.y;\n              if (_this2.isAnnotationAtPoint(anno, canvas, {\n                x: x,\n                y: y\n              })) score += 1;\n            }\n\n            return {\n              anno: anno,\n              score: score\n            };\n          };\n        };\n\n        var annosWithScore = [];\n        var radius = 1;\n        annosWithScore = sortBy(annos.map(annosWithClickScore(radius)), 'score');\n\n        while (radius < Math.max(canvasWidth, canvasHeight) && annosWithScore[0].score === annosWithScore[1].score) {\n          radius *= 2;\n          annosWithScore = sortBy(annos.map(annosWithClickScore(radius)), 'score');\n        }\n\n        this.toggleAnnotation(annosWithScore[0].anno.id);\n      }\n    }\n    /** */\n\n  }, {\n    key: \"onCanvasMouseMove\",\n    value: function onCanvasMouseMove(event) {\n      var _this$props2 = this.props,\n          annotations = _this$props2.annotations,\n          canvasWorld = _this$props2.canvasWorld,\n          hoverAnnotation = _this$props2.hoverAnnotation,\n          hoveredAnnotationIds = _this$props2.hoveredAnnotationIds,\n          searchAnnotations = _this$props2.searchAnnotations,\n          viewer = _this$props2.viewer,\n          windowId = _this$props2.windowId;\n      if (annotations.length === 0 && searchAnnotations.length === 0) return;\n      var webPosition = event.position;\n      var point = viewer.viewport.pointFromPixel(webPosition);\n      var canvas = canvasWorld.canvasAtPoint(point);\n\n      if (!canvas) {\n        hoverAnnotation(windowId, []);\n        return;\n      }\n\n      var annos = this.annotationsAtPoint(canvas, point);\n\n      if (xor(hoveredAnnotationIds, annos.map(function (a) {\n        return a.id;\n      })).length > 0) {\n        hoverAnnotation(windowId, annos.map(function (a) {\n          return a.id;\n        }));\n      }\n    }\n    /** If the cursor leaves the canvas, wipe out highlights */\n\n  }, {\n    key: \"onCanvasExit\",\n    value: function onCanvasExit(event) {\n      var _this$props3 = this.props,\n          hoverAnnotation = _this$props3.hoverAnnotation,\n          windowId = _this$props3.windowId; // a move event may be queued up by the debouncer\n\n      this.onCanvasMouseMove.cancel();\n      hoverAnnotation(windowId, []);\n    }\n    /**\n     * onUpdateViewport - fires during OpenSeadragon render method.\n     */\n\n  }, {\n    key: \"onUpdateViewport\",\n    value: function onUpdateViewport(event) {\n      this.updateCanvas();\n    }\n    /** @private */\n\n  }, {\n    key: \"initializeViewer\",\n    value: function initializeViewer() {\n      var viewer = this.props.viewer;\n      if (!viewer) return;\n      if (this.osdCanvasOverlay) return;\n      this.osdCanvasOverlay = new OpenSeadragonCanvasOverlay(viewer, this.ref);\n      viewer.addHandler('canvas-click', this.onCanvasClick);\n      viewer.addHandler('canvas-exit', this.onCanvasExit);\n      viewer.addHandler('update-viewport', this.onUpdateViewport);\n      viewer.addHandler('mouse-move', this.onCanvasMouseMove);\n      this.updateCanvas = this.canvasUpdateCallback();\n    }\n    /** */\n\n  }, {\n    key: \"canvasUpdateCallback\",\n    value: function canvasUpdateCallback() {\n      var _this3 = this;\n\n      return function () {\n        _this3.osdCanvasOverlay.clear();\n\n        _this3.osdCanvasOverlay.resize();\n\n        _this3.osdCanvasOverlay.canvasUpdate(_this3.renderAnnotations.bind(_this3));\n      };\n    }\n    /** @private */\n\n  }, {\n    key: \"isAnnotationAtPoint\",\n    value: function isAnnotationAtPoint(resource, canvas, point) {\n      var canvasWorld = this.props.canvasWorld;\n\n      var _canvasWorld$canvasTo3 = canvasWorld.canvasToWorldCoordinates(canvas.id),\n          _canvasWorld$canvasTo4 = _slicedToArray(_canvasWorld$canvasTo3, 2),\n          canvasX = _canvasWorld$canvasTo4[0],\n          canvasY = _canvasWorld$canvasTo4[1];\n\n      var relativeX = point.x - canvasX;\n      var relativeY = point.y - canvasY;\n\n      if (resource.svgSelector) {\n        var context = this.osdCanvasOverlay.context2d;\n\n        var _CanvasAnnotationDisp = new CanvasAnnotationDisplay({\n          resource: resource\n        }),\n            svgPaths = _CanvasAnnotationDisp.svgPaths;\n\n        return _toConsumableArray(svgPaths).some(function (path) {\n          return context.isPointInPath(new Path2D(path.attributes.d.nodeValue), relativeX, relativeY);\n        });\n      }\n\n      if (resource.fragmentSelector) {\n        var _resource$fragmentSel = _slicedToArray(resource.fragmentSelector, 4),\n            x = _resource$fragmentSel[0],\n            y = _resource$fragmentSel[1],\n            w = _resource$fragmentSel[2],\n            h = _resource$fragmentSel[3];\n\n        return x <= relativeX && relativeX <= x + w && y <= relativeY && relativeY <= y + h;\n      }\n\n      return false;\n    }\n    /** @private */\n\n  }, {\n    key: \"annotationsAtPoint\",\n    value: function annotationsAtPoint(canvas, point) {\n      var _this4 = this;\n\n      var _this$props4 = this.props,\n          annotations = _this$props4.annotations,\n          searchAnnotations = _this$props4.searchAnnotations;\n      var lists = [].concat(_toConsumableArray(annotations), _toConsumableArray(searchAnnotations));\n      var annos = flatten(lists.map(function (l) {\n        return l.resources;\n      })).filter(function (resource) {\n        if (canvas.id !== resource.targetId) return false;\n        return _this4.isAnnotationAtPoint(resource, canvas, point);\n      });\n      return annos;\n    }\n    /** */\n\n  }, {\n    key: \"toggleAnnotation\",\n    value: function toggleAnnotation(id) {\n      var _this$props5 = this.props,\n          selectedAnnotationId = _this$props5.selectedAnnotationId,\n          selectAnnotation = _this$props5.selectAnnotation,\n          deselectAnnotation = _this$props5.deselectAnnotation,\n          windowId = _this$props5.windowId;\n\n      if (selectedAnnotationId === id) {\n        deselectAnnotation(windowId, id);\n      } else {\n        selectAnnotation(windowId, id);\n      }\n    }\n    /**\n     * annotationsToContext - converts anontations to a canvas context\n     */\n\n  }, {\n    key: \"annotationsToContext\",\n    value: function annotationsToContext(annotations, palette) {\n      var _this$props6 = this.props,\n          highlightAllAnnotations = _this$props6.highlightAllAnnotations,\n          hoveredAnnotationIds = _this$props6.hoveredAnnotationIds,\n          selectedAnnotationId = _this$props6.selectedAnnotationId,\n          canvasWorld = _this$props6.canvasWorld,\n          viewer = _this$props6.viewer;\n      var context = this.osdCanvasOverlay.context2d;\n      var zoomRatio = viewer.viewport.getZoom(true) / viewer.viewport.getMaxZoom();\n      annotations.forEach(function (annotation) {\n        annotation.resources.forEach(function (resource) {\n          if (!canvasWorld.canvasIds.includes(resource.targetId)) return;\n          var offset = canvasWorld.offsetByCanvas(resource.targetId);\n          var canvasAnnotationDisplay = new CanvasAnnotationDisplay({\n            hovered: hoveredAnnotationIds.includes(resource.id),\n            offset: offset,\n            palette: _objectSpread(_objectSpread({}, palette), {}, {\n              \"default\": _objectSpread(_objectSpread({}, palette[\"default\"]), !highlightAllAnnotations && palette.hidden)\n            }),\n            resource: resource,\n            selected: selectedAnnotationId === resource.id,\n            zoomRatio: zoomRatio\n          });\n          canvasAnnotationDisplay.toContext(context);\n        });\n      });\n    }\n    /** */\n\n  }, {\n    key: \"renderAnnotations\",\n    value: function renderAnnotations() {\n      var _this$props7 = this.props,\n          annotations = _this$props7.annotations,\n          drawAnnotations = _this$props7.drawAnnotations,\n          drawSearchAnnotations = _this$props7.drawSearchAnnotations,\n          searchAnnotations = _this$props7.searchAnnotations,\n          palette = _this$props7.palette;\n\n      if (drawSearchAnnotations) {\n        this.annotationsToContext(searchAnnotations, palette.search);\n      }\n\n      if (drawAnnotations) {\n        this.annotationsToContext(annotations, palette.annotations);\n      }\n    }\n    /**\n     * Renders things\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var viewer = this.props.viewer;\n      if (!viewer) return /*#__PURE__*/React.createElement(React.Fragment, null);\n      return /*#__PURE__*/ReactDOM.createPortal( /*#__PURE__*/React.createElement(\"div\", {\n        ref: this.ref,\n        style: {\n          height: '100%',\n          left: 0,\n          position: 'absolute',\n          top: 0,\n          width: '100%'\n        }\n      }, /*#__PURE__*/React.createElement(\"canvas\", null)), viewer.canvas);\n    }\n  }]);\n\n  return AnnotationsOverlay;\n}(Component);\nAnnotationsOverlay.defaultProps = {\n  annotations: [],\n  deselectAnnotation: function deselectAnnotation() {},\n  drawAnnotations: true,\n  drawSearchAnnotations: true,\n  highlightAllAnnotations: false,\n  hoverAnnotation: function hoverAnnotation() {},\n  hoveredAnnotationIds: [],\n  palette: {},\n  searchAnnotations: [],\n  selectAnnotation: function selectAnnotation() {},\n  selectedAnnotationId: undefined,\n  viewer: null\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component, lazy, Suspense } from 'react';\nimport PluginProvider from '../extend/PluginProvider';\nimport AppProviders from '../containers/AppProviders';\nvar WorkspaceArea = /*#__PURE__*/lazy(function () {\n  return import('../containers/WorkspaceArea');\n});\n/**\n * This is the top level Mirador component.\n * @prop {Object} manifests\n */\n\nexport var App = /*#__PURE__*/function (_Component) {\n  _inherits(App, _Component);\n\n  var _super = _createSuper(App);\n\n  function App() {\n    _classCallCheck(this, App);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(App, [{\n    key: \"render\",\n\n    /**\n     * render\n     * @return {String} - HTML markup for the component\n     */\n    value: function render() {\n      var _this$props = this.props,\n          dndManager = _this$props.dndManager,\n          plugins = _this$props.plugins;\n      return /*#__PURE__*/React.createElement(PluginProvider, {\n        plugins: plugins\n      }, /*#__PURE__*/React.createElement(AppProviders, {\n        dndManager: dndManager\n      }, /*#__PURE__*/React.createElement(Suspense, {\n        fallback: /*#__PURE__*/React.createElement(\"div\", null)\n      }, /*#__PURE__*/React.createElement(WorkspaceArea, null))));\n    }\n  }]);\n\n  return App;\n}(Component);\nApp.defaultProps = {\n  dndManager: undefined,\n  plugins: []\n};\nexport default App;","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Fullscreen from 'react-full-screen';\nimport { I18nextProvider } from 'react-i18next';\nimport { LiveAnnouncer } from 'react-aria-live';\nimport { ThemeProvider, StylesProvider, createMuiTheme, jssPreset, createGenerateClassName } from '@material-ui/core/styles';\nimport { DndContext, DndProvider } from 'react-dnd';\nimport MultiBackend from 'react-dnd-multi-backend';\nimport HTML5toTouch from 'react-dnd-multi-backend/dist/cjs/HTML5toTouch';\nimport { create } from 'jss';\nimport rtl from 'jss-rtl';\nimport createI18nInstance from '../i18n';\n/**\n * Allow applications to opt-out of (or provide their own) drag and drop context\n */\n\nvar MaybeDndProvider = function MaybeDndProvider(props) {\n  var dndManager = props.dndManager,\n      children = props.children;\n\n  if (dndManager === false) {\n    return children;\n  }\n\n  if (dndManager === undefined) {\n    return /*#__PURE__*/React.createElement(DndProvider, {\n      backend: MultiBackend,\n      options: HTML5toTouch\n    }, children);\n  }\n\n  return /*#__PURE__*/React.createElement(DndContext.Provider, {\n    value: dndManager\n  }, children);\n};\n\n/**\n * This component adds viewer-specific providers.\n * @prop {Object} manifests\n */\nexport var AppProviders = /*#__PURE__*/function (_Component) {\n  _inherits(AppProviders, _Component);\n\n  var _super = _createSuper(AppProviders);\n\n  /** */\n  function AppProviders(props) {\n    var _this;\n\n    _classCallCheck(this, AppProviders);\n\n    _this = _super.call(this, props);\n    _this.i18n = createI18nInstance();\n    return _this;\n  }\n  /**\n   * Set i18n language on component mount\n   */\n\n\n  _createClass(AppProviders, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var language = this.props.language;\n      this.i18n.changeLanguage(language);\n    }\n    /**\n     * Update the i18n language if it is changed\n     */\n\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var language = this.props.language;\n\n      if (prevProps.language !== language) {\n        this.i18n.changeLanguage(language);\n      }\n    }\n    /** */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          children = _this$props.children,\n          createGenerateClassNameOptions = _this$props.createGenerateClassNameOptions,\n          isFullscreenEnabled = _this$props.isFullscreenEnabled,\n          setWorkspaceFullscreen = _this$props.setWorkspaceFullscreen,\n          theme = _this$props.theme,\n          translations = _this$props.translations,\n          dndManager = _this$props.dndManager;\n      var generateClassName = createGenerateClassName(createGenerateClassNameOptions);\n      Object.keys(translations).forEach(function (lng) {\n        _this2.i18n.addResourceBundle(lng, 'translation', translations[lng], true, true);\n      });\n      return /*#__PURE__*/React.createElement(Fullscreen, {\n        enabled: isFullscreenEnabled,\n        onChange: setWorkspaceFullscreen\n      }, /*#__PURE__*/React.createElement(I18nextProvider, {\n        i18n: this.i18n\n      }, /*#__PURE__*/React.createElement(LiveAnnouncer, null, /*#__PURE__*/React.createElement(ThemeProvider, {\n        theme: createMuiTheme(theme)\n      }, /*#__PURE__*/React.createElement(StylesProvider, {\n        jss: create({\n          plugins: [].concat(_toConsumableArray(jssPreset().plugins), [rtl()])\n        }),\n        generateClassName: generateClassName\n      }, /*#__PURE__*/React.createElement(MaybeDndProvider, {\n        dndManager: dndManager\n      }, children))))));\n    }\n  }]);\n\n  return AppProviders;\n}(Component);\nAppProviders.defaultProps = {\n  children: null,\n  createGenerateClassNameOptions: {},\n  dndManager: undefined,\n  isFullscreenEnabled: false\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Link from '@material-ui/core/Link';\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport { Img } from 'react-image';\nimport CompanionWindow from '../containers/CompanionWindow';\nimport { LabelValueMetadata } from './LabelValueMetadata';\nimport ns from '../config/css-ns';\nimport { PluginHook } from './PluginHook';\n/**\n * WindowSideBarInfoPanel\n */\n\nexport var AttributionPanel = /*#__PURE__*/function (_Component) {\n  _inherits(AttributionPanel, _Component);\n\n  var _super = _createSuper(AttributionPanel);\n\n  function AttributionPanel() {\n    _classCallCheck(this, AttributionPanel);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(AttributionPanel, [{\n    key: \"render\",\n\n    /**\n     * render\n     * @return\n     */\n    value: function render() {\n      var _this$props = this.props,\n          manifestLogo = _this$props.manifestLogo,\n          requiredStatement = _this$props.requiredStatement,\n          rights = _this$props.rights,\n          windowId = _this$props.windowId,\n          id = _this$props.id,\n          classes = _this$props.classes,\n          t = _this$props.t;\n      return /*#__PURE__*/React.createElement(CompanionWindow, {\n        title: t('attributionTitle'),\n        paperClassName: ns('attribution-panel'),\n        windowId: windowId,\n        id: id\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.section\n      }, requiredStatement && /*#__PURE__*/React.createElement(LabelValueMetadata, {\n        labelValuePairs: requiredStatement,\n        defaultLabel: t('attribution')\n      }), rights && rights.length > 0 && /*#__PURE__*/React.createElement(\"dl\", {\n        className: ns('label-value-metadata')\n      }, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"subtitle2\",\n        component: \"dt\"\n      }, t('rights')), rights.map(function (v) {\n        return /*#__PURE__*/React.createElement(Typography, {\n          variant: \"body1\",\n          component: \"dd\",\n          key: v.toString()\n        }, /*#__PURE__*/React.createElement(Link, {\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          href: v\n        }, v));\n      }))), manifestLogo && /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.section\n      }, /*#__PURE__*/React.createElement(Img, {\n        src: [manifestLogo],\n        alt: \"\",\n        role: \"presentation\",\n        className: classes.logo,\n        unloader: /*#__PURE__*/React.createElement(Skeleton, {\n          className: classes.placeholder,\n          variant: \"rect\",\n          height: 60,\n          width: 60\n        })\n      })), /*#__PURE__*/React.createElement(PluginHook, this.props));\n    }\n  }]);\n\n  return AttributionPanel;\n}(Component);\nAttributionPanel.defaultProps = {\n  classes: {},\n  manifestLogo: null,\n  requiredStatement: null,\n  rights: null,\n  t: function t(key) {\n    return key;\n  }\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component, Fragment } from 'react';\n\n/** */\nexport var AudioViewer = /*#__PURE__*/function (_Component) {\n  _inherits(AudioViewer, _Component);\n\n  var _super = _createSuper(AudioViewer);\n\n  function AudioViewer() {\n    _classCallCheck(this, AudioViewer);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(AudioViewer, [{\n    key: \"render\",\n\n    /* eslint-disable jsx-a11y/media-has-caption */\n\n    /** */\n    value: function render() {\n      var _this$props = this.props,\n          captions = _this$props.captions,\n          classes = _this$props.classes,\n          audioOptions = _this$props.audioOptions,\n          audioResources = _this$props.audioResources;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.container\n      }, /*#__PURE__*/React.createElement(\"audio\", Object.assign({\n        className: classes.audio\n      }, audioOptions), audioResources.map(function (audio) {\n        return /*#__PURE__*/React.createElement(Fragment, {\n          key: audio.id\n        }, /*#__PURE__*/React.createElement(\"source\", {\n          src: audio.id,\n          type: audio.getFormat()\n        }));\n      }), captions.map(function (caption) {\n        return /*#__PURE__*/React.createElement(Fragment, {\n          key: caption.id\n        }, /*#__PURE__*/React.createElement(\"track\", {\n          src: caption.id,\n          label: caption.getDefaultLabel(),\n          srcLang: caption.getProperty('language')\n        }));\n      })));\n    }\n    /* eslint-enable jsx-a11y/media-has-caption */\n\n  }]);\n\n  return AudioViewer;\n}(Component);\nAudioViewer.defaultProps = {\n  audioOptions: {},\n  audioResources: [],\n  captions: []\n};","import React from 'react';\nimport ns from '../config/css-ns';\nimport { PluginHook } from './PluginHook';\n/** invisible area where background plugins can add to */\n\nexport var BackgroundPluginArea = function BackgroundPluginArea(props) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: ns('background-plugin-area'),\n    style: {\n      display: 'none'\n    }\n  }, /*#__PURE__*/React.createElement(PluginHook, props));\n};\nBackgroundPluginArea.defaultProps = {\n  PluginComponents: []\n};","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n/**\n * ThumbnailNavigationRightIcon ~\n*/\n\nexport default function MiradorIcon(props) {\n  return /*#__PURE__*/React.createElement(SvgIcon, Object.assign({\n    viewBox: \"0 0 60 55\"\n  }, props), /*#__PURE__*/React.createElement(\"rect\", {\n    width: \"18\",\n    height: \"55\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    width: \"18\",\n    height: \"55\",\n    transform: \"translate(42)\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    width: \"18\",\n    height: \"34\",\n    transform: \"translate(21)\"\n  }));\n}","function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport MiradorIcon from './icons/MiradorIcon';\n/**\n * Display a branding icon\n */\n\nexport var Branding = /*#__PURE__*/function (_Component) {\n  _inherits(Branding, _Component);\n\n  var _super = _createSuper(Branding);\n\n  function Branding() {\n    _classCallCheck(this, Branding);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Branding, [{\n    key: \"render\",\n\n    /** */\n    value: function render() {\n      var _this$props = this.props,\n          t = _this$props.t,\n          variant = _this$props.variant,\n          ContainerProps = _objectWithoutProperties(_this$props, [\"t\", \"variant\"]);\n\n      return /*#__PURE__*/React.createElement(\"div\", ContainerProps, variant === 'wide' && /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Typography, {\n        align: \"center\",\n        component: \"p\",\n        variant: \"h3\"\n      }, t('mirador'))), /*#__PURE__*/React.createElement(Typography, {\n        align: \"center\"\n      }, /*#__PURE__*/React.createElement(IconButton, {\n        component: \"a\",\n        href: \"https://projectmirador.org\",\n        target: \"_blank\",\n        rel: \"noopener\"\n      }, /*#__PURE__*/React.createElement(MiradorIcon, {\n        \"aria-label\": t('aboutMirador'),\n        titleAccess: t('aboutMirador'),\n        fontSize: \"large\"\n      }))));\n    }\n  }]);\n\n  return Branding;\n}(Component);\nBranding.defaultProps = {\n  t: function t(k) {\n    return k;\n  },\n  variant: 'default'\n};","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport clsx from 'clsx';\nimport Chip from '@material-ui/core/Chip';\nimport MenuList from '@material-ui/core/MenuList';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Typography from '@material-ui/core/Typography';\nimport SanitizedHtml from '../containers/SanitizedHtml';\nimport { ScrollTo } from './ScrollTo';\n/**\n * CanvasAnnotations ~\n*/\n\nexport var CanvasAnnotations = /*#__PURE__*/function (_Component) {\n  _inherits(CanvasAnnotations, _Component);\n\n  var _super = _createSuper(CanvasAnnotations);\n\n  /**\n   * constructor -\n   */\n  function CanvasAnnotations(props) {\n    var _this;\n\n    _classCallCheck(this, CanvasAnnotations);\n\n    _this = _super.call(this, props);\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_this));\n    _this.handleAnnotationHover = _this.handleAnnotationHover.bind(_assertThisInitialized(_this));\n    _this.handleAnnotationBlur = _this.handleAnnotationBlur.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /**\n   * Handle click event of an annotation.\n  */\n\n\n  _createClass(CanvasAnnotations, [{\n    key: \"handleClick\",\n    value: function handleClick(event, annotation) {\n      var _this$props = this.props,\n          deselectAnnotation = _this$props.deselectAnnotation,\n          selectAnnotation = _this$props.selectAnnotation,\n          selectedAnnotationId = _this$props.selectedAnnotationId,\n          windowId = _this$props.windowId;\n\n      if (selectedAnnotationId === annotation.id) {\n        deselectAnnotation(windowId, annotation.id);\n      } else {\n        selectAnnotation(windowId, annotation.id);\n      }\n    }\n    /** */\n\n  }, {\n    key: \"handleAnnotationHover\",\n    value: function handleAnnotationHover(annotation) {\n      var _this$props2 = this.props,\n          hoverAnnotation = _this$props2.hoverAnnotation,\n          windowId = _this$props2.windowId;\n      hoverAnnotation(windowId, [annotation.id]);\n    }\n    /** */\n\n  }, {\n    key: \"handleAnnotationBlur\",\n    value: function handleAnnotationBlur() {\n      var _this$props3 = this.props,\n          hoverAnnotation = _this$props3.hoverAnnotation,\n          windowId = _this$props3.windowId;\n      hoverAnnotation(windowId, []);\n    }\n    /**\n     * Returns the rendered component\n    */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props4 = this.props,\n          annotations = _this$props4.annotations,\n          classes = _this$props4.classes,\n          index = _this$props4.index,\n          label = _this$props4.label,\n          selectedAnnotationId = _this$props4.selectedAnnotationId,\n          t = _this$props4.t,\n          totalSize = _this$props4.totalSize,\n          listContainerComponent = _this$props4.listContainerComponent,\n          htmlSanitizationRuleSet = _this$props4.htmlSanitizationRuleSet,\n          hoveredAnnotationIds = _this$props4.hoveredAnnotationIds,\n          containerRef = _this$props4.containerRef;\n      if (annotations.length === 0) return /*#__PURE__*/React.createElement(React.Fragment, null);\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Typography, {\n        className: classes.sectionHeading,\n        variant: \"overline\"\n      }, t('annotationCanvasLabel', {\n        context: \"\".concat(index + 1, \"/\").concat(totalSize),\n        label: label\n      })), /*#__PURE__*/React.createElement(MenuList, {\n        autoFocusItem: true,\n        variant: \"selectedMenu\"\n      }, annotations.map(function (annotation) {\n        return /*#__PURE__*/React.createElement(ScrollTo, {\n          containerRef: containerRef,\n          key: \"\".concat(annotation.id, \"-scroll\"),\n          offsetTop: 96 // offset for the height of the form above\n          ,\n          scrollTo: selectedAnnotationId === annotation.id\n        }, /*#__PURE__*/React.createElement(MenuItem, {\n          button: true,\n          component: listContainerComponent,\n          className: clsx(classes.annotationListItem, _defineProperty({}, classes.hovered, hoveredAnnotationIds.includes(annotation.id))),\n          key: annotation.id,\n          annotationid: annotation.id,\n          selected: selectedAnnotationId === annotation.id,\n          onClick: function onClick(e) {\n            return _this2.handleClick(e, annotation);\n          },\n          onFocus: function onFocus() {\n            return _this2.handleAnnotationHover(annotation);\n          },\n          onBlur: _this2.handleAnnotationBlur,\n          onMouseEnter: function onMouseEnter() {\n            return _this2.handleAnnotationHover(annotation);\n          },\n          onMouseLeave: _this2.handleAnnotationBlur\n        }, /*#__PURE__*/React.createElement(ListItemText, {\n          primaryTypographyProps: {\n            variant: 'body2'\n          }\n        }, /*#__PURE__*/React.createElement(SanitizedHtml, {\n          ruleSet: htmlSanitizationRuleSet,\n          htmlString: annotation.content\n        }), /*#__PURE__*/React.createElement(\"div\", null, annotation.tags.map(function (tag) {\n          return /*#__PURE__*/React.createElement(Chip, {\n            size: \"small\",\n            variant: \"outlined\",\n            label: tag,\n            id: tag,\n            className: classes.chip,\n            key: tag.toString()\n          });\n        })))));\n      })));\n    }\n  }]);\n\n  return CanvasAnnotations;\n}(Component);\nCanvasAnnotations.defaultProps = {\n  annotations: [],\n  classes: {},\n  containerRef: undefined,\n  hoveredAnnotationIds: [],\n  htmlSanitizationRuleSet: 'iiif',\n  listContainerComponent: 'li',\n  selectedAnnotationId: undefined\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport CollapsibleSection from '../containers/CollapsibleSection';\nimport SanitizedHtml from '../containers/SanitizedHtml';\nimport { LabelValueMetadata } from './LabelValueMetadata';\nimport { PluginHook } from './PluginHook';\n/**\n * CanvasInfo\n */\n\nexport var CanvasInfo = /*#__PURE__*/function (_Component) {\n  _inherits(CanvasInfo, _Component);\n\n  var _super = _createSuper(CanvasInfo);\n\n  function CanvasInfo() {\n    _classCallCheck(this, CanvasInfo);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(CanvasInfo, [{\n    key: \"render\",\n\n    /**\n     * render\n     * @return\n     */\n    value: function render() {\n      var _this$props = this.props,\n          canvasDescription = _this$props.canvasDescription,\n          canvasLabel = _this$props.canvasLabel,\n          canvasMetadata = _this$props.canvasMetadata,\n          id = _this$props.id,\n          index = _this$props.index,\n          t = _this$props.t,\n          totalSize = _this$props.totalSize;\n      return /*#__PURE__*/React.createElement(CollapsibleSection, {\n        id: \"\".concat(id, \"-currentItem-\").concat(index),\n        label: t('currentItem', {\n          context: \"\".concat(index + 1, \"/\").concat(totalSize)\n        })\n      }, canvasLabel && /*#__PURE__*/React.createElement(Typography, {\n        \"aria-labelledby\": \"\".concat(id, \"-currentItem-\").concat(index, \" \").concat(id, \"-currentItem-\").concat(index, \"-heading\"),\n        id: \"\".concat(id, \"-currentItem-\").concat(index, \"-heading\"),\n        variant: \"h4\",\n        component: \"h5\"\n      }, canvasLabel), canvasDescription && /*#__PURE__*/React.createElement(Typography, {\n        variant: \"body1\"\n      }, /*#__PURE__*/React.createElement(SanitizedHtml, {\n        htmlString: canvasDescription,\n        ruleSet: \"iiif\"\n      })), canvasMetadata && canvasMetadata.length > 0 && /*#__PURE__*/React.createElement(LabelValueMetadata, {\n        labelValuePairs: canvasMetadata\n      }), /*#__PURE__*/React.createElement(PluginHook, this.props));\n    }\n  }]);\n\n  return CanvasInfo;\n}(Component);\nCanvasInfo.defaultProps = {\n  canvasDescription: null,\n  canvasLabel: null,\n  canvasMetadata: [],\n  index: 1,\n  t: function t(key) {\n    return key;\n  },\n  totalSize: 1\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { Component } from 'react';\nimport clsx from 'clsx';\nimport { v4 as uuid } from 'uuid';\nimport Input from '@material-ui/core/Input';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport Slider from '@material-ui/core/Slider';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport DragHandleIcon from '@material-ui/icons/DragHandleSharp';\nimport MoveToTopIcon from '@material-ui/icons/VerticalAlignTopSharp';\nimport VisibilityIcon from '@material-ui/icons/VisibilitySharp';\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOffSharp';\nimport OpacityIcon from '@material-ui/icons/OpacitySharp';\nimport Typography from '@material-ui/core/Typography';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\nimport MiradorMenuButton from '../containers/MiradorMenuButton';\nimport IIIFThumbnail from '../containers/IIIFThumbnail';\n/** */\n\nvar reorder = function reorder(list, startIndex, endIndex) {\n  var result = Array.from(list);\n\n  var _result$splice = result.splice(startIndex, 1),\n      _result$splice2 = _slicedToArray(_result$splice, 1),\n      removed = _result$splice2[0];\n\n  result.splice(endIndex, 0, removed);\n  return result;\n};\n/** */\n\n\nexport var CanvasLayers = /*#__PURE__*/function (_Component) {\n  _inherits(CanvasLayers, _Component);\n\n  var _super = _createSuper(CanvasLayers);\n\n  _createClass(CanvasLayers, null, [{\n    key: \"getUseableLabel\",\n\n    /** */\n    value: function getUseableLabel(resource, index) {\n      return resource && resource.getLabel && resource.getLabel().length > 0 ? resource.getLabel().getValue() : String(index + 1);\n    }\n    /** */\n\n  }]);\n\n  function CanvasLayers(props) {\n    var _this;\n\n    _classCallCheck(this, CanvasLayers);\n\n    _this = _super.call(this, props);\n    _this.droppableId = uuid();\n    _this.onDragEnd = _this.onDragEnd.bind(_assertThisInitialized(_this));\n    _this.handleOpacityChange = _this.handleOpacityChange.bind(_assertThisInitialized(_this));\n    _this.setLayerVisibility = _this.setLayerVisibility.bind(_assertThisInitialized(_this));\n    _this.moveToTop = _this.moveToTop.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /** */\n\n\n  _createClass(CanvasLayers, [{\n    key: \"handleOpacityChange\",\n    value: function handleOpacityChange(layerId, value) {\n      var _this$props = this.props,\n          canvasId = _this$props.canvasId,\n          updateLayers = _this$props.updateLayers,\n          windowId = _this$props.windowId;\n\n      var payload = _defineProperty({}, layerId, {\n        opacity: value / 100.0\n      });\n\n      updateLayers(windowId, canvasId, payload);\n    }\n    /** */\n\n  }, {\n    key: \"onDragEnd\",\n    value: function onDragEnd(result) {\n      var _this$props2 = this.props,\n          canvasId = _this$props2.canvasId,\n          layers = _this$props2.layers,\n          updateLayers = _this$props2.updateLayers,\n          windowId = _this$props2.windowId;\n      if (!result.destination) return;\n      if (result.destination.droppableId !== this.droppableId) return;\n      if (result.source.droppableId !== this.droppableId) return;\n      var sortedLayers = reorder(layers.map(function (l) {\n        return l.id;\n      }), result.source.index, result.destination.index);\n      var payload = layers.reduce(function (acc, layer) {\n        acc[layer.id] = {\n          index: sortedLayers.indexOf(layer.id)\n        };\n        return acc;\n      }, {});\n      updateLayers(windowId, canvasId, payload);\n    }\n    /** */\n\n  }, {\n    key: \"setLayerVisibility\",\n    value: function setLayerVisibility(layerId, value) {\n      var _this$props3 = this.props,\n          canvasId = _this$props3.canvasId,\n          updateLayers = _this$props3.updateLayers,\n          windowId = _this$props3.windowId;\n\n      var payload = _defineProperty({}, layerId, {\n        visibility: value\n      });\n\n      updateLayers(windowId, canvasId, payload);\n    }\n    /** */\n\n  }, {\n    key: \"moveToTop\",\n    value: function moveToTop(layerId) {\n      var _this$props4 = this.props,\n          canvasId = _this$props4.canvasId,\n          layers = _this$props4.layers,\n          updateLayers = _this$props4.updateLayers,\n          windowId = _this$props4.windowId;\n      var sortedLayers = reorder(layers.map(function (l) {\n        return l.id;\n      }), layers.findIndex(function (l) {\n        return l.id === layerId;\n      }), 0);\n      var payload = layers.reduce(function (acc, layer) {\n        acc[layer.id] = {\n          index: sortedLayers.indexOf(layer.id)\n        };\n        return acc;\n      }, {});\n      updateLayers(windowId, canvasId, payload);\n    }\n    /** @private */\n\n  }, {\n    key: \"renderLayer\",\n    value: function renderLayer(resource, index) {\n      var _this2 = this;\n\n      var _this$props5 = this.props,\n          classes = _this$props5.classes,\n          layerMetadata = _this$props5.layerMetadata,\n          t = _this$props5.t;\n      var _height$width = {\n        height: undefined,\n        width: 50\n      },\n          width = _height$width.width,\n          height = _height$width.height;\n\n      var layer = _objectSpread({\n        opacity: 1,\n        visibility: true\n      }, (layerMetadata || {})[resource.id]);\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          flex: 1\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          alignItems: 'flex-start',\n          display: 'flex'\n        }\n      }, /*#__PURE__*/React.createElement(IIIFThumbnail, {\n        maxHeight: height,\n        maxWidth: width,\n        resource: resource,\n        classes: {\n          image: classes.image,\n          root: classes.thumbnail\n        }\n      }), /*#__PURE__*/React.createElement(Typography, {\n        className: classes.label,\n        component: \"div\",\n        variant: \"body1\"\n      }, CanvasLayers.getUseableLabel(resource, index), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(MiradorMenuButton, {\n        \"aria-label\": t(layer.visibility ? 'layer_hide' : 'layer_show'),\n        edge: \"start\",\n        size: \"small\",\n        onClick: function onClick() {\n          _this2.setLayerVisibility(resource.id, !layer.visibility);\n        }\n      }, layer.visibility ? /*#__PURE__*/React.createElement(VisibilityIcon, null) : /*#__PURE__*/React.createElement(VisibilityOffIcon, null)), layer.index !== 0 && /*#__PURE__*/React.createElement(MiradorMenuButton, {\n        \"aria-label\": t('layer_moveToTop'),\n        size: \"small\",\n        onClick: function onClick() {\n          _this2.moveToTop(resource.id);\n        }\n      }, /*#__PURE__*/React.createElement(MoveToTopIcon, null))))), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          alignItems: 'center',\n          display: 'flex'\n        }\n      }, /*#__PURE__*/React.createElement(Tooltip, {\n        title: t('layer_opacity')\n      }, /*#__PURE__*/React.createElement(OpacityIcon, {\n        className: classes.opacityIcon,\n        color: layer.visibility ? 'inherit' : 'disabled',\n        fontSize: \"small\"\n      })), /*#__PURE__*/React.createElement(Input, {\n        classes: {\n          input: classes.opacityInput\n        },\n        disabled: !layer.visibility,\n        value: Math.round(layer.opacity * 100),\n        type: \"number\",\n        min: 0,\n        max: 100,\n        onChange: function onChange(e) {\n          return _this2.handleOpacityChange(resource.id, e.target.value);\n        },\n        endAdornment: /*#__PURE__*/React.createElement(InputAdornment, {\n          disableTypography: true,\n          position: \"end\"\n        }, /*#__PURE__*/React.createElement(Typography, {\n          variant: \"caption\"\n        }, \"%\")),\n        inputProps: {\n          'aria-label': t('layer_opacity')\n        }\n      }), /*#__PURE__*/React.createElement(Slider, {\n        className: classes.slider,\n        disabled: !layer.visibility,\n        value: layer.opacity * 100,\n        onChange: function onChange(e, value) {\n          return _this2.handleOpacityChange(resource.id, value);\n        }\n      })));\n    }\n    /** @private */\n\n  }, {\n    key: \"renderDraggableLayer\",\n    value: function renderDraggableLayer(resource, index) {\n      var _this3 = this;\n\n      var _this$props6 = this.props,\n          classes = _this$props6.classes,\n          t = _this$props6.t;\n      return /*#__PURE__*/React.createElement(Draggable, {\n        key: resource.id,\n        draggableId: resource.id,\n        index: index\n      }, function (provided, snapshot) {\n        return /*#__PURE__*/React.createElement(ListItem, Object.assign({\n          ref: provided.innerRef\n        }, provided.draggableProps, {\n          component: \"li\",\n          className: clsx(classes.listItem, _defineProperty({}, classes.dragging, snapshot.isDragging)),\n          disableGutters: true,\n          key: resource.id\n        }), /*#__PURE__*/React.createElement(\"div\", Object.assign({}, provided.dragHandleProps, {\n          className: classes.dragHandle\n        }), /*#__PURE__*/React.createElement(Tooltip, {\n          title: t('layer_move')\n        }, /*#__PURE__*/React.createElement(DragHandleIcon, null))), _this3.renderLayer(resource, index));\n      });\n    }\n    /** */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$props7 = this.props,\n          classes = _this$props7.classes,\n          index = _this$props7.index,\n          label = _this$props7.label,\n          layers = _this$props7.layers,\n          t = _this$props7.t,\n          totalSize = _this$props7.totalSize;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, totalSize > 1 && /*#__PURE__*/React.createElement(Typography, {\n        className: classes.sectionHeading,\n        variant: \"overline\"\n      }, t('annotationCanvasLabel', {\n        context: \"\".concat(index + 1, \"/\").concat(totalSize),\n        label: label\n      })), /*#__PURE__*/React.createElement(DragDropContext, {\n        onDragEnd: this.onDragEnd\n      }, /*#__PURE__*/React.createElement(Droppable, {\n        droppableId: this.droppableId\n      }, function (provided, snapshot) {\n        return /*#__PURE__*/React.createElement(List, Object.assign({\n          className: classes.list\n        }, provided.droppableProps, {\n          ref: provided.innerRef\n        }), layers && layers.map(function (r, i) {\n          return _this4.renderDraggableLayer(r, i);\n        }), provided.placeholder);\n      })));\n    }\n  }]);\n\n  return CanvasLayers;\n}(Component);\nCanvasLayers.defaultProps = {\n  classes: {},\n  layerMetadata: undefined\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport { Dialog, DialogTitle, ListItemIcon, ListItemText, MenuList, MenuItem, Typography, DialogContent } from '@material-ui/core';\nimport PaletteIcon from '@material-ui/icons/PaletteSharp';\n\n/**\n * a simple dialog providing the possibility to switch the theme\n */\nexport var ChangeThemeDialog = /*#__PURE__*/function (_Component) {\n  _inherits(ChangeThemeDialog, _Component);\n\n  var _super = _createSuper(ChangeThemeDialog);\n\n  _createClass(ChangeThemeDialog, null, [{\n    key: \"setInitialFocus\",\n\n    /**\n     * Set the initial focus when the dialog enters\n     * Find the selected item by using the current theme\n     * in a selector on the value attribute (which we need to set)\n    */\n    value: function setInitialFocus(dialogElement, selectedTheme) {\n      var selectedListItem = dialogElement.querySelectorAll(\"li[value=\\\"\".concat(selectedTheme, \"\\\"]\"));\n      if (!selectedListItem || selectedListItem.length === 0) return;\n      selectedListItem[0].focus();\n    }\n    /**\n    */\n\n  }]);\n\n  function ChangeThemeDialog(props) {\n    var _this;\n\n    _classCallCheck(this, ChangeThemeDialog);\n\n    _this = _super.call(this, props);\n    _this.selectedItemRef = /*#__PURE__*/React.createRef();\n    _this.handleThemeChange = _this.handleThemeChange.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /**\n   * Propagate theme palette type selection into the global state\n   */\n\n\n  _createClass(ChangeThemeDialog, [{\n    key: \"handleThemeChange\",\n    value: function handleThemeChange(theme) {\n      var _this$props = this.props,\n          setSelectedTheme = _this$props.setSelectedTheme,\n          handleClose = _this$props.handleClose;\n      setSelectedTheme(theme);\n      handleClose();\n    }\n    /** */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          classes = _this$props2.classes,\n          handleClose = _this$props2.handleClose,\n          open = _this$props2.open,\n          selectedTheme = _this$props2.selectedTheme,\n          t = _this$props2.t,\n          themeIds = _this$props2.themeIds;\n      return /*#__PURE__*/React.createElement(Dialog, {\n        onClose: handleClose,\n        onEntered: function onEntered(dialog) {\n          return ChangeThemeDialog.setInitialFocus(dialog, selectedTheme);\n        },\n        open: open\n      }, /*#__PURE__*/React.createElement(DialogTitle, {\n        id: \"change-the-dialog-title\",\n        disableTypography: true\n      }, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"h2\"\n      }, t('changeTheme'))), /*#__PURE__*/React.createElement(DialogContent, {\n        className: classes.dialogContent\n      }, /*#__PURE__*/React.createElement(MenuList, null, themeIds.map(function (value) {\n        return /*#__PURE__*/React.createElement(MenuItem, {\n          key: value,\n          className: classes.listitem,\n          onClick: function onClick() {\n            _this2.handleThemeChange(value);\n          },\n          selected: value === selectedTheme,\n          value: value\n        }, /*#__PURE__*/React.createElement(ListItemIcon, null, /*#__PURE__*/React.createElement(PaletteIcon, {\n          className: classes[value]\n        })), /*#__PURE__*/React.createElement(ListItemText, null, t(value)));\n      }))));\n    }\n  }]);\n\n  return ChangeThemeDialog;\n}(Component);\nChangeThemeDialog.defaultProps = {\n  open: false,\n  themeIds: []\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport KeyboardArrowDown from '@material-ui/icons/KeyboardArrowDownSharp';\nimport KeyboardArrowUp from '@material-ui/icons/KeyboardArrowUpSharp';\nimport MiradorMenuButton from '../containers/MiradorMenuButton';\n/**\n * CollapsableSection ~\n*/\n\nexport var CollapsibleSection = /*#__PURE__*/function (_Component) {\n  _inherits(CollapsibleSection, _Component);\n\n  var _super = _createSuper(CollapsibleSection);\n\n  /** */\n  function CollapsibleSection(props) {\n    var _this;\n\n    _classCallCheck(this, CollapsibleSection);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      open: true\n    };\n    _this.toggleSection = _this.toggleSection.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /** */\n\n\n  _createClass(CollapsibleSection, [{\n    key: \"toggleSection\",\n    value: function toggleSection() {\n      var open = this.state.open;\n      this.setState({\n        open: !open\n      });\n    }\n    /**\n     * Returns the rendered component\n    */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          children = _this$props.children,\n          classes = _this$props.classes,\n          id = _this$props.id,\n          label = _this$props.label,\n          t = _this$props.t;\n      var open = this.state.open;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.container\n      }, /*#__PURE__*/React.createElement(Typography, {\n        className: classes.heading,\n        id: id,\n        onClick: this.toggleSection,\n        variant: \"overline\",\n        component: \"h4\"\n      }, label), /*#__PURE__*/React.createElement(MiradorMenuButton, {\n        \"aria-label\": t(open ? 'collapseSection' : 'expandSection', {\n          section: label\n        }),\n        \"aria-expanded\": open,\n        className: classes.button,\n        onClick: this.toggleSection\n      }, open ? /*#__PURE__*/React.createElement(KeyboardArrowUp, null) : /*#__PURE__*/React.createElement(KeyboardArrowDown, null))), open && children);\n    }\n  }]);\n\n  return CollapsibleSection;\n}(Component);","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport { Button, Chip, Dialog, DialogActions, DialogTitle, Link, MenuList, MenuItem, Typography } from '@material-ui/core';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBackSharp';\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport asArray from '../lib/asArray';\nimport { LabelValueMetadata } from './LabelValueMetadata';\nimport CollapsibleSection from '../containers/CollapsibleSection';\nimport ScrollIndicatedDialogContent from '../containers/ScrollIndicatedDialogContent';\nimport ManifestInfo from '../containers/ManifestInfo';\n/**\n * a dialog providing the possibility to select the collection\n */\n\nexport var CollectionDialog = /*#__PURE__*/function (_Component) {\n  _inherits(CollectionDialog, _Component);\n\n  var _super = _createSuper(CollectionDialog);\n\n  _createClass(CollectionDialog, null, [{\n    key: \"getUseableLabel\",\n\n    /** */\n    value: function getUseableLabel(resource, index) {\n      return resource && resource.getLabel && resource.getLabel().length > 0 ? resource.getLabel().getValue() : String(index + 1);\n    }\n    /** */\n\n  }]);\n\n  function CollectionDialog(props) {\n    var _this;\n\n    _classCallCheck(this, CollectionDialog);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      filter: null\n    };\n    _this.hideDialog = _this.hideDialog.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /** */\n\n\n  _createClass(CollectionDialog, [{\n    key: \"setFilter\",\n    value: function setFilter(filter) {\n      this.setState({\n        filter: filter\n      });\n    }\n    /** */\n\n  }, {\n    key: \"hideDialog\",\n    value: function hideDialog() {\n      var _this$props = this.props,\n          hideCollectionDialog = _this$props.hideCollectionDialog,\n          windowId = _this$props.windowId;\n      hideCollectionDialog(windowId);\n    }\n    /** */\n\n  }, {\n    key: \"selectCollection\",\n    value: function selectCollection(c) {\n      var _this$props2 = this.props,\n          collectionPath = _this$props2.collectionPath,\n          manifestId = _this$props2.manifestId,\n          showCollectionDialog = _this$props2.showCollectionDialog,\n          windowId = _this$props2.windowId;\n      showCollectionDialog(c.id, [].concat(_toConsumableArray(collectionPath), [manifestId]), windowId);\n    }\n    /** */\n\n  }, {\n    key: \"goToPreviousCollection\",\n    value: function goToPreviousCollection() {\n      var _this$props3 = this.props,\n          collectionPath = _this$props3.collectionPath,\n          showCollectionDialog = _this$props3.showCollectionDialog,\n          windowId = _this$props3.windowId;\n      showCollectionDialog(collectionPath[collectionPath.length - 1], collectionPath.slice(0, -1), windowId);\n    }\n    /** */\n\n  }, {\n    key: \"selectManifest\",\n    value: function selectManifest(m) {\n      var _this$props4 = this.props,\n          addWindow = _this$props4.addWindow,\n          collectionPath = _this$props4.collectionPath,\n          manifestId = _this$props4.manifestId,\n          setWorkspaceAddVisibility = _this$props4.setWorkspaceAddVisibility,\n          updateWindow = _this$props4.updateWindow,\n          windowId = _this$props4.windowId;\n\n      if (windowId) {\n        updateWindow(windowId, {\n          canvasId: null,\n          collectionPath: [].concat(_toConsumableArray(collectionPath), [manifestId]),\n          manifestId: m.id\n        });\n      } else {\n        addWindow({\n          collectionPath: [].concat(_toConsumableArray(collectionPath), [manifestId]),\n          manifestId: m.id\n        });\n      }\n\n      this.hideDialog();\n      setWorkspaceAddVisibility(false);\n    }\n    /** */\n\n  }, {\n    key: \"dialogContainer\",\n    value: function dialogContainer() {\n      var _this$props5 = this.props,\n          containerId = _this$props5.containerId,\n          windowId = _this$props5.windowId;\n      return document.querySelector(\"#\".concat(containerId, \" #\").concat(windowId));\n    }\n    /** */\n\n  }, {\n    key: \"placeholder\",\n    value: function placeholder() {\n      var classes = this.props.classes;\n      return /*#__PURE__*/React.createElement(Dialog, {\n        className: classes.dialog,\n        onClose: this.hideDialog,\n        open: true,\n        container: this.dialogContainer(),\n        BackdropProps: this.backdropProps()\n      }, /*#__PURE__*/React.createElement(DialogTitle, {\n        id: \"select-collection\",\n        disableTypography: true\n      }, /*#__PURE__*/React.createElement(Skeleton, {\n        className: classes.placeholder,\n        variant: \"text\"\n      })), /*#__PURE__*/React.createElement(ScrollIndicatedDialogContent, null, /*#__PURE__*/React.createElement(Skeleton, {\n        className: classes.placeholder,\n        variant: \"text\"\n      }), /*#__PURE__*/React.createElement(Skeleton, {\n        className: classes.placeholder,\n        variant: \"text\"\n      })));\n    }\n    /** */\n\n  }, {\n    key: \"backdropProps\",\n    value: function backdropProps() {\n      var classes = this.props.classes;\n      return {\n        classes: {\n          root: classes.dialog\n        }\n      };\n    }\n    /** */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props6 = this.props,\n          classes = _this$props6.classes,\n          collection = _this$props6.collection,\n          error = _this$props6.error,\n          isMultipart = _this$props6.isMultipart,\n          manifest = _this$props6.manifest,\n          ready = _this$props6.ready,\n          t = _this$props6.t;\n      var filter = this.state.filter;\n      if (error) return null; // If this component is optimistically rendering ahead of the window its in\n      // force a re-render so that it is placed correctly. The right thing here is\n      // to maybe pass a ref.\n\n      if (!this.dialogContainer()) {\n        this.forceUpdate();\n        return /*#__PURE__*/React.createElement(React.Fragment, null);\n      }\n\n      if (!ready) return this.placeholder();\n      var rights = manifest && asArray(manifest.getProperty('rights') || manifest.getProperty('license'));\n      var requiredStatement = manifest && asArray(manifest.getRequiredStatement()).filter(function (l) {\n        return l.getValue();\n      }).map(function (labelValuePair) {\n        return {\n          label: null,\n          values: labelValuePair.getValues()\n        };\n      });\n      var collections = manifest.getCollections();\n      var currentFilter = filter || (collections.length > 0 ? 'collections' : 'manifests');\n      return /*#__PURE__*/React.createElement(Dialog, {\n        className: classes.dialog,\n        onClose: this.hideDialog,\n        container: this.dialogContainer(),\n        BackdropProps: this.backdropProps(),\n        open: true\n      }, /*#__PURE__*/React.createElement(DialogTitle, {\n        id: \"select-collection\",\n        disableTypography: true\n      }, /*#__PURE__*/React.createElement(Typography, {\n        component: \"div\",\n        variant: \"overline\"\n      }, t(isMultipart ? 'multipartCollection' : 'collection')), /*#__PURE__*/React.createElement(Typography, {\n        variant: \"h3\"\n      }, CollectionDialog.getUseableLabel(manifest))), /*#__PURE__*/React.createElement(ScrollIndicatedDialogContent, {\n        className: classes.dialogContent\n      }, collection && /*#__PURE__*/React.createElement(Button, {\n        startIcon: /*#__PURE__*/React.createElement(ArrowBackIcon, null),\n        onClick: function onClick() {\n          return _this2.goToPreviousCollection();\n        }\n      }, CollectionDialog.getUseableLabel(collection)), /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.collectionMetadata\n      }, /*#__PURE__*/React.createElement(ManifestInfo, {\n        manifestId: manifest.id\n      }), /*#__PURE__*/React.createElement(CollapsibleSection, {\n        id: \"select-collection-rights\",\n        label: t('attributionTitle')\n      }, requiredStatement && /*#__PURE__*/React.createElement(LabelValueMetadata, {\n        labelValuePairs: requiredStatement,\n        defaultLabel: t('attribution')\n      }), rights && rights.length > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"subtitle2\",\n        component: \"dt\"\n      }, t('rights')), rights.map(function (v) {\n        return /*#__PURE__*/React.createElement(Typography, {\n          variant: \"body1\",\n          component: \"dd\",\n          key: v\n        }, /*#__PURE__*/React.createElement(Link, {\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          href: v\n        }, v));\n      })))), /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.collectionFilter\n      }, manifest.getTotalCollections() > 0 && /*#__PURE__*/React.createElement(Chip, {\n        clickable: true,\n        color: currentFilter === 'collections' ? 'primary' : 'default',\n        onClick: function onClick() {\n          return _this2.setFilter('collections');\n        },\n        label: t('totalCollections', {\n          count: manifest.getTotalCollections()\n        })\n      }), manifest.getTotalManifests() > 0 && /*#__PURE__*/React.createElement(Chip, {\n        clickable: true,\n        color: currentFilter === 'manifests' ? 'primary' : 'default',\n        onClick: function onClick() {\n          return _this2.setFilter('manifests');\n        },\n        label: t('totalManifests', {\n          count: manifest.getTotalManifests()\n        })\n      })), currentFilter === 'collections' && /*#__PURE__*/React.createElement(MenuList, null, collections.map(function (c) {\n        return /*#__PURE__*/React.createElement(MenuItem, {\n          key: c.id,\n          onClick: function onClick() {\n            _this2.selectCollection(c);\n          },\n          className: classes.collectionItem\n        }, CollectionDialog.getUseableLabel(c));\n      })), currentFilter === 'manifests' && /*#__PURE__*/React.createElement(MenuList, null, manifest.getManifests().map(function (m) {\n        return /*#__PURE__*/React.createElement(MenuItem, {\n          key: m.id,\n          onClick: function onClick() {\n            _this2.selectManifest(m);\n          },\n          className: classes.collectionItem\n        }, CollectionDialog.getUseableLabel(m));\n      }))), /*#__PURE__*/React.createElement(DialogActions, null, /*#__PURE__*/React.createElement(Button, {\n        onClick: this.hideDialog\n      }, t('close'))));\n    }\n  }]);\n\n  return CollectionDialog;\n}(Component);\nCollectionDialog.defaultProps = {\n  collection: null,\n  collectionPath: [],\n  containerId: null,\n  error: null,\n  isMultipart: false,\n  ready: false,\n  windowId: null\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport ViewListIcon from '@material-ui/icons/ViewListSharp';\nimport CollapsibleSection from '../containers/CollapsibleSection';\n/**\n * ManifestInfo\n */\n\nexport var CollectionInfo = /*#__PURE__*/function (_Component) {\n  _inherits(CollectionInfo, _Component);\n\n  var _super = _createSuper(CollectionInfo);\n\n  /** */\n  function CollectionInfo(props) {\n    var _this;\n\n    _classCallCheck(this, CollectionInfo);\n\n    _this = _super.call(this, props);\n    _this.openCollectionDialog = _this.openCollectionDialog.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /** */\n\n\n  _createClass(CollectionInfo, [{\n    key: \"openCollectionDialog\",\n    value: function openCollectionDialog() {\n      var _this$props = this.props,\n          collectionPath = _this$props.collectionPath,\n          showCollectionDialog = _this$props.showCollectionDialog,\n          windowId = _this$props.windowId;\n      var manifestId = collectionPath[collectionPath.length - 1];\n      showCollectionDialog(manifestId, collectionPath.slice(0, -1), windowId);\n    }\n    /**\n     * render\n     * @return\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          collectionLabel = _this$props2.collectionLabel,\n          collectionPath = _this$props2.collectionPath,\n          id = _this$props2.id,\n          t = _this$props2.t;\n      if (collectionPath.length === 0) return null;\n      return /*#__PURE__*/React.createElement(CollapsibleSection, {\n        id: \"\".concat(id, \"-collection\"),\n        label: t('collection')\n      }, collectionLabel && /*#__PURE__*/React.createElement(Typography, {\n        \"aria-labelledby\": \"\".concat(id, \"-resource \").concat(id, \"-resource-heading\"),\n        id: \"\".concat(id, \"-resource-heading\"),\n        variant: \"h4\"\n      }, collectionLabel), /*#__PURE__*/React.createElement(Button, {\n        color: \"primary\",\n        onClick: this.openCollectionDialog,\n        startIcon: /*#__PURE__*/React.createElement(ViewListIcon, null)\n      }, t('showCollection')));\n    }\n  }]);\n\n  return CollectionInfo;\n}(Component);\nCollectionInfo.defaultProps = {\n  collectionLabel: null,\n  collectionPath: [],\n  t: function t(key) {\n    return key;\n  },\n  windowId: null\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Slide from '@material-ui/core/Slide';\nimport ArrowLeftIcon from '@material-ui/icons/ArrowLeftSharp';\nimport ArrowRightIcon from '@material-ui/icons/ArrowRightSharp';\nimport CompanionWindowFactory from '../containers/CompanionWindowFactory';\nimport MiradorMenuButton from '../containers/MiradorMenuButton';\nimport ns from '../config/css-ns';\n/** */\n\nexport var CompanionArea = /*#__PURE__*/function (_Component) {\n  _inherits(CompanionArea, _Component);\n\n  var _super = _createSuper(CompanionArea);\n\n  function CompanionArea() {\n    _classCallCheck(this, CompanionArea);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(CompanionArea, [{\n    key: \"areaLayoutClass\",\n\n    /** */\n    value: function areaLayoutClass() {\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          position = _this$props.position;\n      return position === 'bottom' || position === 'far-bottom' ? classes.horizontal : null;\n    }\n    /** */\n\n  }, {\n    key: \"collapseIcon\",\n    value: function collapseIcon() {\n      var _this$props2 = this.props,\n          companionAreaOpen = _this$props2.companionAreaOpen,\n          direction = _this$props2.direction;\n\n      if (direction === 'rtl') {\n        if (companionAreaOpen) return /*#__PURE__*/React.createElement(ArrowRightIcon, null);\n        return /*#__PURE__*/React.createElement(ArrowLeftIcon, null);\n      }\n\n      if (companionAreaOpen) return /*#__PURE__*/React.createElement(ArrowLeftIcon, null);\n      return /*#__PURE__*/React.createElement(ArrowRightIcon, null);\n    }\n    /** @private */\n\n  }, {\n    key: \"slideDirection\",\n    value: function slideDirection() {\n      var _this$props3 = this.props,\n          direction = _this$props3.direction,\n          position = _this$props3.position;\n      var defaultPosition = direction === 'rtl' ? 'left' : 'right';\n      var oppositePosition = direction === 'rtl' ? 'right' : 'left';\n\n      switch (position) {\n        case 'right':\n        case 'far-right':\n          return oppositePosition;\n\n        case 'bottom':\n        case 'far-bottom':\n          return 'up';\n\n        default:\n          return defaultPosition;\n      }\n    }\n    /** */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          classes = _this$props4.classes,\n          companionWindowIds = _this$props4.companionWindowIds,\n          companionAreaOpen = _this$props4.companionAreaOpen,\n          setCompanionAreaOpen = _this$props4.setCompanionAreaOpen,\n          position = _this$props4.position,\n          sideBarOpen = _this$props4.sideBarOpen,\n          t = _this$props4.t,\n          windowId = _this$props4.windowId;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: [classes.root, this.areaLayoutClass(), ns(\"companion-area-\".concat(position))].join(' ')\n      }, /*#__PURE__*/React.createElement(Slide, {\n        \"in\": companionAreaOpen,\n        direction: this.slideDirection()\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: [ns('companion-windows'), companionWindowIds.length > 0 && classes[position], this.areaLayoutClass()].join(' '),\n        style: {\n          display: companionAreaOpen ? 'flex' : 'none'\n        }\n      }, companionWindowIds.map(function (id) {\n        return /*#__PURE__*/React.createElement(CompanionWindowFactory, {\n          id: id,\n          key: id,\n          windowId: windowId\n        });\n      }))), setCompanionAreaOpen && position === 'left' && sideBarOpen && companionWindowIds.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.toggle\n      }, /*#__PURE__*/React.createElement(MiradorMenuButton, {\n        \"aria-expanded\": companionAreaOpen,\n        \"aria-label\": companionAreaOpen ? t('collapseSidePanel') : t('expandSidePanel'),\n        className: classes.toggleButton,\n        key: companionAreaOpen ? 'collapse' : 'expand',\n        onClick: function onClick() {\n          setCompanionAreaOpen(windowId, !companionAreaOpen);\n        },\n        TooltipProps: {\n          placement: 'right'\n        }\n      }, this.collapseIcon())));\n    }\n  }]);\n\n  return CompanionArea;\n}(Component);\nCompanionArea.defaultProps = {\n  classes: {},\n  setCompanionAreaOpen: function setCompanionAreaOpen() {},\n  sideBarOpen: false\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport CloseIcon from '@material-ui/icons/CloseSharp';\nimport OpenInNewIcon from '@material-ui/icons/OpenInNewSharp';\nimport MoveIcon from '@material-ui/icons/DragIndicatorSharp';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { Rnd } from 'react-rnd';\nimport MiradorMenuButton from '../containers/MiradorMenuButton';\nimport ns from '../config/css-ns';\n/**\n * CompanionWindow\n */\n\nexport var CompanionWindow = /*#__PURE__*/function (_Component) {\n  _inherits(CompanionWindow, _Component);\n\n  var _super = _createSuper(CompanionWindow);\n\n  function CompanionWindow() {\n    _classCallCheck(this, CompanionWindow);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(CompanionWindow, [{\n    key: \"openInNewStyle\",\n\n    /** */\n    value: function openInNewStyle() {\n      var direction = this.props.direction;\n      if (direction === 'rtl') return {\n        transform: 'scale(-1, 1)'\n      };\n      return {};\n    }\n    /** */\n\n  }, {\n    key: \"resizeHandles\",\n    value: function resizeHandles() {\n      var _this$props = this.props,\n          direction = _this$props.direction,\n          position = _this$props.position;\n      var positions = {\n        ltr: {\n          \"default\": 'left',\n          opposite: 'right'\n        },\n        rtl: {\n          \"default\": 'right',\n          opposite: 'left'\n        }\n      };\n      var base = {\n        bottom: false,\n        bottomLeft: false,\n        bottomRight: false,\n        left: false,\n        right: false,\n        top: false,\n        topLeft: false,\n        topRight: false\n      };\n\n      if (position === 'right' || position === 'far-right') {\n        return _objectSpread(_objectSpread({}, base), {}, _defineProperty({}, positions[direction][\"default\"], true));\n      }\n\n      if (position === 'left') {\n        return _objectSpread(_objectSpread({}, base), {}, _defineProperty({}, positions[direction].opposite, true));\n      }\n\n      if (position === 'bottom' || position === 'far-bottom') {\n        return _objectSpread(_objectSpread({}, base), {}, {\n          top: true\n        });\n      }\n\n      return base;\n    }\n    /**\n     * render\n     * @return\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          ariaLabel = _this$props2.ariaLabel,\n          classes = _this$props2.classes,\n          paperClassName = _this$props2.paperClassName,\n          onCloseClick = _this$props2.onCloseClick,\n          updateCompanionWindow = _this$props2.updateCompanionWindow,\n          isDisplayed = _this$props2.isDisplayed,\n          position = _this$props2.position,\n          t = _this$props2.t,\n          title = _this$props2.title,\n          children = _this$props2.children,\n          titleControls = _this$props2.titleControls,\n          size = _this$props2.size,\n          defaultSidebarPanelWidth = _this$props2.defaultSidebarPanelWidth,\n          defaultSidebarPanelHeight = _this$props2.defaultSidebarPanelHeight;\n      var isBottom = position === 'bottom' || position === 'far-bottom';\n      var childrenWithAdditionalProps = React.Children.map(children, function (child) {\n        if (!child) return null;\n        return /*#__PURE__*/React.cloneElement(child, {\n          parentactions: {\n            closeCompanionWindow: onCloseClick\n          }\n        });\n      });\n      return /*#__PURE__*/React.createElement(Paper, {\n        className: [classes.root, position === 'bottom' ? classes.horizontal : classes.vertical, classes[\"companionWindow-\".concat(position)], ns(\"companion-window-\".concat(position)), paperClassName].join(' '),\n        style: {\n          display: isDisplayed ? null : 'none',\n          order: position === 'left' ? -1 : null\n        },\n        square: true,\n        component: \"aside\",\n        \"aria-label\": ariaLabel || title\n      }, /*#__PURE__*/React.createElement(Rnd, {\n        className: [classes.rnd],\n        style: {\n          display: 'flex',\n          position: 'relative'\n        },\n        \"default\": {\n          height: isBottom ? defaultSidebarPanelHeight : '100%',\n          width: isBottom ? 'auto' : defaultSidebarPanelWidth\n        },\n        disableDragging: true,\n        enableResizing: this.resizeHandles(),\n        minHeight: 50,\n        minWidth: position === 'left' ? 235 : 100\n      }, /*#__PURE__*/React.createElement(Toolbar, {\n        className: [classes.toolbar, classes.companionWindowHeader, size.width < 370 ? classes.small : null, ns('companion-window-header')].join(' '),\n        disableGutters: true\n      }, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"h3\",\n        className: classes.windowSideBarTitle\n      }, title), position === 'left' ? updateCompanionWindow && /*#__PURE__*/React.createElement(MiradorMenuButton, {\n        \"aria-label\": t('openInCompanionWindow'),\n        onClick: function onClick() {\n          updateCompanionWindow({\n            position: 'right'\n          });\n        }\n      }, /*#__PURE__*/React.createElement(OpenInNewIcon, {\n        style: this.openInNewStyle()\n      })) : /*#__PURE__*/React.createElement(React.Fragment, null, updateCompanionWindow && /*#__PURE__*/React.createElement(MiradorMenuButton, {\n        \"aria-label\": position === 'bottom' ? t('moveCompanionWindowToRight') : t('moveCompanionWindowToBottom'),\n        className: classes.positionButton,\n        onClick: function onClick() {\n          updateCompanionWindow({\n            position: position === 'bottom' ? 'right' : 'bottom'\n          });\n        }\n      }, /*#__PURE__*/React.createElement(MoveIcon, null)), /*#__PURE__*/React.createElement(MiradorMenuButton, {\n        \"aria-label\": t('closeCompanionWindow'),\n        className: classes.closeButton,\n        onClick: onCloseClick\n      }, /*#__PURE__*/React.createElement(CloseIcon, null))), titleControls && /*#__PURE__*/React.createElement(\"div\", {\n        className: [classes.titleControls, isBottom ? classes.companionWindowTitleControlsBottom : classes.companionWindowTitleControls, ns('companion-window-title-controls')].join(' ')\n      }, titleControls)), /*#__PURE__*/React.createElement(Paper, {\n        className: [classes.content, ns('scrollto-scrollable')].join(' '),\n        elevation: 0\n      }, childrenWithAdditionalProps)));\n    }\n  }]);\n\n  return CompanionWindow;\n}(Component);\nCompanionWindow.defaultProps = {\n  ariaLabel: undefined,\n  children: undefined,\n  defaultSidebarPanelHeight: 201,\n  defaultSidebarPanelWidth: 235,\n  isDisplayed: false,\n  onCloseClick: function onCloseClick() {},\n  paperClassName: '',\n  position: null,\n  size: {},\n  t: function t(key) {\n    return key;\n  },\n  title: null,\n  titleControls: null,\n  updateCompanionWindow: undefined\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport CompanionWindowRegistry from '../lib/CompanionWindowRegistry';\nimport CompanionWindow from '../containers/CompanionWindow';\nimport ErrorContent from '../containers/ErrorContent';\n/**\n * Render a companion window using the appropriate component for the content\n */\n\nexport var CompanionWindowFactory = /*#__PURE__*/function (_Component) {\n  _inherits(CompanionWindowFactory, _Component);\n\n  var _super = _createSuper(CompanionWindowFactory);\n\n  /** */\n  function CompanionWindowFactory(props) {\n    var _this;\n\n    _classCallCheck(this, CompanionWindowFactory);\n\n    _this = _super.call(this, props);\n    _this.state = {};\n    return _this;\n  }\n  /** */\n\n\n  _createClass(CompanionWindowFactory, [{\n    key: \"componentDidUpdate\",\n\n    /**\n     * Clear the error state if the internal content changes; this is a rare\n     * case, only when we reuse an existing companionWindow instance for\n     * the left-anchored companion area (anti-pattern?)\n     */\n    value: function componentDidUpdate(prevProps) {\n      var content = this.props.content; // Typical usage (don't forget to compare props):\n\n      if (content !== prevProps.content) {\n        this.setState({\n          // eslint-disable-line react/no-did-update-set-state\n          error: null,\n          hasError: false\n        });\n      }\n    }\n    /** */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          content = _this$props.content,\n          windowId = _this$props.windowId,\n          id = _this$props.id,\n          t = _this$props.t;\n      var _this$state = this.state,\n          error = _this$state.error,\n          hasError = _this$state.hasError;\n\n      if (hasError) {\n        return /*#__PURE__*/React.createElement(CompanionWindow, {\n          title: t('error'),\n          windowId: windowId,\n          id: id\n        }, /*#__PURE__*/React.createElement(ErrorContent, {\n          error: error,\n          windowId: windowId,\n          companionWindowId: id\n        }));\n      }\n\n      var type = CompanionWindowRegistry[content];\n      if (!type) return /*#__PURE__*/React.createElement(React.Fragment, null);\n      return /*#__PURE__*/React.createElement(type, {\n        id: id,\n        windowId: windowId\n      });\n    }\n  }], [{\n    key: \"getDerivedStateFromError\",\n    value: function getDerivedStateFromError(error) {\n      // Update state so the next render will show the fallback UI.\n      return {\n        error: error,\n        hasError: true\n      };\n    }\n  }]);\n\n  return CompanionWindowFactory;\n}(Component);\nCompanionWindowFactory.defaultProps = {\n  content: null,\n  t: function t(key) {\n    return key;\n  }\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport CompanionWindow from '../containers/CompanionWindow';\n/**\n * a custom panel that can be used for anything\n */\n\nexport var CustomPanel = /*#__PURE__*/function (_Component) {\n  _inherits(CustomPanel, _Component);\n\n  var _super = _createSuper(CustomPanel);\n\n  function CustomPanel() {\n    _classCallCheck(this, CustomPanel);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(CustomPanel, [{\n    key: \"render\",\n\n    /**\n     * render\n     */\n    value: function render() {\n      var _this$props = this.props,\n          id = _this$props.id,\n          children = _this$props.children,\n          t = _this$props.t,\n          title = _this$props.title,\n          windowId = _this$props.windowId;\n      return /*#__PURE__*/React.createElement(CompanionWindow, {\n        title: t(title),\n        id: id,\n        windowId: windowId\n      }, children);\n    }\n  }]);\n\n  return CustomPanel;\n}(Component);\nCustomPanel.defaultProps = {\n  children: null\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport Typography from '@material-ui/core/Typography';\nimport Alert from '@material-ui/lab/Alert';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { PluginHook } from './PluginHook';\n/** */\n\nexport var ErrorContent = /*#__PURE__*/function (_Component) {\n  _inherits(ErrorContent, _Component);\n\n  var _super = _createSuper(ErrorContent);\n\n  function ErrorContent() {\n    _classCallCheck(this, ErrorContent);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(ErrorContent, [{\n    key: \"render\",\n\n    /** */\n    value: function render() {\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          error = _this$props.error,\n          metadata = _this$props.metadata,\n          showJsError = _this$props.showJsError,\n          t = _this$props.t;\n      if (!showJsError) return null;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Alert, {\n        elevation: 6,\n        variant: \"filled\",\n        severity: \"error\"\n      }, t('errorDialogTitle')), showJsError && /*#__PURE__*/React.createElement(Accordion, {\n        square: true,\n        className: classes.alert\n      }, /*#__PURE__*/React.createElement(AccordionSummary, {\n        expandIcon: /*#__PURE__*/React.createElement(ExpandMoreIcon, null)\n      }, /*#__PURE__*/React.createElement(Typography, null, t('jsError', {\n        message: error.message,\n        name: error.name\n      }))), /*#__PURE__*/React.createElement(AccordionDetails, {\n        className: classes.details\n      }, /*#__PURE__*/React.createElement(\"pre\", null, t('jsStack', {\n        stack: error.stack\n      })), metadata && /*#__PURE__*/React.createElement(\"pre\", null, JSON.stringify(metadata, null, 2)))), /*#__PURE__*/React.createElement(PluginHook, this.props));\n    }\n  }]);\n\n  return ErrorContent;\n}(Component);\nErrorContent.defaultProps = {\n  metadata: null,\n  showJsError: true,\n  t: function t(key) {\n    return key;\n  }\n};","import _isUndefined from \"lodash/isUndefined\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { DialogActions, DialogContentText, Typography } from '@material-ui/core';\nimport Button from '@material-ui/core/Button';\n\n/**\n */\nexport var ErrorDialog = /*#__PURE__*/function (_Component) {\n  _inherits(ErrorDialog, _Component);\n\n  var _super = _createSuper(ErrorDialog);\n\n  function ErrorDialog() {\n    _classCallCheck(this, ErrorDialog);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(ErrorDialog, [{\n    key: \"render\",\n\n    /**\n     * render\n     * @return\n     */\n    value: function render() {\n      var _this$props = this.props,\n          error = _this$props.error,\n          removeError = _this$props.removeError,\n          t = _this$props.t;\n      var hasError = !_isUndefined(error);\n      return error ? /*#__PURE__*/React.createElement(Dialog, {\n        \"aria-labelledby\": \"error-dialog-title\",\n        id: \"error-dialog\",\n        onClose: function onClose() {\n          return removeError(error.id);\n        },\n        open: hasError\n      }, /*#__PURE__*/React.createElement(DialogTitle, {\n        id: \"error-dialog-title\",\n        disableTypography: true\n      }, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"h2\"\n      }, t('errorDialogTitle'))), /*#__PURE__*/React.createElement(DialogContent, {\n        disableTypography: true\n      }, /*#__PURE__*/React.createElement(DialogContentText, {\n        variant: \"body2\",\n        noWrap: true,\n        color: \"inherit\"\n      }, \"\".concat(error.message)), /*#__PURE__*/React.createElement(DialogActions, null, /*#__PURE__*/React.createElement(Button, {\n        onClick: function onClick() {\n          return removeError(error.id);\n        },\n        variant: \"contained\"\n      }, t('errorDialogConfirm'))))) : null;\n    }\n  }]);\n\n  return ErrorDialog;\n}(Component);\nErrorDialog.defaultProps = {\n  error: null,\n  removeError: function removeError() {},\n  t: function t(key) {\n    return key;\n  }\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport FullscreenIcon from '@material-ui/icons/FullscreenSharp';\nimport FullscreenExitIcon from '@material-ui/icons/FullscreenExitSharp';\nimport MiradorMenuButton from '../containers/MiradorMenuButton';\n/**\n */\n\nexport var FullScreenButton = /*#__PURE__*/function (_Component) {\n  _inherits(FullScreenButton, _Component);\n\n  var _super = _createSuper(FullScreenButton);\n\n  function FullScreenButton() {\n    _classCallCheck(this, FullScreenButton);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(FullScreenButton, [{\n    key: \"render\",\n\n    /**\n     * render\n     * @return\n     */\n    value: function render() {\n      var _this$props = this.props,\n          className = _this$props.className,\n          isFullscreenEnabled = _this$props.isFullscreenEnabled,\n          setWorkspaceFullscreen = _this$props.setWorkspaceFullscreen,\n          t = _this$props.t;\n      return /*#__PURE__*/React.createElement(MiradorMenuButton, {\n        className: className,\n        \"aria-label\": isFullscreenEnabled ? t('exitFullScreen') : t('workspaceFullScreen'),\n        onClick: function onClick() {\n          return setWorkspaceFullscreen(!isFullscreenEnabled);\n        }\n      }, isFullscreenEnabled ? /*#__PURE__*/React.createElement(FullscreenExitIcon, null) : /*#__PURE__*/React.createElement(FullscreenIcon, null));\n    }\n  }]);\n\n  return FullScreenButton;\n}(Component);\nFullScreenButton.defaultProps = {\n  className: undefined,\n  isFullscreenEnabled: false,\n  t: function t(key) {\n    return key;\n  }\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport GalleryViewThumbnail from '../containers/GalleryViewThumbnail';\n/**\n * Renders a GalleryView overview of the manifest.\n */\n\nexport var GalleryView = /*#__PURE__*/function (_Component) {\n  _inherits(GalleryView, _Component);\n\n  var _super = _createSuper(GalleryView);\n\n  function GalleryView() {\n    _classCallCheck(this, GalleryView);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(GalleryView, [{\n    key: \"render\",\n\n    /**\n     * Renders things\n     */\n    value: function render() {\n      var _this$props = this.props,\n          canvases = _this$props.canvases,\n          classes = _this$props.classes,\n          viewingDirection = _this$props.viewingDirection,\n          windowId = _this$props.windowId;\n      var htmlDir = viewingDirection === 'right-to-left' ? 'rtl' : 'ltr';\n      return /*#__PURE__*/React.createElement(Paper, {\n        component: \"section\",\n        dir: htmlDir,\n        square: true,\n        elevation: 0,\n        className: classes.galleryContainer,\n        id: \"\".concat(windowId, \"-gallery\")\n      }, canvases.map(function (canvas) {\n        return /*#__PURE__*/React.createElement(GalleryViewThumbnail, {\n          key: canvas.id,\n          windowId: windowId,\n          canvas: canvas\n        });\n      }));\n    }\n  }]);\n\n  return GalleryView;\n}(Component);\nGalleryView.defaultProps = {\n  classes: {},\n  viewingDirection: ''\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Chip from '@material-ui/core/Chip';\nimport AnnotationIcon from '@material-ui/icons/CommentSharp';\nimport SearchIcon from '@material-ui/icons/SearchSharp';\nimport classNames from 'classnames';\nimport 'intersection-observer'; // polyfill needed for Safari\n\nimport IntersectionObserver from '@researchgate/react-intersection-observer';\nimport MiradorCanvas from '../lib/MiradorCanvas';\nimport IIIFThumbnail from '../containers/IIIFThumbnail';\n/**\n * Represents a WindowViewer in the mirador workspace. Responsible for mounting\n * OSD and Navigation\n */\n\nexport var GalleryViewThumbnail = /*#__PURE__*/function (_Component) {\n  _inherits(GalleryViewThumbnail, _Component);\n\n  var _super = _createSuper(GalleryViewThumbnail);\n\n  /** */\n  function GalleryViewThumbnail(props) {\n    var _this;\n\n    _classCallCheck(this, GalleryViewThumbnail);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      requestedAnnotations: false\n    };\n    _this.handleSelect = _this.handleSelect.bind(_assertThisInitialized(_this));\n    _this.handleKey = _this.handleKey.bind(_assertThisInitialized(_this));\n    _this.handleIntersection = _this.handleIntersection.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /** @private */\n\n\n  _createClass(GalleryViewThumbnail, [{\n    key: \"handleSelect\",\n    value: function handleSelect() {\n      var _this$props = this.props,\n          canvas = _this$props.canvas,\n          selected = _this$props.selected,\n          setCanvas = _this$props.setCanvas,\n          focusOnCanvas = _this$props.focusOnCanvas;\n\n      if (selected) {\n        focusOnCanvas();\n      } else {\n        setCanvas(canvas.id);\n      }\n    }\n    /** @private */\n\n  }, {\n    key: \"handleKey\",\n    value: function handleKey(event) {\n      var _this$props2 = this.props,\n          canvas = _this$props2.canvas,\n          setCanvas = _this$props2.setCanvas,\n          focusOnCanvas = _this$props2.focusOnCanvas;\n      this.keys = {\n        enter: 'Enter',\n        space: ' '\n      };\n      this.chars = {\n        enter: 13,\n        space: 32\n      };\n      var enterOrSpace = event.key === this.keys.enter || event.which === this.chars.enter || event.key === this.keys.space || event.which === this.chars.space;\n\n      if (enterOrSpace) {\n        focusOnCanvas();\n      } else {\n        setCanvas(canvas.id);\n      }\n    }\n    /** */\n\n  }, {\n    key: \"handleIntersection\",\n    value: function handleIntersection(_ref) {\n      var isIntersecting = _ref.isIntersecting;\n      var _this$props3 = this.props,\n          annotationsCount = _this$props3.annotationsCount,\n          requestCanvasAnnotations = _this$props3.requestCanvasAnnotations;\n      var requestedAnnotations = this.state.requestedAnnotations;\n      if (!isIntersecting || annotationsCount === undefined || annotationsCount > 0 || requestedAnnotations) return;\n      this.setState({\n        requestedAnnotations: true\n      });\n      requestCanvasAnnotations();\n    }\n    /**\n     * Renders things\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          annotationsCount = _this$props4.annotationsCount,\n          searchAnnotationsCount = _this$props4.searchAnnotationsCount,\n          canvas = _this$props4.canvas,\n          classes = _this$props4.classes,\n          config = _this$props4.config,\n          selected = _this$props4.selected;\n      var miradorCanvas = new MiradorCanvas(canvas);\n      return /*#__PURE__*/React.createElement(IntersectionObserver, {\n        onChange: this.handleIntersection\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        key: canvas.index,\n        className: classNames(classes.galleryViewItem, selected ? classes.selected : '', searchAnnotationsCount > 0 ? classes.hasAnnotations : ''),\n        onClick: this.handleSelect,\n        onKeyUp: this.handleKey,\n        role: \"button\",\n        tabIndex: 0\n      }, /*#__PURE__*/React.createElement(IIIFThumbnail, {\n        resource: canvas,\n        labelled: true,\n        variant: \"outside\",\n        maxWidth: config.width,\n        maxHeight: config.height,\n        style: {\n          margin: '0 auto',\n          maxWidth: \"\".concat(Math.ceil(config.height * miradorCanvas.aspectRatio), \"px\")\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.chips\n      }, searchAnnotationsCount > 0 && /*#__PURE__*/React.createElement(Chip, {\n        avatar: /*#__PURE__*/React.createElement(Avatar, {\n          className: classes.avatar,\n          classes: {\n            circle: classes.avatarIcon\n          }\n        }, /*#__PURE__*/React.createElement(SearchIcon, {\n          fontSize: \"small\"\n        })),\n        label: searchAnnotationsCount,\n        className: classNames(classes.searchChip),\n        size: \"small\"\n      }), (annotationsCount || 0) > 0 && /*#__PURE__*/React.createElement(Chip, {\n        avatar: /*#__PURE__*/React.createElement(Avatar, {\n          className: classes.avatar,\n          classes: {\n            circle: classes.avatarIcon\n          }\n        }, /*#__PURE__*/React.createElement(AnnotationIcon, {\n          className: classes.annotationIcon\n        })),\n        label: annotationsCount,\n        className: classNames(classes.annotationsChip),\n        size: \"small\"\n      })))));\n    }\n  }]);\n\n  return GalleryViewThumbnail;\n}(Component);\nGalleryViewThumbnail.defaultProps = {\n  annotationsCount: undefined,\n  config: {\n    height: 100,\n    width: null\n  },\n  requestCanvasAnnotations: function requestCanvasAnnotations() {},\n  searchAnnotationsCount: 0,\n  selected: false\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport IComCom from 'icomcom-react';\n/**\n * Opens a new window for click\n */\n\nexport var AccessTokenSender = /*#__PURE__*/function (_Component) {\n  _inherits(AccessTokenSender, _Component);\n\n  var _super = _createSuper(AccessTokenSender);\n\n  /** */\n  function AccessTokenSender(props) {\n    var _this;\n\n    _classCallCheck(this, AccessTokenSender);\n\n    _this = _super.call(this, props);\n    _this.onReceiveAccessTokenMessage = _this.onReceiveAccessTokenMessage.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /** @private */\n\n\n  _createClass(AccessTokenSender, [{\n    key: \"onReceiveAccessTokenMessage\",\n    value: function onReceiveAccessTokenMessage(e) {\n      var _this$props = this.props,\n          handleAccessTokenMessage = _this$props.handleAccessTokenMessage,\n          url = _this$props.url;\n      if (e.data && e.data.messageId && e.data.messageId === url) handleAccessTokenMessage(e.data);\n    }\n    /** */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var url = this.props.url;\n      if (!url) return /*#__PURE__*/React.createElement(React.Fragment, null);\n      /**\n      login, clickthrough/kiosk open @id, wait for close\n      external, no-op\n      */\n\n      return /*#__PURE__*/React.createElement(IComCom, {\n        attributes: {\n          'aria-hidden': true,\n          height: 1,\n          src: \"\".concat(url, \"?origin=\").concat(window.origin, \"&messageId=\").concat(url),\n          style: {\n            visibility: 'hidden'\n          },\n          width: 1\n        },\n        handleReceiveMessage: this.onReceiveAccessTokenMessage\n      });\n    }\n  }]);\n\n  return AccessTokenSender;\n}(Component);\nAccessTokenSender.defaultProps = {\n  url: undefined\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport { Component } from 'react';\n\n/**\n * Opens a new window for click\n */\nexport var NewWindow = /*#__PURE__*/function (_Component) {\n  _inherits(NewWindow, _Component);\n\n  var _super = _createSuper(NewWindow);\n\n  /** */\n  function NewWindow(props) {\n    var _this;\n\n    _classCallCheck(this, NewWindow);\n\n    _this = _super.call(this, props);\n    _this.released = undefined;\n    _this.window = null;\n    _this.checkIfWindowClosed = null;\n    return _this;\n  }\n  /** */\n\n\n  _createClass(NewWindow, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.openWindow();\n    }\n    /**\n     * Close the opened window we unmount\n     */\n\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.window) {\n        this.window.close();\n      }\n    }\n    /** @private */\n\n  }, {\n    key: \"onClose\",\n    value: function onClose() {\n      var _this$props = this.props,\n          onClose = _this$props.onClose,\n          url = _this$props.url;\n      if (this.released) return;\n      this.released = true;\n      clearInterval(this.checkIfWindowClosed);\n      onClose(url);\n    }\n    /** */\n\n  }, {\n    key: \"openWindow\",\n    value: function openWindow() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          depWindow = _this$props2.depWindow,\n          features = _this$props2.features,\n          name = _this$props2.name,\n          url = _this$props2.url;\n      this.window = (depWindow || window).open(url, name, features);\n      this.released = false;\n      this.checkIfWindowClosed = setInterval(function () {\n        if (!_this2.window || _this2.window.closed) {\n          _this2.onClose();\n        }\n      }, 250);\n    }\n    /** */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      return null;\n    }\n  }]);\n\n  return NewWindow;\n}(Component);\nNewWindow.defaultProps = {\n  depWindow: undefined,\n  features: undefined,\n  name: undefined\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport { AccessTokenSender } from './AccessTokenSender';\nimport { NewWindow } from './NewWindow';\nimport WindowAuthenticationBar from '../containers/WindowAuthenticationBar';\n/**\n * Opens a new window for click\n */\n\nexport var IIIFAuthentication = /*#__PURE__*/function (_Component) {\n  _inherits(IIIFAuthentication, _Component);\n\n  var _super = _createSuper(IIIFAuthentication);\n\n  /** */\n  function IIIFAuthentication(props) {\n    var _this;\n\n    _classCallCheck(this, IIIFAuthentication);\n\n    _this = _super.call(this, props);\n    _this.performLogout = _this.performLogout.bind(_assertThisInitialized(_this));\n    _this.onReceiveAccessTokenMessage = _this.onReceiveAccessTokenMessage.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /** */\n\n\n  _createClass(IIIFAuthentication, [{\n    key: \"onReceiveAccessTokenMessage\",\n    value: function onReceiveAccessTokenMessage(payload) {\n      var _this$props = this.props,\n          authServiceId = _this$props.authServiceId,\n          accessTokenServiceId = _this$props.accessTokenServiceId,\n          resolveAccessTokenRequest = _this$props.resolveAccessTokenRequest;\n      resolveAccessTokenRequest(authServiceId, accessTokenServiceId, payload);\n    }\n    /** */\n\n  }, {\n    key: \"defaultAuthBarProps\",\n    value: function defaultAuthBarProps() {\n      var _this$props2 = this.props,\n          authServiceId = _this$props2.authServiceId,\n          windowId = _this$props2.windowId,\n          status = _this$props2.status,\n          logoutServiceId = _this$props2.logoutServiceId;\n      return {\n        authServiceId: authServiceId,\n        hasLogoutService: !!logoutServiceId,\n        status: status,\n        windowId: windowId\n      };\n    }\n    /** handle the IIIF logout workflow */\n\n  }, {\n    key: \"performLogout\",\n    value: function performLogout() {\n      var _this$props3 = this.props,\n          accessTokenServiceId = _this$props3.accessTokenServiceId,\n          authServiceId = _this$props3.authServiceId,\n          features = _this$props3.features,\n          logoutServiceId = _this$props3.logoutServiceId,\n          resetAuthenticationState = _this$props3.resetAuthenticationState,\n          openWindow = _this$props3.openWindow;\n      openWindow(logoutServiceId, undefined, features);\n      resetAuthenticationState({\n        authServiceId: authServiceId,\n        tokenServiceId: accessTokenServiceId\n      });\n    }\n    /** Render the auth bar for logged in users */\n\n  }, {\n    key: \"renderLoggedIn\",\n    value: function renderLoggedIn() {\n      var _this$props4 = this.props,\n          isInteractive = _this$props4.isInteractive,\n          logoutConfirm = _this$props4.logoutConfirm,\n          t = _this$props4.t;\n      if (!isInteractive) return null;\n      return /*#__PURE__*/React.createElement(WindowAuthenticationBar, Object.assign({\n        confirmButton: logoutConfirm || t('logout'),\n        onConfirm: this.performLogout\n      }, this.defaultAuthBarProps()));\n    }\n    /** Render whatever shows up after the interactive login attempt fails */\n\n  }, {\n    key: \"renderFailure\",\n    value: function renderFailure() {\n      var _this$props5 = this.props,\n          handleAuthInteraction = _this$props5.handleAuthInteraction,\n          header = _this$props5.failureHeader,\n          description = _this$props5.failureDescription,\n          t = _this$props5.t,\n          authServiceId = _this$props5.authServiceId,\n          windowId = _this$props5.windowId;\n      return /*#__PURE__*/React.createElement(WindowAuthenticationBar, Object.assign({\n        header: header,\n        description: description,\n        confirmButton: t('retry'),\n        onConfirm: function onConfirm() {\n          return handleAuthInteraction(windowId, authServiceId);\n        }\n      }, this.defaultAuthBarProps()));\n    }\n    /** Render the login bar after we're logging in */\n\n  }, {\n    key: \"renderLoggingInCookie\",\n    value: function renderLoggingInCookie() {\n      var _this$props6 = this.props,\n          accessTokenServiceId = _this$props6.accessTokenServiceId,\n          authServiceId = _this$props6.authServiceId,\n          resolveAuthenticationRequest = _this$props6.resolveAuthenticationRequest,\n          features = _this$props6.features;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, this.renderLogin(), /*#__PURE__*/React.createElement(NewWindow, {\n        name: \"IiifLoginSender\",\n        url: \"\".concat(authServiceId, \"?origin=\").concat(window.origin),\n        features: features,\n        onClose: function onClose() {\n          return resolveAuthenticationRequest(authServiceId, accessTokenServiceId);\n        }\n      }));\n    }\n    /** Render the login bar after we're logging in */\n\n  }, {\n    key: \"renderLoggingInToken\",\n    value: function renderLoggingInToken() {\n      var accessTokenServiceId = this.props.accessTokenServiceId;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, this.renderLogin(), /*#__PURE__*/React.createElement(AccessTokenSender, {\n        handleAccessTokenMessage: this.onReceiveAccessTokenMessage,\n        url: accessTokenServiceId\n      }));\n    }\n    /** Render a login bar */\n\n  }, {\n    key: \"renderLogin\",\n    value: function renderLogin() {\n      var _this$props7 = this.props,\n          confirm = _this$props7.confirm,\n          description = _this$props7.description,\n          handleAuthInteraction = _this$props7.handleAuthInteraction,\n          header = _this$props7.header,\n          isInteractive = _this$props7.isInteractive,\n          label = _this$props7.label,\n          authServiceId = _this$props7.authServiceId,\n          windowId = _this$props7.windowId;\n      if (!isInteractive) return null;\n      return /*#__PURE__*/React.createElement(WindowAuthenticationBar, Object.assign({\n        header: header,\n        description: description,\n        label: label,\n        confirmButton: confirm,\n        onConfirm: function onConfirm() {\n          return handleAuthInteraction(windowId, authServiceId);\n        }\n      }, this.defaultAuthBarProps()));\n    }\n    /** */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props8 = this.props,\n          authServiceId = _this$props8.authServiceId,\n          status = _this$props8.status;\n      if (!authServiceId) return null;\n      if (status === null) return this.renderLogin();\n      if (status === 'cookie') return this.renderLoggingInCookie();\n      if (status === 'token') return this.renderLoggingInToken();\n      if (status === 'failed') return this.renderFailure();\n      if (status === 'ok') return this.renderLoggedIn();\n      return null;\n    }\n  }]);\n\n  return IIIFAuthentication;\n}(Component);\nIIIFAuthentication.defaultProps = {\n  confirm: undefined,\n  description: undefined,\n  failureDescription: undefined,\n  failureHeader: undefined,\n  features: 'centerscreen',\n  header: undefined,\n  isInteractive: true,\n  label: undefined,\n  logoutConfirm: undefined,\n  logoutServiceId: undefined,\n  openWindow: window.open,\n  status: null,\n  t: function t(k) {\n    return k;\n  }\n};","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport React from 'react';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport InsertDriveFileSharpIcon from '@material-ui/icons/InsertDriveFileSharp';\nimport { grey } from '@material-ui/core/colors';\nimport { v4 as uuid } from 'uuid';\nimport { NativeTypes } from 'react-dnd-html5-backend';\nimport { useDrop } from 'react-dnd';\nimport { readImageMetadata } from '../lib/readImageMetadata';\n/** */\n\nexport var handleDrop = function handleDrop(item, monitor, props) {\n  var onDrop = props.onDrop;\n\n  if (item.urls) {\n    item.urls.forEach(function (str) {\n      var url = new URL(str);\n      var manifestId = url.searchParams.get('manifest');\n      var canvasId = url.searchParams.get('canvas');\n      if (manifestId) onDrop({\n        canvasId: canvasId,\n        manifestId: manifestId\n      }, props, monitor);\n    });\n  }\n\n  if (item.files) {\n    var manifestFiles = item.files.filter(function (f) {\n      return f.type === 'application/json';\n    });\n    var manifestPromises = manifestFiles.map(function (file) {\n      return new Promise(function (resolve, reject) {\n        var reader = new FileReader();\n        reader.addEventListener('load', function () {\n          var manifestJson = reader.result;\n          var manifestId = uuid();\n          if (manifestJson) onDrop({\n            manifestId: manifestId,\n            manifestJson: manifestJson\n          }, props, monitor);\n          resolve();\n        });\n        reader.readAsText(file);\n      });\n    });\n    var imageFiles = item.files.filter(function (_ref) {\n      var type = _ref.type;\n      return type.startsWith('image/');\n    });\n    var imagePromise;\n\n    if (imageFiles.length > 0) {\n      var id = uuid();\n      var imageData = imageFiles.map(function (file) {\n        return readImageMetadata(file);\n      });\n      imagePromise = Promise.all(imageData).then(function (images) {\n        var manifestJson = {\n          '@context': 'http://iiif.io/api/presentation/3/context.json',\n          id: id,\n          items: images.map(function (_ref2, index) {\n            var name = _ref2.name,\n                type = _ref2.type,\n                width = _ref2.width,\n                height = _ref2.height,\n                url = _ref2.url;\n            return {\n              height: height,\n              id: \"\".concat(id, \"/canvas/\").concat(index),\n              items: [{\n                id: \"\".concat(id, \"/canvas/\").concat(index, \"/1\"),\n                items: [{\n                  body: {\n                    format: type,\n                    id: url,\n                    type: 'Image'\n                  },\n                  height: height,\n                  id: \"\".concat(id, \"/canvas/\").concat(index, \"/1/image\"),\n                  motivation: 'painting',\n                  target: \"\".concat(id, \"/canvas/\").concat(index, \"/1\"),\n                  type: 'Annotation',\n                  width: width\n                }],\n                type: 'AnnotationPage'\n              }],\n              label: name,\n              type: 'Canvas',\n              width: width\n            };\n          }),\n          label: images[0].name,\n          type: 'Manifest'\n        };\n        var manifestId = uuid();\n        if (manifestJson) onDrop({\n          manifestId: manifestId,\n          manifestJson: manifestJson\n        }, props, monitor);\n      });\n    }\n\n    return Promise.all([].concat(_toConsumableArray(manifestPromises), [imagePromise]));\n  }\n\n  return undefined;\n};\n/** */\n\nexport var IIIFDropTarget = function IIIFDropTarget(props) {\n  var children = props.children,\n      onDrop = props.onDrop;\n\n  var _useDrop = useDrop({\n    accept: [NativeTypes.URL, NativeTypes.FILE],\n    collect: function collect(monitor) {\n      return {\n        canDrop: monitor.canDrop(),\n        isOver: monitor.isOver()\n      };\n    },\n\n    /** */\n    drop: function drop(item, monitor) {\n      if (!onDrop) return;\n      handleDrop(item, monitor, props);\n    }\n  }),\n      _useDrop2 = _slicedToArray(_useDrop, 2),\n      _useDrop2$ = _useDrop2[0],\n      canDrop = _useDrop2$.canDrop,\n      isOver = _useDrop2$.isOver,\n      drop = _useDrop2[1];\n  /**\n   * Safari reports drag+drop'ed urls as both a file and uri-list\n   * which gets mis-classified by react-dnd.\n   */\n\n\n  var hackForSafari = function hackForSafari(e) {\n    if (!window.safari || !onDrop || !e.dataTransfer) return;\n\n    if (e.dataTransfer.types.includes('Files') && e.dataTransfer.types.includes('text/uri-list')) {\n      var url = e.dataTransfer.getData('text/uri-list');\n      if (!url) return;\n      handleDrop({\n        urls: [url]\n      }, null, props);\n    }\n  };\n\n  var isActive = canDrop && isOver;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: drop,\n    onDrop: hackForSafari,\n    style: {\n      height: '100%',\n      width: '100%'\n    }\n  }, children, /*#__PURE__*/React.createElement(Backdrop, {\n    open: isActive,\n    style: {\n      zIndex: 9999\n    }\n  }, /*#__PURE__*/React.createElement(InsertDriveFileSharpIcon, {\n    style: {\n      color: grey[400],\n      fontSize: 256\n    }\n  })));\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport 'intersection-observer'; // polyfill needed for Safari\n\nimport Typography from '@material-ui/core/Typography';\nimport IntersectionObserver from '@researchgate/react-intersection-observer';\nimport classNames from 'classnames';\nimport getThumbnail from '../lib/ThumbnailFactory';\n/**\n * Uses InteractionObserver to \"lazy\" load canvas thumbnails that are in view.\n */\n\nexport var IIIFThumbnail = /*#__PURE__*/function (_Component) {\n  _inherits(IIIFThumbnail, _Component);\n\n  var _super = _createSuper(IIIFThumbnail);\n\n  _createClass(IIIFThumbnail, null, [{\n    key: \"getUseableLabel\",\n\n    /** */\n    value: function getUseableLabel(resource, index) {\n      return resource && resource.getLabel && resource.getLabel().length > 0 ? resource.getLabel().getValue() : String(index + 1);\n    }\n    /**\n     */\n\n  }]);\n\n  function IIIFThumbnail(props) {\n    var _this;\n\n    _classCallCheck(this, IIIFThumbnail);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      loaded: false\n    };\n    _this.handleIntersection = _this.handleIntersection.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /** */\n\n\n  _createClass(IIIFThumbnail, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.setState(function (state) {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          image: _this2.image()\n        });\n      });\n    }\n    /** */\n\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this3 = this;\n\n      var _this$props = this.props,\n          maxHeight = _this$props.maxHeight,\n          maxWidth = _this$props.maxWidth,\n          resource = _this$props.resource;\n\n      if (prevProps.maxHeight !== maxHeight || prevProps.maxWidth !== maxWidth || prevProps.resource !== resource) {\n        this.setState(function (state) {\n          return _objectSpread(_objectSpread({}, state), {}, {\n            image: _this3.image()\n          });\n        }); // eslint-disable-line\n      }\n    }\n    /**\n     * Handles the intersection (visibility) of a given thumbnail, by requesting\n     * the image and then updating the state.\n     */\n\n  }, {\n    key: \"handleIntersection\",\n    value: function handleIntersection(event) {\n      var loaded = this.state.loaded;\n      if (loaded || !event.isIntersecting) return;\n      this.setState(function (state) {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          loaded: true\n        });\n      });\n    }\n    /**\n     *\n    */\n\n  }, {\n    key: \"imageStyles\",\n    value: function imageStyles() {\n      var _this$props2 = this.props,\n          maxHeight = _this$props2.maxHeight,\n          maxWidth = _this$props2.maxWidth,\n          style = _this$props2.style;\n      var image = this.image();\n      var styleProps = {\n        height: 'auto',\n        width: 'auto'\n      };\n      if (!image) return _objectSpread(_objectSpread({}, style), {}, {\n        height: maxHeight || 'auto',\n        width: maxWidth || 'auto'\n      });\n      var thumbHeight = image.height,\n          thumbWidth = image.width;\n\n      if (thumbHeight && thumbWidth) {\n        if (maxHeight && thumbHeight > maxHeight || maxWidth && thumbWidth > maxWidth) {\n          var aspectRatio = thumbWidth / thumbHeight;\n\n          if (maxHeight && maxWidth) {\n            if (maxWidth / maxHeight < aspectRatio) {\n              styleProps.height = Math.round(maxWidth / aspectRatio);\n              styleProps.width = maxWidth;\n            } else {\n              styleProps.height = maxHeight;\n              styleProps.width = Math.round(maxHeight * aspectRatio);\n            }\n          } else if (maxHeight) {\n            styleProps.height = maxHeight;\n            styleProps.maxWidth = Math.round(maxHeight * aspectRatio);\n          } else if (maxWidth) {\n            styleProps.width = maxWidth;\n            styleProps.maxHeight = Math.round(maxWidth / aspectRatio);\n          }\n        } else {\n          styleProps.width = thumbWidth;\n          styleProps.height = thumbHeight;\n        }\n      } else if (thumbHeight && !thumbWidth) {\n        styleProps.height = maxHeight;\n      } else if (!thumbHeight && thumbWidth) {\n        styleProps.width = maxWidth;\n      } else {\n        // The thumbnail wasn't retrieved via an Image API service,\n        // and its dimensions are not specified in the JSON-LD\n        // (note that this may result in a blurry image)\n        styleProps.width = maxWidth;\n        styleProps.height = maxHeight;\n      }\n\n      return _objectSpread(_objectSpread({}, styleProps), style);\n    }\n    /** */\n\n  }, {\n    key: \"image\",\n    value: function image() {\n      var _this$props3 = this.props,\n          thumbnail = _this$props3.thumbnail,\n          resource = _this$props3.resource,\n          maxHeight = _this$props3.maxHeight,\n          maxWidth = _this$props3.maxWidth,\n          thumbnailsConfig = _this$props3.thumbnailsConfig;\n      if (thumbnail) return thumbnail;\n      var image = getThumbnail(resource, _objectSpread(_objectSpread({}, thumbnailsConfig), {}, {\n        maxHeight: maxHeight,\n        maxWidth: maxWidth\n      }));\n      if (image && image.url) return image;\n      return undefined;\n    }\n    /** */\n\n  }, {\n    key: \"label\",\n    value: function label() {\n      var _this$props4 = this.props,\n          label = _this$props4.label,\n          resource = _this$props4.resource;\n      return label || IIIFThumbnail.getUseableLabel(resource);\n    }\n    /**\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props5 = this.props,\n          children = _this$props5.children,\n          classes = _this$props5.classes,\n          imagePlaceholder = _this$props5.imagePlaceholder,\n          labelled = _this$props5.labelled,\n          thumbnail = _this$props5.thumbnail,\n          variant = _this$props5.variant;\n      var _this$state = this.state,\n          image = _this$state.image,\n          loaded = _this$state.loaded;\n\n      var _ref = loaded && (thumbnail || image) || {},\n          _ref$url = _ref.url,\n          src = _ref$url === void 0 ? imagePlaceholder : _ref$url;\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: classNames(classes.root, _defineProperty({}, classes[\"\".concat(variant, \"Root\")], variant))\n      }, /*#__PURE__*/React.createElement(IntersectionObserver, {\n        onChange: this.handleIntersection\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        alt: \"\",\n        role: \"presentation\",\n        src: src,\n        style: this.imageStyles(),\n        className: classes.image\n      })), labelled && /*#__PURE__*/React.createElement(\"div\", {\n        className: classNames(classes.label, _defineProperty({}, classes[\"\".concat(variant, \"Label\")], variant))\n      }, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"caption\",\n        classes: {\n          root: classNames(classes.caption, _defineProperty({}, classes[\"\".concat(variant, \"Caption\")], variant))\n        }\n      }, this.label())), children);\n    }\n  }]);\n\n  return IIIFThumbnail;\n}(Component);\nIIIFThumbnail.defaultProps = {\n  children: null,\n  classes: {},\n  // Transparent \"gray\"\n  imagePlaceholder: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mMMDQmtBwADgwF/Op8FmAAAAABJRU5ErkJggg==',\n  label: undefined,\n  labelled: false,\n  maxHeight: null,\n  maxWidth: null,\n  style: {},\n  thumbnail: null,\n  thumbnailsConfig: {},\n  variant: null\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport SanitizedHtml from '../containers/SanitizedHtml';\nimport ns from '../config/css-ns';\n/**\n * Renders label/value pair metadata in a dl\n * @prop {object} labelValuePair\n */\n\nexport var LabelValueMetadata = /*#__PURE__*/function (_Component) {\n  _inherits(LabelValueMetadata, _Component);\n\n  var _super = _createSuper(LabelValueMetadata);\n\n  function LabelValueMetadata() {\n    _classCallCheck(this, LabelValueMetadata);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(LabelValueMetadata, [{\n    key: \"render\",\n\n    /**\n     * render\n     * @return {String} - HTML markup for the component\n     */\n    value: function render() {\n      var _this$props = this.props,\n          defaultLabel = _this$props.defaultLabel,\n          labelValuePairs = _this$props.labelValuePairs;\n\n      if (labelValuePairs.length === 0) {\n        return /*#__PURE__*/React.createElement(React.Fragment, null);\n      }\n      /* eslint-disable react/no-array-index-key */\n      // Disabling array index key for dt/dd elements as\n      // they are intended to display metadata that will not\n      // need to be re-rendered internally in any meaningful way\n\n\n      return /*#__PURE__*/React.createElement(\"dl\", {\n        className: ns('label-value-metadata')\n      }, labelValuePairs.reduce(function (acc, labelValuePair, i) {\n        return acc.concat([/*#__PURE__*/React.createElement(Typography, {\n          component: \"dt\",\n          key: \"label-\".concat(i),\n          variant: \"subtitle2\"\n        }, labelValuePair.label || defaultLabel), /*#__PURE__*/React.createElement(Typography, {\n          style: {\n            marginBottom: '.5em',\n            marginLeft: '0px'\n          },\n          component: \"dd\",\n          key: \"value-\".concat(i),\n          variant: \"body1\"\n        }, /*#__PURE__*/React.createElement(SanitizedHtml, {\n          htmlString: labelValuePair.values.join(', '),\n          ruleSet: \"iiif\"\n        }))]);\n      }, []));\n      /* eslint-enable react/no-array-index-key */\n    }\n  }]);\n\n  return LabelValueMetadata;\n}(Component);\nLabelValueMetadata.defaultProps = {\n  defaultLabel: undefined\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport CheckIcon from '@material-ui/icons/CheckSharp';\n\n/**\n * LanguageSettings ~ the workspace sub menu to change the language\n * of the application\n*/\nexport var LanguageSettings = /*#__PURE__*/function (_Component) {\n  _inherits(LanguageSettings, _Component);\n\n  var _super = _createSuper(LanguageSettings);\n\n  function LanguageSettings() {\n    _classCallCheck(this, LanguageSettings);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(LanguageSettings, [{\n    key: \"render\",\n\n    /**\n     * Returns the rendered component\n    */\n    value: function render() {\n      var _this$props = this.props,\n          handleClick = _this$props.handleClick,\n          languages = _this$props.languages;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, languages.map(function (language) {\n        return /*#__PURE__*/React.createElement(MenuItem, {\n          button: !language.current,\n          key: language.locale,\n          onClick: function onClick() {\n            handleClick(language.locale);\n          }\n        }, /*#__PURE__*/React.createElement(ListItemIcon, null, language.current && /*#__PURE__*/React.createElement(CheckIcon, null)), /*#__PURE__*/React.createElement(ListItemText, {\n          primaryTypographyProps: {\n            variant: 'body1'\n          }\n        }, language.label));\n      }));\n    }\n  }]);\n\n  return LanguageSettings;\n}(Component);","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport CompanionWindow from '../containers/CompanionWindow';\nimport CanvasLayers from '../containers/CanvasLayers';\n/**\n * a panel showing the canvases for a given manifest\n */\n\nexport var LayersPanel = /*#__PURE__*/function (_Component) {\n  _inherits(LayersPanel, _Component);\n\n  var _super = _createSuper(LayersPanel);\n\n  function LayersPanel() {\n    _classCallCheck(this, LayersPanel);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(LayersPanel, [{\n    key: \"render\",\n\n    /**\n     * render\n     */\n    value: function render() {\n      var _this$props = this.props,\n          canvasIds = _this$props.canvasIds,\n          id = _this$props.id,\n          t = _this$props.t,\n          windowId = _this$props.windowId;\n      return /*#__PURE__*/React.createElement(CompanionWindow, {\n        title: t('layers'),\n        id: id,\n        windowId: windowId\n      }, canvasIds.map(function (canvasId, index) {\n        return /*#__PURE__*/React.createElement(CanvasLayers, {\n          canvasId: canvasId,\n          index: index,\n          key: canvasId,\n          totalSize: canvasIds.length,\n          windowId: windowId\n        });\n      }));\n    }\n  }]);\n\n  return LayersPanel;\n}(Component);\nLayersPanel.defaultProps = {\n  canvasIds: []\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Typography from '@material-ui/core/Typography';\n/**\n * Provide a locale picker\n */\n\nexport var LocalePicker = /*#__PURE__*/function (_Component) {\n  _inherits(LocalePicker, _Component);\n\n  var _super = _createSuper(LocalePicker);\n\n  function LocalePicker() {\n    _classCallCheck(this, LocalePicker);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(LocalePicker, [{\n    key: \"render\",\n\n    /**\n     * render\n     * @return\n     */\n    value: function render() {\n      var _this$props = this.props,\n          availableLocales = _this$props.availableLocales,\n          classes = _this$props.classes,\n          locale = _this$props.locale,\n          setLocale = _this$props.setLocale;\n      if (!setLocale || availableLocales.length < 2) return /*#__PURE__*/React.createElement(React.Fragment, null);\n      return /*#__PURE__*/React.createElement(FormControl, null, /*#__PURE__*/React.createElement(Select, {\n        MenuProps: {\n          anchorOrigin: {\n            horizontal: 'left',\n            vertical: 'bottom'\n          },\n          getContentAnchorEl: null\n        },\n        displayEmpty: true,\n        value: locale,\n        onChange: function onChange(e) {\n          setLocale(e.target.value);\n        },\n        name: \"locale\",\n        classes: {\n          select: classes.select\n        },\n        className: classes.selectEmpty\n      }, availableLocales.map(function (l) {\n        return /*#__PURE__*/React.createElement(MenuItem, {\n          key: l,\n          value: l\n        }, /*#__PURE__*/React.createElement(Typography, {\n          variant: \"body2\"\n        }, l));\n      })));\n    }\n  }]);\n\n  return LocalePicker;\n}(Component);\nLocalePicker.defaultProps = {\n  availableLocales: [],\n  classes: {},\n  locale: '',\n  setLocale: undefined\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\n/**\n * Provides a form for user input of a manifest url\n * @prop {Function} fetchManifest\n */\n\nexport var ManifestForm = /*#__PURE__*/function (_Component) {\n  _inherits(ManifestForm, _Component);\n\n  var _super = _createSuper(ManifestForm);\n\n  /**\n   * constructor -\n   */\n  function ManifestForm(props) {\n    var _this;\n\n    _classCallCheck(this, ManifestForm);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      formValue: ''\n    };\n    _this.formSubmit = _this.formSubmit.bind(_assertThisInitialized(_this));\n    _this.handleCancel = _this.handleCancel.bind(_assertThisInitialized(_this));\n    _this.handleInputChange = _this.handleInputChange.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /**\n   * Reset the form state\n   */\n\n\n  _createClass(ManifestForm, [{\n    key: \"handleCancel\",\n    value: function handleCancel() {\n      var onCancel = this.props.onCancel;\n      onCancel();\n      this.setState({\n        formValue: ''\n      });\n    }\n    /**\n     * handleInputChange - sets state based on input change.\n     * @param  {Event} event\n     * @private\n     */\n\n  }, {\n    key: \"handleInputChange\",\n    value: function handleInputChange(event) {\n      var that = this;\n      event.preventDefault();\n      that.setState({\n        formValue: event.target.value\n      });\n    }\n    /**\n     * formSubmit - triggers manifest update and sets lastRequested\n     * @param  {Event} event\n     * @private\n     */\n\n  }, {\n    key: \"formSubmit\",\n    value: function formSubmit(event) {\n      var _this$props = this.props,\n          addResource = _this$props.addResource,\n          onSubmit = _this$props.onSubmit;\n      var formValue = this.state.formValue;\n      event.preventDefault();\n      onSubmit();\n      addResource(formValue);\n      this.setState({\n        formValue: ''\n      });\n    }\n    /**\n     * render\n     * @return {String} - HTML markup for the component\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var formValue = this.state.formValue;\n      var _this$props2 = this.props,\n          addResourcesOpen = _this$props2.addResourcesOpen,\n          classes = _this$props2.classes,\n          onCancel = _this$props2.onCancel,\n          t = _this$props2.t;\n      if (!addResourcesOpen) return null;\n      return /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: this.formSubmit\n      }, /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        spacing: 2\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 12,\n        sm: 8,\n        md: 9\n      }, /*#__PURE__*/React.createElement(TextField, {\n        autoFocus: true,\n        fullWidth: true,\n        value: formValue,\n        id: \"manifestURL\",\n        type: \"text\",\n        onChange: this.handleInputChange,\n        variant: \"filled\",\n        label: t('addManifestUrl'),\n        helperText: t('addManifestUrlHelp'),\n        InputLabelProps: {\n          shrink: true\n        },\n        InputProps: {\n          className: classes.input\n        }\n      })), /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 12,\n        sm: 4,\n        md: 3,\n        className: classes.buttons\n      }, onCancel && /*#__PURE__*/React.createElement(Button, {\n        onClick: this.handleCancel\n      }, t('cancel')), /*#__PURE__*/React.createElement(Button, {\n        id: \"fetchBtn\",\n        type: \"submit\",\n        variant: \"contained\",\n        color: \"primary\"\n      }, t('fetchManifest')))));\n    }\n  }]);\n\n  return ManifestForm;\n}(Component);\nManifestForm.defaultProps = {\n  classes: {},\n  onCancel: null,\n  onSubmit: function onSubmit() {},\n  t: function t(key) {\n    return key;\n  }\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport CollapsibleSection from '../containers/CollapsibleSection';\nimport SanitizedHtml from '../containers/SanitizedHtml';\nimport { LabelValueMetadata } from './LabelValueMetadata';\nimport { PluginHook } from './PluginHook';\n/**\n * ManifestInfo\n */\n\nexport var ManifestInfo = /*#__PURE__*/function (_Component) {\n  _inherits(ManifestInfo, _Component);\n\n  var _super = _createSuper(ManifestInfo);\n\n  function ManifestInfo() {\n    _classCallCheck(this, ManifestInfo);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(ManifestInfo, [{\n    key: \"render\",\n\n    /**\n     * render\n     * @return\n     */\n    value: function render() {\n      var _this$props = this.props,\n          manifestDescription = _this$props.manifestDescription,\n          manifestLabel = _this$props.manifestLabel,\n          manifestMetadata = _this$props.manifestMetadata,\n          id = _this$props.id,\n          t = _this$props.t;\n      return /*#__PURE__*/React.createElement(CollapsibleSection, {\n        id: \"\".concat(id, \"-resource\"),\n        label: t('resource')\n      }, manifestLabel && /*#__PURE__*/React.createElement(Typography, {\n        \"aria-labelledby\": \"\".concat(id, \"-resource \").concat(id, \"-resource-heading\"),\n        id: \"\".concat(id, \"-resource-heading\"),\n        variant: \"h4\",\n        component: \"h5\"\n      }, manifestLabel), manifestDescription && /*#__PURE__*/React.createElement(Typography, {\n        variant: \"body1\"\n      }, /*#__PURE__*/React.createElement(SanitizedHtml, {\n        htmlString: manifestDescription,\n        ruleSet: \"iiif\"\n      })), manifestMetadata.length > 0 && /*#__PURE__*/React.createElement(LabelValueMetadata, {\n        labelValuePairs: manifestMetadata\n      }), /*#__PURE__*/React.createElement(PluginHook, this.props));\n    }\n  }]);\n\n  return ManifestInfo;\n}(Component);\nManifestInfo.defaultProps = {\n  manifestDescription: null,\n  manifestLabel: null,\n  manifestMetadata: [],\n  t: function t(key) {\n    return key;\n  }\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React from 'react';\nimport ListItem from '@material-ui/core/ListItem';\nimport ButtonBase from '@material-ui/core/ButtonBase';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport { Img } from 'react-image';\nimport ManifestListItemError from '../containers/ManifestListItemError';\nimport ns from '../config/css-ns';\n/**\n * Represents an item in a list of currently-loaded or loading manifests\n * @param {object} props\n * @param {object} [props.manifest = string]\n */\n\n/** */\n\nexport var ManifestListItem = /*#__PURE__*/function (_React$Component) {\n  _inherits(ManifestListItem, _React$Component);\n\n  var _super = _createSuper(ManifestListItem);\n\n  /** */\n  function ManifestListItem(props) {\n    var _this;\n\n    _classCallCheck(this, ManifestListItem);\n\n    _this = _super.call(this, props);\n    _this.handleOpenButtonClick = _this.handleOpenButtonClick.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /** */\n\n\n  _createClass(ManifestListItem, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props = this.props,\n          fetchManifest = _this$props.fetchManifest,\n          manifestId = _this$props.manifestId,\n          ready = _this$props.ready,\n          isFetching = _this$props.isFetching,\n          error = _this$props.error,\n          provider = _this$props.provider;\n      if (!ready && !error && !isFetching && provider !== 'file') fetchManifest(manifestId);\n    }\n    /**\n     * Handling open button click\n     */\n\n  }, {\n    key: \"handleOpenButtonClick\",\n    value: function handleOpenButtonClick() {\n      var _this$props2 = this.props,\n          addWindow = _this$props2.addWindow,\n          handleClose = _this$props2.handleClose,\n          manifestId = _this$props2.manifestId;\n      addWindow({\n        manifestId: manifestId\n      });\n      handleClose();\n    }\n    /** */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          active = _this$props3.active,\n          buttonRef = _this$props3.buttonRef,\n          manifestId = _this$props3.manifestId,\n          ready = _this$props3.ready,\n          title = _this$props3.title,\n          thumbnail = _this$props3.thumbnail,\n          manifestLogo = _this$props3.manifestLogo,\n          size = _this$props3.size,\n          classes = _this$props3.classes,\n          provider = _this$props3.provider,\n          t = _this$props3.t,\n          error = _this$props3.error,\n          isCollection = _this$props3.isCollection,\n          isMultipart = _this$props3.isMultipart;\n      var placeholder = /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        className: ns('manifest-list-item'),\n        spacing: 2\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 3,\n        sm: 2\n      }, /*#__PURE__*/React.createElement(Skeleton, {\n        className: classes.placeholder,\n        variant: \"rect\",\n        height: 80,\n        width: 120\n      })), /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 9,\n        sm: 6\n      }, /*#__PURE__*/React.createElement(Skeleton, {\n        className: classes.placeholder,\n        variant: \"text\"\n      })), /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 8,\n        sm: 2\n      }, /*#__PURE__*/React.createElement(Skeleton, {\n        className: classes.placeholder,\n        variant: \"text\"\n      }), /*#__PURE__*/React.createElement(Skeleton, {\n        className: classes.placeholder,\n        variant: \"text\"\n      })), /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 4,\n        sm: 2\n      }, /*#__PURE__*/React.createElement(Skeleton, {\n        className: classes.placeholder,\n        variant: \"rect\",\n        height: 60,\n        width: 60\n      })));\n\n      if (error) {\n        return /*#__PURE__*/React.createElement(ListItem, {\n          divider: true,\n          className: classes.root,\n          \"data-manifestid\": manifestId\n        }, /*#__PURE__*/React.createElement(ManifestListItemError, {\n          manifestId: manifestId\n        }));\n      }\n\n      return /*#__PURE__*/React.createElement(ListItem, {\n        divider: true,\n        className: [classes.root, active ? classes.active : ''].join(' '),\n        \"data-manifestid\": manifestId\n      }, ready ? /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        className: ns('manifest-list-item'),\n        spacing: 2\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 12,\n        sm: 6,\n        className: classes.buttonGrid\n      }, /*#__PURE__*/React.createElement(ButtonBase, {\n        ref: buttonRef,\n        className: ns('manifest-list-item-title'),\n        style: {\n          width: '100%'\n        },\n        onClick: this.handleOpenButtonClick\n      }, /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        spacing: 2,\n        className: classes.label,\n        component: \"span\"\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 4,\n        sm: 3,\n        component: \"span\"\n      }, thumbnail ? /*#__PURE__*/React.createElement(Img, {\n        className: [classes.thumbnail, ns('manifest-list-item-thumb')].join(' '),\n        src: [thumbnail],\n        alt: \"\",\n        height: \"80\",\n        unloader: /*#__PURE__*/React.createElement(Skeleton, {\n          variant: \"rect\",\n          animation: false,\n          className: classes.placeholder,\n          height: 80,\n          width: 120\n        })\n      }) : /*#__PURE__*/React.createElement(Skeleton, {\n        className: classes.placeholder,\n        variant: \"rect\",\n        height: 80,\n        width: 120\n      })), /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 8,\n        sm: 9,\n        component: \"span\"\n      }, isCollection && /*#__PURE__*/React.createElement(Typography, {\n        component: \"div\",\n        variant: \"overline\"\n      }, t(isMultipart ? 'multipartCollection' : 'collection')), /*#__PURE__*/React.createElement(Typography, {\n        component: \"span\",\n        variant: \"h6\"\n      }, title || manifestId))))), /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 8,\n        sm: 4\n      }, /*#__PURE__*/React.createElement(Typography, {\n        className: ns('manifest-list-item-provider')\n      }, provider), /*#__PURE__*/React.createElement(Typography, null, t('numItems', {\n        count: size,\n        number: size\n      }))), /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 4,\n        sm: 2\n      }, manifestLogo && /*#__PURE__*/React.createElement(Img, {\n        src: [manifestLogo],\n        alt: \"\",\n        role: \"presentation\",\n        className: classes.logo,\n        unloader: /*#__PURE__*/React.createElement(Skeleton, {\n          variant: \"rect\",\n          animation: false,\n          className: classes.placeholder,\n          height: 60,\n          width: 60\n        })\n      }))) : placeholder);\n    }\n  }]);\n\n  return ManifestListItem;\n}(React.Component);\nManifestListItem.defaultProps = {\n  active: false,\n  buttonRef: undefined,\n  classes: {},\n  error: null,\n  handleClose: function handleClose() {},\n  isCollection: false,\n  isFetching: false,\n  isMultipart: false,\n  manifestLogo: null,\n  provider: null,\n  ready: false,\n  size: 0,\n  t: function t(key) {\n    return key;\n  },\n  thumbnail: null,\n  title: null\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Button from '@material-ui/core/Button';\nimport ErrorIcon from '@material-ui/icons/ErrorOutlineSharp';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\n/**\n * ManifestListItemError renders a component displaying a\n * message to the user about a problem loading a manifest\n*/\n\nexport var ManifestListItemError = /*#__PURE__*/function (_Component) {\n  _inherits(ManifestListItemError, _Component);\n\n  var _super = _createSuper(ManifestListItemError);\n\n  function ManifestListItemError() {\n    _classCallCheck(this, ManifestListItemError);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(ManifestListItemError, [{\n    key: \"render\",\n\n    /**\n     * Returns the rendered component\n    */\n    value: function render() {\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          manifestId = _this$props.manifestId,\n          onDismissClick = _this$props.onDismissClick,\n          onTryAgainClick = _this$props.onTryAgainClick,\n          t = _this$props.t;\n      return /*#__PURE__*/React.createElement(Grid, {\n        container: true\n      }, /*#__PURE__*/React.createElement(Grid, {\n        container: true\n      }, /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        item: true,\n        xs: 12,\n        sm: 6\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 4,\n        sm: 3\n      }, /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        justify: \"center\"\n      }, /*#__PURE__*/React.createElement(ErrorIcon, {\n        className: classes.errorIcon\n      }))), /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 8,\n        sm: 9\n      }, /*#__PURE__*/React.createElement(Typography, null, t('manifestError')), /*#__PURE__*/React.createElement(Typography, {\n        className: classes.manifestIdText\n      }, manifestId)))), /*#__PURE__*/React.createElement(Grid, {\n        container: true\n      }, /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        item: true,\n        xs: 12,\n        sm: 6,\n        justify: \"flex-end\"\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true\n      }, /*#__PURE__*/React.createElement(Button, {\n        onClick: function onClick() {\n          onDismissClick(manifestId);\n        }\n      }, t('dismiss')), /*#__PURE__*/React.createElement(Button, {\n        onClick: function onClick() {\n          onTryAgainClick(manifestId);\n        }\n      }, t('tryAgain'))))));\n    }\n  }]);\n\n  return ManifestListItemError;\n}(Component);","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Link from '@material-ui/core/Link';\nimport classNames from 'classnames';\nimport CollapsibleSection from '../containers/CollapsibleSection';\nimport ns from '../config/css-ns';\nimport { PluginHook } from './PluginHook';\n/**\n * ManifestRelatedLinks\n */\n\nexport var ManifestRelatedLinks = /*#__PURE__*/function (_Component) {\n  _inherits(ManifestRelatedLinks, _Component);\n\n  var _super = _createSuper(ManifestRelatedLinks);\n\n  function ManifestRelatedLinks() {\n    _classCallCheck(this, ManifestRelatedLinks);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(ManifestRelatedLinks, [{\n    key: \"render\",\n\n    /**\n     * render\n     * @return\n     */\n    value: function render() {\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          homepage = _this$props.homepage,\n          manifestUrl = _this$props.manifestUrl,\n          renderings = _this$props.renderings,\n          seeAlso = _this$props.seeAlso,\n          id = _this$props.id,\n          t = _this$props.t;\n      return /*#__PURE__*/React.createElement(CollapsibleSection, {\n        id: \"\".concat(id, \"-related\"),\n        label: t('related')\n      }, /*#__PURE__*/React.createElement(Typography, {\n        \"aria-labelledby\": \"\".concat(id, \"-related \").concat(id, \"-related-heading\"),\n        id: \"\".concat(id, \"-related-heading\"),\n        variant: \"h4\",\n        component: \"h5\"\n      }, t('links')), /*#__PURE__*/React.createElement(\"dl\", {\n        className: classNames(ns('label-value-metadata'), classes.labelValueMetadata)\n      }, homepage && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"subtitle2\",\n        component: \"dt\"\n      }, t('iiif_homepage')), homepage.map(function (page) {\n        return /*#__PURE__*/React.createElement(Typography, {\n          key: page.value,\n          variant: \"body1\",\n          component: \"dd\"\n        }, /*#__PURE__*/React.createElement(Link, {\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          href: page.value\n        }, page.label || page.value));\n      })), renderings && renderings.length > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"subtitle2\",\n        component: \"dt\"\n      }, t('iiif_renderings')), renderings.map(function (rendering) {\n        return /*#__PURE__*/React.createElement(Typography, {\n          key: rendering.value,\n          variant: \"body1\",\n          component: \"dd\"\n        }, /*#__PURE__*/React.createElement(Link, {\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          href: rendering.value\n        }, rendering.label || rendering.value));\n      })), seeAlso && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"subtitle2\",\n        component: \"dt\"\n      }, t('iiif_seeAlso')), seeAlso.map(function (related) {\n        return /*#__PURE__*/React.createElement(Typography, {\n          key: related.value,\n          variant: \"body1\",\n          component: \"dd\"\n        }, /*#__PURE__*/React.createElement(Link, {\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          href: related.value\n        }, related.label || related.value), related.format && /*#__PURE__*/React.createElement(Typography, {\n          component: \"span\"\n        }, \" (\".concat(related.format, \")\")));\n      })), manifestUrl && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"subtitle2\",\n        component: \"dt\"\n      }, t('iiif_manifest')), /*#__PURE__*/React.createElement(Typography, {\n        variant: \"body1\",\n        component: \"dd\"\n      }, /*#__PURE__*/React.createElement(Link, {\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        href: manifestUrl\n      }, manifestUrl)))), /*#__PURE__*/React.createElement(PluginHook, this.props));\n    }\n  }]);\n\n  return ManifestRelatedLinks;\n}(Component);\nManifestRelatedLinks.defaultProps = {\n  homepage: null,\n  manifestUrl: null,\n  renderings: null,\n  seeAlso: null,\n  t: function t(key) {\n    return key;\n  }\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport MenuIcon from '@material-ui/icons/MenuSharp';\nimport cn from 'classnames';\nimport Paper from '@material-ui/core/Paper';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport CloseIcon from '@material-ui/icons/CloseSharp';\nimport MiradorMenuButton from '../containers/MiradorMenuButton';\nimport ns from '../config/css-ns';\n/** */\n\nexport var MinimalWindow = /*#__PURE__*/function (_Component) {\n  _inherits(MinimalWindow, _Component);\n\n  var _super = _createSuper(MinimalWindow);\n\n  function MinimalWindow() {\n    _classCallCheck(this, MinimalWindow);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(MinimalWindow, [{\n    key: \"render\",\n\n    /** */\n    value: function render() {\n      var _this$props = this.props,\n          allowClose = _this$props.allowClose,\n          allowWindowSideBar = _this$props.allowWindowSideBar,\n          ariaLabel = _this$props.ariaLabel,\n          children = _this$props.children,\n          classes = _this$props.classes,\n          label = _this$props.label,\n          removeWindow = _this$props.removeWindow,\n          t = _this$props.t,\n          windowId = _this$props.windowId;\n      return /*#__PURE__*/React.createElement(Paper, {\n        component: \"section\",\n        elevation: 1,\n        id: windowId,\n        className: cn(classes.window, ns('placeholder-window')),\n        \"aria-label\": label && ariaLabel ? t('window', {\n          label: label\n        }) : null\n      }, /*#__PURE__*/React.createElement(AppBar, {\n        position: \"relative\",\n        color: \"default\"\n      }, /*#__PURE__*/React.createElement(Toolbar, {\n        disableGutters: true,\n        className: cn(classes.windowTopBarStyle, ns('window-top-bar')),\n        variant: \"dense\"\n      }, allowWindowSideBar && /*#__PURE__*/React.createElement(MiradorMenuButton, {\n        \"aria-label\": t('toggleWindowSideBar'),\n        disabled: true\n      }, /*#__PURE__*/React.createElement(MenuIcon, null)), /*#__PURE__*/React.createElement(Typography, {\n        variant: \"h2\",\n        noWrap: true,\n        color: \"inherit\",\n        className: classes.title\n      }, label), allowClose && removeWindow && /*#__PURE__*/React.createElement(MiradorMenuButton, {\n        \"aria-label\": t('closeWindow'),\n        className: cn(classes.button, ns('window-close')),\n        onClick: removeWindow,\n        TooltipProps: {\n          tabIndex: ariaLabel ? '0' : '-1'\n        }\n      }, /*#__PURE__*/React.createElement(CloseIcon, null)))), children);\n    }\n  }]);\n\n  return MinimalWindow;\n}(Component);\nMinimalWindow.defaultProps = {\n  allowClose: true,\n  allowWindowSideBar: true,\n  ariaLabel: true,\n  children: null,\n  classes: {},\n  label: '',\n  removeWindow: function removeWindow() {},\n  t: function t(key) {\n    return key;\n  }\n};","function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from 'react';\nimport Badge from '@material-ui/core/Badge';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport ns from '../config/css-ns';\n/**\n * MiradorMenuButton ~ Wrap the given icon prop in an IconButton and a Tooltip.\n * This shares the passed in aria-label w/ the Tooltip (as title) and the IconButton\n * All props besides icon are spread to the IconButton component\n*/\n\nexport function MiradorMenuButton(props) {\n  var ariaLabel = props['aria-label'];\n\n  var badge = props.badge,\n      children = props.children,\n      containerId = props.containerId,\n      dispatch = props.dispatch,\n      BadgeProps = props.BadgeProps,\n      TooltipProps = props.TooltipProps,\n      iconButtonProps = _objectWithoutProperties(props, [\"badge\", \"children\", \"containerId\", \"dispatch\", \"BadgeProps\", \"TooltipProps\"]);\n\n  var button = /*#__PURE__*/React.createElement(IconButton, iconButtonProps, badge ? /*#__PURE__*/React.createElement(Badge, BadgeProps, children) : children);\n  if (iconButtonProps.disabled) return button;\n  return /*#__PURE__*/React.createElement(Tooltip, Object.assign({\n    PopperProps: {\n      container: document.querySelector(\"#\".concat(containerId, \" .\").concat(ns('viewer')))\n    },\n    title: ariaLabel\n  }, TooltipProps), button);\n}\nMiradorMenuButton.defaultProps = {\n  badge: false,\n  BadgeProps: {},\n  dispatch: function dispatch() {},\n  TooltipProps: {}\n};","import React from 'react';\nimport MinimalWindow from '../containers/MinimalWindow';\n/**\n * MosaicRenderPreview is used to for the preview when dragging a mosaic window/tile\n*/\n\nexport function MosaicRenderPreview(props) {\n  var t = props.t,\n      title = props.title,\n      windowId = props.windowId;\n  return /*#__PURE__*/React.createElement(MinimalWindow, {\n    windowId: \"\".concat(windowId, \"-preview\"),\n    label: t('previewWindowTitle', {\n      title: title\n    }),\n    ariaLabel: false\n  });\n}\nMosaicRenderPreview.defaultProps = {\n  t: function t(k) {\n    return k;\n  },\n  title: ''\n};","function _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport debounce from 'lodash/debounce';\nimport isEqual from 'lodash/isEqual';\nimport OpenSeadragon from 'openseadragon';\nimport classNames from 'classnames';\nimport ns from '../config/css-ns';\nimport AnnotationsOverlay from '../containers/AnnotationsOverlay';\nimport CanvasWorld from '../lib/CanvasWorld';\nimport { PluginHook } from './PluginHook';\nimport { OSDReferences } from '../plugins/OSDReferences';\n/**\n * Represents a OpenSeadragonViewer in the mirador workspace. Responsible for mounting\n * and rendering OSD.\n */\n\nexport var OpenSeadragonViewer = /*#__PURE__*/function (_Component) {\n  _inherits(OpenSeadragonViewer, _Component);\n\n  var _super = _createSuper(OpenSeadragonViewer);\n\n  /**\n   * @param {Object} props\n   */\n  function OpenSeadragonViewer(props) {\n    var _this;\n\n    _classCallCheck(this, OpenSeadragonViewer);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      viewer: undefined\n    };\n    _this.ref = /*#__PURE__*/React.createRef();\n    _this.apiRef = /*#__PURE__*/React.createRef();\n    OSDReferences.set(props.windowId, _this.apiRef);\n    _this.onCanvasMouseMove = debounce(_this.onCanvasMouseMove.bind(_assertThisInitialized(_this)), 10);\n    _this.onViewportChange = _this.onViewportChange.bind(_assertThisInitialized(_this));\n    _this.zoomToWorld = _this.zoomToWorld.bind(_assertThisInitialized(_this));\n    _this.osdUpdating = false;\n    return _this;\n  }\n  /**\n   * React lifecycle event\n   */\n\n\n  _createClass(OpenSeadragonViewer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          osdConfig = _this$props.osdConfig,\n          t = _this$props.t,\n          windowId = _this$props.windowId;\n\n      if (!this.ref.current) {\n        return;\n      }\n\n      var viewer = new OpenSeadragon(_objectSpread({\n        id: this.ref.current.id\n      }, osdConfig));\n      var canvas = viewer.canvas && viewer.canvas.firstElementChild;\n\n      if (canvas) {\n        canvas.setAttribute('role', 'img');\n        canvas.setAttribute('aria-label', t('digitizedView'));\n        canvas.setAttribute('aria-describedby', \"\".concat(windowId, \"-osd\"));\n      }\n\n      this.apiRef.current = viewer;\n      this.setState({\n        viewer: viewer\n      }); // Set a flag when OSD starts animating (so that viewer updates are not used)\n\n      viewer.addHandler('animation-start', function () {\n        _this2.osdUpdating = true;\n      });\n      viewer.addHandler('animation-finish', this.onViewportChange);\n      viewer.addHandler('animation-finish', function () {\n        _this2.osdUpdating = false;\n      });\n\n      if (viewer.innerTracker) {\n        viewer.innerTracker.moveHandler = this.onCanvasMouseMove;\n      }\n    }\n    /**\n     * When the tileSources change, make sure to close the OSD viewer.\n     * When the annotations change, reset the updateCanvas method to make sure\n     * they are added.\n     * When the viewport state changes, pan or zoom the OSD viewer as appropriate\n     */\n\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var _this$props2 = this.props,\n          viewerConfig = _this$props2.viewerConfig,\n          canvasWorld = _this$props2.canvasWorld;\n      var viewer = this.state.viewer;\n      this.apiRef.current = viewer;\n\n      if (prevState.viewer === undefined) {\n        if (viewerConfig) {\n          viewer.viewport.panTo(viewerConfig, true);\n          viewer.viewport.zoomTo(viewerConfig.zoom, viewerConfig, true);\n          viewerConfig.degrees !== undefined && viewer.viewport.setRotation(viewerConfig.degrees);\n          viewerConfig.flip !== undefined && viewer.viewport.setFlip(viewerConfig.flip);\n        }\n\n        this.addAllImageSources(!viewerConfig);\n        return;\n      }\n\n      if (!this.infoResponsesMatch(prevProps.infoResponses) || !this.nonTiledImagedMatch(prevProps.nonTiledImages)) {\n        viewer.close();\n        var canvasesChanged = !isEqual(canvasWorld.canvasIds, prevProps.canvasWorld.canvasIds);\n        this.addAllImageSources(canvasesChanged || !viewerConfig);\n      } else if (!isEqual(canvasWorld.layers, prevProps.canvasWorld.layers)) {\n        this.refreshTileProperties();\n      } else if (viewerConfig && !this.osdUpdating) {\n        var viewport = viewer.viewport;\n\n        if (viewerConfig.x !== viewport.centerSpringX.target.value || viewerConfig.y !== viewport.centerSpringY.target.value) {\n          viewport.panTo(viewerConfig, false);\n        }\n\n        if (viewerConfig.zoom !== viewport.zoomSpring.target.value) {\n          viewport.zoomTo(viewerConfig.zoom, viewerConfig, false);\n        }\n\n        if (viewerConfig.rotation !== viewport.getRotation()) {\n          viewport.setRotation(viewerConfig.rotation);\n        }\n\n        if (viewerConfig.flip !== viewport.getFlip()) {\n          viewport.setFlip(viewerConfig.flip);\n        }\n      }\n    }\n    /**\n     */\n\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var viewer = this.state.viewer;\n\n      if (viewer.innerTracker && viewer.innerTracker.moveHandler === this.onCanvasMouseMove) {\n        viewer.innerTracker.moveHandler = null;\n      }\n\n      viewer.removeAllHandlers();\n      this.apiRef.current = undefined;\n    }\n    /** Shim to provide a mouse-move event coming from the viewer */\n\n  }, {\n    key: \"onCanvasMouseMove\",\n    value: function onCanvasMouseMove(event) {\n      var viewer = this.state.viewer;\n      viewer.raiseEvent('mouse-move', event);\n    }\n    /**\n     * Forward OSD state to redux\n     */\n\n  }, {\n    key: \"onViewportChange\",\n    value: function onViewportChange(event) {\n      var _this$props3 = this.props,\n          updateViewport = _this$props3.updateViewport,\n          windowId = _this$props3.windowId;\n      var viewport = event.eventSource.viewport;\n      updateViewport(windowId, {\n        flip: viewport.getFlip(),\n        rotation: viewport.getRotation(),\n        x: Math.round(viewport.centerSpringX.target.value),\n        y: Math.round(viewport.centerSpringY.target.value),\n        zoom: viewport.zoomSpring.target.value\n      });\n    }\n    /** */\n\n  }, {\n    key: \"addAllImageSources\",\n    value: function addAllImageSources() {\n      var _this3 = this;\n\n      var zoomAfterAdd = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var _this$props4 = this.props,\n          nonTiledImages = _this$props4.nonTiledImages,\n          infoResponses = _this$props4.infoResponses;\n      Promise.all(infoResponses.map(function (infoResponse) {\n        return _this3.addTileSource(infoResponse);\n      }), nonTiledImages.map(function (image) {\n        return _this3.addNonTiledImage(image);\n      })).then(function () {\n        if (infoResponses[0] || nonTiledImages[0]) {\n          if (zoomAfterAdd) _this3.zoomToWorld();\n\n          _this3.refreshTileProperties();\n        }\n      });\n    }\n    /** */\n\n  }, {\n    key: \"addNonTiledImage\",\n    value: function addNonTiledImage(contentResource) {\n      var canvasWorld = this.props.canvasWorld;\n      var viewer = this.state.viewer;\n      var type = contentResource.getProperty('type');\n      var format = contentResource.getProperty('format') || '';\n      if (!(type === 'Image' || type === 'dctypes:Image' || format.startsWith('image/'))) return Promise.resolve();\n      return new Promise(function (resolve, reject) {\n        if (!viewer) {\n          reject();\n        }\n\n        viewer.addSimpleImage({\n          error: function error(event) {\n            return reject(event);\n          },\n          fitBounds: _construct(OpenSeadragon.Rect, _toConsumableArray(canvasWorld.contentResourceToWorldCoordinates(contentResource))),\n          index: canvasWorld.layerIndexOfImageResource(contentResource),\n          opacity: canvasWorld.layerOpacityOfImageResource(contentResource),\n          success: function success(event) {\n            return resolve(event);\n          },\n          url: contentResource.id\n        });\n      });\n    }\n    /**\n     */\n\n  }, {\n    key: \"addTileSource\",\n    value: function addTileSource(infoResponse) {\n      var canvasWorld = this.props.canvasWorld;\n      var viewer = this.state.viewer;\n      return new Promise(function (resolve, reject) {\n        if (!viewer) {\n          reject();\n        } // OSD mutates this object, so we give it a shallow copy\n\n\n        var tileSource = _objectSpread({}, infoResponse.json);\n\n        var contentResource = canvasWorld.contentResource(infoResponse.id);\n        if (!contentResource) return;\n        viewer.addTiledImage({\n          error: function error(event) {\n            return reject(event);\n          },\n          fitBounds: _construct(OpenSeadragon.Rect, _toConsumableArray(canvasWorld.contentResourceToWorldCoordinates(contentResource))),\n          index: canvasWorld.layerIndexOfImageResource(contentResource),\n          opacity: canvasWorld.layerOpacityOfImageResource(contentResource),\n          success: function success(event) {\n            return resolve(event);\n          },\n          tileSource: tileSource\n        });\n      });\n    }\n    /** */\n\n  }, {\n    key: \"refreshTileProperties\",\n    value: function refreshTileProperties() {\n      var canvasWorld = this.props.canvasWorld;\n      var world = this.state.viewer.world;\n      var items = [];\n\n      for (var i = 0; i < world.getItemCount(); i += 1) {\n        items.push(world.getItemAt(i));\n      }\n\n      items.forEach(function (item, i) {\n        var contentResource = canvasWorld.contentResource(item.source['@id'] || item.source.id);\n        if (!contentResource) return;\n        var newIndex = canvasWorld.layerIndexOfImageResource(contentResource);\n        if (i !== newIndex) world.setItemIndex(item, newIndex);\n        item.setOpacity(canvasWorld.layerOpacityOfImageResource(contentResource));\n      });\n    }\n    /**\n     */\n\n  }, {\n    key: \"fitBounds\",\n    value: function fitBounds(x, y, w, h) {\n      var immediately = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n      var viewer = this.state.viewer;\n      viewer.viewport.fitBounds(new OpenSeadragon.Rect(x, y, w, h), immediately);\n    }\n    /**\n     * infoResponsesMatch - compares previous tileSources to current to determine\n     * whether a refresh of the OSD viewer is needed.\n     * @param  {Array} prevTileSources\n     * @return {Boolean}\n     */\n\n  }, {\n    key: \"infoResponsesMatch\",\n    value: function infoResponsesMatch(prevInfoResponses) {\n      var infoResponses = this.props.infoResponses;\n      if (infoResponses.length === 0 && prevInfoResponses.length === 0) return true;\n      if (infoResponses.length !== prevInfoResponses.length) return false;\n      return infoResponses.every(function (infoResponse, index) {\n        if (!prevInfoResponses[index]) {\n          return false;\n        }\n\n        if (!infoResponse.json || !prevInfoResponses[index].json) {\n          return false;\n        }\n\n        if (infoResponse.tokenServiceId !== prevInfoResponses[index].tokenServiceId) {\n          return false;\n        }\n\n        if (infoResponse.json['@id'] && infoResponse.json['@id'] === prevInfoResponses[index].json['@id']) {\n          return true;\n        }\n\n        if (infoResponse.json.id && infoResponse.json.id === prevInfoResponses[index].json.id) {\n          return true;\n        }\n\n        return false;\n      });\n    }\n    /**\n     * nonTiledImagedMatch - compares previous images to current to determin\n     * whether a refresh of the OSD viewer is needed\n     */\n\n  }, {\n    key: \"nonTiledImagedMatch\",\n    value: function nonTiledImagedMatch(prevNonTiledImages) {\n      var nonTiledImages = this.props.nonTiledImages;\n      if (nonTiledImages.length === 0 && prevNonTiledImages.length === 0) return true;\n      return nonTiledImages.some(function (image, index) {\n        if (!prevNonTiledImages[index]) {\n          return false;\n        }\n\n        if (image.id === prevNonTiledImages[index].id) {\n          return true;\n        }\n\n        return false;\n      });\n    }\n    /**\n     * zoomToWorld - zooms the viewer to the extent of the canvas world\n     */\n\n  }, {\n    key: \"zoomToWorld\",\n    value: function zoomToWorld() {\n      var immediately = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var canvasWorld = this.props.canvasWorld;\n      this.fitBounds.apply(this, _toConsumableArray(canvasWorld.worldBounds()).concat([immediately]));\n    }\n    /**\n     * Renders things\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$props5 = this.props,\n          children = _this$props5.children,\n          classes = _this$props5.classes,\n          label = _this$props5.label,\n          t = _this$props5.t,\n          windowId = _this$props5.windowId,\n          drawAnnotations = _this$props5.drawAnnotations;\n      var viewer = this.state.viewer;\n      var enhancedChildren = React.Children.map(children, function (child) {\n        return /*#__PURE__*/React.cloneElement(child, {\n          zoomToWorld: _this4.zoomToWorld\n        });\n      });\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"section\", {\n        className: classNames(ns('osd-container'), classes.osdContainer),\n        id: \"\".concat(windowId, \"-osd\"),\n        ref: this.ref,\n        \"aria-label\": t('item', {\n          label: label\n        }),\n        \"aria-live\": \"polite\"\n      }, drawAnnotations && /*#__PURE__*/React.createElement(AnnotationsOverlay, {\n        viewer: viewer,\n        windowId: windowId\n      }), enhancedChildren, /*#__PURE__*/React.createElement(PluginHook, Object.assign({\n        viewer: viewer\n      }, _objectSpread(_objectSpread({}, this.props), {}, {\n        children: null\n      })))));\n    }\n  }]);\n\n  return OpenSeadragonViewer;\n}(Component);\nOpenSeadragonViewer.defaultProps = {\n  children: null,\n  drawAnnotations: false,\n  infoResponses: [],\n  label: null,\n  nonTiledImages: [],\n  osdConfig: {},\n  viewerConfig: null\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from 'react';\n/** Renders plugins */\n\nexport var PluginHook = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var PluginComponents = props.PluginComponents; // eslint-disable-line react/prop-types\n\n  var classes = props.classes,\n      otherProps = _objectWithoutProperties(props, [\"classes\"]); // eslint-disable-line react/prop-types\n\n\n  return PluginComponents ? PluginComponents.map(function (PluginComponent, index) {\n    return (// eslint-disable-line react/prop-types\n\n      /*#__PURE__*/\n      React.isValidElement(PluginComponent) ? /*#__PURE__*/React.cloneElement(PluginComponent, _objectSpread(_objectSpread({}, otherProps), {}, {\n        ref: ref\n      })) : /*#__PURE__*/React.createElement(PluginComponent, Object.assign({\n        ref: ref\n      }, otherProps, {\n        key: index // eslint-disable-line react/no-array-index-key\n\n      }))\n    );\n  }) : null;\n});","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component, lazy, Suspense } from 'react';\nimport classNames from 'classnames';\nimport WindowSideBar from '../containers/WindowSideBar';\nimport CompanionArea from '../containers/CompanionArea';\nimport CollectionDialog from '../containers/CollectionDialog';\nimport ns from '../config/css-ns';\nvar AudioViewer = /*#__PURE__*/lazy(function () {\n  return import('../containers/AudioViewer');\n});\nvar GalleryView = /*#__PURE__*/lazy(function () {\n  return import('../containers/GalleryView');\n});\nvar SelectCollection = /*#__PURE__*/lazy(function () {\n  return import('../containers/SelectCollection');\n});\nvar WindowViewer = /*#__PURE__*/lazy(function () {\n  return import('../containers/WindowViewer');\n});\nvar VideoViewer = /*#__PURE__*/lazy(function () {\n  return import('../containers/VideoViewer');\n});\nGalleryView.displayName = 'GalleryView';\nSelectCollection.displayName = 'SelectCollection';\nWindowViewer.displayName = 'WindowViewer';\n/**\n * PrimaryWindow - component that renders the primary content of a Mirador\n * window. Right now this differentiates between a Image, Video, or Audio viewer.\n */\n\nexport var PrimaryWindow = /*#__PURE__*/function (_Component) {\n  _inherits(PrimaryWindow, _Component);\n\n  var _super = _createSuper(PrimaryWindow);\n\n  function PrimaryWindow() {\n    _classCallCheck(this, PrimaryWindow);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(PrimaryWindow, [{\n    key: \"renderViewer\",\n\n    /**\n     * renderViewer - logic used to determine what type of view to show\n     *\n     * @return {(String|null)}\n     */\n    value: function renderViewer() {\n      var _this$props = this.props,\n          audioResources = _this$props.audioResources,\n          isCollection = _this$props.isCollection,\n          isFetching = _this$props.isFetching,\n          videoResources = _this$props.videoResources,\n          view = _this$props.view,\n          windowId = _this$props.windowId;\n\n      if (isCollection) {\n        return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SelectCollection, {\n          windowId: windowId\n        }));\n      }\n\n      if (isFetching === false) {\n        if (view === 'gallery') {\n          return /*#__PURE__*/React.createElement(GalleryView, {\n            windowId: windowId\n          });\n        }\n\n        if (videoResources.length > 0) {\n          return /*#__PURE__*/React.createElement(VideoViewer, {\n            windowId: windowId\n          });\n        }\n\n        if (audioResources.length > 0) {\n          return /*#__PURE__*/React.createElement(AudioViewer, {\n            windowId: windowId\n          });\n        }\n\n        return /*#__PURE__*/React.createElement(WindowViewer, {\n          windowId: windowId\n        });\n      }\n\n      return null;\n    }\n    /**\n     * Render the component\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          isCollectionDialogVisible = _this$props2.isCollectionDialogVisible,\n          windowId = _this$props2.windowId,\n          classes = _this$props2.classes,\n          children = _this$props2.children;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: classNames(ns('primary-window'), classes.primaryWindow)\n      }, /*#__PURE__*/React.createElement(WindowSideBar, {\n        windowId: windowId\n      }), /*#__PURE__*/React.createElement(CompanionArea, {\n        windowId: windowId,\n        position: \"left\"\n      }), isCollectionDialogVisible && /*#__PURE__*/React.createElement(CollectionDialog, {\n        windowId: windowId\n      }), /*#__PURE__*/React.createElement(Suspense, {\n        fallback: /*#__PURE__*/React.createElement(\"div\", null)\n      }, children || this.renderViewer()));\n    }\n  }]);\n\n  return PrimaryWindow;\n}(Component);\nPrimaryWindow.defaultProps = {\n  audioResources: [],\n  children: undefined,\n  isCollection: false,\n  isCollectionDialogVisible: false,\n  isFetching: false,\n  videoResources: [],\n  view: undefined\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport DOMPurify from 'dompurify';\nimport ns from '../config/css-ns';\nimport htmlRules from '../lib/htmlRules';\n/**\n*/\n\nexport var SanitizedHtml = /*#__PURE__*/function (_Component) {\n  _inherits(SanitizedHtml, _Component);\n\n  var _super = _createSuper(SanitizedHtml);\n\n  function SanitizedHtml() {\n    _classCallCheck(this, SanitizedHtml);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(SanitizedHtml, [{\n    key: \"render\",\n\n    /**\n    */\n    value: function render() {\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          htmlString = _this$props.htmlString,\n          ruleSet = _this$props.ruleSet; // Add a hook to make all links open a new window\n\n      DOMPurify.addHook('afterSanitizeAttributes', function (node) {\n        // set all elements owning target to target=_blank\n        if ('target' in node) {\n          node.setAttribute('target', '_blank'); // prevent https://www.owasp.org/index.php/Reverse_Tabnabbing\n\n          node.setAttribute('rel', 'noopener noreferrer');\n        }\n      });\n      return /*#__PURE__*/React.createElement(\"span\", {\n        className: [classes.root, ns('third-party-html')].join(' '),\n        dangerouslySetInnerHTML: {\n          // eslint-disable-line react/no-danger\n          __html: DOMPurify.sanitize(htmlString, htmlRules[ruleSet])\n        }\n      });\n    }\n  }]);\n\n  return SanitizedHtml;\n}(Component);\nSanitizedHtml.defaultProps = {\n  classes: {}\n};","function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from 'react';\nimport DialogContent from '@material-ui/core/DialogContent';\n/**\n * ScrollIndicatedDialogContent ~ Inject a style into the DialogContent component\n *                                to indicate there is scrollable content\n*/\n\nexport function ScrollIndicatedDialogContent(props) {\n  var classes = props.classes,\n      className = props.className,\n      otherProps = _objectWithoutProperties(props, [\"classes\", \"className\"]);\n\n  var ourClassName = [className, classes.shadowScrollDialog].join(' ');\n  return /*#__PURE__*/React.createElement(DialogContent, Object.assign({\n    className: ourClassName\n  }, otherProps));\n}\nScrollIndicatedDialogContent.defaultProps = {\n  className: ''\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\n\n/**\n * ScrollTo ~\n*/\nexport var ScrollTo = /*#__PURE__*/function (_Component) {\n  _inherits(ScrollTo, _Component);\n\n  var _super = _createSuper(ScrollTo);\n\n  /** */\n  function ScrollTo(props) {\n    var _this;\n\n    _classCallCheck(this, ScrollTo);\n\n    _this = _super.call(this, props);\n    _this.scrollToRef = /*#__PURE__*/React.createRef();\n    return _this;\n  }\n  /** */\n\n\n  _createClass(ScrollTo, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var scrollTo = this.props.scrollTo;\n      if (!scrollTo) return;\n      this.scrollToElement();\n    }\n    /**\n     * If the scrollTo prop is true (and has been updated) scroll to the selected element\n    */\n\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var scrollTo = this.props.scrollTo;\n\n      if (scrollTo && prevProps.scrollTo !== scrollTo) {\n        this.scrollToElement();\n      }\n    }\n    /**\n     * Return the getBoundingClientRect() of the containerRef prop\n    */\n\n  }, {\n    key: \"containerBoundingRect\",\n    value: function containerBoundingRect() {\n      var containerRef = this.props.containerRef;\n      if (!containerRef || !containerRef.current || !containerRef.current.domEl) return {};\n      return containerRef.current.domEl.getBoundingClientRect();\n    }\n    /**\n     * Return the getBoundingClientRect() of the scrollTo ref prop\n    */\n\n  }, {\n    key: \"scrollToBoundingRect\",\n    value: function scrollToBoundingRect() {\n      if (!this.elementToScrollTo()) return {};\n      return this.elementToScrollTo().getBoundingClientRect();\n    }\n    /**\n     * Return the current scrollToRef\n    */\n\n  }, {\n    key: \"elementToScrollTo\",\n    value: function elementToScrollTo() {\n      if (!this.scrollToRef || !this.scrollToRef.current) return null;\n      return this.scrollToRef.current;\n    }\n    /**\n     * The container provided in the containersRef dome structure in which scrolling\n     * should happen.\n    */\n\n  }, {\n    key: \"scrollabelContainer\",\n    value: function scrollabelContainer() {\n      var containerRef = this.props.containerRef;\n      if (!containerRef || !containerRef.current || !containerRef.current.domEl) return null;\n      return containerRef.current.domEl.getElementsByClassName('mirador-scrollto-scrollable')[0];\n    }\n    /**\n     * Determine if the scrollTo element is visible within the given containerRef prop.\n     * Currently only supports vertical elements but could be extended to support horizontal\n    */\n\n  }, {\n    key: \"elementIsVisible\",\n    value: function elementIsVisible() {\n      var offsetTop = this.props.offsetTop;\n\n      if (this.scrollToBoundingRect().top < this.containerBoundingRect().top + offsetTop) {\n        return false;\n      }\n\n      if (this.scrollToBoundingRect().bottom > this.containerBoundingRect().bottom) {\n        return false;\n      }\n\n      return true;\n    }\n    /**\n     * Scroll to the element if it is set to be scolled and is not visible\n    */\n\n  }, {\n    key: \"scrollToElement\",\n    value: function scrollToElement() {\n      var _this$props = this.props,\n          offsetTop = _this$props.offsetTop,\n          scrollTo = _this$props.scrollTo;\n      if (!scrollTo) return;\n      if (!this.elementToScrollTo()) return;\n      if (this.elementIsVisible()) return;\n      if (!this.scrollabelContainer()) return;\n      var scrollBy = this.elementToScrollTo().offsetTop - this.containerBoundingRect().height / 2 + offsetTop;\n      this.scrollabelContainer().scrollTo(0, scrollBy);\n    }\n    /**\n     * Returns the rendered component\n    */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          children = _this$props2.children,\n          scrollTo = _this$props2.scrollTo;\n      if (!scrollTo) return children;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        ref: this.scrollToRef\n      }, children);\n    }\n  }]);\n\n  return ScrollTo;\n}(Component);\nScrollTo.defaultProps = {\n  offsetTop: 0\n};","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport clsx from 'clsx';\nimport Button from '@material-ui/core/Button';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Typography from '@material-ui/core/Typography';\nimport Chip from '@material-ui/core/Chip';\nimport SanitizedHtml from '../containers/SanitizedHtml';\nimport TruncatedHit from '../lib/TruncatedHit';\nimport { ScrollTo } from './ScrollTo';\n/** */\n\nexport var SearchHit = /*#__PURE__*/function (_Component) {\n  _inherits(SearchHit, _Component);\n\n  var _super = _createSuper(SearchHit);\n\n  /** */\n  function SearchHit(props) {\n    var _this;\n\n    _classCallCheck(this, SearchHit);\n\n    _this = _super.call(this, props);\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /**\n   * Announce the annotation content if the component is mounted selected\n   */\n\n\n  _createClass(SearchHit, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var selected = this.props.selected;\n      if (selected) this.announceHit();\n    }\n    /**\n     * Announce hit if the hit has been selected\n     */\n\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var selected = this.props.selected;\n\n      if (selected && selected !== prevProps.selected) {\n        this.announceHit();\n      }\n    }\n    /** */\n\n  }, {\n    key: \"handleClick\",\n    value: function handleClick() {\n      var _this$props = this.props,\n          annotation = _this$props.annotation,\n          annotationId = _this$props.annotationId,\n          selectAnnotation = _this$props.selectAnnotation;\n      if (annotation && annotationId) selectAnnotation(annotationId);\n    }\n    /**\n     * Pass content describing the hit to the announcer prop (intended for screen readers)\n     */\n\n  }, {\n    key: \"announceHit\",\n    value: function announceHit() {\n      var _this$props2 = this.props,\n          annotation = _this$props2.annotation,\n          annotationLabel = _this$props2.annotationLabel,\n          announcer = _this$props2.announcer,\n          canvasLabel = _this$props2.canvasLabel,\n          hit = _this$props2.hit,\n          index = _this$props2.index,\n          t = _this$props2.t,\n          total = _this$props2.total;\n      if (!hit) return;\n      var truncatedHit = new TruncatedHit(hit, annotation);\n      announcer([t('pagination', {\n        current: index + 1,\n        total: total\n      }), canvasLabel, annotationLabel, truncatedHit.before, truncatedHit.match, truncatedHit.after].join(' '));\n    }\n    /** */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _clsx;\n\n      var _this$props3 = this.props,\n          adjacent = _this$props3.adjacent,\n          annotation = _this$props3.annotation,\n          annotationLabel = _this$props3.annotationLabel,\n          canvasLabel = _this$props3.canvasLabel,\n          classes = _this$props3.classes,\n          companionWindowId = _this$props3.companionWindowId,\n          containerRef = _this$props3.containerRef,\n          hit = _this$props3.hit,\n          focused = _this$props3.focused,\n          index = _this$props3.index,\n          showDetails = _this$props3.showDetails,\n          selected = _this$props3.selected,\n          t = _this$props3.t,\n          windowSelected = _this$props3.windowSelected;\n      if (focused && !selected) return null;\n      var truncatedHit = focused ? hit : hit && new TruncatedHit(hit, annotation);\n      var truncated = hit && truncatedHit.before !== hit.before && truncatedHit.after !== hit.after;\n      var canvasLabelHtmlId = \"\".concat(companionWindowId, \"-\").concat(index);\n      return /*#__PURE__*/React.createElement(ScrollTo, {\n        containerRef: containerRef,\n        offsetTop: 96 // offset for the height of the form above\n        ,\n        scrollTo: windowSelected && !focused\n      }, /*#__PURE__*/React.createElement(ListItem, {\n        className: clsx(classes.listItem, (_clsx = {}, _defineProperty(_clsx, classes.adjacent, adjacent), _defineProperty(_clsx, classes.selected, selected), _defineProperty(_clsx, classes.focused, focused), _defineProperty(_clsx, classes.windowSelected, windowSelected), _clsx)),\n        button: !selected,\n        component: \"li\",\n        onClick: this.handleClick,\n        selected: selected\n      }, /*#__PURE__*/React.createElement(ListItemText, {\n        primaryTypographyProps: {\n          variant: 'body1'\n        }\n      }, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"subtitle2\",\n        className: classes.subtitle\n      }, /*#__PURE__*/React.createElement(Chip, {\n        component: \"span\",\n        label: index + 1,\n        className: classes.hitCounter\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        id: canvasLabelHtmlId\n      }, canvasLabel)), annotationLabel && /*#__PURE__*/React.createElement(Typography, {\n        variant: \"subtitle2\"\n      }, annotationLabel), hit && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SanitizedHtml, {\n        ruleSet: \"iiif\",\n        htmlString: truncatedHit.before\n      }), ' ', /*#__PURE__*/React.createElement(\"strong\", null, /*#__PURE__*/React.createElement(SanitizedHtml, {\n        ruleSet: \"iiif\",\n        htmlString: truncatedHit.match\n      })), ' ', /*#__PURE__*/React.createElement(SanitizedHtml, {\n        ruleSet: \"iiif\",\n        htmlString: truncatedHit.after\n      }), ' ', truncated && !focused && /*#__PURE__*/React.createElement(Button, {\n        className: classes.inlineButton,\n        onClick: showDetails,\n        color: \"secondary\",\n        size: \"small\",\n        \"aria-describedby\": canvasLabelHtmlId\n      }, t('more'))), !hit && annotation && /*#__PURE__*/React.createElement(SanitizedHtml, {\n        ruleSet: \"iiif\",\n        htmlString: annotation.chars\n      }))));\n    }\n  }]);\n\n  return SearchHit;\n}(Component);\nSearchHit.defaultProps = {\n  adjacent: false,\n  annotation: undefined,\n  annotationId: undefined,\n  annotationLabel: undefined,\n  canvasLabel: undefined,\n  classes: {},\n  companionWindowId: undefined,\n  containerRef: undefined,\n  focused: false,\n  hit: undefined,\n  index: undefined,\n  selectAnnotation: function selectAnnotation() {},\n  selected: false,\n  showDetails: function showDetails() {},\n  t: function t(k) {\n    return k;\n  },\n  total: undefined,\n  windowSelected: false\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Chip from '@material-ui/core/Chip';\nimport Typography from '@material-ui/core/Typography';\nimport CompanionWindow from '../containers/CompanionWindow';\nimport SearchPanelControls from '../containers/SearchPanelControls';\nimport SearchResults from '../containers/SearchResults';\n/** */\n\nexport var SearchPanel = /*#__PURE__*/function (_Component) {\n  _inherits(SearchPanel, _Component);\n\n  var _super = _createSuper(SearchPanel);\n\n  /** */\n  function SearchPanel(props) {\n    var _this;\n\n    _classCallCheck(this, SearchPanel);\n\n    _this = _super.call(this, props);\n    _this.containerRef = /*#__PURE__*/React.createRef();\n    return _this;\n  }\n  /** */\n\n\n  _createClass(SearchPanel, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          fetchSearch = _this$props.fetchSearch,\n          windowId = _this$props.windowId,\n          id = _this$props.id,\n          query = _this$props.query,\n          removeSearch = _this$props.removeSearch,\n          searchService = _this$props.searchService,\n          suggestedSearches = _this$props.suggestedSearches,\n          t = _this$props.t;\n      return /*#__PURE__*/React.createElement(CompanionWindow, {\n        ariaLabel: t('searchTitle'),\n        title: /*#__PURE__*/React.createElement(React.Fragment, null, t('searchTitle'), query && query !== '' && /*#__PURE__*/React.createElement(Chip, {\n          className: classes.clearChip,\n          color: \"secondary\",\n          label: t('clearSearch'),\n          onClick: removeSearch,\n          onDelete: removeSearch,\n          size: \"small\",\n          variant: \"outlined\"\n        })),\n        windowId: windowId,\n        id: id,\n        titleControls: /*#__PURE__*/React.createElement(SearchPanelControls, {\n          companionWindowId: id,\n          windowId: windowId\n        }),\n        ref: this.containerRef\n      }, /*#__PURE__*/React.createElement(SearchResults, {\n        containerRef: this.containerRef,\n        companionWindowId: id,\n        windowId: windowId\n      }), fetchSearch && suggestedSearches && query === '' && suggestedSearches.map(function (search) {\n        return /*#__PURE__*/React.createElement(Typography, {\n          component: \"p\",\n          key: search,\n          variant: \"body1\"\n        }, /*#__PURE__*/React.createElement(Button, {\n          className: classes.inlineButton,\n          color: \"secondary\",\n          onClick: function onClick() {\n            return fetchSearch(\"\".concat(searchService.id, \"?q=\").concat(search), search);\n          }\n        }, t('suggestSearch', {\n          query: search\n        })));\n      }));\n    }\n  }]);\n\n  return SearchPanel;\n}(Component);\nSearchPanel.defaultProps = {\n  classes: {},\n  fetchSearch: undefined,\n  query: '',\n  suggestedSearches: [],\n  t: function t(key) {\n    return key;\n  }\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport deburr from 'lodash/deburr';\nimport debounce from 'lodash/debounce';\nimport isObject from 'lodash/isObject';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport TextField from '@material-ui/core/TextField';\nimport SearchIcon from '@material-ui/icons/SearchSharp';\nimport MiradorMenuButton from '../containers/MiradorMenuButton';\nimport SearchPanelNavigation from '../containers/SearchPanelNavigation';\n/** Sometimes an autocomplete match can be a simple string, other times an object\n    with a `match` property, this function abstracts that away */\n\nvar getMatch = function getMatch(option) {\n  return isObject(option) ? option.match : option;\n};\n/** */\n\n\nexport var SearchPanelControls = /*#__PURE__*/function (_Component) {\n  _inherits(SearchPanelControls, _Component);\n\n  var _super = _createSuper(SearchPanelControls);\n\n  /** */\n  function SearchPanelControls(props) {\n    var _this;\n\n    _classCallCheck(this, SearchPanelControls);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      search: props.query,\n      suggestions: []\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.submitSearch = _this.submitSearch.bind(_assertThisInitialized(_this));\n    _this.getSuggestions = _this.getSuggestions.bind(_assertThisInitialized(_this));\n    _this.selectItem = _this.selectItem.bind(_assertThisInitialized(_this));\n    _this.fetchAutocomplete = debounce(_this.fetchAutocomplete.bind(_assertThisInitialized(_this)), 500);\n    _this.receiveAutocomplete = _this.receiveAutocomplete.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /**\n   * Update the query in the component state if the query has changed in the redux store\n   */\n\n\n  _createClass(SearchPanelControls, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var query = this.props.query;\n\n      if (query !== prevProps.query) {\n        // We are setting local state directly here ONLY when the query prop (from redux)\n        // changed\n        this.setState({\n          // eslint-disable-line react/no-did-update-set-state\n          search: query\n        });\n      }\n    }\n    /** */\n\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event, value, reason) {\n      // For some reason the value gets reset to an empty value from the\n      // useAutocomplete hook sometimes, we just ignore these cases\n      if (reason === 'reset' && !value) {\n        return;\n      }\n\n      this.setState({\n        search: value,\n        suggestions: []\n      });\n\n      if (value) {\n        this.fetchAutocomplete(value);\n      }\n    }\n    /** */\n\n  }, {\n    key: \"getSuggestions\",\n    value: function getSuggestions(value) {\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref$showEmpty = _ref.showEmpty,\n          showEmpty = _ref$showEmpty === void 0 ? false : _ref$showEmpty;\n\n      var suggestions = this.state.suggestions;\n      var inputValue = deburr(value.trim()).toLowerCase();\n      var inputLength = inputValue.length;\n      return inputLength === 0 && !showEmpty ? [] : suggestions;\n    }\n    /** */\n\n  }, {\n    key: \"fetchAutocomplete\",\n    value: function fetchAutocomplete(value) {\n      var autocompleteService = this.props.autocompleteService;\n      if (!autocompleteService) return;\n      if (!value) return;\n      fetch(\"\".concat(autocompleteService.id, \"?q=\").concat(value)).then(function (response) {\n        return response.json();\n      }).then(this.receiveAutocomplete);\n    }\n    /** */\n\n  }, {\n    key: \"receiveAutocomplete\",\n    value: function receiveAutocomplete(json) {\n      this.setState({\n        suggestions: json.terms\n      });\n    }\n    /** */\n\n  }, {\n    key: \"submitSearch\",\n    value: function submitSearch(event) {\n      var _this$props = this.props,\n          companionWindowId = _this$props.companionWindowId,\n          fetchSearch = _this$props.fetchSearch,\n          searchService = _this$props.searchService,\n          windowId = _this$props.windowId;\n      var search = this.state.search;\n      event && event.preventDefault();\n      if (!search) return;\n      fetchSearch(windowId, companionWindowId, \"\".concat(searchService.id, \"?q=\").concat(search), search);\n    }\n    /** */\n\n  }, {\n    key: \"selectItem\",\n    value: function selectItem(_event, selectedItem, _reason) {\n      if (selectedItem && getMatch(selectedItem)) {\n        this.setState({\n          search: getMatch(selectedItem)\n        }, this.submitSearch);\n      }\n    }\n    /** */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          classes = _this$props2.classes,\n          companionWindowId = _this$props2.companionWindowId,\n          searchIsFetching = _this$props2.searchIsFetching,\n          t = _this$props2.t,\n          windowId = _this$props2.windowId;\n      var _this$state = this.state,\n          search = _this$state.search,\n          suggestions = _this$state.suggestions;\n      var id = \"search-\".concat(companionWindowId);\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: this.submitSearch,\n        className: classes.form\n      }, /*#__PURE__*/React.createElement(Autocomplete, {\n        id: id,\n        inputValue: search,\n        options: suggestions,\n        getOptionLabel: getMatch,\n        getOptionSelected: function getOptionSelected(option, value) {\n          return deburr(getMatch(option).trim()).toLowerCase() === deburr(getMatch(value).trim()).toLowerCase();\n        },\n        noOptionsText: \"\",\n        onChange: this.selectItem,\n        onInputChange: this.handleChange,\n        freeSolo: true,\n        renderInput: function renderInput(params) {\n          return /*#__PURE__*/React.createElement(TextField, Object.assign({}, params, {\n            label: t('searchInputLabel'),\n            InputProps: _objectSpread(_objectSpread({}, params.InputProps), {}, {\n              endAdornment: /*#__PURE__*/React.createElement(\"div\", {\n                className: classes.endAdornment\n              }, /*#__PURE__*/React.createElement(MiradorMenuButton, {\n                \"aria-label\": t('searchSubmitAria'),\n                type: \"submit\"\n              }, /*#__PURE__*/React.createElement(SearchIcon, null)), Boolean(searchIsFetching) && /*#__PURE__*/React.createElement(CircularProgress, {\n                className: classes.searchProgress,\n                size: 50\n              }))\n            })\n          }));\n        }\n      })), /*#__PURE__*/React.createElement(SearchPanelNavigation, {\n        windowId: windowId,\n        companionWindowId: companionWindowId\n      }));\n    }\n  }]);\n\n  return SearchPanelControls;\n}(Component);\nSearchPanelControls.defaultProps = {\n  autocompleteService: undefined,\n  classes: {},\n  query: '',\n  t: function t(key) {\n    return key;\n  }\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeftSharp';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRightSharp';\nimport Typography from '@material-ui/core/Typography';\nimport MiradorMenuButton from '../containers/MiradorMenuButton';\n/**\n * SearchPanelNavigation ~\n*/\n\nexport var SearchPanelNavigation = /*#__PURE__*/function (_Component) {\n  _inherits(SearchPanelNavigation, _Component);\n\n  var _super = _createSuper(SearchPanelNavigation);\n\n  function SearchPanelNavigation() {\n    _classCallCheck(this, SearchPanelNavigation);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(SearchPanelNavigation, [{\n    key: \"nextSearchResult\",\n\n    /** */\n    value: function nextSearchResult(currentHitIndex) {\n      var _this$props = this.props,\n          searchHits = _this$props.searchHits,\n          selectAnnotation = _this$props.selectAnnotation;\n      selectAnnotation(searchHits[currentHitIndex + 1].annotations[0]);\n    }\n    /** */\n\n  }, {\n    key: \"previousSearchResult\",\n    value: function previousSearchResult(currentHitIndex) {\n      var _this$props2 = this.props,\n          searchHits = _this$props2.searchHits,\n          selectAnnotation = _this$props2.selectAnnotation;\n      selectAnnotation(searchHits[currentHitIndex - 1].annotations[0]);\n    }\n    /** */\n\n  }, {\n    key: \"hasNextResult\",\n    value: function hasNextResult(currentHitIndex) {\n      var searchHits = this.props.searchHits;\n      if (searchHits.length === 0) return false;\n      if (currentHitIndex < searchHits.length - 1) return true;\n      return false;\n    }\n    /** */\n\n  }, {\n    key: \"hasPreviousResult\",\n    value: function hasPreviousResult(currentHitIndex) {\n      var searchHits = this.props.searchHits;\n      if (searchHits.length === 0) return false;\n      if (currentHitIndex > 0) return true;\n      return false;\n    }\n    /**\n     * Returns the rendered component\n    */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      var _this$props3 = this.props,\n          numTotal = _this$props3.numTotal,\n          searchHits = _this$props3.searchHits,\n          selectedContentSearchAnnotation = _this$props3.selectedContentSearchAnnotation,\n          classes = _this$props3.classes,\n          t = _this$props3.t,\n          direction = _this$props3.direction;\n      var iconStyle = direction === 'rtl' ? {\n        transform: 'rotate(180deg)'\n      } : {};\n      var currentHitIndex = searchHits.findIndex(function (val) {\n        return val.annotations.includes(selectedContentSearchAnnotation[0]);\n      });\n      var lengthText = searchHits.length;\n\n      if (searchHits.length < numTotal) {\n        lengthText += '+';\n      }\n\n      return /*#__PURE__*/React.createElement(React.Fragment, null, searchHits.length > 0 && /*#__PURE__*/React.createElement(Typography, {\n        variant: \"body2\",\n        align: \"center\",\n        classes: classes\n      }, /*#__PURE__*/React.createElement(MiradorMenuButton, {\n        \"aria-label\": t('searchPreviousResult'),\n        disabled: !this.hasPreviousResult(currentHitIndex),\n        onClick: function onClick() {\n          return _this.previousSearchResult(currentHitIndex);\n        }\n      }, /*#__PURE__*/React.createElement(ChevronLeftIcon, {\n        style: iconStyle\n      })), /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          unicodeBidi: 'plaintext'\n        }\n      }, t('pagination', {\n        current: currentHitIndex + 1,\n        total: lengthText\n      })), /*#__PURE__*/React.createElement(MiradorMenuButton, {\n        \"aria-label\": t('searchNextResult'),\n        disabled: !this.hasNextResult(currentHitIndex),\n        onClick: function onClick() {\n          return _this.nextSearchResult(currentHitIndex);\n        }\n      }, /*#__PURE__*/React.createElement(ChevronRightIcon, {\n        style: iconStyle\n      }))));\n    }\n  }]);\n\n  return SearchPanelNavigation;\n}(Component);\nSearchPanelNavigation.defaultProps = {\n  classes: {},\n  numTotal: undefined,\n  searchHits: [],\n  t: function t(key) {\n    return key;\n  }\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Button from '@material-ui/core/Button';\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\nimport BackIcon from '@material-ui/icons/ArrowBackSharp';\nimport { LiveMessenger } from 'react-aria-live';\nimport SearchHit from '../containers/SearchHit';\nimport { ScrollTo } from './ScrollTo';\n/** */\n\nexport var SearchResults = /*#__PURE__*/function (_Component) {\n  _inherits(SearchResults, _Component);\n\n  var _super = _createSuper(SearchResults);\n\n  /** */\n  function SearchResults(props) {\n    var _this;\n\n    _classCallCheck(this, SearchResults);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      focused: false\n    };\n    _this.toggleFocus = _this.toggleFocus.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /** */\n\n\n  _createClass(SearchResults, [{\n    key: \"toggleFocus\",\n    value: function toggleFocus() {\n      var focused = this.state.focused;\n      this.setState({\n        focused: !focused\n      });\n    }\n    /**\n     * Return SearchHits for every hit in the response\n     * Return SearchHits for every annotation in the response if there are no hits\n     */\n\n  }, {\n    key: \"renderSearchHitsAndAnnotations\",\n    value: function renderSearchHitsAndAnnotations(announcer) {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          companionWindowId = _this$props.companionWindowId,\n          containerRef = _this$props.containerRef,\n          searchAnnotations = _this$props.searchAnnotations,\n          searchHits = _this$props.searchHits,\n          windowId = _this$props.windowId;\n      var focused = this.state.focused;\n\n      if (searchHits.length === 0 && searchAnnotations.length > 0) {\n        return searchAnnotations.map(function (anno, index) {\n          return /*#__PURE__*/React.createElement(SearchHit, {\n            announcer: announcer,\n            annotationId: anno.id,\n            companionWindowId: companionWindowId,\n            containerRef: containerRef,\n            key: anno.id,\n            focused: focused,\n            index: index,\n            total: searchAnnotations.length,\n            windowId: windowId,\n            showDetails: _this2.toggleFocus\n          });\n        });\n      }\n\n      return searchHits.map(function (hit, index) {\n        return /*#__PURE__*/React.createElement(SearchHit, {\n          announcer: announcer,\n          containerRef: containerRef,\n          companionWindowId: companionWindowId,\n          key: hit.annotations[0],\n          focused: focused,\n          hit: hit,\n          index: index,\n          total: searchHits.length,\n          windowId: windowId,\n          showDetails: _this2.toggleFocus\n        });\n      });\n    }\n    /** */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props2 = this.props,\n          classes = _this$props2.classes,\n          companionWindowId = _this$props2.companionWindowId,\n          containerRef = _this$props2.containerRef,\n          isFetching = _this$props2.isFetching,\n          fetchSearch = _this$props2.fetchSearch,\n          nextSearch = _this$props2.nextSearch,\n          query = _this$props2.query,\n          searchAnnotations = _this$props2.searchAnnotations,\n          searchHits = _this$props2.searchHits,\n          searchNumTotal = _this$props2.searchNumTotal,\n          t = _this$props2.t,\n          windowId = _this$props2.windowId;\n      var focused = this.state.focused;\n      var noResultsState = query && !isFetching && searchHits.length === 0 && searchAnnotations.length === 0;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, focused && /*#__PURE__*/React.createElement(ScrollTo, {\n        containerRef: containerRef,\n        offsetTop: 96,\n        scrollTo: true\n      }, /*#__PURE__*/React.createElement(Button, {\n        onClick: this.toggleFocus,\n        className: classes.navigation,\n        size: \"small\"\n      }, /*#__PURE__*/React.createElement(BackIcon, null), t('backToResults'))), noResultsState && /*#__PURE__*/React.createElement(Typography, {\n        className: classes.noResults\n      }, t('searchNoResults')), /*#__PURE__*/React.createElement(List, {\n        disablePadding: true\n      }, /*#__PURE__*/React.createElement(LiveMessenger, null, function (_ref) {\n        var announcePolite = _ref.announcePolite;\n        return _this3.renderSearchHitsAndAnnotations(announcePolite);\n      })), nextSearch && /*#__PURE__*/React.createElement(Button, {\n        className: classes.moreButton,\n        color: \"secondary\",\n        onClick: function onClick() {\n          return fetchSearch(windowId, companionWindowId, nextSearch, query);\n        }\n      }, t('moreResults'), /*#__PURE__*/React.createElement(\"br\", null), \"(\".concat(t('searchResultsRemaining', {\n        numLeft: searchNumTotal - searchHits.length\n      }), \")\")));\n    }\n  }]);\n\n  return SearchResults;\n}(Component);\nSearchResults.defaultProps = {\n  classes: {},\n  containerRef: undefined,\n  isFetching: false,\n  nextSearch: undefined,\n  query: undefined,\n  searchAnnotations: [],\n  searchHits: [],\n  searchNumTotal: undefined,\n  t: function t(k) {\n    return k;\n  }\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport ListSharpIcon from '@material-ui/icons/ListSharp';\n/**\n *\n */\n\nexport var SelectCollection = /*#__PURE__*/function (_Component) {\n  _inherits(SelectCollection, _Component);\n\n  var _super = _createSuper(SelectCollection);\n\n  /** */\n  function SelectCollection(props) {\n    var _this;\n\n    _classCallCheck(this, SelectCollection);\n\n    _this = _super.call(this, props);\n    _this.openCollectionDialog = _this.openCollectionDialog.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /** */\n\n\n  _createClass(SelectCollection, [{\n    key: \"openCollectionDialog\",\n    value: function openCollectionDialog() {\n      var _this$props = this.props,\n          collectionPath = _this$props.collectionPath,\n          manifestId = _this$props.manifestId,\n          showCollectionDialog = _this$props.showCollectionDialog,\n          windowId = _this$props.windowId;\n      showCollectionDialog(manifestId, collectionPath.slice(0, -1), windowId);\n    }\n    /** */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var t = this.props.t;\n      return /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        justify: \"center\",\n        alignItems: \"center\"\n      }, /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        direction: \"column\",\n        alignItems: \"center\"\n      }, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"h4\",\n        paragraph: true\n      }, /*#__PURE__*/React.createElement(\"em\", null, t('noItemSelected'))), /*#__PURE__*/React.createElement(Button, {\n        color: \"primary\",\n        variant: \"contained\",\n        onClick: this.openCollectionDialog,\n        startIcon: /*#__PURE__*/React.createElement(ListSharpIcon, null)\n      }, t('showCollection'))));\n    }\n  }]);\n\n  return SelectCollection;\n}(Component);\nSelectCollection.defaultProps = {\n  collectionPath: [],\n  manifestId: null,\n  t: function t() {},\n  windowId: null\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport classNames from 'classnames';\n/** */\n\nexport var SidebarIndexItem = /*#__PURE__*/function (_Component) {\n  _inherits(SidebarIndexItem, _Component);\n\n  var _super = _createSuper(SidebarIndexItem);\n\n  function SidebarIndexItem() {\n    _classCallCheck(this, SidebarIndexItem);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(SidebarIndexItem, [{\n    key: \"render\",\n\n    /** */\n    value: function render() {\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          label = _this$props.label;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Typography, {\n        className: classNames(classes.label),\n        variant: \"body1\"\n      }, label));\n    }\n  }]);\n\n  return SidebarIndexItem;\n}(Component);","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport MenuList from '@material-ui/core/MenuList';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { ScrollTo } from './ScrollTo';\nimport MiradorCanvas from '../lib/MiradorCanvas';\nimport SidebarIndexItem from '../containers/SidebarIndexItem';\nimport SidebarIndexThumbnail from '../containers/SidebarIndexThumbnail';\n/** */\n\nexport var SidebarIndexList = /*#__PURE__*/function (_Component) {\n  _inherits(SidebarIndexList, _Component);\n\n  var _super = _createSuper(SidebarIndexList);\n\n  function SidebarIndexList() {\n    _classCallCheck(this, SidebarIndexList);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(SidebarIndexList, [{\n    key: \"getIdAndLabelOfCanvases\",\n\n    /** @private */\n    value: function getIdAndLabelOfCanvases() {\n      var canvases = this.props.canvases;\n      return canvases.map(function (canvas, index) {\n        return {\n          id: canvas.id,\n          label: new MiradorCanvas(canvas).getLabel()\n        };\n      });\n    }\n    /** */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          canvases = _this$props.canvases,\n          classes = _this$props.classes,\n          containerRef = _this$props.containerRef,\n          selectedCanvasIds = _this$props.selectedCanvasIds,\n          setCanvas = _this$props.setCanvas,\n          variant = _this$props.variant,\n          windowId = _this$props.windowId;\n      var canvasesIdAndLabel = this.getIdAndLabelOfCanvases(canvases);\n      var Item;\n\n      switch (variant) {\n        case 'thumbnail':\n          Item = SidebarIndexThumbnail;\n          break;\n\n        default:\n          Item = SidebarIndexItem;\n      }\n\n      return /*#__PURE__*/React.createElement(MenuList, {\n        variant: \"selectedMenu\"\n      }, canvasesIdAndLabel.map(function (canvas, canvasIndex) {\n        var onClick = function onClick() {\n          setCanvas(windowId, canvas.id);\n        }; // eslint-disable-line require-jsdoc, max-len\n\n\n        return /*#__PURE__*/React.createElement(ScrollTo, {\n          containerRef: containerRef,\n          key: \"\".concat(canvas.id, \"-\").concat(variant),\n          offsetTop: 96 // offset for the height of the form above\n          ,\n          scrollTo: selectedCanvasIds.includes(canvas.id)\n        }, /*#__PURE__*/React.createElement(MenuItem, {\n          key: canvas.id,\n          className: classes.listItem,\n          alignItems: \"flex-start\",\n          onClick: onClick,\n          button: true,\n          component: \"li\",\n          selected: selectedCanvasIds.includes(canvas.id)\n        }, /*#__PURE__*/React.createElement(Item, {\n          label: canvas.label,\n          canvas: canvases[canvasIndex]\n        })));\n      }));\n    }\n  }]);\n\n  return SidebarIndexList;\n}(Component);\nSidebarIndexList.defaultProps = {\n  selectedCanvasIds: [],\n  variant: 'item'\n};","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport TreeView from '@material-ui/lab/TreeView';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport TreeItem from '@material-ui/lab/TreeItem';\nimport clsx from 'clsx';\nimport { ScrollTo } from './ScrollTo';\n/** */\n\nfunction getStartCanvasId(node) {\n  var jsonld = node.data.__jsonld; // eslint-disable-line no-underscore-dangle\n\n  if (jsonld.startCanvas && typeof jsonld.startCanvas === 'string') {\n    return jsonld.startCanvas;\n  }\n\n  if (jsonld.start) {\n    if (jsonld.start.type === 'Canvas' && typeof jsonld.start.id === 'string') {\n      return jsonld.start.id;\n    }\n\n    if (jsonld.start.type === 'SpecificResource' && typeof jsonld.start.source === 'string') {\n      return jsonld.start.source;\n    }\n  }\n\n  return node.data.getCanvasIds()[0];\n}\n/** */\n\n\nexport var SidebarIndexTableOfContents = /*#__PURE__*/function (_Component) {\n  _inherits(SidebarIndexTableOfContents, _Component);\n\n  var _super = _createSuper(SidebarIndexTableOfContents);\n\n  function SidebarIndexTableOfContents() {\n    _classCallCheck(this, SidebarIndexTableOfContents);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(SidebarIndexTableOfContents, [{\n    key: \"handleKeyPressed\",\n\n    /** */\n    value: function handleKeyPressed(event, node) {\n      var _this$props = this.props,\n          expandedNodeIds = _this$props.expandedNodeIds,\n          toggleNode = _this$props.toggleNode;\n\n      if (event.key === 'Enter' || event.key === ' ' || event.key === 'Spacebar') {\n        this.selectTreeItem(node);\n      }\n\n      if (event.key === 'ArrowLeft' && expandedNodeIds.indexOf(node.id) !== -1 || event.key === 'ArrowRight' && expandedNodeIds.indexOf(node.id) === -1 && node.nodes.length > 0) {\n        toggleNode(node.id);\n      }\n    }\n    /** */\n\n  }, {\n    key: \"selectTreeItem\",\n    value: function selectTreeItem(node) {\n      var _this$props2 = this.props,\n          setCanvas = _this$props2.setCanvas,\n          toggleNode = _this$props2.toggleNode,\n          windowId = _this$props2.windowId;\n\n      if (node.nodes.length > 0) {\n        toggleNode(node.id);\n      } // Do not select if there are no canvases listed or it has children\n\n\n      if (!node.data.getCanvasIds() || node.data.getCanvasIds().length === 0 || node.nodes.length > 0) {\n        return;\n      }\n\n      var target = getStartCanvasId(node);\n      var canvasId = target.indexOf('#') === -1 ? target : target.substr(0, target.indexOf('#'));\n      setCanvas(windowId, canvasId);\n    }\n    /** */\n\n  }, {\n    key: \"buildTreeItems\",\n    value: function buildTreeItems(nodes, visibleNodeIds, containerRef, nodeIdToScrollTo) {\n      var _this = this;\n\n      var classes = this.props.classes;\n\n      if (!nodes) {\n        return null;\n      }\n\n      return nodes.map(function (node) {\n        return /*#__PURE__*/React.createElement(ScrollTo, {\n          containerRef: containerRef,\n          key: \"\".concat(node.id, \"-scroll\"),\n          offsetTop: 96 // offset for the height of the form above\n          ,\n          scrollTo: nodeIdToScrollTo === node.id\n        }, /*#__PURE__*/React.createElement(TreeItem, {\n          key: node.id,\n          nodeId: node.id,\n          classes: {\n            content: classes.content,\n            group: classes.group,\n            label: classes.label,\n            root: classes.treeItemRoot,\n            selected: classes.selected\n          },\n          label: /*#__PURE__*/React.createElement(\"div\", {\n            className: clsx(_defineProperty({}, classes.visibleNode, visibleNodeIds.indexOf(node.id) !== -1))\n          }, node.label),\n          onClick: function onClick() {\n            return _this.selectTreeItem(node);\n          },\n          onKeyDown: function onKeyDown(e) {\n            return _this.handleKeyPressed(e, node);\n          }\n        }, node.nodes && node.nodes.length > 0 ? _this.buildTreeItems(node.nodes, visibleNodeIds, containerRef, nodeIdToScrollTo) : null));\n      });\n    }\n    /** */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          classes = _this$props3.classes,\n          treeStructure = _this$props3.treeStructure,\n          visibleNodeIds = _this$props3.visibleNodeIds,\n          expandedNodeIds = _this$props3.expandedNodeIds,\n          containerRef = _this$props3.containerRef,\n          nodeIdToScrollTo = _this$props3.nodeIdToScrollTo;\n\n      if (!treeStructure) {\n        return /*#__PURE__*/React.createElement(React.Fragment, null);\n      }\n\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(TreeView, {\n        className: classes.root,\n        defaultCollapseIcon: /*#__PURE__*/React.createElement(ExpandMoreIcon, {\n          color: \"action\"\n        }),\n        defaultExpandIcon: /*#__PURE__*/React.createElement(ChevronRightIcon, {\n          color: \"action\"\n        }),\n        defaultEndIcon: /*#__PURE__*/React.createElement(React.Fragment, null),\n        expanded: expandedNodeIds\n      }, this.buildTreeItems(treeStructure.nodes, visibleNodeIds, containerRef, nodeIdToScrollTo)));\n    }\n  }]);\n\n  return SidebarIndexTableOfContents;\n}(Component);","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport classNames from 'classnames';\nimport IIIFThumbnail from '../containers/IIIFThumbnail';\n/** */\n\nexport var SidebarIndexThumbnail = /*#__PURE__*/function (_Component) {\n  _inherits(SidebarIndexThumbnail, _Component);\n\n  var _super = _createSuper(SidebarIndexThumbnail);\n\n  function SidebarIndexThumbnail() {\n    _classCallCheck(this, SidebarIndexThumbnail);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(SidebarIndexThumbnail, [{\n    key: \"render\",\n\n    /** */\n    value: function render() {\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          canvas = _this$props.canvas,\n          height = _this$props.height,\n          label = _this$props.label,\n          width = _this$props.width;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          minWidth: 50\n        }\n      }, /*#__PURE__*/React.createElement(IIIFThumbnail, {\n        label: label,\n        resource: canvas,\n        className: classNames(classes.clickable),\n        maxHeight: height,\n        maxWidth: width\n      })), /*#__PURE__*/React.createElement(Typography, {\n        className: classNames(classes.label),\n        variant: \"body1\"\n      }, label));\n    }\n  }]);\n\n  return SidebarIndexThumbnail;\n}(Component);\nSidebarIndexThumbnail.defaultProps = {\n  height: undefined,\n  width: undefined\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { PureComponent } from 'react';\nimport classNames from 'classnames';\nimport IIIFThumbnail from '../containers/IIIFThumbnail';\nimport ns from '../config/css-ns';\n/** */\n\nexport var ThumbnailCanvasGrouping = /*#__PURE__*/function (_PureComponent) {\n  _inherits(ThumbnailCanvasGrouping, _PureComponent);\n\n  var _super = _createSuper(ThumbnailCanvasGrouping);\n\n  /** */\n  function ThumbnailCanvasGrouping(props) {\n    var _this;\n\n    _classCallCheck(this, ThumbnailCanvasGrouping);\n\n    _this = _super.call(this, props);\n    _this.setCanvas = _this.setCanvas.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /** */\n\n\n  _createClass(ThumbnailCanvasGrouping, [{\n    key: \"setCanvas\",\n    value: function setCanvas(e) {\n      var setCanvas = this.props.setCanvas;\n      setCanvas(e.currentTarget.dataset.canvasId);\n    }\n    /**\n     * Determines whether the current index is the rendered canvas, providing\n     * a useful class.\n     */\n\n  }, {\n    key: \"currentCanvasClass\",\n    value: function currentCanvasClass(canvasIndices) {\n      var index = this.props.index;\n      if (canvasIndices.includes(index)) return 'current-canvas-grouping';\n      return '';\n    }\n    /** */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          index = _this$props.index,\n          style = _this$props.style,\n          data = _this$props.data,\n          classes = _this$props.classes,\n          currentCanvasId = _this$props.currentCanvasId;\n      var canvasGroupings = data.canvasGroupings,\n          position = data.position,\n          height = data.height;\n      var currentGroupings = canvasGroupings[index];\n      var SPACING = 8;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        style: _objectSpread(_objectSpread({}, style), {}, {\n          boxSizing: 'content-box',\n          height: Number.isInteger(style.height) ? style.height - SPACING : null,\n          left: Number.isInteger(style.left) ? style.left + SPACING : null,\n          top: style.top + SPACING,\n          width: Number.isInteger(style.width) ? style.width - SPACING : null\n        }),\n        className: ns('thumbnail-nav-container'),\n        role: \"gridcell\",\n        \"aria-colindex\": index + 1\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        role: \"button\",\n        \"data-canvas-id\": currentGroupings[0].id,\n        \"data-canvas-index\": currentGroupings[0].index,\n        onClick: this.setCanvas,\n        tabIndex: -1,\n        style: {\n          height: position === 'far-right' ? 'auto' : \"\".concat(height - SPACING, \"px\"),\n          width: position === 'far-bottom' ? 'auto' : \"\".concat(style.width, \"px\")\n        },\n        className: classNames(ns(['thumbnail-nav-canvas', \"thumbnail-nav-canvas-\".concat(index), this.currentCanvasClass(currentGroupings.map(function (canvas) {\n          return canvas.index;\n        }))]), classes.canvas, _defineProperty({}, classes.currentCanvas, currentGroupings.map(function (canvas) {\n          return canvas.id;\n        }).includes(currentCanvasId)))\n      }, currentGroupings.map(function (canvas, i) {\n        return /*#__PURE__*/React.createElement(IIIFThumbnail, {\n          key: canvas.id,\n          resource: canvas,\n          labelled: true,\n          maxHeight: position === 'far-right' ? style.height - 1.5 * SPACING : height - 1.5 * SPACING,\n          variant: \"inside\"\n        });\n      })));\n    }\n  }]);\n\n  return ThumbnailCanvasGrouping;\n}(PureComponent);","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport AutoSizer from 'react-virtualized-auto-sizer';\nimport { VariableSizeList as List } from 'react-window';\nimport classNames from 'classnames';\nimport CanvasWorld from '../lib/CanvasWorld';\nimport ThumbnailCanvasGrouping from '../containers/ThumbnailCanvasGrouping';\nimport ns from '../config/css-ns';\n/**\n */\n\nexport var ThumbnailNavigation = /*#__PURE__*/function (_Component) {\n  _inherits(ThumbnailNavigation, _Component);\n\n  var _super = _createSuper(ThumbnailNavigation);\n\n  /**\n   */\n  function ThumbnailNavigation(props) {\n    var _this;\n\n    _classCallCheck(this, ThumbnailNavigation);\n\n    _this = _super.call(this, props);\n    _this.scrollbarSize = 15;\n    _this.spacing = 8; // 2 * (2px margin + 2px border + 2px padding + 2px padding)\n\n    _this.calculateScaledSize = _this.calculateScaledSize.bind(_assertThisInitialized(_this));\n    _this.itemCount = _this.itemCount.bind(_assertThisInitialized(_this));\n    _this.gridRef = /*#__PURE__*/React.createRef();\n    return _this;\n  }\n  /**\n   * If the view has changed and the thumbnailNavigation is open, recompute all\n   * of the grids\n   */\n\n\n  _createClass(ThumbnailNavigation, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props = this.props,\n          canvasIndex = _this$props.canvasIndex,\n          position = _this$props.position,\n          view = _this$props.view;\n\n      if (prevProps.view !== view && position !== 'off') {\n        this.gridRef.current.resetAfterIndex(0);\n      }\n\n      if (prevProps.canvasIndex !== canvasIndex) {\n        var index = canvasIndex;\n        if (view === 'book') index = Math.ceil(index / 2);\n        this.gridRef.current.scrollToItem(index, 'center');\n      }\n    }\n    /**\n     * When on right, row height\n     * When on bottom, column width\n     */\n\n  }, {\n    key: \"calculateScaledSize\",\n    value: function calculateScaledSize(index) {\n      var _this$props2 = this.props,\n          thumbnailNavigation = _this$props2.thumbnailNavigation,\n          canvasGroupings = _this$props2.canvasGroupings,\n          position = _this$props2.position;\n      var canvases = canvasGroupings[index] || [];\n      var world = new CanvasWorld(canvases);\n      var bounds = world.worldBounds();\n\n      switch (position) {\n        case 'far-right':\n          {\n            var calc = Math.floor(this.calculatingWidth(canvases.length) * bounds[3] / bounds[2]);\n            if (!Number.isInteger(calc)) return thumbnailNavigation.width + this.spacing;\n            return calc + this.spacing;\n          }\n        // Default case bottom\n\n        default:\n          {\n            if (bounds[3] === 0) return thumbnailNavigation.width + this.spacing;\n\n            var _calc = Math.ceil((thumbnailNavigation.height - this.scrollbarSize - this.spacing - 4) * bounds[2] / bounds[3]);\n\n            return _calc;\n          }\n      }\n    }\n    /** */\n\n  }, {\n    key: \"calculatingWidth\",\n    value: function calculatingWidth(canvasesLength) {\n      var thumbnailNavigation = this.props.thumbnailNavigation;\n\n      if (canvasesLength === 1) {\n        return thumbnailNavigation.width;\n      }\n\n      return thumbnailNavigation.width * 2;\n    }\n    /** */\n\n  }, {\n    key: \"rightWidth\",\n    value: function rightWidth() {\n      var _this$props3 = this.props,\n          view = _this$props3.view,\n          thumbnailNavigation = _this$props3.thumbnailNavigation;\n\n      switch (view) {\n        case 'book':\n          return thumbnailNavigation.width * 2;\n\n        default:\n          return thumbnailNavigation.width;\n      }\n    }\n    /** */\n\n  }, {\n    key: \"style\",\n    value: function style() {\n      var _this$props4 = this.props,\n          position = _this$props4.position,\n          thumbnailNavigation = _this$props4.thumbnailNavigation;\n\n      switch (position) {\n        case 'far-right':\n          return {\n            height: '100%',\n            minHeight: 0,\n            width: \"\".concat(this.rightWidth() + this.scrollbarSize + this.spacing, \"px\")\n          };\n        // Default case bottom\n\n        default:\n          return {\n            height: \"\".concat(thumbnailNavigation.height, \"px\"),\n            width: '100%'\n          };\n      }\n    }\n    /** */\n\n  }, {\n    key: \"areaHeight\",\n    value: function areaHeight(height) {\n      var _this$props5 = this.props,\n          position = _this$props5.position,\n          thumbnailNavigation = _this$props5.thumbnailNavigation;\n\n      switch (position) {\n        case 'far-right':\n          return height;\n        // Default case bottom\n\n        default:\n          return thumbnailNavigation.height;\n      }\n    }\n    /** */\n\n  }, {\n    key: \"itemCount\",\n    value: function itemCount() {\n      var canvasGroupings = this.props.canvasGroupings;\n      return canvasGroupings.length;\n    }\n    /**\n     * Renders things\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props6 = this.props,\n          t = _this$props6.t,\n          canvasGroupings = _this$props6.canvasGroupings,\n          classes = _this$props6.classes,\n          position = _this$props6.position,\n          thumbnailNavigation = _this$props6.thumbnailNavigation,\n          viewingDirection = _this$props6.viewingDirection,\n          windowId = _this$props6.windowId;\n\n      if (position === 'off') {\n        return /*#__PURE__*/React.createElement(React.Fragment, null);\n      }\n\n      var htmlDir = viewingDirection === 'right-to-left' ? 'rtl' : 'ltr';\n      var itemData = {\n        canvasGroupings: canvasGroupings,\n        height: thumbnailNavigation.height - this.spacing - this.scrollbarSize,\n        position: position,\n        windowId: windowId\n      };\n      return /*#__PURE__*/React.createElement(Paper, {\n        className: classNames(ns('thumb-navigation'), classes.thumbNavigation),\n        \"aria-label\": t('thumbnailNavigation'),\n        square: true,\n        elevation: 0,\n        style: this.style(),\n        tabIndex: 0,\n        role: \"grid\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        role: \"row\",\n        style: {\n          height: '100%',\n          width: '100%'\n        }\n      }, /*#__PURE__*/React.createElement(AutoSizer, {\n        defaultHeight: 100,\n        defaultWidth: 400\n      }, function (_ref) {\n        var height = _ref.height,\n            width = _ref.width;\n        return /*#__PURE__*/React.createElement(List, {\n          direction: htmlDir,\n          height: _this2.areaHeight(height),\n          itemCount: _this2.itemCount(),\n          itemSize: _this2.calculateScaledSize,\n          width: width,\n          layout: position === 'far-bottom' ? 'horizontal' : 'vertical',\n          itemData: itemData,\n          ref: _this2.gridRef\n        }, ThumbnailCanvasGrouping);\n      })));\n    }\n  }]);\n\n  return ThumbnailNavigation;\n}(Component);\nThumbnailNavigation.defaultProps = {\n  view: undefined,\n  viewingDirection: ''\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component, Fragment } from 'react';\n\n/** */\nexport var VideoViewer = /*#__PURE__*/function (_Component) {\n  _inherits(VideoViewer, _Component);\n\n  var _super = _createSuper(VideoViewer);\n\n  function VideoViewer() {\n    _classCallCheck(this, VideoViewer);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(VideoViewer, [{\n    key: \"render\",\n\n    /* eslint-disable jsx-a11y/media-has-caption */\n\n    /** */\n    value: function render() {\n      var _this$props = this.props,\n          captions = _this$props.captions,\n          classes = _this$props.classes,\n          videoOptions = _this$props.videoOptions,\n          videoResources = _this$props.videoResources;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.container\n      }, /*#__PURE__*/React.createElement(\"video\", Object.assign({\n        className: classes.video\n      }, videoOptions), videoResources.map(function (video) {\n        return /*#__PURE__*/React.createElement(Fragment, {\n          key: video.id\n        }, /*#__PURE__*/React.createElement(\"source\", {\n          src: video.id,\n          type: video.getFormat()\n        }));\n      }), captions.map(function (caption) {\n        return /*#__PURE__*/React.createElement(Fragment, {\n          key: caption.id\n        }, /*#__PURE__*/React.createElement(\"track\", {\n          src: caption.id,\n          label: caption.getDefaultLabel(),\n          srcLang: caption.getProperty('language')\n        }));\n      })));\n    }\n    /* eslint-enable jsx-a11y/media-has-caption */\n\n  }]);\n\n  return VideoViewer;\n}(Component);\nVideoViewer.defaultProps = {\n  captions: [],\n  videoOptions: {},\n  videoResources: []\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport classNames from 'classnames';\nimport ns from '../config/css-ns';\n/**\n *\n */\n\nexport var ViewerInfo = /*#__PURE__*/function (_Component) {\n  _inherits(ViewerInfo, _Component);\n\n  var _super = _createSuper(ViewerInfo);\n\n  function ViewerInfo() {\n    _classCallCheck(this, ViewerInfo);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(ViewerInfo, [{\n    key: \"render\",\n\n    /** */\n    value: function render() {\n      var _this$props = this.props,\n          canvasCount = _this$props.canvasCount,\n          canvasIndex = _this$props.canvasIndex,\n          canvasLabel = _this$props.canvasLabel,\n          classes = _this$props.classes,\n          t = _this$props.t;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: classNames(ns('osd-info'), classes.osdInfo)\n      }, /*#__PURE__*/React.createElement(Typography, {\n        display: \"inline\",\n        variant: \"caption\",\n        className: ns('canvas-count')\n      }, t('pagination', {\n        current: canvasIndex + 1,\n        total: canvasCount\n      })), /*#__PURE__*/React.createElement(Typography, {\n        display: \"inline\",\n        variant: \"caption\",\n        className: ns('canvas-label')\n      }, canvasLabel && \" \\u2022 \".concat(canvasLabel)));\n    }\n  }]);\n\n  return ViewerInfo;\n}(Component);\nViewerInfo.defaultProps = {\n  canvasLabel: undefined,\n  t: function t() {}\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport NavigationIcon from '@material-ui/icons/PlayCircleOutlineSharp';\nimport classNames from 'classnames';\nimport MiradorMenuButton from '../containers/MiradorMenuButton';\nimport ns from '../config/css-ns';\n/**\n */\n\nexport var ViewerNavigation = /*#__PURE__*/function (_Component) {\n  _inherits(ViewerNavigation, _Component);\n\n  var _super = _createSuper(ViewerNavigation);\n\n  function ViewerNavigation() {\n    _classCallCheck(this, ViewerNavigation);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(ViewerNavigation, [{\n    key: \"render\",\n\n    /**\n     * Renders things\n     */\n    value: function render() {\n      var _this$props = this.props,\n          hasNextCanvas = _this$props.hasNextCanvas,\n          hasPreviousCanvas = _this$props.hasPreviousCanvas,\n          setNextCanvas = _this$props.setNextCanvas,\n          setPreviousCanvas = _this$props.setPreviousCanvas,\n          t = _this$props.t,\n          classes = _this$props.classes,\n          viewingDirection = _this$props.viewingDirection;\n      var htmlDir = 'ltr';\n      var previousIconStyle = {};\n      var nextIconStyle = {};\n\n      switch (viewingDirection) {\n        case 'top-to-bottom':\n          previousIconStyle = {\n            transform: 'rotate(270deg)'\n          };\n          nextIconStyle = {\n            transform: 'rotate(90deg)'\n          };\n          break;\n\n        case 'bottom-to-top':\n          previousIconStyle = {\n            transform: 'rotate(90deg)'\n          };\n          nextIconStyle = {\n            transform: 'rotate(270deg)'\n          };\n          break;\n\n        case 'right-to-left':\n          htmlDir = 'rtl';\n          previousIconStyle = {};\n          nextIconStyle = {\n            transform: 'rotate(180deg)'\n          };\n          break;\n\n        default:\n          previousIconStyle = {\n            transform: 'rotate(180deg)'\n          };\n          nextIconStyle = {};\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: classNames(ns('osd-navigation'), classes.osdNavigation),\n        dir: htmlDir\n      }, /*#__PURE__*/React.createElement(MiradorMenuButton, {\n        \"aria-label\": t('previousCanvas'),\n        className: ns('previous-canvas-button'),\n        disabled: !hasPreviousCanvas,\n        onClick: function onClick() {\n          hasPreviousCanvas && setPreviousCanvas();\n        }\n      }, /*#__PURE__*/React.createElement(NavigationIcon, {\n        style: previousIconStyle\n      })), /*#__PURE__*/React.createElement(MiradorMenuButton, {\n        \"aria-label\": t('nextCanvas'),\n        className: ns('next-canvas-button'),\n        disabled: !hasNextCanvas,\n        onClick: function onClick() {\n          hasNextCanvas && setNextCanvas();\n        }\n      }, /*#__PURE__*/React.createElement(NavigationIcon, {\n        style: nextIconStyle\n      })));\n    }\n  }]);\n\n  return ViewerNavigation;\n}(Component);\nViewerNavigation.defaultProps = {\n  hasNextCanvas: false,\n  hasPreviousCanvas: false,\n  setNextCanvas: function setNextCanvas() {},\n  setPreviousCanvas: function setPreviousCanvas() {},\n  viewingDirection: ''\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport cn from 'classnames';\nimport Paper from '@material-ui/core/Paper';\nimport { MosaicWindowContext } from 'react-mosaic-component/lib/contextTypes';\nimport ns from '../config/css-ns';\nimport WindowTopBar from '../containers/WindowTopBar';\nimport PrimaryWindow from '../containers/PrimaryWindow';\nimport CompanionArea from '../containers/CompanionArea';\nimport MinimalWindow from '../containers/MinimalWindow';\nimport ErrorContent from '../containers/ErrorContent';\nimport IIIFAuthentication from '../containers/IIIFAuthentication';\nimport { PluginHook } from './PluginHook';\n/**\n * Represents a Window in the mirador workspace\n * @param {object} window\n */\n\nexport var Window = /*#__PURE__*/function (_Component) {\n  _inherits(Window, _Component);\n\n  var _super = _createSuper(Window);\n\n  /** */\n  function Window(props) {\n    var _this;\n\n    _classCallCheck(this, Window);\n\n    _this = _super.call(this, props);\n    _this.state = {};\n    return _this;\n  }\n  /** */\n\n\n  _createClass(Window, [{\n    key: \"wrappedTopBar\",\n\n    /**\n     * wrappedTopBar - will conditionally wrap a WindowTopBar for needed\n     * additional functionality based on workspace type\n     */\n    value: function wrappedTopBar() {\n      var _this$props = this.props,\n          windowId = _this$props.windowId,\n          workspaceType = _this$props.workspaceType,\n          windowDraggable = _this$props.windowDraggable;\n      var topBar = /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(WindowTopBar, {\n        windowId: windowId,\n        windowDraggable: windowDraggable\n      }), /*#__PURE__*/React.createElement(IIIFAuthentication, {\n        windowId: windowId\n      }));\n\n      if (workspaceType === 'mosaic' && windowDraggable) {\n        var mosaicWindowActions = this.context.mosaicWindowActions;\n        return mosaicWindowActions.connectDragSource(topBar);\n      }\n\n      return topBar;\n    }\n    /**\n     * Renders things\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          focusWindow = _this$props2.focusWindow,\n          label = _this$props2.label,\n          isFetching = _this$props2.isFetching,\n          maximized = _this$props2.maximized,\n          sideBarOpen = _this$props2.sideBarOpen,\n          view = _this$props2.view,\n          windowId = _this$props2.windowId,\n          classes = _this$props2.classes,\n          t = _this$props2.t,\n          manifestError = _this$props2.manifestError;\n      var _this$state = this.state,\n          error = _this$state.error,\n          hasError = _this$state.hasError;\n\n      if (hasError) {\n        return /*#__PURE__*/React.createElement(MinimalWindow, {\n          windowId: windowId\n        }, /*#__PURE__*/React.createElement(ErrorContent, {\n          error: error,\n          windowId: windowId\n        }));\n      }\n\n      return /*#__PURE__*/React.createElement(Paper, {\n        onFocus: focusWindow,\n        component: \"section\",\n        elevation: 1,\n        id: windowId,\n        className: cn(classes.window, ns('window'), maximized ? classes.maximized : null),\n        \"aria-label\": t('window', {\n          label: label\n        })\n      }, this.wrappedTopBar(), manifestError && /*#__PURE__*/React.createElement(ErrorContent, {\n        error: {\n          stack: manifestError\n        },\n        windowId: windowId\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.middle\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.middleLeft\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.primaryWindow\n      }, /*#__PURE__*/React.createElement(PrimaryWindow, {\n        view: view,\n        windowId: windowId,\n        isFetching: isFetching,\n        sideBarOpen: sideBarOpen\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.companionAreaBottom\n      }, /*#__PURE__*/React.createElement(CompanionArea, {\n        windowId: windowId,\n        position: \"bottom\"\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.companionAreaRight\n      }, /*#__PURE__*/React.createElement(CompanionArea, {\n        windowId: windowId,\n        position: \"right\"\n      }), /*#__PURE__*/React.createElement(CompanionArea, {\n        windowId: windowId,\n        position: \"far-right\"\n      }))), /*#__PURE__*/React.createElement(CompanionArea, {\n        windowId: windowId,\n        position: \"far-bottom\"\n      }), /*#__PURE__*/React.createElement(PluginHook, this.props));\n    }\n  }], [{\n    key: \"getDerivedStateFromError\",\n    value: function getDerivedStateFromError(error) {\n      // Update state so the next render will show the fallback UI.\n      return {\n        error: error,\n        hasError: true\n      };\n    }\n  }]);\n\n  return Window;\n}(Component);\nWindow.contextType = MosaicWindowContext;\nWindow.defaultProps = {\n  classes: {},\n  focusWindow: function focusWindow() {},\n  isFetching: false,\n  label: null,\n  manifestError: null,\n  maximized: false,\n  sideBarOpen: false,\n  view: undefined,\n  windowDraggable: null,\n  workspaceType: null\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\nimport Collapse from '@material-ui/core/Collapse';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Typography from '@material-ui/core/Typography';\nimport LockIcon from '@material-ui/icons/LockSharp';\nimport SanitizedHtml from '../containers/SanitizedHtml';\nimport { PluginHook } from './PluginHook';\n/** */\n\nexport var WindowAuthenticationBar = /*#__PURE__*/function (_Component) {\n  _inherits(WindowAuthenticationBar, _Component);\n\n  var _super = _createSuper(WindowAuthenticationBar);\n\n  /** */\n  function WindowAuthenticationBar(props) {\n    var _this;\n\n    _classCallCheck(this, WindowAuthenticationBar);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      open: false\n    };\n    _this.setOpen = _this.setOpen.bind(_assertThisInitialized(_this));\n    _this.onSubmit = _this.onSubmit.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /** */\n\n\n  _createClass(WindowAuthenticationBar, [{\n    key: \"onSubmit\",\n    value: function onSubmit() {\n      var onConfirm = this.props.onConfirm;\n      this.setOpen(false);\n      onConfirm();\n    }\n    /** Toggle the full description */\n\n  }, {\n    key: \"setOpen\",\n    value: function setOpen(open) {\n      this.setState(function (state) {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          open: open\n        });\n      });\n    }\n    /** */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          confirmButton = _this$props.confirmButton,\n          continueLabel = _this$props.continueLabel,\n          header = _this$props.header,\n          description = _this$props.description,\n          icon = _this$props.icon,\n          label = _this$props.label,\n          t = _this$props.t,\n          ruleSet = _this$props.ruleSet,\n          hasLogoutService = _this$props.hasLogoutService,\n          status = _this$props.status,\n          ConfirmProps = _this$props.ConfirmProps;\n      if (status === 'ok' && !hasLogoutService) return null;\n      var open = this.state.open;\n      var button = /*#__PURE__*/React.createElement(Button, Object.assign({\n        onClick: this.onSubmit,\n        className: classes.buttonInvert,\n        color: \"secondary\"\n      }, ConfirmProps), confirmButton || t('login'));\n\n      if (!description && !header) {\n        return /*#__PURE__*/React.createElement(Paper, {\n          square: true,\n          elevation: 4,\n          color: \"secondary\",\n          classes: {\n            root: classes.paper\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: classes.topBar\n        }, icon || /*#__PURE__*/React.createElement(LockIcon, {\n          className: classes.icon\n        }), /*#__PURE__*/React.createElement(Typography, {\n          className: classes.label,\n          component: \"h3\",\n          variant: \"body1\",\n          color: \"inherit\"\n        }, ruleSet ? /*#__PURE__*/React.createElement(SanitizedHtml, {\n          htmlString: label,\n          ruleSet: ruleSet\n        }) : label), /*#__PURE__*/React.createElement(PluginHook, this.props), button));\n      }\n\n      return /*#__PURE__*/React.createElement(Paper, {\n        square: true,\n        elevation: 4,\n        color: \"secondary\",\n        classes: {\n          root: classes.paper\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        fullWidth: true,\n        className: classes.topBar,\n        onClick: function onClick() {\n          return _this2.setOpen(true);\n        },\n        component: \"div\",\n        color: \"inherit\"\n      }, icon || /*#__PURE__*/React.createElement(LockIcon, {\n        className: classes.icon\n      }), /*#__PURE__*/React.createElement(Typography, {\n        className: classes.label,\n        component: \"h3\",\n        variant: \"body1\",\n        color: \"inherit\"\n      }, ruleSet ? /*#__PURE__*/React.createElement(SanitizedHtml, {\n        htmlString: label,\n        ruleSet: ruleSet\n      }) : label), /*#__PURE__*/React.createElement(PluginHook, this.props), /*#__PURE__*/React.createElement(\"span\", {\n        className: classes.fauxButton\n      }, !open && /*#__PURE__*/React.createElement(Typography, {\n        variant: \"button\",\n        color: \"inherit\"\n      }, continueLabel || t('continue')))), /*#__PURE__*/React.createElement(Collapse, {\n        \"in\": open,\n        onClose: function onClose() {\n          return _this2.setOpen(false);\n        }\n      }, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"body1\",\n        color: \"inherit\",\n        className: classes.expanded\n      }, ruleSet ? /*#__PURE__*/React.createElement(SanitizedHtml, {\n        htmlString: header,\n        ruleSet: ruleSet\n      }) : header, header && description ? ': ' : '', ruleSet ? /*#__PURE__*/React.createElement(SanitizedHtml, {\n        htmlString: description,\n        ruleSet: ruleSet\n      }) : description), /*#__PURE__*/React.createElement(DialogActions, null, /*#__PURE__*/React.createElement(Button, {\n        onClick: function onClick() {\n          return _this2.setOpen(false);\n        },\n        color: \"inherit\"\n      }, t('cancel')), button)));\n    }\n  }]);\n\n  return WindowAuthenticationBar;\n}(Component);\nWindowAuthenticationBar.defaultProps = {\n  confirmButton: undefined,\n  ConfirmProps: {},\n  continueLabel: undefined,\n  description: undefined,\n  hasLogoutService: true,\n  header: undefined,\n  icon: undefined,\n  ruleSet: 'iiif',\n  status: undefined,\n  t: function t(k) {\n    return k;\n  }\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport ZoomControls from '../containers/ZoomControls';\nimport ViewerInfo from '../containers/ViewerInfo';\nimport ViewerNavigation from '../containers/ViewerNavigation';\nimport ns from '../config/css-ns';\nimport { PluginHook } from './PluginHook';\n/**\n * Represents the viewer controls in the mirador workspace.\n */\n\nexport var WindowCanvasNavigationControls = /*#__PURE__*/function (_Component) {\n  _inherits(WindowCanvasNavigationControls, _Component);\n\n  var _super = _createSuper(WindowCanvasNavigationControls);\n\n  function WindowCanvasNavigationControls() {\n    _classCallCheck(this, WindowCanvasNavigationControls);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(WindowCanvasNavigationControls, [{\n    key: \"canvasNavControlsAreStacked\",\n\n    /**\n     * Determine if canvasNavControls are stacked (based on a hard-coded width)\n    */\n    value: function canvasNavControlsAreStacked() {\n      var size = this.props.size;\n      return size && size.width && size.width <= 253;\n    }\n    /** */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          visible = _this$props.visible,\n          windowId = _this$props.windowId,\n          zoomToWorld = _this$props.zoomToWorld;\n      if (!visible) return /*#__PURE__*/React.createElement(Typography, {\n        variant: \"srOnly\",\n        component: \"div\"\n      }, /*#__PURE__*/React.createElement(ViewerInfo, {\n        windowId: windowId\n      }));\n      return /*#__PURE__*/React.createElement(Paper, {\n        square: true,\n        className: classNames(classes.controls, ns('canvas-nav'), classes.canvasNav, this.canvasNavControlsAreStacked() ? ns('canvas-nav-stacked') : null, this.canvasNavControlsAreStacked() ? classes.canvasNavStacked : null),\n        elevation: 0,\n        onKeyUp: function onKeyUp(e) {\n          var _this$props2 = _this.props,\n              hasPreviousCanvas = _this$props2.hasPreviousCanvas,\n              setPreviousCanvas = _this$props2.setPreviousCanvas,\n              hasNextCanvas = _this$props2.hasNextCanvas,\n              setNextCanvas = _this$props2.setNextCanvas,\n              viewingDirection = _this$props2.viewingDirection;\n\n          if (viewingDirection === 'left-to-right' && e.key === 'ArrowLeft' || viewingDirection === 'right-to-left' && e.key === 'ArrowRight' || !viewingDirection && e.key === 'ArrowRight') {\n            hasPreviousCanvas && setPreviousCanvas();\n          }\n\n          if (viewingDirection === 'left-to-right' && e.key === 'ArrowRight' || viewingDirection === 'right-to-left' && e.key === 'ArrowLeft' || !viewingDirection && e.key === 'ArrowLeft') {\n            hasNextCanvas && setNextCanvas();\n          }\n        }\n      }, /*#__PURE__*/React.createElement(ZoomControls, {\n        displayDivider: !this.canvasNavControlsAreStacked(),\n        windowId: windowId,\n        zoomToWorld: zoomToWorld\n      }), /*#__PURE__*/React.createElement(ViewerNavigation, {\n        windowId: windowId\n      }), /*#__PURE__*/React.createElement(ViewerInfo, {\n        windowId: windowId\n      }), /*#__PURE__*/React.createElement(PluginHook, this.props));\n    }\n  }]);\n\n  return WindowCanvasNavigationControls;\n}(Component);\nWindowCanvasNavigationControls.defaultProps = {\n  classes: {},\n  hasNextCanvas: false,\n  hasPreviousCanvas: false,\n  setNextCanvas: function setNextCanvas() {},\n  setPreviousCanvas: function setPreviousCanvas() {},\n  viewingDirection: '',\n  visible: true\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport ns from '../config/css-ns';\n/**\n */\n\nexport var WindowList = /*#__PURE__*/function (_Component) {\n  _inherits(WindowList, _Component);\n\n  var _super = _createSuper(WindowList);\n\n  function WindowList() {\n    _classCallCheck(this, WindowList);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(WindowList, [{\n    key: \"titleContent\",\n\n    /**\n     * Get the title for a window from its manifest title\n     * @private\n     */\n    value: function titleContent(windowId) {\n      var _this$props = this.props,\n          titles = _this$props.titles,\n          t = _this$props.t;\n      return titles[windowId] || t('untitled');\n    }\n    /**\n     * render\n     * @return\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      var _this$props2 = this.props,\n          containerId = _this$props2.containerId,\n          handleClose = _this$props2.handleClose,\n          anchorEl = _this$props2.anchorEl,\n          windowIds = _this$props2.windowIds,\n          focusWindow = _this$props2.focusWindow,\n          t = _this$props2.t;\n      return /*#__PURE__*/React.createElement(Menu, {\n        anchorOrigin: {\n          horizontal: 'right',\n          vertical: 'top'\n        },\n        transformOrigin: {\n          horizontal: 'left',\n          vertical: 'top'\n        },\n        id: \"window-list-menu\",\n        container: document.querySelector(\"#\".concat(containerId, \" .\").concat(ns('viewer'))),\n        disableAutoFocusItem: true,\n        anchorEl: anchorEl,\n        open: Boolean(anchorEl),\n        onClose: handleClose,\n        onEntering: WindowList.focus2ndListIitem\n      }, /*#__PURE__*/React.createElement(ListSubheader, {\n        role: \"presentation\",\n        selected: false,\n        disabled: true,\n        tabIndex: \"-1\"\n      }, t('openWindows')), windowIds.map(function (windowId, i) {\n        return /*#__PURE__*/React.createElement(MenuItem, {\n          key: windowId,\n          onClick: function onClick(e) {\n            focusWindow(windowId, true);\n            handleClose(e);\n          }\n        }, /*#__PURE__*/React.createElement(ListItemText, {\n          primaryTypographyProps: {\n            variant: 'body1'\n          }\n        }, _this.titleContent(windowId)));\n      }));\n    }\n  }], [{\n    key: \"focus2ndListIitem\",\n\n    /**\n     * Given the menuElement passed in by the onEntering callback,\n     * find the 2nd ListItem element (avoiding the header) and focus it\n    */\n    value: function focus2ndListIitem(menuElement) {\n      if (!menuElement.querySelectorAll('li') || menuElement.querySelectorAll('li').length < 2) return;\n      menuElement.querySelectorAll('li')[1].focus(); // The 2nd LI\n    }\n  }]);\n\n  return WindowList;\n}(Component);\nWindowList.defaultProps = {\n  anchorEl: null,\n  t: function t(key) {\n    return key;\n  },\n  titles: {}\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport BookmarksIcon from '@material-ui/icons/BookmarksSharp';\nimport classNames from 'classnames';\nimport WindowList from '../containers/WindowList';\nimport MiradorMenuButton from '../containers/MiradorMenuButton';\n/**\n * WindowListButton ~\n*/\n\nexport var WindowListButton = /*#__PURE__*/function (_Component) {\n  _inherits(WindowListButton, _Component);\n\n  var _super = _createSuper(WindowListButton);\n\n  /** */\n  function WindowListButton(props) {\n    var _this;\n\n    _classCallCheck(this, WindowListButton);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      windowListAnchor: null\n    };\n    _this.handleClose = _this.handleClose.bind(_assertThisInitialized(_this));\n    _this.handleOpen = _this.handleOpen.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /** Set the windowListAnchor to null on window close */\n\n\n  _createClass(WindowListButton, [{\n    key: \"handleClose\",\n    value: function handleClose() {\n      this.setState({\n        windowListAnchor: null\n      });\n    }\n    /** Set the windowListAnchor to the event's current target  */\n\n  }, {\n    key: \"handleOpen\",\n    value: function handleOpen(event) {\n      this.setState({\n        windowListAnchor: event.currentTarget\n      });\n    }\n    /**\n     * Returns the rendered component\n    */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          disabled = _this$props.disabled,\n          t = _this$props.t,\n          windowCount = _this$props.windowCount;\n      var windowListAnchor = this.state.windowListAnchor;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MiradorMenuButton, {\n        \"aria-haspopup\": \"true\",\n        \"aria-label\": t('listAllOpenWindows'),\n        \"aria-owns\": windowListAnchor ? 'window-list' : null,\n        className: classNames(classes.ctrlBtn, windowListAnchor ? classes.ctrlBtnSelected : null),\n        disabled: disabled,\n        badge: true,\n        BadgeProps: {\n          badgeContent: windowCount,\n          classes: {\n            badge: classes.badge\n          }\n        },\n        onClick: function onClick(e) {\n          return _this2.handleOpen(e);\n        }\n      }, /*#__PURE__*/React.createElement(BookmarksIcon, null)), Boolean(windowListAnchor) && /*#__PURE__*/React.createElement(WindowList, {\n        anchorEl: windowListAnchor,\n        id: \"window-list\",\n        open: Boolean(windowListAnchor),\n        handleClose: this.handleClose\n      }));\n    }\n  }]);\n\n  return WindowListButton;\n}(Component);\nWindowListButton.defaultProps = {\n  classes: {},\n  disabled: false\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport Drawer from '@material-ui/core/Drawer';\nimport WindowSideBarButtons from '../containers/WindowSideBarButtons';\n/**\n * WindowSideBar\n */\n\nexport var WindowSideBar = /*#__PURE__*/function (_Component) {\n  _inherits(WindowSideBar, _Component);\n\n  var _super = _createSuper(WindowSideBar);\n\n  function WindowSideBar() {\n    _classCallCheck(this, WindowSideBar);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(WindowSideBar, [{\n    key: \"render\",\n\n    /**\n     * render\n     * @return\n     */\n    value: function render() {\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          direction = _this$props.direction,\n          t = _this$props.t,\n          windowId = _this$props.windowId,\n          sideBarOpen = _this$props.sideBarOpen;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Drawer, {\n        variant: \"persistent\",\n        className: classNames(classes.drawer),\n        classes: {\n          paper: classNames(classes.paper)\n        },\n        anchor: direction === 'rtl' ? 'right' : 'left',\n        PaperProps: {\n          'aria-label': t('sidebarPanelsNavigation'),\n          component: 'nav',\n          style: {\n            height: '100%',\n            position: 'relative'\n          }\n        },\n        SlideProps: {\n          direction: direction === 'rtl' ? 'left' : 'right',\n          mountOnEnter: true,\n          unmountOnExit: true\n        },\n        open: sideBarOpen\n      }, /*#__PURE__*/React.createElement(WindowSideBarButtons, {\n        windowId: windowId\n      })));\n    }\n  }]);\n\n  return WindowSideBar;\n}(Component);\nWindowSideBar.defaultProps = {\n  sideBarOpen: false\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport AnnotationSettings from '../containers/AnnotationSettings';\nimport CanvasAnnotations from '../containers/CanvasAnnotations';\nimport CompanionWindow from '../containers/CompanionWindow';\nimport ns from '../config/css-ns';\n/**\n * WindowSideBarAnnotationsPanel ~\n*/\n\nexport var WindowSideBarAnnotationsPanel = /*#__PURE__*/function (_Component) {\n  _inherits(WindowSideBarAnnotationsPanel, _Component);\n\n  var _super = _createSuper(WindowSideBarAnnotationsPanel);\n\n  /** */\n  function WindowSideBarAnnotationsPanel(props) {\n    var _this;\n\n    _classCallCheck(this, WindowSideBarAnnotationsPanel);\n\n    _this = _super.call(this, props);\n    _this.containerRef = /*#__PURE__*/React.createRef();\n    return _this;\n  }\n  /**\n   * Returns the rendered component\n  */\n\n\n  _createClass(WindowSideBarAnnotationsPanel, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          annotationCount = _this$props.annotationCount,\n          classes = _this$props.classes,\n          canvasIds = _this$props.canvasIds,\n          t = _this$props.t,\n          windowId = _this$props.windowId,\n          id = _this$props.id;\n      return /*#__PURE__*/React.createElement(CompanionWindow, {\n        title: t('annotations'),\n        paperClassName: ns('window-sidebar-annotation-panel'),\n        windowId: windowId,\n        id: id,\n        ref: this.containerRef,\n        otherRef: this.containerRef,\n        titleControls: /*#__PURE__*/React.createElement(AnnotationSettings, {\n          windowId: windowId\n        })\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.section\n      }, /*#__PURE__*/React.createElement(Typography, {\n        component: \"p\",\n        variant: \"subtitle2\"\n      }, t('showingNumAnnotations', {\n        count: annotationCount,\n        number: annotationCount\n      }))), canvasIds.map(function (canvasId, index) {\n        return /*#__PURE__*/React.createElement(CanvasAnnotations, {\n          canvasId: canvasId,\n          containerRef: _this2.containerRef,\n          key: canvasId,\n          index: index,\n          totalSize: canvasIds.length,\n          windowId: windowId\n        });\n      }));\n    }\n  }]);\n\n  return WindowSideBarAnnotationsPanel;\n}(Component);\nWindowSideBarAnnotationsPanel.defaultProps = {\n  canvasIds: [],\n  t: function t(key) {\n    return key;\n  }\n};","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n/**\n * Render the canvas index svg\n */\n\nexport default function CanvasIndexIcon(props) {\n  return /*#__PURE__*/React.createElement(SvgIcon, props, /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"24\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6.924,21H21V19H6.924ZM3,17H21V15H3Zm3.924-4H21V11H6.924Zm0-4H21V7H6.924ZM3,3V5H21V3Z\"\n  })));\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Badge from '@material-ui/core/Badge';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport InfoIcon from '@material-ui/icons/InfoSharp';\nimport AnnotationIcon from '@material-ui/icons/CommentSharp';\nimport AttributionIcon from '@material-ui/icons/CopyrightSharp';\nimport LayersIcon from '@material-ui/icons/LayersSharp';\nimport SearchIcon from '@material-ui/icons/SearchSharp';\nimport CanvasIndexIcon from './icons/CanvasIndexIcon';\n/**\n *\n */\n\nexport var WindowSideBarButtons = /*#__PURE__*/function (_Component) {\n  _inherits(WindowSideBarButtons, _Component);\n\n  var _super = _createSuper(WindowSideBarButtons);\n\n  /** */\n  function WindowSideBarButtons(props) {\n    var _this;\n\n    _classCallCheck(this, WindowSideBarButtons);\n\n    _this = _super.call(this, props);\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /**\n   * @param {object} event the change event\n   * @param {string} value the tab's value\n  */\n\n\n  _createClass(WindowSideBarButtons, [{\n    key: \"handleChange\",\n    value: function handleChange(event, value) {\n      var addCompanionWindow = this.props.addCompanionWindow;\n      addCompanionWindow(value);\n    }\n    /**\n     * render\n     *\n     * @return {type}  description\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          hasAnnotations = _this$props.hasAnnotations,\n          hasAnyAnnotations = _this$props.hasAnyAnnotations,\n          hasAnyLayers = _this$props.hasAnyLayers,\n          hasCurrentLayers = _this$props.hasCurrentLayers,\n          hasSearchResults = _this$props.hasSearchResults,\n          hasSearchService = _this$props.hasSearchService,\n          panels = _this$props.panels,\n          PluginComponents = _this$props.PluginComponents,\n          sideBarPanel = _this$props.sideBarPanel,\n          t = _this$props.t;\n      /** */\n\n      var TabButton = function TabButton(props) {\n        return /*#__PURE__*/React.createElement(Tooltip, {\n          title: t('openCompanionWindow', {\n            context: props.value\n          })\n        }, /*#__PURE__*/React.createElement(Tab, Object.assign({}, props, {\n          classes: {\n            root: classes.tab,\n            selected: classes.tabSelected\n          },\n          \"aria-label\": t('openCompanionWindow', {\n            context: props.value\n          }),\n          disableRipple: true,\n          onKeyUp: _this2.handleKeyUp\n        })));\n      };\n\n      return /*#__PURE__*/React.createElement(Tabs, {\n        classes: {\n          flexContainer: classes.tabsFlexContainer,\n          indicator: classes.tabsIndicator\n        },\n        value: sideBarPanel === 'closed' ? false : sideBarPanel,\n        onChange: this.handleChange,\n        variant: \"fullWidth\",\n        indicatorColor: \"primary\",\n        textColor: \"primary\",\n        orientation: \"vertical\",\n        \"aria-orientation\": \"vertical\",\n        \"aria-label\": t('sidebarPanelsNavigation')\n      }, panels.info && /*#__PURE__*/React.createElement(TabButton, {\n        value: \"info\",\n        icon: /*#__PURE__*/React.createElement(InfoIcon, null)\n      }), panels.attribution && /*#__PURE__*/React.createElement(TabButton, {\n        value: \"attribution\",\n        icon: /*#__PURE__*/React.createElement(AttributionIcon, null)\n      }), panels.canvas && /*#__PURE__*/React.createElement(TabButton, {\n        value: \"canvas\",\n        icon: /*#__PURE__*/React.createElement(CanvasIndexIcon, null)\n      }), panels.annotations && (hasAnnotations || hasAnyAnnotations) && /*#__PURE__*/React.createElement(TabButton, {\n        value: \"annotations\",\n        icon: /*#__PURE__*/React.createElement(Badge, {\n          classes: {\n            badge: classes.badge\n          },\n          invisible: !hasAnnotations,\n          variant: \"dot\"\n        }, /*#__PURE__*/React.createElement(AnnotationIcon, null))\n      }), panels.search && hasSearchService && /*#__PURE__*/React.createElement(TabButton, {\n        value: \"search\",\n        icon: /*#__PURE__*/React.createElement(Badge, {\n          classes: {\n            badge: classes.badge\n          },\n          invisible: !hasSearchResults,\n          variant: \"dot\"\n        }, /*#__PURE__*/React.createElement(SearchIcon, null))\n      }), panels.layers && hasAnyLayers && /*#__PURE__*/React.createElement(TabButton, {\n        value: \"layers\",\n        icon: /*#__PURE__*/React.createElement(Badge, {\n          classes: {\n            badge: classes.badge\n          },\n          invisible: !hasCurrentLayers,\n          variant: \"dot\"\n        }, /*#__PURE__*/React.createElement(LayersIcon, null))\n      }), PluginComponents && PluginComponents.map(function (PluginComponent) {\n        return /*#__PURE__*/React.createElement(TabButton, {\n          key: PluginComponent.value,\n          value: PluginComponent.value,\n          icon: /*#__PURE__*/React.createElement(PluginComponent, null)\n        });\n      }));\n    }\n  }]);\n\n  return WindowSideBarButtons;\n}(Component);\nWindowSideBarButtons.defaultProps = {\n  classes: {},\n  hasAnnotations: false,\n  hasAnyAnnotations: false,\n  hasAnyLayers: false,\n  hasCurrentLayers: false,\n  hasSearchResults: false,\n  hasSearchService: false,\n  panels: [],\n  PluginComponents: null,\n  sideBarPanel: 'closed',\n  t: function t(key) {\n    return key;\n  }\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Button from '@material-ui/core/Button';\nimport ItemListIcon from '@material-ui/icons/ReorderSharp';\nimport TocIcon from '@material-ui/icons/SortSharp';\nimport ThumbnailListIcon from '@material-ui/icons/ViewListSharp';\nimport Typography from '@material-ui/core/Typography';\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForwardSharp';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport CompanionWindow from '../containers/CompanionWindow';\nimport SidebarIndexList from '../containers/SidebarIndexList';\nimport SidebarIndexTableOfContents from '../containers/SidebarIndexTableOfContents';\n/**\n * a panel showing the canvases for a given manifest\n */\n\nexport var WindowSideBarCanvasPanel = /*#__PURE__*/function (_Component) {\n  _inherits(WindowSideBarCanvasPanel, _Component);\n\n  var _super = _createSuper(WindowSideBarCanvasPanel);\n\n  /** */\n  function WindowSideBarCanvasPanel(props) {\n    var _this;\n\n    _classCallCheck(this, WindowSideBarCanvasPanel);\n\n    _this = _super.call(this, props);\n    _this.handleSequenceChange = _this.handleSequenceChange.bind(_assertThisInitialized(_this));\n    _this.handleVariantChange = _this.handleVariantChange.bind(_assertThisInitialized(_this));\n    _this.containerRef = /*#__PURE__*/React.createRef();\n    return _this;\n  }\n  /** */\n\n\n  _createClass(WindowSideBarCanvasPanel, [{\n    key: \"handleSequenceChange\",\n\n    /** @private */\n    value: function handleSequenceChange(event) {\n      var updateSequence = this.props.updateSequence;\n      updateSequence(event.target.value);\n    }\n    /** @private */\n\n  }, {\n    key: \"handleVariantChange\",\n    value: function handleVariantChange(event, value) {\n      var updateVariant = this.props.updateVariant;\n      updateVariant(value);\n    }\n    /**\n     * render\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          collection = _this$props.collection,\n          id = _this$props.id,\n          showMultipart = _this$props.showMultipart,\n          sequenceId = _this$props.sequenceId,\n          sequences = _this$props.sequences,\n          t = _this$props.t,\n          variant = _this$props.variant,\n          showToc = _this$props.showToc,\n          windowId = _this$props.windowId;\n      var listComponent;\n\n      if (variant === 'tableOfContents') {\n        listComponent = /*#__PURE__*/React.createElement(SidebarIndexTableOfContents, {\n          id: id,\n          containerRef: this.containerRef,\n          windowId: windowId\n        });\n      } else {\n        listComponent = /*#__PURE__*/React.createElement(SidebarIndexList, {\n          id: id,\n          containerRef: this.containerRef,\n          windowId: windowId\n        });\n      }\n\n      return /*#__PURE__*/React.createElement(CompanionWindow, {\n        title: t('canvasIndex'),\n        id: id,\n        windowId: windowId,\n        ref: this.containerRef,\n        otherRef: this.containerRef,\n        titleControls: /*#__PURE__*/React.createElement(React.Fragment, null, sequences && sequences.length > 1 && /*#__PURE__*/React.createElement(FormControl, null, /*#__PURE__*/React.createElement(Select, {\n          MenuProps: {\n            anchorOrigin: {\n              horizontal: 'left',\n              vertical: 'bottom'\n            },\n            getContentAnchorEl: null\n          },\n          displayEmpty: true,\n          value: sequenceId,\n          onChange: this.handleSequenceChange,\n          name: \"sequenceId\",\n          classes: {\n            select: classes.select\n          },\n          className: classes.selectEmpty\n        }, sequences.map(function (s, i) {\n          return /*#__PURE__*/React.createElement(MenuItem, {\n            value: s.id,\n            key: s.id\n          }, /*#__PURE__*/React.createElement(Typography, {\n            variant: \"body2\"\n          }, WindowSideBarCanvasPanel.getUseableLabel(s, i)));\n        }))), /*#__PURE__*/React.createElement(\"div\", {\n          className: classes[\"break\"]\n        }), /*#__PURE__*/React.createElement(Tabs, {\n          value: variant,\n          onChange: this.handleVariantChange,\n          variant: \"fullWidth\",\n          indicatorColor: \"primary\",\n          textColor: \"primary\"\n        }, showToc && /*#__PURE__*/React.createElement(Tooltip, {\n          title: t('tableOfContentsList'),\n          value: \"tableOfContents\"\n        }, /*#__PURE__*/React.createElement(Tab, {\n          className: classes.variantTab,\n          value: \"tableOfContents\",\n          \"aria-label\": t('tableOfContentsList'),\n          \"aria-controls\": \"tab-panel-\".concat(id),\n          icon: /*#__PURE__*/React.createElement(TocIcon, {\n            style: {\n              transform: 'scale(-1, 1)'\n            }\n          })\n        })), /*#__PURE__*/React.createElement(Tooltip, {\n          title: t('itemList'),\n          value: \"item\"\n        }, /*#__PURE__*/React.createElement(Tab, {\n          className: classes.variantTab,\n          value: \"item\",\n          \"aria-label\": t('itemList'),\n          \"aria-controls\": \"tab-panel-\".concat(id),\n          icon: /*#__PURE__*/React.createElement(ItemListIcon, null)\n        })), /*#__PURE__*/React.createElement(Tooltip, {\n          title: t('thumbnailList'),\n          value: \"thumbnail\"\n        }, /*#__PURE__*/React.createElement(Tab, {\n          className: classes.variantTab,\n          value: \"thumbnail\",\n          \"aria-label\": t('thumbnailList'),\n          \"aria-controls\": \"tab-panel-\".concat(id),\n          icon: /*#__PURE__*/React.createElement(ThumbnailListIcon, null)\n        }))))\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"tab-panel-\".concat(id)\n      }, collection && /*#__PURE__*/React.createElement(Button, {\n        fullWidth: true,\n        onClick: showMultipart,\n        endIcon: /*#__PURE__*/React.createElement(ArrowForwardIcon, null)\n      }, /*#__PURE__*/React.createElement(Typography, {\n        className: classes.collectionNavigationButton\n      }, WindowSideBarCanvasPanel.getUseableLabel(collection))), listComponent));\n    }\n  }], [{\n    key: \"getUseableLabel\",\n    value: function getUseableLabel(resource, index) {\n      return resource && resource.getLabel && resource.getLabel().length > 0 ? resource.getLabel().getValue() : resource.id;\n    }\n  }]);\n\n  return WindowSideBarCanvasPanel;\n}(Component);\nWindowSideBarCanvasPanel.defaultProps = {\n  collection: null,\n  sequenceId: null,\n  sequences: [],\n  showToc: false\n};","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuList from '@material-ui/core/MenuList';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Typography from '@material-ui/core/Typography';\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpwardSharp';\nimport CompanionWindow from '../containers/CompanionWindow';\nimport IIIFThumbnail from '../containers/IIIFThumbnail';\n/** */\n\nexport var WindowSideBarCollectionPanel = /*#__PURE__*/function (_Component) {\n  _inherits(WindowSideBarCollectionPanel, _Component);\n\n  var _super = _createSuper(WindowSideBarCollectionPanel);\n\n  function WindowSideBarCollectionPanel() {\n    _classCallCheck(this, WindowSideBarCollectionPanel);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(WindowSideBarCollectionPanel, [{\n    key: \"isMultipart\",\n\n    /** */\n    value: function isMultipart() {\n      var collection = this.props.collection;\n      if (!collection) return false;\n      var behaviors = collection.getProperty('behavior');\n      if (Array.isArray(behaviors)) return behaviors.includes('multi-part');\n      return behaviors === 'multi-part';\n    }\n    /** */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          canvasNavigation = _this$props.canvasNavigation,\n          classes = _this$props.classes,\n          collectionPath = _this$props.collectionPath,\n          collection = _this$props.collection,\n          id = _this$props.id,\n          isFetching = _this$props.isFetching,\n          manifestId = _this$props.manifestId,\n          parentCollection = _this$props.parentCollection,\n          updateCompanionWindow = _this$props.updateCompanionWindow,\n          updateWindow = _this$props.updateWindow,\n          t = _this$props.t,\n          variant = _this$props.variant,\n          windowId = _this$props.windowId;\n      /** */\n\n      var Item = function Item(_ref) {\n        var manifest = _ref.manifest,\n            otherProps = _objectWithoutProperties(_ref, [\"manifest\"]);\n\n        return /*#__PURE__*/React.createElement(MenuItem, Object.assign({\n          className: classes.menuItem,\n          alignItems: \"flex-start\",\n          button: true,\n          component: \"li\",\n          selected: manifestId === manifest.id\n        }, otherProps), variant === 'thumbnail' && /*#__PURE__*/React.createElement(ListItemIcon, null, /*#__PURE__*/React.createElement(IIIFThumbnail, {\n          resource: manifest,\n          maxHeight: canvasNavigation.height,\n          maxWidth: canvasNavigation.width\n        })), /*#__PURE__*/React.createElement(ListItemText, null, WindowSideBarCollectionPanel.getUseableLabel(manifest)));\n      };\n\n      return /*#__PURE__*/React.createElement(CompanionWindow, {\n        title: t(this.isMultipart() ? 'multipartCollection' : 'collection'),\n        windowId: windowId,\n        id: id,\n        titleControls: /*#__PURE__*/React.createElement(React.Fragment, null, parentCollection && /*#__PURE__*/React.createElement(List, null, /*#__PURE__*/React.createElement(ListItem, {\n          button: true,\n          onClick: function onClick() {\n            return updateCompanionWindow({\n              collectionPath: collectionPath.slice(0, -1)\n            });\n          }\n        }, /*#__PURE__*/React.createElement(ListItemIcon, null, /*#__PURE__*/React.createElement(ArrowUpwardIcon, null)), /*#__PURE__*/React.createElement(ListItemText, {\n          primaryTypographyProps: {\n            variant: 'body1'\n          }\n        }, WindowSideBarCollectionPanel.getUseableLabel(parentCollection)))), /*#__PURE__*/React.createElement(Typography, {\n          variant: \"h6\"\n        }, collection && WindowSideBarCollectionPanel.getUseableLabel(collection), isFetching && /*#__PURE__*/React.createElement(Skeleton, {\n          className: classes.placeholder,\n          variant: \"text\"\n        })))\n      }, /*#__PURE__*/React.createElement(MenuList, null, isFetching && /*#__PURE__*/React.createElement(MenuItem, null, /*#__PURE__*/React.createElement(ListItemText, null, /*#__PURE__*/React.createElement(Skeleton, {\n        className: classes.placeholder,\n        variant: \"text\"\n      }), /*#__PURE__*/React.createElement(Skeleton, {\n        className: classes.placeholder,\n        variant: \"text\"\n      }), /*#__PURE__*/React.createElement(Skeleton, {\n        className: classes.placeholder,\n        variant: \"text\"\n      }))), collection && collection.getCollections().map(function (manifest) {\n        /** select the new manifest and go back to the normal index */\n        var onClick = function onClick() {\n          // close collection\n          updateCompanionWindow({\n            collectionPath: [].concat(_toConsumableArray(collectionPath), [manifest.id])\n          });\n        };\n\n        return /*#__PURE__*/React.createElement(Item, {\n          key: manifest.id,\n          onClick: onClick,\n          manifest: manifest\n        });\n      }), collection && collection.getManifests().map(function (manifest) {\n        /** select the new manifest and go back to the normal index */\n        var onClick = function onClick() {\n          // select new manifest\n          updateWindow({\n            canvasId: null,\n            collectionPath: collectionPath,\n            manifestId: manifest.id\n          }); // close collection\n\n          updateCompanionWindow({\n            multipart: false\n          });\n        };\n\n        return /*#__PURE__*/React.createElement(Item, {\n          key: manifest.id,\n          onClick: onClick,\n          manifest: manifest\n        });\n      })));\n    }\n  }], [{\n    key: \"getUseableLabel\",\n\n    /** */\n    value: function getUseableLabel(resource, index) {\n      return resource && resource.getLabel && resource.getLabel().length > 0 ? resource.getLabel().getValue() : resource.id;\n    }\n  }]);\n\n  return WindowSideBarCollectionPanel;\n}(Component);\nWindowSideBarCollectionPanel.defaultProps = {\n  collection: null,\n  collectionPath: [],\n  error: null,\n  isFetching: false,\n  parentCollection: null,\n  ready: false,\n  t: function t(k) {\n    return k;\n  },\n  variant: null\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport CompanionWindow from '../containers/CompanionWindow';\nimport CanvasInfo from '../containers/CanvasInfo';\nimport LocalePicker from '../containers/LocalePicker';\nimport ManifestInfo from '../containers/ManifestInfo';\nimport CollectionInfo from '../containers/CollectionInfo';\nimport ManifestRelatedLinks from '../containers/ManifestRelatedLinks';\nimport ns from '../config/css-ns';\n/**\n * WindowSideBarInfoPanel\n */\n\nexport var WindowSideBarInfoPanel = /*#__PURE__*/function (_Component) {\n  _inherits(WindowSideBarInfoPanel, _Component);\n\n  var _super = _createSuper(WindowSideBarInfoPanel);\n\n  function WindowSideBarInfoPanel() {\n    _classCallCheck(this, WindowSideBarInfoPanel);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(WindowSideBarInfoPanel, [{\n    key: \"render\",\n\n    /**\n     * render\n     * @return\n     */\n    value: function render() {\n      var _this$props = this.props,\n          windowId = _this$props.windowId,\n          id = _this$props.id,\n          canvasIds = _this$props.canvasIds,\n          classes = _this$props.classes,\n          collectionPath = _this$props.collectionPath,\n          t = _this$props.t,\n          locale = _this$props.locale,\n          setLocale = _this$props.setLocale,\n          availableLocales = _this$props.availableLocales,\n          showLocalePicker = _this$props.showLocalePicker;\n      return /*#__PURE__*/React.createElement(CompanionWindow, {\n        title: t('aboutThisItem'),\n        paperClassName: ns('window-sidebar-info-panel'),\n        windowId: windowId,\n        id: id,\n        titleControls: showLocalePicker && /*#__PURE__*/React.createElement(LocalePicker, {\n          locale: locale,\n          setLocale: setLocale,\n          availableLocales: availableLocales\n        })\n      }, canvasIds.map(function (canvasId, index) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          key: canvasId,\n          className: classes.section\n        }, /*#__PURE__*/React.createElement(CanvasInfo, {\n          id: id,\n          canvasId: canvasId,\n          index: index,\n          totalSize: canvasIds.length,\n          windowId: windowId\n        }));\n      }), collectionPath.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.section\n      }, /*#__PURE__*/React.createElement(CollectionInfo, {\n        id: id,\n        windowId: windowId\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.section\n      }, /*#__PURE__*/React.createElement(ManifestInfo, {\n        id: id,\n        windowId: windowId\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.section\n      }, /*#__PURE__*/React.createElement(ManifestRelatedLinks, {\n        id: id,\n        windowId: windowId\n      })));\n    }\n  }]);\n\n  return WindowSideBarInfoPanel;\n}(Component);\nWindowSideBarInfoPanel.defaultProps = {\n  availableLocales: [],\n  canvasIds: [],\n  classes: {},\n  collectionPath: [],\n  locale: '',\n  setLocale: undefined,\n  showLocalePicker: false,\n  t: function t(key) {\n    return key;\n  }\n};","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n/**\n * ThumbnailNavigationBottomIcon ~\n*/\n\nexport default function ThumbnailNavigationBottomIcon(props) {\n  return /*#__PURE__*/React.createElement(SvgIcon, props, /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"24\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M3,3H21V5H3Z\",\n    transform: \"translate(0 16)\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M21,5H3V19H21ZM19,17H5V7H19Z\",\n    transform: \"translate(0 -2)\"\n  })));\n}","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n/**\n * ThumbnailNavigationRightIcon ~\n*/\n\nexport default function ThumbnailNavigationRightIcon(props) {\n  return /*#__PURE__*/React.createElement(SvgIcon, props, /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"24\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0,0H24V24H0Z\",\n    transform: \"translate(24) rotate(90)\",\n    fill: \"none\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M3,3H21V5H3Z\",\n    transform: \"translate(24) rotate(90)\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19,3H5V21H19ZM17,19H7V5H17Z\",\n    transform: \"translate(-2)\"\n  })));\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ThumbnailsOffIcon from '@material-ui/icons/CropDinSharp';\nimport ThumbnailNavigationBottomIcon from './icons/ThumbnailNavigationBottomIcon';\nimport ThumbnailNavigationRightIcon from './icons/ThumbnailNavigationRightIcon';\n/**\n *\n */\n\nexport var WindowThumbnailSettings = /*#__PURE__*/function (_Component) {\n  _inherits(WindowThumbnailSettings, _Component);\n\n  var _super = _createSuper(WindowThumbnailSettings);\n\n  /**\n   * constructor -\n   */\n  function WindowThumbnailSettings(props) {\n    var _this;\n\n    _classCallCheck(this, WindowThumbnailSettings);\n\n    _this = _super.call(this, props);\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /**\n   * @private\n   */\n\n\n  _createClass(WindowThumbnailSettings, [{\n    key: \"handleChange\",\n    value: function handleChange(value) {\n      var _this$props = this.props,\n          windowId = _this$props.windowId,\n          setWindowThumbnailPosition = _this$props.setWindowThumbnailPosition;\n      setWindowThumbnailPosition(windowId, value);\n    }\n    /**\n     * render\n     *\n     * @return {type}  description\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          classes = _this$props2.classes,\n          handleClose = _this$props2.handleClose,\n          t = _this$props2.t,\n          thumbnailNavigationPosition = _this$props2.thumbnailNavigationPosition,\n          direction = _this$props2.direction;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ListSubheader, {\n        role: \"presentation\",\n        disableSticky: true,\n        tabIndex: \"-1\"\n      }, t('thumbnails')), /*#__PURE__*/React.createElement(MenuItem, {\n        className: classes.MenuItem,\n        onClick: function onClick() {\n          _this2.handleChange('off');\n\n          handleClose();\n        }\n      }, /*#__PURE__*/React.createElement(FormControlLabel, {\n        value: \"off\",\n        classes: {\n          label: thumbnailNavigationPosition === 'off' ? classes.selectedLabel : classes.label\n        },\n        control: /*#__PURE__*/React.createElement(ThumbnailsOffIcon, {\n          color: thumbnailNavigationPosition === 'off' ? 'secondary' : undefined\n        }),\n        label: t('off'),\n        labelPlacement: \"bottom\"\n      })), /*#__PURE__*/React.createElement(MenuItem, {\n        className: classes.MenuItem,\n        onClick: function onClick() {\n          _this2.handleChange('far-bottom');\n\n          handleClose();\n        }\n      }, /*#__PURE__*/React.createElement(FormControlLabel, {\n        value: \"far-bottom\",\n        classes: {\n          label: thumbnailNavigationPosition === 'far-bottom' ? classes.selectedLabel : classes.label\n        },\n        control: /*#__PURE__*/React.createElement(ThumbnailNavigationBottomIcon, {\n          color: thumbnailNavigationPosition === 'far-bottom' ? 'secondary' : undefined\n        }),\n        label: t('bottom'),\n        labelPlacement: \"bottom\"\n      })), /*#__PURE__*/React.createElement(MenuItem, {\n        className: classes.MenuItem,\n        onClick: function onClick() {\n          _this2.handleChange('far-right');\n\n          handleClose();\n        }\n      }, /*#__PURE__*/React.createElement(FormControlLabel, {\n        value: \"far-right\",\n        classes: {\n          label: thumbnailNavigationPosition === 'far-right' ? classes.selectedLabel : classes.label\n        },\n        control: /*#__PURE__*/React.createElement(ThumbnailNavigationRightIcon, {\n          color: thumbnailNavigationPosition === 'far-right' ? 'secondary' : undefined,\n          style: direction === 'rtl' ? {\n            transform: 'rotate(180deg)'\n          } : {}\n        }),\n        label: t('right'),\n        labelPlacement: \"bottom\"\n      })));\n    }\n  }]);\n\n  return WindowThumbnailSettings;\n}(Component);\nWindowThumbnailSettings.defaultProps = {\n  handleClose: function handleClose() {},\n  t: function t(key) {\n    return key;\n  }\n};","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n/**\n * WindowMaxIcon ~\n*/\n\nexport default function WindowMaxIcon(props) {\n  return /*#__PURE__*/React.createElement(SvgIcon, props, /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"24\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7,14H5v5h5V17H7Zm7-9V7h3v3h2V5Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M22.517,1.524H1.736V22.37H22.517Zm-2,18.845H3.736V3.524H20.517Z\"\n  })));\n}","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n/**\n * WindowMinIcon ~\n*/\n\nexport default function WindowMinIcon(props) {\n  return /*#__PURE__*/React.createElement(SvgIcon, props, /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"24\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M5,16H8v3h2V14H5ZM16,8V5H14v5h5V8Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M22.517,1.524H1.736V22.37H22.517Zm-2,18.845H3.736V3.524H20.517Z\"\n  })));\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport MenuIcon from '@material-ui/icons/MenuSharp';\nimport CloseIcon from '@material-ui/icons/CloseSharp';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport AppBar from '@material-ui/core/AppBar';\nimport classNames from 'classnames';\nimport WindowTopMenuButton from '../containers/WindowTopMenuButton';\nimport WindowTopBarPluginArea from '../containers/WindowTopBarPluginArea';\nimport WindowTopBarPluginMenu from '../containers/WindowTopBarPluginMenu';\nimport WindowTopBarTitle from '../containers/WindowTopBarTitle';\nimport MiradorMenuButton from '../containers/MiradorMenuButton';\nimport FullScreenButton from '../containers/FullScreenButton';\nimport WindowMaxIcon from './icons/WindowMaxIcon';\nimport WindowMinIcon from './icons/WindowMinIcon';\nimport ns from '../config/css-ns';\n/**\n * WindowTopBar\n */\n\nexport var WindowTopBar = /*#__PURE__*/function (_Component) {\n  _inherits(WindowTopBar, _Component);\n\n  var _super = _createSuper(WindowTopBar);\n\n  function WindowTopBar() {\n    _classCallCheck(this, WindowTopBar);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(WindowTopBar, [{\n    key: \"render\",\n\n    /**\n     * render\n     * @return\n     */\n    value: function render() {\n      var _this$props = this.props,\n          removeWindow = _this$props.removeWindow,\n          windowId = _this$props.windowId,\n          classes = _this$props.classes,\n          toggleWindowSideBar = _this$props.toggleWindowSideBar,\n          t = _this$props.t,\n          windowDraggable = _this$props.windowDraggable,\n          maximizeWindow = _this$props.maximizeWindow,\n          maximized = _this$props.maximized,\n          minimizeWindow = _this$props.minimizeWindow,\n          focused = _this$props.focused,\n          allowClose = _this$props.allowClose,\n          allowMaximize = _this$props.allowMaximize,\n          focusWindow = _this$props.focusWindow,\n          allowFullscreen = _this$props.allowFullscreen,\n          allowTopMenuButton = _this$props.allowTopMenuButton,\n          allowWindowSideBar = _this$props.allowWindowSideBar;\n      return /*#__PURE__*/React.createElement(AppBar, {\n        position: \"relative\",\n        color: \"default\"\n      }, /*#__PURE__*/React.createElement(\"nav\", {\n        \"aria-label\": t('windowNavigation')\n      }, /*#__PURE__*/React.createElement(Toolbar, {\n        disableGutters: true,\n        onMouseDown: focusWindow,\n        className: classNames(classes.windowTopBarStyle, windowDraggable ? classes.windowTopBarStyleDraggable : null, focused ? classes.focused : null, ns('window-top-bar')),\n        variant: \"dense\"\n      }, allowWindowSideBar && /*#__PURE__*/React.createElement(MiradorMenuButton, {\n        \"aria-label\": t('toggleWindowSideBar'),\n        onClick: toggleWindowSideBar\n      }, /*#__PURE__*/React.createElement(MenuIcon, null)), /*#__PURE__*/React.createElement(WindowTopBarTitle, {\n        windowId: windowId\n      }), allowTopMenuButton && /*#__PURE__*/React.createElement(WindowTopMenuButton, {\n        className: ns('window-menu-btn'),\n        windowId: windowId\n      }), /*#__PURE__*/React.createElement(WindowTopBarPluginArea, {\n        windowId: windowId\n      }), /*#__PURE__*/React.createElement(WindowTopBarPluginMenu, {\n        windowId: windowId\n      }), allowMaximize && /*#__PURE__*/React.createElement(MiradorMenuButton, {\n        \"aria-label\": maximized ? t('minimizeWindow') : t('maximizeWindow'),\n        className: ns('window-maximize'),\n        onClick: maximized ? minimizeWindow : maximizeWindow\n      }, maximized ? /*#__PURE__*/React.createElement(WindowMinIcon, null) : /*#__PURE__*/React.createElement(WindowMaxIcon, null)), allowFullscreen && /*#__PURE__*/React.createElement(FullScreenButton, null), allowClose && /*#__PURE__*/React.createElement(MiradorMenuButton, {\n        \"aria-label\": t('closeWindow'),\n        className: ns('window-close'),\n        onClick: removeWindow\n      }, /*#__PURE__*/React.createElement(CloseIcon, null)))));\n    }\n  }]);\n\n  return WindowTopBar;\n}(Component);\nWindowTopBar.defaultProps = {\n  allowClose: true,\n  allowFullscreen: false,\n  allowMaximize: true,\n  allowTopMenuButton: true,\n  allowWindowSideBar: true,\n  focused: false,\n  focusWindow: function focusWindow() {},\n  maximized: false,\n  maximizeWindow: function maximizeWindow() {},\n  minimizeWindow: function minimizeWindow() {},\n  t: function t(key) {\n    return key;\n  },\n  windowDraggable: true\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport { PluginHook } from './PluginHook';\n/**\n *\n */\n\nexport var WindowTopBarPluginArea = /*#__PURE__*/function (_Component) {\n  _inherits(WindowTopBarPluginArea, _Component);\n\n  var _super = _createSuper(WindowTopBarPluginArea);\n\n  function WindowTopBarPluginArea() {\n    _classCallCheck(this, WindowTopBarPluginArea);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(WindowTopBarPluginArea, [{\n    key: \"render\",\n\n    /** */\n    value: function render() {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(PluginHook, this.props));\n    }\n  }]);\n\n  return WindowTopBarPluginArea;\n}(Component);","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport MoreVertIcon from '@material-ui/icons/MoreVertSharp';\nimport Menu from '@material-ui/core/Menu';\nimport MiradorMenuButton from '../containers/MiradorMenuButton';\nimport { PluginHook } from './PluginHook';\nimport ns from '../config/css-ns';\n/**\n *\n */\n\nexport var WindowTopBarPluginMenu = /*#__PURE__*/function (_Component) {\n  _inherits(WindowTopBarPluginMenu, _Component);\n\n  var _super = _createSuper(WindowTopBarPluginMenu);\n\n  /**\n   * constructor -\n   */\n  function WindowTopBarPluginMenu(props) {\n    var _this;\n\n    _classCallCheck(this, WindowTopBarPluginMenu);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      anchorEl: null\n    };\n    _this.handleMenuClick = _this.handleMenuClick.bind(_assertThisInitialized(_this));\n    _this.handleMenuClose = _this.handleMenuClose.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /**\n   * Set the anchorEl state to the click target\n   */\n\n\n  _createClass(WindowTopBarPluginMenu, [{\n    key: \"handleMenuClick\",\n    value: function handleMenuClick(event) {\n      this.setState({\n        anchorEl: event.currentTarget\n      });\n    }\n    /**\n     * Set the anchorEl state to null (closing the menu)\n     */\n\n  }, {\n    key: \"handleMenuClose\",\n    value: function handleMenuClose() {\n      this.setState({\n        anchorEl: null\n      });\n    }\n    /**\n     * render component\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          containerId = _this$props.containerId,\n          PluginComponents = _this$props.PluginComponents,\n          t = _this$props.t,\n          windowId = _this$props.windowId,\n          menuIcon = _this$props.menuIcon;\n      var anchorEl = this.state.anchorEl;\n      if (!PluginComponents || PluginComponents.length === 0) return /*#__PURE__*/React.createElement(React.Fragment, null);\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MiradorMenuButton, {\n        \"aria-haspopup\": \"true\",\n        \"aria-label\": t('windowPluginMenu'),\n        \"aria-owns\": anchorEl ? \"window-plugin-menu_\".concat(windowId) : undefined,\n        className: anchorEl ? classes.ctrlBtnSelected : null,\n        onClick: this.handleMenuClick\n      }, menuIcon), /*#__PURE__*/React.createElement(Menu, {\n        id: \"window-plugin-menu_\".concat(windowId),\n        container: document.querySelector(\"#\".concat(containerId, \" .\").concat(ns('viewer'))),\n        anchorEl: anchorEl,\n        anchorOrigin: {\n          horizontal: 'right',\n          vertical: 'bottom'\n        },\n        transformOrigin: {\n          horizontal: 'right',\n          vertical: 'top'\n        },\n        getContentAnchorEl: null,\n        open: Boolean(anchorEl),\n        onClose: function onClose() {\n          return _this2.handleMenuClose();\n        }\n      }, /*#__PURE__*/React.createElement(PluginHook, Object.assign({\n        handleClose: function handleClose() {\n          return _this2.handleMenuClose();\n        }\n      }, this.props))));\n    }\n  }]);\n\n  return WindowTopBarPluginMenu;\n}(Component);\nWindowTopBarPluginMenu.defaultProps = {\n  classes: {},\n  menuIcon: /*#__PURE__*/React.createElement(MoreVertIcon, null),\n  PluginComponents: []\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport ErrorIcon from '@material-ui/icons/ErrorOutlineSharp';\n/**\n * WindowTopBarTitle\n */\n\nexport var WindowTopBarTitle = /*#__PURE__*/function (_Component) {\n  _inherits(WindowTopBarTitle, _Component);\n\n  var _super = _createSuper(WindowTopBarTitle);\n\n  function WindowTopBarTitle() {\n    _classCallCheck(this, WindowTopBarTitle);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(WindowTopBarTitle, [{\n    key: \"render\",\n\n    /**\n     * render\n     * @return\n     */\n    value: function render() {\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          error = _this$props.error,\n          hideWindowTitle = _this$props.hideWindowTitle,\n          isFetching = _this$props.isFetching,\n          manifestTitle = _this$props.manifestTitle;\n      /** */\n\n      var TitleTypography = function TitleTypography(props) {\n        return /*#__PURE__*/React.createElement(Typography, Object.assign({\n          variant: \"h2\",\n          noWrap: true,\n          color: \"inherit\",\n          className: classes.title\n        }, props), props.children);\n      };\n\n      var title = null;\n\n      if (isFetching) {\n        title = /*#__PURE__*/React.createElement(TitleTypography, null, /*#__PURE__*/React.createElement(Skeleton, {\n          variant: \"text\"\n        }));\n      } else if (error) {\n        title = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ErrorIcon, {\n          color: \"error\"\n        }), /*#__PURE__*/React.createElement(TitleTypography, {\n          color: \"textSecondary\"\n        }, error));\n      } else if (hideWindowTitle) {\n        title = /*#__PURE__*/React.createElement(\"div\", {\n          className: classes.title\n        });\n      } else {\n        title = /*#__PURE__*/React.createElement(TitleTypography, null, manifestTitle);\n      }\n\n      return title;\n    }\n  }]);\n\n  return WindowTopBarTitle;\n}(Component);\nWindowTopBarTitle.defaultProps = {\n  error: null,\n  hideWindowTitle: false,\n  isFetching: false,\n  manifestTitle: ''\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Menu from '@material-ui/core//Menu';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport WindowThumbnailSettings from '../containers/WindowThumbnailSettings';\nimport WindowViewSettings from '../containers/WindowViewSettings';\nimport { PluginHook } from './PluginHook';\nimport ns from '../config/css-ns';\n/** Renders plugins */\n\nfunction PluginHookWithHeader(props) {\n  var PluginComponents = props.PluginComponents,\n      t = props.t; // eslint-disable-line react/prop-types\n\n  return PluginComponents ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ListSubheader, {\n    role: \"presentation\",\n    disableSticky: true,\n    tabIndex: \"-1\"\n  }, t('windowPluginButtons')), /*#__PURE__*/React.createElement(PluginHook, props)) : null;\n}\n/**\n */\n\n\nexport var WindowTopMenu = /*#__PURE__*/function (_Component) {\n  _inherits(WindowTopMenu, _Component);\n\n  var _super = _createSuper(WindowTopMenu);\n\n  function WindowTopMenu() {\n    _classCallCheck(this, WindowTopMenu);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(WindowTopMenu, [{\n    key: \"render\",\n\n    /**\n     * render\n     * @return\n     */\n    value: function render() {\n      var _this$props = this.props,\n          containerId = _this$props.containerId,\n          handleClose = _this$props.handleClose,\n          anchorEl = _this$props.anchorEl,\n          showThumbnailNavigationSettings = _this$props.showThumbnailNavigationSettings,\n          toggleDraggingEnabled = _this$props.toggleDraggingEnabled,\n          windowId = _this$props.windowId;\n      return /*#__PURE__*/React.createElement(Menu, {\n        id: \"window-menu_\".concat(windowId),\n        container: document.querySelector(\"#\".concat(containerId, \" .\").concat(ns('viewer'))),\n        anchorEl: anchorEl,\n        anchorOrigin: {\n          horizontal: 'right',\n          vertical: 'bottom'\n        },\n        transformOrigin: {\n          horizontal: 'right',\n          vertical: 'top'\n        },\n        getContentAnchorEl: null,\n        open: Boolean(anchorEl),\n        onClose: handleClose,\n        onEntering: toggleDraggingEnabled,\n        onExit: toggleDraggingEnabled,\n        orientation: \"horizontal\"\n      }, /*#__PURE__*/React.createElement(WindowViewSettings, {\n        windowId: windowId,\n        handleClose: handleClose\n      }), showThumbnailNavigationSettings && /*#__PURE__*/React.createElement(WindowThumbnailSettings, {\n        windowId: windowId,\n        handleClose: handleClose\n      }), /*#__PURE__*/React.createElement(PluginHookWithHeader, this.props));\n    }\n  }]);\n\n  return WindowTopMenu;\n}(Component);\nWindowTopMenu.defaultProps = {\n  anchorEl: null,\n  showThumbnailNavigationSettings: true\n};","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n/**\n * WindowMinIcon ~\n*/\n\nexport default function WindowOptionsIcon(props) {\n  return /*#__PURE__*/React.createElement(SvgIcon, props, /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"24\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0,0H24V24H0Z\",\n    fill: \"none\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M24.852,17.981,3,18V15.945l21.852-.019Z\",\n    transform: \"translate(-2 5)\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1,4V21H22.853V4.1ZM3,19V6h8V19Zm18,0H13V6h8Z\",\n    transform: \"translate(0 -2)\"\n  })));\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport WindowTopMenu from '../containers/WindowTopMenu';\nimport MiradorMenuButton from '../containers/MiradorMenuButton';\nimport WindowOptionsIcon from './icons/WindowOptionsIcon';\n/**\n */\n\nexport var WindowTopMenuButton = /*#__PURE__*/function (_Component) {\n  _inherits(WindowTopMenuButton, _Component);\n\n  var _super = _createSuper(WindowTopMenuButton);\n\n  /**\n   * constructor -\n   */\n  function WindowTopMenuButton(props) {\n    var _this;\n\n    _classCallCheck(this, WindowTopMenuButton);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      anchorEl: null\n    };\n    _this.handleMenuClick = _this.handleMenuClick.bind(_assertThisInitialized(_this));\n    _this.handleMenuClose = _this.handleMenuClose.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /**\n   * @private\n   */\n\n\n  _createClass(WindowTopMenuButton, [{\n    key: \"handleMenuClick\",\n    value: function handleMenuClick(event) {\n      this.setState({\n        anchorEl: event.currentTarget\n      });\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"handleMenuClose\",\n    value: function handleMenuClose() {\n      this.setState({\n        anchorEl: null\n      });\n    }\n    /**\n     * render\n     * @return\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          t = _this$props.t,\n          windowId = _this$props.windowId;\n      var anchorEl = this.state.anchorEl;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MiradorMenuButton, {\n        \"aria-haspopup\": \"true\",\n        \"aria-label\": t('windowMenu'),\n        \"aria-owns\": anchorEl ? \"window-menu_\".concat(windowId) : undefined,\n        className: anchorEl ? classes.ctrlBtnSelected : null,\n        onClick: this.handleMenuClick\n      }, /*#__PURE__*/React.createElement(WindowOptionsIcon, null)), /*#__PURE__*/React.createElement(WindowTopMenu, {\n        windowId: windowId,\n        anchorEl: anchorEl,\n        handleClose: this.handleMenuClose\n      }));\n    }\n  }]);\n\n  return WindowTopMenuButton;\n}(Component);\nWindowTopMenuButton.defaultProps = {\n  t: function t(key) {\n    return key;\n  }\n};","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n/**\n * BookViewIcon ~\n*/\n\nexport default function BookViewIcon(props) {\n  return /*#__PURE__*/React.createElement(SvgIcon, props, /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"24\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1,4V21H22.853V4.1ZM3,19V6h8V19Zm18,0H13V6h8ZM14,9.5h6V11H14ZM14,12h6v1.5H14Zm0,2.5h6V16H14Z\"\n  })));\n}","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n/**\n * GalleryViewIcon ~\n */\n\nexport default function GalleryViewIcon(props) {\n  return /*#__PURE__*/React.createElement(SvgIcon, props, /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"24\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19.974,2H2V19.974H19.974V2ZM7.392,18.177H3.8V14.582H7.392Zm0-5.392H3.8V9.19H7.392Zm0-5.392H3.8V3.8H7.392Zm5.392,10.785H9.19V14.582h3.595Zm0-5.392H9.19V9.19h3.595Zm0-5.392H9.19V3.8h3.595Zm5.392,10.785H14.582V14.582h3.595Zm0-5.392H14.582V9.19h3.595Zm0-5.392H14.582V3.8h3.595Z\",\n    transform: \"translate(1 1)\"\n  })));\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport SingleIcon from '@material-ui/icons/CropOriginalSharp';\nimport ScrollViewIcon from '@material-ui/icons/ViewColumn';\nimport BookViewIcon from './icons/BookViewIcon';\nimport GalleryViewIcon from './icons/GalleryViewIcon';\n/**\n *\n */\n\nexport var WindowViewSettings = /*#__PURE__*/function (_Component) {\n  _inherits(WindowViewSettings, _Component);\n\n  var _super = _createSuper(WindowViewSettings);\n\n  /**\n   * constructor -\n   */\n  function WindowViewSettings(props) {\n    var _this;\n\n    _classCallCheck(this, WindowViewSettings);\n\n    _this = _super.call(this, props);\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /**\n   * @private\n   */\n\n\n  _createClass(WindowViewSettings, [{\n    key: \"handleChange\",\n    value: function handleChange(value) {\n      var _this$props = this.props,\n          windowId = _this$props.windowId,\n          setWindowViewType = _this$props.setWindowViewType;\n      setWindowViewType(windowId, value);\n    }\n    /**\n     * render\n     *\n     * @return {type}  description\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          classes = _this$props2.classes,\n          handleClose = _this$props2.handleClose,\n          t = _this$props2.t,\n          windowViewType = _this$props2.windowViewType,\n          viewTypes = _this$props2.viewTypes;\n      var iconMap = {\n        book: BookViewIcon,\n        gallery: GalleryViewIcon,\n        scroll: ScrollViewIcon,\n        single: SingleIcon\n      };\n      /** Suspiciously similar to a component, yet if it is invoked through JSX\n          none of the click handlers work? */\n\n      var menuItem = function menuItem(_ref) {\n        var value = _ref.value,\n            Icon = _ref.Icon;\n        return /*#__PURE__*/React.createElement(MenuItem, {\n          key: value,\n          className: classes.MenuItem,\n          autoFocus: windowViewType === value,\n          onClick: function onClick() {\n            _this2.handleChange(value);\n\n            handleClose();\n          }\n        }, /*#__PURE__*/React.createElement(FormControlLabel, {\n          value: value,\n          classes: {\n            label: windowViewType === value ? classes.selectedLabel : classes.label\n          },\n          control: /*#__PURE__*/React.createElement(Icon, {\n            color: windowViewType === value ? 'secondary' : undefined\n          }),\n          label: t(value),\n          labelPlacement: \"bottom\"\n        }));\n      };\n\n      if (viewTypes.length === 0) return null;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ListSubheader, {\n        role: \"presentation\",\n        disableSticky: true,\n        tabIndex: \"-1\"\n      }, t('view')), viewTypes.map(function (value) {\n        return menuItem({\n          Icon: iconMap[value],\n          value: value\n        });\n      }));\n    }\n  }]);\n\n  return WindowViewSettings;\n}(Component);\nWindowViewSettings.defaultProps = {\n  handleClose: function handleClose() {},\n  t: function t(key) {\n    return key;\n  },\n  viewTypes: []\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component, lazy, Suspense } from 'react';\nimport WindowCanvasNavigationControls from '../containers/WindowCanvasNavigationControls';\nvar OSDViewer = /*#__PURE__*/lazy(function () {\n  return import('../containers/OpenSeadragonViewer');\n});\n/**\n * Represents a WindowViewer in the mirador workspace. Responsible for mounting\n * OSD and Navigation\n */\n\nexport var WindowViewer = /*#__PURE__*/function (_Component) {\n  _inherits(WindowViewer, _Component);\n\n  var _super = _createSuper(WindowViewer);\n\n  /** */\n  function WindowViewer(props) {\n    var _this;\n\n    _classCallCheck(this, WindowViewer);\n\n    _this = _super.call(this, props);\n    _this.state = {};\n    return _this;\n  }\n  /** */\n\n\n  _createClass(WindowViewer, [{\n    key: \"render\",\n\n    /**\n     * Renders things\n     */\n    value: function render() {\n      var windowId = this.props.windowId;\n      var hasError = this.state.hasError;\n\n      if (hasError) {\n        return /*#__PURE__*/React.createElement(React.Fragment, null);\n      }\n\n      return /*#__PURE__*/React.createElement(Suspense, {\n        fallback: /*#__PURE__*/React.createElement(\"div\", null)\n      }, /*#__PURE__*/React.createElement(OSDViewer, {\n        windowId: windowId\n      }, /*#__PURE__*/React.createElement(WindowCanvasNavigationControls, {\n        windowId: windowId\n      })));\n    }\n  }], [{\n    key: \"getDerivedStateFromError\",\n    value: function getDerivedStateFromError(error) {\n      // Update state so the next render will show the fallback UI.\n      return {\n        hasError: true\n      };\n    }\n  }]);\n\n  return WindowViewer;\n}(Component);","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport Window from '../containers/Window';\nimport WorkspaceMosaic from '../containers/WorkspaceMosaic';\nimport WorkspaceElastic from '../containers/WorkspaceElastic';\nimport ns from '../config/css-ns';\nimport { IIIFDropTarget } from './IIIFDropTarget';\n/**\n * Represents a work area that contains any number of windows\n * @memberof Workspace\n * @private\n */\n\nexport var Workspace = /*#__PURE__*/function (_React$Component) {\n  _inherits(Workspace, _React$Component);\n\n  var _super = _createSuper(Workspace);\n\n  /** */\n  function Workspace(props) {\n    var _this;\n\n    _classCallCheck(this, Workspace);\n\n    _this = _super.call(this, props);\n    _this.handleDrop = _this.handleDrop.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /** */\n\n\n  _createClass(Workspace, [{\n    key: \"handleDrop\",\n    value: function handleDrop(_ref, props, monitor) {\n      var canvasId = _ref.canvasId,\n          manifestId = _ref.manifestId,\n          manifestJson = _ref.manifestJson;\n      var _this$props = this.props,\n          addWindow = _this$props.addWindow,\n          allowNewWindows = _this$props.allowNewWindows;\n      if (!allowNewWindows) return;\n      addWindow({\n        canvasId: canvasId,\n        manifest: manifestJson,\n        manifestId: manifestId\n      });\n    }\n    /**\n     * Determine which workspace to render by configured type\n     */\n\n  }, {\n    key: \"workspaceByType\",\n    value: function workspaceByType() {\n      var _this$props2 = this.props,\n          workspaceId = _this$props2.workspaceId,\n          workspaceType = _this$props2.workspaceType,\n          windowIds = _this$props2.windowIds;\n\n      if (this.maximizedWindows()) {\n        return this.maximizedWindows();\n      }\n\n      if (windowIds.length === 0) return this.zeroWindows();\n\n      switch (workspaceType) {\n        case 'elastic':\n          return /*#__PURE__*/React.createElement(WorkspaceElastic, null);\n\n        case 'mosaic':\n          return /*#__PURE__*/React.createElement(WorkspaceMosaic, null);\n\n        default:\n          return windowIds.map(function (windowId) {\n            return /*#__PURE__*/React.createElement(Window, {\n              key: \"\".concat(windowId, \"-\").concat(workspaceId),\n              windowId: windowId\n            });\n          });\n      }\n    }\n    /** */\n\n  }, {\n    key: \"zeroWindows\",\n    value: function zeroWindows() {\n      var t = this.props.t;\n      return /*#__PURE__*/React.createElement(Grid, {\n        alignItems: \"center\",\n        container: true,\n        style: {\n          height: '100%'\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        xs: 12,\n        item: true\n      }, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"h1\",\n        component: \"div\",\n        align: \"center\"\n      }, t('welcome'))));\n    }\n    /**\n     * Determine whether or not there are maximized windows\n     */\n\n  }, {\n    key: \"maximizedWindows\",\n    value: function maximizedWindows() {\n      var _this$props3 = this.props,\n          maximizedWindowIds = _this$props3.maximizedWindowIds,\n          workspaceId = _this$props3.workspaceId;\n\n      if (maximizedWindowIds.length > 0) {\n        return maximizedWindowIds.map(function (windowId) {\n          return /*#__PURE__*/React.createElement(Window, {\n            key: \"\".concat(windowId, \"-\").concat(workspaceId),\n            windowId: windowId,\n            className: classNames(ns('workspace-maximized-window'))\n          });\n        });\n      }\n\n      return false;\n    }\n    /**\n     * render\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          classes = _this$props4.classes,\n          isWorkspaceControlPanelVisible = _this$props4.isWorkspaceControlPanelVisible,\n          t = _this$props4.t;\n      return /*#__PURE__*/React.createElement(IIIFDropTarget, {\n        onDrop: this.handleDrop\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: classNames(ns('workspace-viewport'), isWorkspaceControlPanelVisible && ns('workspace-with-control-panel'), isWorkspaceControlPanelVisible && classes.workspaceWithControlPanel, classes.workspaceViewport)\n      }, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"srOnly\",\n        component: \"h1\"\n      }, t('miradorViewer')), this.workspaceByType()));\n    }\n  }]);\n\n  return Workspace;\n}(React.Component);\nWorkspace.defaultProps = {\n  addWindow: function addWindow() {},\n  allowNewWindows: true,\n  maximizedWindowIds: [],\n  windowIds: []\n};","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport AddIcon from '@material-ui/icons/AddSharp';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMoreSharp';\nimport AppBar from '@material-ui/core/AppBar';\nimport Drawer from '@material-ui/core/Drawer';\nimport Grid from '@material-ui/core/Grid';\nimport Fab from '@material-ui/core/Fab';\nimport List from '@material-ui/core/List';\nimport Paper from '@material-ui/core/Paper';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport ns from '../config/css-ns';\nimport ManifestForm from '../containers/ManifestForm';\nimport ManifestListItem from '../containers/ManifestListItem';\nimport MiradorMenuButton from '../containers/MiradorMenuButton';\nimport { IIIFDropTarget } from './IIIFDropTarget';\nimport { PluginHook } from './PluginHook';\n/**\n * An area for managing manifests and adding them to workspace\n * @memberof Workspace\n * @private\n */\n\nexport var WorkspaceAdd = /*#__PURE__*/function (_React$Component) {\n  _inherits(WorkspaceAdd, _React$Component);\n\n  var _super = _createSuper(WorkspaceAdd);\n\n  /** */\n  function WorkspaceAdd(props) {\n    var _this;\n\n    _classCallCheck(this, WorkspaceAdd);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      addResourcesOpen: false\n    };\n    _this.ref = /*#__PURE__*/React.createRef();\n    _this.onSubmit = _this.onSubmit.bind(_assertThisInitialized(_this));\n    _this.setAddResourcesVisibility = _this.setAddResourcesVisibility.bind(_assertThisInitialized(_this));\n    _this.handleDrop = _this.handleDrop.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /** */\n\n\n  _createClass(WorkspaceAdd, [{\n    key: \"handleDrop\",\n    value: function handleDrop(_ref, props, monitor) {\n      var manifestId = _ref.manifestId,\n          manifestJson = _ref.manifestJson;\n      var addResource = this.props.addResource;\n\n      if (manifestJson) {\n        addResource(manifestId, manifestJson, {\n          provider: 'file'\n        });\n      } else {\n        addResource(manifestId);\n      }\n\n      this.scrollToTop();\n    }\n    /** @private */\n\n  }, {\n    key: \"onSubmit\",\n    value: function onSubmit() {\n      this.setAddResourcesVisibility(false);\n      this.scrollToTop();\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"setAddResourcesVisibility\",\n    value: function setAddResourcesVisibility(bool) {\n      this.setState({\n        addResourcesOpen: bool\n      });\n    }\n    /** Scroll the list back to the top */\n\n  }, {\n    key: \"scrollToTop\",\n    value: function scrollToTop() {\n      if (this.ref.current) {\n        var el = this.ref.current;\n        el.scrollTo({\n          behavior: 'smooth',\n          left: 0,\n          top: 0\n        });\n      }\n    }\n    /**\n     * render\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          catalog = _this$props.catalog,\n          setWorkspaceAddVisibility = _this$props.setWorkspaceAddVisibility,\n          t = _this$props.t,\n          classes = _this$props.classes;\n      var addResourcesOpen = this.state.addResourcesOpen;\n      var manifestList = catalog.map(function (resource, index) {\n        return /*#__PURE__*/React.createElement(ManifestListItem, Object.assign({}, index === 0 && {\n          buttonRef: function buttonRef(ref) {\n            return ref && ref.focus();\n          }\n        }, {\n          key: resource.manifestId,\n          manifestId: resource.manifestId,\n          provider: resource.provider,\n          handleClose: function handleClose() {\n            return setWorkspaceAddVisibility(false);\n          }\n        }));\n      });\n      return /*#__PURE__*/React.createElement(IIIFDropTarget, {\n        onDrop: this.handleDrop\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        ref: this.ref,\n        className: classNames(ns('workspace-add'), classes.workspaceAdd)\n      }, catalog.length < 1 ? /*#__PURE__*/React.createElement(Grid, {\n        alignItems: \"center\",\n        container: true,\n        style: {\n          height: '100%'\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        xs: 12,\n        item: true\n      }, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"h1\",\n        component: \"div\",\n        align: \"center\"\n      }, t('emptyResourceList')))) : /*#__PURE__*/React.createElement(Paper, {\n        className: classes.list\n      }, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"srOnly\",\n        component: \"h1\"\n      }, t('miradorResources')), /*#__PURE__*/React.createElement(PluginHook, this.props), /*#__PURE__*/React.createElement(List, {\n        disablePadding: true\n      }, manifestList)), /*#__PURE__*/React.createElement(Fab, {\n        variant: \"extended\",\n        disabled: addResourcesOpen,\n        className: classNames(classes.fab, ns('add-resource-button')),\n        color: \"primary\",\n        onClick: function onClick() {\n          return _this2.setAddResourcesVisibility(true);\n        }\n      }, /*#__PURE__*/React.createElement(AddIcon, null), t('addResource')), /*#__PURE__*/React.createElement(Drawer, {\n        className: classNames(_defineProperty({}, classes.displayNone, !addResourcesOpen)),\n        classes: {\n          paper: classes.paper\n        },\n        variant: \"persistent\",\n        anchor: \"bottom\",\n        open: addResourcesOpen,\n        ModalProps: {\n          disablePortal: true,\n          hideBackdrop: true,\n          style: {\n            position: 'absolute'\n          }\n        }\n      }, /*#__PURE__*/React.createElement(Paper, {\n        className: classes.form\n      }, /*#__PURE__*/React.createElement(AppBar, {\n        position: \"absolute\",\n        color: \"primary\",\n        onClick: function onClick() {\n          return _this2.setAddResourcesVisibility(false);\n        }\n      }, /*#__PURE__*/React.createElement(Toolbar, {\n        variant: \"dense\"\n      }, /*#__PURE__*/React.createElement(MiradorMenuButton, {\n        \"aria-label\": t('closeAddResourceForm'),\n        className: classes.menuButton,\n        color: \"inherit\"\n      }, /*#__PURE__*/React.createElement(ExpandMoreIcon, null)), /*#__PURE__*/React.createElement(Typography, {\n        variant: \"h2\",\n        noWrap: true,\n        color: \"inherit\",\n        className: classes.typographyBody\n      }, t('addResource')))), /*#__PURE__*/React.createElement(ManifestForm, {\n        addResourcesOpen: addResourcesOpen,\n        onSubmit: this.onSubmit,\n        onCancel: function onCancel() {\n          return _this2.setAddResourcesVisibility(false);\n        }\n      })))));\n    }\n  }]);\n\n  return WorkspaceAdd;\n}(React.Component);\nWorkspaceAdd.defaultProps = {\n  addResource: function addResource() {},\n  catalog: [],\n  classes: {},\n  t: function t(key) {\n    return key;\n  }\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Fab from '@material-ui/core/Fab';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport AddIcon from '@material-ui/icons/AddSharp';\nimport CloseIcon from '@material-ui/icons/CloseSharp';\n/**\n */\n\nexport var WorkspaceAddButton = /*#__PURE__*/function (_Component) {\n  _inherits(WorkspaceAddButton, _Component);\n\n  var _super = _createSuper(WorkspaceAddButton);\n\n  function WorkspaceAddButton() {\n    _classCallCheck(this, WorkspaceAddButton);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(WorkspaceAddButton, [{\n    key: \"render\",\n\n    /**\n     * render\n     * @return\n     */\n    value: function render() {\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          t = _this$props.t,\n          setWorkspaceAddVisibility = _this$props.setWorkspaceAddVisibility,\n          isWorkspaceAddVisible = _this$props.isWorkspaceAddVisible,\n          useExtendedFab = _this$props.useExtendedFab;\n      return /*#__PURE__*/React.createElement(Tooltip, {\n        title: isWorkspaceAddVisible ? t('closeAddResourceMenu') : t('addResource')\n      }, /*#__PURE__*/React.createElement(Fab, {\n        size: \"medium\",\n        color: \"primary\",\n        id: \"addBtn\",\n        disableRipple: true,\n        \"aria-label\": isWorkspaceAddVisible ? t('closeAddResourceMenu') : useExtendedFab && t('startHere') || t('addResource'),\n        className: classes.fab,\n        classes: {\n          primary: classes.fabPrimary,\n          secondary: classes.fabSecondary\n        },\n        variant: useExtendedFab ? 'extended' : 'round',\n        onClick: function onClick() {\n          setWorkspaceAddVisibility(!isWorkspaceAddVisible);\n        }\n      }, isWorkspaceAddVisible ? /*#__PURE__*/React.createElement(CloseIcon, null) : /*#__PURE__*/React.createElement(AddIcon, null), useExtendedFab && t('startHere')));\n    }\n  }]);\n\n  return WorkspaceAddButton;\n}(Component);\nWorkspaceAddButton.defaultProps = {\n  isWorkspaceAddVisible: false,\n  t: function t(key) {\n    return key;\n  }\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport ErrorDialog from '../containers/ErrorDialog';\nimport WorkspaceControlPanel from '../containers/WorkspaceControlPanel';\nimport Workspace from '../containers/Workspace';\nimport WorkspaceAdd from '../containers/WorkspaceAdd';\nimport BackgroundPluginArea from '../containers/BackgroundPluginArea';\nimport ns from '../config/css-ns';\n/**\n * This is the top level Mirador component.\n * @prop {Object} manifests\n */\n\nexport var WorkspaceArea = /*#__PURE__*/function (_Component) {\n  _inherits(WorkspaceArea, _Component);\n\n  var _super = _createSuper(WorkspaceArea);\n\n  function WorkspaceArea() {\n    _classCallCheck(this, WorkspaceArea);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(WorkspaceArea, [{\n    key: \"render\",\n\n    /**\n     * render\n     * @return {String} - HTML markup for the component\n     */\n    value: function render() {\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          controlPanelVariant = _this$props.controlPanelVariant,\n          isWorkspaceAddVisible = _this$props.isWorkspaceAddVisible,\n          isWorkspaceControlPanelVisible = _this$props.isWorkspaceControlPanelVisible,\n          lang = _this$props.lang,\n          t = _this$props.t;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, isWorkspaceControlPanelVisible && /*#__PURE__*/React.createElement(WorkspaceControlPanel, {\n        variant: controlPanelVariant\n      }), /*#__PURE__*/React.createElement(\"main\", {\n        className: classNames(classes.viewer, ns('viewer')),\n        lang: lang,\n        \"aria-label\": t('workspace')\n      }, isWorkspaceAddVisible ? /*#__PURE__*/React.createElement(WorkspaceAdd, null) : /*#__PURE__*/React.createElement(Workspace, null), /*#__PURE__*/React.createElement(ErrorDialog, null), /*#__PURE__*/React.createElement(BackgroundPluginArea, null)));\n    }\n  }]);\n\n  return WorkspaceArea;\n}(Component);\nWorkspaceArea.defaultProps = {\n  controlPanelVariant: undefined,\n  isWorkspaceAddVisible: false,\n  lang: undefined\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport WorkspaceAddButton from '../containers/WorkspaceAddButton';\nimport WorkspaceControlPanelButtons from '../containers/WorkspaceControlPanelButtons';\nimport Branding from '../containers/Branding';\nimport ns from '../config/css-ns';\n/**\n * Provides the panel responsible for controlling the entire workspace\n */\n\nexport var WorkspaceControlPanel = /*#__PURE__*/function (_Component) {\n  _inherits(WorkspaceControlPanel, _Component);\n\n  var _super = _createSuper(WorkspaceControlPanel);\n\n  function WorkspaceControlPanel() {\n    _classCallCheck(this, WorkspaceControlPanel);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(WorkspaceControlPanel, [{\n    key: \"render\",\n\n    /**\n     * render\n     * @return {String} - HTML markup for the component\n     */\n    value: function render() {\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          t = _this$props.t,\n          variant = _this$props.variant;\n      return /*#__PURE__*/React.createElement(AppBar, {\n        className: classNames(classes.root, ns('workspace-control-panel'), variant === 'wide' ? classes.wide : null),\n        color: \"default\",\n        position: \"absolute\",\n        component: \"nav\",\n        \"aria-label\": t('workspaceNavigation')\n      }, /*#__PURE__*/React.createElement(Toolbar, {\n        disableGutters: true,\n        className: classes.toolbar\n      }, /*#__PURE__*/React.createElement(WorkspaceAddButton, null), /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.workspaceButtons\n      }, /*#__PURE__*/React.createElement(WorkspaceControlPanelButtons, null))), /*#__PURE__*/React.createElement(Branding, {\n        className: classes.branding,\n        t: t,\n        variant: variant\n      }));\n    }\n  }]);\n\n  return WorkspaceControlPanel;\n}(Component);\nWorkspaceControlPanel.defaultProps = {\n  variant: 'default'\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport FullScreenButton from '../containers/FullScreenButton';\nimport WorkspaceMenuButton from '../containers/WorkspaceMenuButton';\nimport WorkspaceOptionsButton from '../containers/WorkspaceOptionsButton';\nimport WindowListButton from '../containers/WindowListButton';\nimport { PluginHook } from './PluginHook';\n/**\n *\n */\n\nexport var WorkspaceControlPanelButtons = /*#__PURE__*/function (_Component) {\n  _inherits(WorkspaceControlPanelButtons, _Component);\n\n  var _super = _createSuper(WorkspaceControlPanelButtons);\n\n  function WorkspaceControlPanelButtons() {\n    _classCallCheck(this, WorkspaceControlPanelButtons);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(WorkspaceControlPanelButtons, [{\n    key: \"render\",\n\n    /**\n     * render\n     *\n     * @return {type}  description\n     */\n    value: function render() {\n      var classes = this.props.classes;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(WindowListButton, null), /*#__PURE__*/React.createElement(WorkspaceMenuButton, null), /*#__PURE__*/React.createElement(WorkspaceOptionsButton, null), /*#__PURE__*/React.createElement(FullScreenButton, {\n        className: classes.ctrlBtn\n      }), /*#__PURE__*/React.createElement(PluginHook, this.props));\n    }\n  }]);\n\n  return WorkspaceControlPanelButtons;\n}(Component);\nWorkspaceControlPanelButtons.defaultProps = {\n  classes: {}\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React from 'react';\nimport { Rnd } from 'react-rnd';\nimport ResizeObserver from 'react-resize-observer';\nimport classNames from 'classnames';\nimport WorkspaceElasticWindow from '../containers/WorkspaceElasticWindow';\nimport ns from '../config/css-ns';\n/**\n * Represents a work area that contains any number of windows\n * @memberof Workspace\n * @private\n */\n\nvar WorkspaceElastic = /*#__PURE__*/function (_React$Component) {\n  _inherits(WorkspaceElastic, _React$Component);\n\n  var _super = _createSuper(WorkspaceElastic);\n\n  function WorkspaceElastic() {\n    _classCallCheck(this, WorkspaceElastic);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(WorkspaceElastic, [{\n    key: \"render\",\n\n    /**\n     */\n    value: function render() {\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          workspace = _this$props.workspace,\n          elasticLayout = _this$props.elasticLayout,\n          setWorkspaceViewportDimensions = _this$props.setWorkspaceViewportDimensions,\n          setWorkspaceViewportPosition = _this$props.setWorkspaceViewportPosition;\n      var viewportPosition = workspace.viewportPosition;\n      var offsetX = workspace.width / 2;\n      var offsetY = workspace.height / 2;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          height: '100%',\n          position: 'relative',\n          width: '100%'\n        }\n      }, /*#__PURE__*/React.createElement(ResizeObserver, {\n        onResize: function onResize(rect) {\n          setWorkspaceViewportDimensions(rect);\n        }\n      }), /*#__PURE__*/React.createElement(Rnd, {\n        size: {\n          height: workspace.height,\n          width: workspace.width\n        },\n        position: {\n          x: -1 * viewportPosition.x - offsetX,\n          y: -1 * viewportPosition.y - offsetY\n        },\n        enableResizing: {\n          bottom: false,\n          bottomLeft: false,\n          bottomRight: false,\n          left: false,\n          right: false,\n          top: false,\n          topLeft: false,\n          topRight: false\n        },\n        onDragStop: function onDragStop(e, d) {\n          setWorkspaceViewportPosition({\n            x: -1 * d.x - offsetX,\n            y: -1 * d.y - offsetY\n          });\n        },\n        cancel: \".\".concat(ns('window')),\n        className: classNames(classes.workspace, ns('workspace')),\n        disableDragging: !workspace.draggingEnabled\n      }, Object.keys(elasticLayout).map(function (windowId) {\n        return /*#__PURE__*/React.createElement(WorkspaceElasticWindow, {\n          key: windowId,\n          windowId: windowId\n        });\n      })));\n    }\n  }]);\n\n  return WorkspaceElastic;\n}(React.Component);\n\nexport default WorkspaceElastic;","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React from 'react';\nimport { Rnd } from 'react-rnd';\nimport Window from '../containers/Window';\nimport ns from '../config/css-ns';\n/**\n * Represents a work area that contains any number of windows\n * @memberof Workspace\n * @private\n */\n\nvar WorkspaceElasticWindow = /*#__PURE__*/function (_React$Component) {\n  _inherits(WorkspaceElasticWindow, _React$Component);\n\n  var _super = _createSuper(WorkspaceElasticWindow);\n\n  function WorkspaceElasticWindow() {\n    _classCallCheck(this, WorkspaceElasticWindow);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(WorkspaceElasticWindow, [{\n    key: \"render\",\n\n    /**\n     */\n    value: function render() {\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          companionWindowDimensions = _this$props.companionWindowDimensions,\n          focused = _this$props.focused,\n          layout = _this$props.layout,\n          workspace = _this$props.workspace,\n          updateElasticWindowLayout = _this$props.updateElasticWindowLayout;\n      var offsetX = workspace.width / 2;\n      var offsetY = workspace.height / 2;\n      return /*#__PURE__*/React.createElement(Rnd, {\n        key: \"\".concat(layout.windowId, \"-\").concat(workspace.id),\n        size: {\n          height: layout.height + companionWindowDimensions.height,\n          width: layout.width + companionWindowDimensions.width\n        },\n        position: {\n          x: layout.x + offsetX,\n          y: layout.y + offsetY\n        },\n        bounds: \"parent\",\n        onDragStop: function onDragStop(e, d) {\n          updateElasticWindowLayout(layout.windowId, {\n            x: d.x - offsetX,\n            y: d.y - offsetY\n          });\n        },\n        onResize: function onResize(e, direction, ref, delta, position) {\n          updateElasticWindowLayout(layout.windowId, {\n            height: Number.parseInt(ref.style.height, 10) - companionWindowDimensions.height,\n            width: Number.parseInt(ref.style.width, 10) - companionWindowDimensions.width,\n            x: position.x - offsetX,\n            y: position.y - offsetY\n          });\n        },\n        dragHandleClassName: ns('window-top-bar'),\n        className: focused ? classes.focused : null\n      }, /*#__PURE__*/React.createElement(Window, {\n        windowId: layout.windowId\n      }));\n    }\n  }]);\n\n  return WorkspaceElasticWindow;\n}(React.Component);\n\nWorkspaceElasticWindow.defaultProps = {\n  classes: {},\n  companionWindowDimensions: {\n    height: 0,\n    width: 0\n  },\n  focused: false\n};\nexport default WorkspaceElasticWindow;","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Typography from '@material-ui/core/Typography';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\n/**\n */\n\nexport var WorkspaceExport = /*#__PURE__*/function (_Component) {\n  _inherits(WorkspaceExport, _Component);\n\n  var _super = _createSuper(WorkspaceExport);\n\n  /** */\n  function WorkspaceExport(props) {\n    var _this;\n\n    _classCallCheck(this, WorkspaceExport);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      copied: false\n    };\n    _this.onCopy = _this.onCopy.bind(_assertThisInitialized(_this));\n    _this.handleClose = _this.handleClose.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /** Handle closing after the content is copied and the snackbar is done */\n\n\n  _createClass(WorkspaceExport, [{\n    key: \"handleClose\",\n    value: function handleClose() {\n      var handleClose = this.props.handleClose;\n      handleClose();\n    }\n    /** Show the snackbar */\n\n  }, {\n    key: \"onCopy\",\n    value: function onCopy() {\n      this.setState({\n        copied: true\n      });\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"exportedState\",\n    value: function exportedState() {\n      var exportableState = this.props.exportableState;\n      return JSON.stringify(exportableState, null, 2);\n    }\n    /**\n     * render\n     * @return\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          children = _this$props.children,\n          classes = _this$props.classes,\n          container = _this$props.container,\n          open = _this$props.open,\n          t = _this$props.t;\n      var copied = this.state.copied;\n\n      if (copied) {\n        return /*#__PURE__*/React.createElement(Snackbar, {\n          anchorOrigin: {\n            horizontal: 'center',\n            vertical: 'top'\n          },\n          open: true,\n          autoHideDuration: 6000,\n          onClose: this.handleClose,\n          message: t('exportCopied'),\n          action: /*#__PURE__*/React.createElement(IconButton, {\n            size: \"small\",\n            \"aria-label\": t('dismiss'),\n            color: \"inherit\",\n            onClick: this.handleClose\n          }, /*#__PURE__*/React.createElement(CloseIcon, {\n            fontSize: \"small\"\n          }))\n        });\n      }\n\n      return /*#__PURE__*/React.createElement(Dialog, {\n        id: \"workspace-settings\",\n        container: container,\n        open: open,\n        onClose: this.handleClose,\n        scroll: \"paper\",\n        fullWidth: true,\n        maxWidth: \"sm\"\n      }, /*#__PURE__*/React.createElement(DialogTitle, {\n        id: \"form-dialog-title\",\n        disableTypography: true\n      }, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"h2\"\n      }, t('downloadExport'))), /*#__PURE__*/React.createElement(DialogContent, null, /*#__PURE__*/React.createElement(Accordion, {\n        elevation: 0\n      }, /*#__PURE__*/React.createElement(AccordionSummary, {\n        classes: {\n          root: classes.accordionTitle\n        },\n        expandIcon: /*#__PURE__*/React.createElement(ExpandMoreIcon, null)\n      }, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"h4\"\n      }, t('viewWorkspaceConfiguration'))), /*#__PURE__*/React.createElement(AccordionDetails, null, children, /*#__PURE__*/React.createElement(\"pre\", null, this.exportedState())))), /*#__PURE__*/React.createElement(DialogActions, null, /*#__PURE__*/React.createElement(Button, {\n        onClick: this.handleClose\n      }, t('cancel')), /*#__PURE__*/React.createElement(CopyToClipboard, {\n        onCopy: this.onCopy,\n        text: this.exportedState()\n      }, /*#__PURE__*/React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\"\n      }, t('copy')))));\n    }\n  }]);\n\n  return WorkspaceExport;\n}(Component);\nWorkspaceExport.defaultProps = {\n  children: null,\n  classes: {},\n  container: null,\n  open: false,\n  t: function t(key) {\n    return key;\n  }\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { DialogActions, TextField, Typography } from '@material-ui/core';\nimport Button from '@material-ui/core/Button';\nimport ScrollIndicatedDialogContent from '../containers/ScrollIndicatedDialogContent';\n/**\n */\n\nexport var WorkspaceImport = /*#__PURE__*/function (_Component) {\n  _inherits(WorkspaceImport, _Component);\n\n  var _super = _createSuper(WorkspaceImport);\n\n  /**\n   *\n   * constructor\n   */\n  function WorkspaceImport(props) {\n    var _this;\n\n    _classCallCheck(this, WorkspaceImport);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      configImportValue: ''\n    };\n    _this.handleImportConfig = _this.handleImportConfig.bind(_assertThisInitialized(_this));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /**\n   * @private\n   */\n\n\n  _createClass(WorkspaceImport, [{\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      event.preventDefault();\n      this.setState({\n        configImportValue: event.target.value\n      });\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"handleImportConfig\",\n    value: function handleImportConfig(event) {\n      var _this$props = this.props,\n          handleClose = _this$props.handleClose,\n          importConfig = _this$props.importConfig;\n      var configImportValue = this.state.configImportValue;\n\n      try {\n        var configJSON = JSON.parse(configImportValue);\n        importConfig(configJSON);\n        handleClose();\n      } catch (ex) {\n        var addError = this.props.addError;\n        addError(ex.toString());\n      }\n    }\n    /**\n     * render\n     * @return\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          classes = _this$props2.classes,\n          handleClose = _this$props2.handleClose,\n          open = _this$props2.open,\n          t = _this$props2.t;\n      return /*#__PURE__*/React.createElement(Dialog, {\n        \"aria-labelledby\": \"workspace-import-title\",\n        id: \"workspace-import\",\n        onEscapeKeyDown: handleClose,\n        onClose: handleClose,\n        open: open,\n        fullWidth: true,\n        maxWidth: \"sm\"\n      }, /*#__PURE__*/React.createElement(DialogTitle, {\n        id: \"workspace-import-title\",\n        disableTypography: true\n      }, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"h2\"\n      }, t('importWorkspace'))), /*#__PURE__*/React.createElement(ScrollIndicatedDialogContent, null, /*#__PURE__*/React.createElement(TextField, {\n        className: classes.textField,\n        id: \"workspace-import-input\",\n        multiline: true,\n        onChange: this.handleChange,\n        rows: \"15\",\n        variant: \"filled\",\n        inputProps: {\n          autoFocus: 'autofocus',\n          className: classes.textInput\n        },\n        helperText: t('importWorkspaceHint')\n      })), /*#__PURE__*/React.createElement(DialogActions, null, /*#__PURE__*/React.createElement(Button, {\n        className: classes.cancelBtn,\n        onClick: handleClose\n      }, t('cancel')), /*#__PURE__*/React.createElement(Button, {\n        color: \"primary\",\n        onClick: this.handleImportConfig,\n        variant: \"contained\"\n      }, t('import'))));\n    }\n  }]);\n\n  return WorkspaceImport;\n}(Component);\nWorkspaceImport.defaultProps = {\n  classes: {},\n  open: false,\n  t: function t(key) {\n    return key;\n  }\n};","function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ExpandLess from '@material-ui/icons/ExpandLessSharp';\nimport ExpandMore from '@material-ui/icons/ExpandMoreSharp';\n/**\n * NestedMenu ~ A presentation component to render a menu item and have\n * it control the visibility of the MUI List passed in as the children\n*/\n\nexport var NestedMenu = /*#__PURE__*/function (_Component) {\n  _inherits(NestedMenu, _Component);\n\n  var _super = _createSuper(NestedMenu);\n\n  /**\n   * constructor -\n   */\n  function NestedMenu(props) {\n    var _this;\n\n    _classCallCheck(this, NestedMenu);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      nestedMenuIsOpen: false\n    };\n    _this.handleMenuClick = _this.handleMenuClick.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /**\n   * handleMenuClick toggles the nestedMenuIsOpen state\n   */\n\n\n  _createClass(NestedMenu, [{\n    key: \"handleMenuClick\",\n    value: function handleMenuClick() {\n      var nestedMenuIsOpen = this.state.nestedMenuIsOpen;\n      this.setState({\n        nestedMenuIsOpen: !nestedMenuIsOpen\n      });\n    }\n    /**\n     * Returns the rendered component.  Spreads unused props to MenuItem\n    */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var nestedMenuIsOpen = this.state.nestedMenuIsOpen;\n\n      var _this$props = this.props,\n          children = _this$props.children,\n          icon = _this$props.icon,\n          label = _this$props.label,\n          otherProps = _objectWithoutProperties(_this$props, [\"children\", \"icon\", \"label\"]);\n\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MenuItem, Object.assign({\n        onClick: this.handleMenuClick,\n        divider: nestedMenuIsOpen\n      }, otherProps), icon && /*#__PURE__*/React.createElement(ListItemIcon, null, icon), /*#__PURE__*/React.createElement(ListItemText, {\n        primaryTypographyProps: {\n          variant: 'body1'\n        }\n      }, label), nestedMenuIsOpen ? /*#__PURE__*/React.createElement(ExpandLess, null) : /*#__PURE__*/React.createElement(ExpandMore, null)), nestedMenuIsOpen && children);\n    }\n  }]);\n\n  return NestedMenu;\n}(Component);\nNestedMenu.defaultProps = {\n  icon: null\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Typography from '@material-ui/core/Typography';\nimport LanguageSettings from '../containers/LanguageSettings';\nimport { NestedMenu } from './NestedMenu';\nimport WorkspaceSelectionDialog from '../containers/WorkspaceSelectionDialog';\nimport ns from '../config/css-ns';\nimport ChangeThemeDialog from '../containers/ChangeThemeDialog';\nimport { PluginHook } from './PluginHook';\n/**\n */\n\nexport var WorkspaceMenu = /*#__PURE__*/function (_Component) {\n  _inherits(WorkspaceMenu, _Component);\n\n  var _super = _createSuper(WorkspaceMenu);\n\n  /**\n   * constructor -\n   */\n  function WorkspaceMenu(props) {\n    var _this;\n\n    _classCallCheck(this, WorkspaceMenu);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      changeTheme: {},\n      toggleZoom: {},\n      workspaceSelection: {}\n    };\n    _this.handleMenuItemClick = _this.handleMenuItemClick.bind(_assertThisInitialized(_this));\n    _this.handleMenuItemClose = _this.handleMenuItemClose.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /**\n   * @private\n   */\n\n\n  _createClass(WorkspaceMenu, [{\n    key: \"handleMenuItemClick\",\n    value: function handleMenuItemClick(item, event) {\n      var obj = {};\n      obj[item] = {};\n      obj[item].open = true;\n      obj[item].anchorEl = event.currentTarget;\n      this.setState(obj);\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"handleMenuItemClose\",\n    value: function handleMenuItemClose(item) {\n      var _this2 = this;\n\n      return function (event) {\n        var obj = {};\n        obj[item] = {};\n        obj[item].open = false;\n        obj[item].anchorEl = null;\n\n        _this2.setState(obj);\n      };\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"handleZoomToggleClick\",\n    value: function handleZoomToggleClick() {\n      var _this$props = this.props,\n          toggleZoomControls = _this$props.toggleZoomControls,\n          showZoomControls = _this$props.showZoomControls;\n      toggleZoomControls(!showZoomControls);\n    }\n    /**\n     * render\n     * @return\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props2 = this.props,\n          containerId = _this$props2.containerId,\n          handleClose = _this$props2.handleClose,\n          anchorEl = _this$props2.anchorEl,\n          showThemePicker = _this$props2.showThemePicker,\n          isWorkspaceAddVisible = _this$props2.isWorkspaceAddVisible,\n          t = _this$props2.t,\n          showZoomControls = _this$props2.showZoomControls;\n      var _this$state = this.state,\n          changeTheme = _this$state.changeTheme,\n          toggleZoom = _this$state.toggleZoom,\n          workspaceSelection = _this$state.workspaceSelection;\n      var container = document.querySelector(\"#\".concat(containerId, \" .\").concat(ns('viewer')));\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Menu, {\n        id: \"workspace-menu\",\n        container: container,\n        anchorEl: anchorEl,\n        anchorOrigin: {\n          horizontal: 'right',\n          vertical: 'top'\n        },\n        transformOrigin: {\n          horizontal: 'left',\n          vertical: 'top'\n        },\n        open: Boolean(anchorEl),\n        onClose: handleClose\n      }, /*#__PURE__*/React.createElement(MenuItem, {\n        \"aria-haspopup\": \"true\",\n        disabled: isWorkspaceAddVisible,\n        onClick: function onClick(e) {\n          _this3.handleZoomToggleClick(e);\n\n          handleClose(e);\n        },\n        \"aria-owns\": toggleZoom.anchorEl ? 'toggle-zoom-menu' : undefined\n      }, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"body1\"\n      }, showZoomControls ? t('hideZoomControls') : t('showZoomControls'))), /*#__PURE__*/React.createElement(MenuItem, {\n        \"aria-haspopup\": \"true\",\n        onClick: function onClick(e) {\n          _this3.handleMenuItemClick('workspaceSelection', e);\n\n          handleClose(e);\n        },\n        \"aria-owns\": workspaceSelection.anchorEl ? 'workspace-selection' : undefined\n      }, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"body1\"\n      }, t('selectWorkspaceMenu'))), /*#__PURE__*/React.createElement(NestedMenu, {\n        label: t('language')\n      }, /*#__PURE__*/React.createElement(LanguageSettings, {\n        afterSelect: handleClose\n      })), showThemePicker && /*#__PURE__*/React.createElement(MenuItem, {\n        \"aria-haspopup\": \"true\",\n        onClick: function onClick(e) {\n          _this3.handleMenuItemClick('changeTheme', e);\n\n          handleClose(e);\n        },\n        \"aria-owns\": changeTheme.anchorEl ? 'change-theme' : undefined\n      }, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"body1\"\n      }, t('changeTheme'))), /*#__PURE__*/React.createElement(PluginHook, this.props)), Boolean(changeTheme.open) && /*#__PURE__*/React.createElement(ChangeThemeDialog, {\n        container: container,\n        handleClose: this.handleMenuItemClose('changeTheme'),\n        open: Boolean(changeTheme.open)\n      }), Boolean(workspaceSelection.open) && /*#__PURE__*/React.createElement(WorkspaceSelectionDialog, {\n        open: Boolean(workspaceSelection.open),\n        container: container,\n        handleClose: this.handleMenuItemClose('workspaceSelection')\n      }));\n    }\n  }]);\n\n  return WorkspaceMenu;\n}(Component);\nWorkspaceMenu.defaultProps = {\n  anchorEl: null,\n  isWorkspaceAddVisible: false,\n  showThemePicker: false,\n  showZoomControls: false,\n  t: function t(key) {\n    return key;\n  },\n  toggleZoomControls: function toggleZoomControls() {}\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport SettingsIcon from '@material-ui/icons/SettingsSharp';\nimport classNames from 'classnames';\nimport WorkspaceMenu from '../containers/WorkspaceMenu';\nimport MiradorMenuButton from '../containers/MiradorMenuButton';\n/**\n */\n\nexport var WorkspaceMenuButton = /*#__PURE__*/function (_Component) {\n  _inherits(WorkspaceMenuButton, _Component);\n\n  var _super = _createSuper(WorkspaceMenuButton);\n\n  /**\n   * constructor -\n   */\n  function WorkspaceMenuButton(props) {\n    var _this;\n\n    _classCallCheck(this, WorkspaceMenuButton);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      anchorEl: null\n    };\n    _this.handleMenuClick = _this.handleMenuClick.bind(_assertThisInitialized(_this));\n    _this.handleMenuClose = _this.handleMenuClose.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /**\n   * @private\n   */\n\n\n  _createClass(WorkspaceMenuButton, [{\n    key: \"handleMenuClick\",\n    value: function handleMenuClick(event) {\n      this.setState({\n        anchorEl: event.currentTarget\n      });\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"handleMenuClose\",\n    value: function handleMenuClose() {\n      this.setState({\n        anchorEl: null\n      });\n    }\n    /**\n     * render\n     * @return\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          t = _this$props.t;\n      var anchorEl = this.state.anchorEl;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MiradorMenuButton, {\n        \"aria-haspopup\": \"true\",\n        \"aria-label\": t('workspaceMenu'),\n        \"aria-owns\": anchorEl ? 'workspace-menu' : undefined,\n        className: classNames(classes.ctrlBtn, anchorEl ? classes.ctrlBtnSelected : null),\n        id: \"menuBtn\",\n        onClick: this.handleMenuClick\n      }, /*#__PURE__*/React.createElement(SettingsIcon, null)), /*#__PURE__*/React.createElement(WorkspaceMenu, {\n        anchorEl: anchorEl,\n        handleClose: this.handleMenuClose\n      }));\n    }\n  }]);\n\n  return WorkspaceMenuButton;\n}(Component);\nWorkspaceMenuButton.defaultProps = {\n  t: function t(key) {\n    return key;\n  }\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React from 'react';\nimport { MosaicWithoutDragDropContext, MosaicWindow, getLeaves, createBalancedTreeFromLeaves } from 'react-mosaic-component';\nimport difference from 'lodash/difference';\nimport isEqual from 'lodash/isEqual';\nimport classNames from 'classnames';\nimport MosaicRenderPreview from '../containers/MosaicRenderPreview';\nimport Window from '../containers/Window';\nimport MosaicLayout from '../lib/MosaicLayout';\n/**\n * Represents a work area that contains any number of windows\n * @memberof Workspace\n * @private\n */\n\nexport var WorkspaceMosaic = /*#__PURE__*/function (_React$Component) {\n  _inherits(WorkspaceMosaic, _React$Component);\n\n  var _super = _createSuper(WorkspaceMosaic);\n\n  /**\n   */\n  function WorkspaceMosaic(props) {\n    var _this;\n\n    _classCallCheck(this, WorkspaceMosaic);\n\n    _this = _super.call(this, props);\n    _this.tileRenderer = _this.tileRenderer.bind(_assertThisInitialized(_this));\n    _this.mosaicChange = _this.mosaicChange.bind(_assertThisInitialized(_this));\n    _this.determineWorkspaceLayout = _this.determineWorkspaceLayout.bind(_assertThisInitialized(_this));\n    _this.zeroStateView = /*#__PURE__*/React.createElement(\"div\", null);\n    _this.windowPaths = {};\n    _this.toolbarControls = [];\n    _this.additionalControls = [];\n    return _this;\n  }\n  /** */\n\n\n  _createClass(WorkspaceMosaic, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var updateWorkspaceMosaicLayout = this.props.updateWorkspaceMosaicLayout;\n      var newLayout = this.determineWorkspaceLayout();\n      if (newLayout) updateWorkspaceMosaicLayout(newLayout);\n    }\n    /** */\n\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props = this.props,\n          windowIds = _this$props.windowIds,\n          layout = _this$props.layout,\n          updateWorkspaceMosaicLayout = _this$props.updateWorkspaceMosaicLayout;\n      var prevWindows = prevProps.windowIds; // Handles when Windows are added (not via Add Resource UI) Could be a workspace import\n\n      if (!windowIds.every(function (e) {\n        return prevWindows.includes(e);\n      })) {\n        var newLayout = this.determineWorkspaceLayout();\n        if (!isEqual(newLayout, layout)) updateWorkspaceMosaicLayout(newLayout);\n        return;\n      } // Handles when Windows are removed from the state\n\n\n      if (!prevWindows.every(function (e) {\n        return windowIds.includes(e);\n      })) {\n        // There are no more remaining Windows, just return an empty layout\n        if (windowIds.length === 0) {\n          updateWorkspaceMosaicLayout(null);\n          return;\n        }\n\n        var removedWindows = difference(prevWindows, windowIds);\n\n        var _newLayout = new MosaicLayout(layout);\n\n        _newLayout.removeWindows(removedWindows, this.windowPaths);\n\n        updateWorkspaceMosaicLayout(_newLayout.layout);\n      }\n    }\n    /**\n     * bookkeepPath - used to book keep Window's path's\n     * @param  {String} windowId   [description]\n     * @param  {Array} path [description]\n     */\n\n  }, {\n    key: \"bookkeepPath\",\n    value: function bookkeepPath(windowId, path) {\n      this.windowPaths[windowId] = path;\n    }\n    /**\n     * Used to determine whether or not a \"new\" layout should be autogenerated.\n     */\n\n  }, {\n    key: \"determineWorkspaceLayout\",\n    value: function determineWorkspaceLayout() {\n      var _this$props2 = this.props,\n          windowIds = _this$props2.windowIds,\n          layout = _this$props2.layout;\n      var leaveKeys = getLeaves(layout); // Windows were added\n\n      if (!windowIds.every(function (e) {\n        return leaveKeys.includes(e);\n      })) {\n        // No current layout, so just generate a new one\n        if (leaveKeys.length < 2) {\n          return createBalancedTreeFromLeaves(windowIds);\n        } // Add new windows to layout\n\n\n        var addedWindows = difference(windowIds, leaveKeys);\n        var newLayout = new MosaicLayout(layout);\n        newLayout.addWindows(addedWindows);\n        return newLayout.layout;\n      } // Windows were removed (perhaps in a different Workspace). We don't have a\n      // way to reconfigure.. so we have to random generate\n\n\n      if (!leaveKeys.every(function (e) {\n        return windowIds.includes(e);\n      })) {\n        return createBalancedTreeFromLeaves(windowIds);\n      }\n\n      return layout;\n    }\n    /** */\n\n  }, {\n    key: \"tileRenderer\",\n\n    /**\n     * Render a tile (Window) in the Mosaic.\n     */\n    value: function tileRenderer(id, path) {\n      var _this$props3 = this.props,\n          windowIds = _this$props3.windowIds,\n          workspaceId = _this$props3.workspaceId;\n      if (!windowIds.includes(id)) return null;\n      this.bookkeepPath(id, path);\n      return /*#__PURE__*/React.createElement(MosaicWindow, {\n        toolbarControls: this.toolbarControls,\n        additionalControls: this.additionalControls,\n        path: path,\n        windowId: id,\n        renderPreview: WorkspaceMosaic.renderPreview\n      }, /*#__PURE__*/React.createElement(Window, {\n        key: \"\".concat(id, \"-\").concat(workspaceId),\n        windowId: id\n      }));\n    }\n    /**\n     * Update the redux store when the Mosaic is changed.\n     */\n\n  }, {\n    key: \"mosaicChange\",\n    value: function mosaicChange(newLayout) {\n      var updateWorkspaceMosaicLayout = this.props.updateWorkspaceMosaicLayout;\n      updateWorkspaceMosaicLayout(newLayout);\n    }\n    /**\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          layout = _this$props4.layout,\n          classes = _this$props4.classes;\n      return /*#__PURE__*/React.createElement(MosaicWithoutDragDropContext, {\n        renderTile: this.tileRenderer,\n        initialValue: layout || this.determineWorkspaceLayout(),\n        onChange: this.mosaicChange,\n        className: classNames('mirador-mosaic', classes.root),\n        zeroStateView: this.zeroStateView\n      });\n    }\n  }], [{\n    key: \"renderPreview\",\n    value: function renderPreview(mosaicProps) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mosaic-preview\",\n        \"aria-hidden\": true\n      }, /*#__PURE__*/React.createElement(MosaicRenderPreview, {\n        windowId: mosaicProps.windowId\n      }));\n    }\n  }]);\n\n  return WorkspaceMosaic;\n}(React.Component);\nWorkspaceMosaic.defaultProps = {\n  layout: undefined,\n  windowIds: []\n};","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport MoreHorizontalIcon from '@material-ui/icons/MoreHorizSharp';\nimport MiradorMenuButton from '../containers/MiradorMenuButton';\nimport WorkspaceOptionsMenu from '../containers/WorkspaceOptionsMenu';\n/**\n * WorkspaceOptionsButton ~\n*/\n\nexport var WorkspaceOptionsButton = /*#__PURE__*/function (_Component) {\n  _inherits(WorkspaceOptionsButton, _Component);\n\n  var _super = _createSuper(WorkspaceOptionsButton);\n\n  /**\n   * constructor -\n   */\n  function WorkspaceOptionsButton(props) {\n    var _this;\n\n    _classCallCheck(this, WorkspaceOptionsButton);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      anchorEl: null\n    };\n    _this.handleMenuClick = _this.handleMenuClick.bind(_assertThisInitialized(_this));\n    _this.handleMenuClose = _this.handleMenuClose.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /**\n   * @private\n   */\n\n\n  _createClass(WorkspaceOptionsButton, [{\n    key: \"handleMenuClick\",\n    value: function handleMenuClick(event) {\n      this.setState({\n        anchorEl: event.currentTarget\n      });\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"handleMenuClose\",\n    value: function handleMenuClose() {\n      this.setState({\n        anchorEl: null\n      });\n    }\n    /**\n     * Returns the rendered component\n    */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          t = _this$props.t;\n      var anchorEl = this.state.anchorEl;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MiradorMenuButton, {\n        \"aria-label\": t('workspaceOptions'),\n        className: classNames(classes.ctrlBtn, anchorEl ? classes.ctrlBtnSelected : null),\n        onClick: this.handleMenuClick\n      }, /*#__PURE__*/React.createElement(MoreHorizontalIcon, null)), /*#__PURE__*/React.createElement(WorkspaceOptionsMenu, {\n        anchorEl: anchorEl,\n        handleClose: this.handleMenuClose\n      }));\n    }\n  }]);\n\n  return WorkspaceOptionsButton;\n}(Component);","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport ImportIcon from '@material-ui/icons/Input';\nimport SaveAltIcon from '@material-ui/icons/SaveAltSharp';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Typography from '@material-ui/core/Typography';\nimport WorkspaceExport from '../containers/WorkspaceExport';\nimport WorkspaceImport from '../containers/WorkspaceImport';\nimport { PluginHook } from './PluginHook';\nimport ns from '../config/css-ns';\n/**\n * WorkspaceOptionsMenu ~ the menu for workspace options such as import/export\n*/\n\nexport var WorkspaceOptionsMenu = /*#__PURE__*/function (_Component) {\n  _inherits(WorkspaceOptionsMenu, _Component);\n\n  var _super = _createSuper(WorkspaceOptionsMenu);\n\n  /**\n   * constructor -\n   */\n  function WorkspaceOptionsMenu(props) {\n    var _this;\n\n    _classCallCheck(this, WorkspaceOptionsMenu);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      exportWorkspace: {},\n      importWorkspace: {}\n    };\n    _this.handleMenuItemClick = _this.handleMenuItemClick.bind(_assertThisInitialized(_this));\n    _this.handleMenuItemClose = _this.handleMenuItemClose.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /**\n   * @private\n   */\n\n\n  _createClass(WorkspaceOptionsMenu, [{\n    key: \"handleMenuItemClick\",\n    value: function handleMenuItemClick(item) {\n      var obj = {};\n      obj[item] = {};\n      obj[item].open = true;\n      this.setState(obj);\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"handleMenuItemClose\",\n    value: function handleMenuItemClose(item) {\n      var _this2 = this;\n\n      return function (event) {\n        var obj = {};\n        obj[item] = {};\n        obj[item].open = false;\n\n        _this2.setState(obj);\n      };\n    }\n    /**\n     * Returns the rendered component\n    */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props = this.props,\n          anchorEl = _this$props.anchorEl,\n          containerId = _this$props.containerId,\n          handleClose = _this$props.handleClose,\n          t = _this$props.t;\n      var _this$state = this.state,\n          exportWorkspace = _this$state.exportWorkspace,\n          importWorkspace = _this$state.importWorkspace;\n      var container = document.querySelector(\"#\".concat(containerId, \" .\").concat(ns('viewer')));\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Menu, {\n        id: \"workspace-options-menu\",\n        container: container,\n        anchorEl: anchorEl,\n        anchorOrigin: {\n          horizontal: 'right',\n          vertical: 'top'\n        },\n        transformOrigin: {\n          horizontal: 'left',\n          vertical: 'top'\n        },\n        open: Boolean(anchorEl),\n        onClose: handleClose\n      }, /*#__PURE__*/React.createElement(MenuItem, {\n        \"aria-haspopup\": \"true\",\n        onClick: function onClick() {\n          _this3.handleMenuItemClick('exportWorkspace');\n\n          handleClose();\n        },\n        \"aria-owns\": exportWorkspace.open ? 'workspace-export' : undefined\n      }, /*#__PURE__*/React.createElement(ListItemIcon, null, /*#__PURE__*/React.createElement(SaveAltIcon, null)), /*#__PURE__*/React.createElement(Typography, {\n        variant: \"body1\"\n      }, t('downloadExportWorkspace'))), /*#__PURE__*/React.createElement(MenuItem, {\n        \"aria-haspopup\": \"true\",\n        id: \"workspace-menu-import\",\n        onClick: function onClick() {\n          _this3.handleMenuItemClick('importWorkspace');\n\n          handleClose();\n        },\n        \"aria-owns\": exportWorkspace.open ? 'workspace-import' : undefined\n      }, /*#__PURE__*/React.createElement(ListItemIcon, null, /*#__PURE__*/React.createElement(ImportIcon, null)), /*#__PURE__*/React.createElement(Typography, {\n        variant: \"body1\"\n      }, t('importWorkspace'))), /*#__PURE__*/React.createElement(PluginHook, this.props)), Boolean(exportWorkspace.open) && /*#__PURE__*/React.createElement(WorkspaceExport, {\n        open: Boolean(exportWorkspace.open),\n        container: container,\n        handleClose: this.handleMenuItemClose('exportWorkspace')\n      }), Boolean(importWorkspace.open) && /*#__PURE__*/React.createElement(WorkspaceImport, {\n        open: Boolean(importWorkspace.open),\n        container: container,\n        handleClose: this.handleMenuItemClose('importWorkspace')\n      }));\n    }\n  }]);\n\n  return WorkspaceOptionsMenu;\n}(Component);\nWorkspaceOptionsMenu.defaultProps = {\n  anchorEl: null\n};","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n/**\n * ElasticWorkspaceIcon ~\n*/\n\nexport default function ElasticWorkspaceIcon(props) {\n  return /*#__PURE__*/React.createElement(SvgIcon, props, /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"120\",\n    height: \"90\",\n    viewBox: \"0 0 300 225\"\n  }, /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"linearGradient\", {\n    id: \"linear-gradient\",\n    x1: \"0.5\",\n    y1: \"1\",\n    x2: \"0.5\",\n    gradientUnits: \"objectBoundingBox\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"0\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"0.14\",\n    stopOpacity: \"0.631\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"1\",\n    stopOpacity: \"0\"\n  })), /*#__PURE__*/React.createElement(\"linearGradient\", {\n    id: \"linear-gradient-2\",\n    x1: \"0.5\",\n    y1: \"1\",\n    x2: \"0.5\",\n    gradientUnits: \"objectBoundingBox\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"0\",\n    stopColor: \"#fff\",\n    stopOpacity: \"0\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"0.23\",\n    stopColor: \"#fff\",\n    stopOpacity: \"0.012\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"0.36\",\n    stopColor: \"#fff\",\n    stopOpacity: \"0.039\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"0.47\",\n    stopColor: \"#fff\",\n    stopOpacity: \"0.102\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"0.57\",\n    stopColor: \"#fff\",\n    stopOpacity: \"0.18\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"0.67\",\n    stopColor: \"#fff\",\n    stopOpacity: \"0.278\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"0.75\",\n    stopColor: \"#fff\",\n    stopOpacity: \"0.412\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"0.83\",\n    stopColor: \"#fff\",\n    stopOpacity: \"0.561\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"0.91\",\n    stopColor: \"#fff\",\n    stopOpacity: \"0.741\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"0.98\",\n    stopColor: \"#fff\",\n    stopOpacity: \"0.929\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"1\",\n    stopColor: \"#fff\"\n  })), /*#__PURE__*/React.createElement(\"clipPath\", {\n    id: \"clip-elastic_icon\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: \"300\",\n    height: \"225\"\n  }))), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"elastic_icon\",\n    \"data-name\": \"elastic icon\",\n    clipPath: \"url(#clip-elastic_icon)\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: \"300\",\n    height: \"225\",\n    fill: \"#fff\"\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Rectangle_278\",\n    \"data-name\": \"Rectangle 278\",\n    transform: \"translate(232 159)\",\n    fill: \"#88c6c3\",\n    stroke: \"#707070\",\n    strokeWidth: \"1\",\n    opacity: \"0.747\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: \"54\",\n    height: \"54\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"0.5\",\n    y: \"0.5\",\n    width: \"53\",\n    height: \"53\",\n    fill: \"none\"\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Rectangle_8\",\n    \"data-name\": \"Rectangle 8\",\n    transform: \"translate(7 148)\",\n    fill: \"#88c6c3\",\n    stroke: \"#707070\",\n    strokeWidth: \"1\",\n    opacity: \"0.747\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: \"70\",\n    height: \"70\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"0.5\",\n    y: \"0.5\",\n    width: \"69\",\n    height: \"69\",\n    fill: \"none\"\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Rectangle_258\",\n    \"data-name\": \"Rectangle 258\",\n    transform: \"translate(224 6)\",\n    fill: \"#88c6c3\",\n    stroke: \"#707070\",\n    strokeWidth: \"1\",\n    opacity: \"0.747\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: \"70\",\n    height: \"100\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"0.5\",\n    y: \"0.5\",\n    width: \"69\",\n    height: \"99\",\n    fill: \"none\"\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Rectangle_259\",\n    \"data-name\": \"Rectangle 259\",\n    transform: \"translate(71 64)\",\n    fill: \"#88c6c3\",\n    stroke: \"#707070\",\n    strokeWidth: \"1\",\n    opacity: \"0.747\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: \"115\",\n    height: \"75\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"0.5\",\n    y: \"0.5\",\n    width: \"114\",\n    height: \"74\",\n    fill: \"none\"\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Rectangle_260\",\n    \"data-name\": \"Rectangle 260\",\n    transform: \"translate(99 87)\",\n    fill: \"#88c6c3\",\n    stroke: \"#707070\",\n    strokeWidth: \"1\",\n    opacity: \"0.747\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: \"115\",\n    height: \"75\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"0.5\",\n    y: \"0.5\",\n    width: \"114\",\n    height: \"74\",\n    fill: \"none\"\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Group_689\",\n    \"data-name\": \"Group 689\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Group_687\",\n    \"data-name\": \"Group 687\",\n    transform: \"translate(0 3)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    id: \"checkbox\",\n    d: \"M258.766,37.316v146.5H39.053V37.316Zm40.07-39.254h-300v225h300Z\",\n    transform: \"translate(1.164 -1.063)\",\n    fill: \"#010101\",\n    fillRule: \"evenodd\",\n    opacity: \"0.246\"\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Path_821\",\n    \"data-name\": \"Path 821\",\n    transform: \"translate(40 36)\",\n    fill: \"none\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0,0H220V147H0Z\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 2 2 L 2 145 L 218 145 L 218 2 L 172.9869689941406 2 L 2 2 M 0 0 L 172.9869689941406 0 L 220 0 L 220 147 L 0 147 L 0 0 Z\",\n    stroke: \"none\",\n    fill: \"#01579b\"\n  }))), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Rectangle_257\",\n    \"data-name\": \"Rectangle 257\",\n    transform: \"translate(40 39)\",\n    fill: \"#fff\",\n    stroke: \"#01579b\",\n    strokeWidth: \"2\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: \"20\",\n    height: \"147\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"1\",\n    y: \"1\",\n    width: \"18\",\n    height: \"145\",\n    fill: \"none\"\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Group_688\",\n    \"data-name\": \"Group 688\",\n    transform: \"translate(-27.5 -126)\"\n  }, /*#__PURE__*/React.createElement(\"circle\", {\n    id: \"teal_circle\",\n    \"data-name\": \"teal circle\",\n    cx: \"7.5\",\n    cy: \"7.5\",\n    r: \"7.5\",\n    transform: \"translate(70 171)\",\n    fill: \"#009688\"\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Group_333\",\n    \"data-name\": \"Group 333\",\n    transform: \"translate(70 171)\",\n    opacity: \"0.12\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    id: \"gradient_border_2\",\n    \"data-name\": \"gradient border 2\",\n    d: \"M3408,959.089A4.911,4.911,0,1,1,3403.09,964a4.911,4.911,0,0,1,4.911-4.911m0-.089a5,5,0,1,0,5,5,5,5,0,0,0-5-5Z\",\n    transform: \"translate(-3403 -959)\",\n    fill: \"url(#linear-gradient)\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    id: \"gradient_border_1\",\n    \"data-name\": \"gradient border 1\",\n    d: \"M3408,959.089A4.911,4.911,0,1,1,3403.09,964a4.911,4.911,0,0,1,4.911-4.911m0-.089a5,5,0,1,0,5,5,5,5,0,0,0-5-5Z\",\n    transform: \"translate(-3403 -959)\",\n    fill: \"url(#linear-gradient-2)\"\n  })))))));\n}","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n/**\n * WorkspaceTypeMosaicIcon ~\n*/\n\nexport default function WorkspaceTypeMosaicIcon(props) {\n  return /*#__PURE__*/React.createElement(SvgIcon, props, /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"120\",\n    height: \"90\",\n    viewBox: \"0 0 300 225\"\n  }, /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"linearGradient\", {\n    id: \"linear-gradient\",\n    x1: \"0.5\",\n    y1: \"1\",\n    x2: \"0.5\",\n    gradientUnits: \"objectBoundingBox\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"0\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"0.14\",\n    stopOpacity: \"0.631\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"1\",\n    stopOpacity: \"0\"\n  })), /*#__PURE__*/React.createElement(\"linearGradient\", {\n    id: \"linear-gradient-2\",\n    x1: \"0.5\",\n    y1: \"1\",\n    x2: \"0.5\",\n    gradientUnits: \"objectBoundingBox\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"0\",\n    stopColor: \"#fff\",\n    stopOpacity: \"0\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"0.23\",\n    stopColor: \"#fff\",\n    stopOpacity: \"0.012\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"0.36\",\n    stopColor: \"#fff\",\n    stopOpacity: \"0.039\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"0.47\",\n    stopColor: \"#fff\",\n    stopOpacity: \"0.102\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"0.57\",\n    stopColor: \"#fff\",\n    stopOpacity: \"0.18\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"0.67\",\n    stopColor: \"#fff\",\n    stopOpacity: \"0.278\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"0.75\",\n    stopColor: \"#fff\",\n    stopOpacity: \"0.412\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"0.83\",\n    stopColor: \"#fff\",\n    stopOpacity: \"0.561\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"0.91\",\n    stopColor: \"#fff\",\n    stopOpacity: \"0.741\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"0.98\",\n    stopColor: \"#fff\",\n    stopOpacity: \"0.929\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: \"1\",\n    stopColor: \"#fff\"\n  })), /*#__PURE__*/React.createElement(\"clipPath\", {\n    id: \"clip-mosaic_icon\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: \"300\",\n    height: \"225\"\n  }))), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"mosaic_icon\",\n    \"data-name\": \"mosaic icon\",\n    clipPath: \"url(#clip-mosaic_icon)\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: \"300\",\n    height: \"225\",\n    fill: \"#fff\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    id: \"checkbox\",\n    d: \"M258.766,37.316v146.5H39.053V37.316Zm40.07-39.254h-300v225h300Z\",\n    transform: \"translate(1.163 1.938)\",\n    fill: \"#010101\",\n    fillRule: \"evenodd\",\n    opacity: \"0.5\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    id: \"checkbox-2\",\n    \"data-name\": \"checkbox\",\n    d: \"M258.766,37.316v146.5H39.053V37.316Zm40.07-39.254h-300v225h300Z\",\n    transform: \"translate(1.164 1.938)\",\n    fill: \"#010101\",\n    fillRule: \"evenodd\",\n    opacity: \"0.246\"\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Path_821\",\n    \"data-name\": \"Path 821\",\n    transform: \"translate(40 39)\",\n    fill: \"none\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0,0H220V147H0Z\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 2 2 L 2 145 L 218 145 L 218 2 L 172.9869689941406 2 L 2 2 M 0 0 L 172.9869689941406 0 L 220 0 L 220 147 L 0 147 L 0 0 Z\",\n    stroke: \"none\",\n    fill: \"#01579b\"\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Rectangle_257\",\n    \"data-name\": \"Rectangle 257\",\n    transform: \"translate(40 39)\",\n    fill: \"#fff\",\n    stroke: \"#01579b\",\n    strokeWidth: \"2\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: \"20\",\n    height: \"147\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"1\",\n    y: \"1\",\n    width: \"18\",\n    height: \"145\",\n    fill: \"none\"\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Group_688\",\n    \"data-name\": \"Group 688\",\n    transform: \"translate(-27.5 -126)\"\n  }, /*#__PURE__*/React.createElement(\"circle\", {\n    id: \"teal_circle\",\n    \"data-name\": \"teal circle\",\n    cx: \"7.5\",\n    cy: \"7.5\",\n    r: \"7.5\",\n    transform: \"translate(70 171)\",\n    fill: \"#009688\"\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Group_333\",\n    \"data-name\": \"Group 333\",\n    transform: \"translate(70 171)\",\n    opacity: \"0.12\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    id: \"gradient_border_2\",\n    \"data-name\": \"gradient border 2\",\n    d: \"M3408,959.089A4.911,4.911,0,1,1,3403.09,964a4.911,4.911,0,0,1,4.911-4.911m0-.089a5,5,0,1,0,5,5,5,5,0,0,0-5-5Z\",\n    transform: \"translate(-3403 -959)\",\n    fill: \"url(#linear-gradient)\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    id: \"gradient_border_1\",\n    \"data-name\": \"gradient border 1\",\n    d: \"M3408,959.089A4.911,4.911,0,1,1,3403.09,964a4.911,4.911,0,0,1,4.911-4.911m0-.089a5,5,0,1,0,5,5,5,5,0,0,0-5-5Z\",\n    transform: \"translate(-3403 -959)\",\n    fill: \"url(#linear-gradient-2)\"\n  }))), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Rectangle_270\",\n    \"data-name\": \"Rectangle 270\",\n    transform: \"translate(60 40.647)\",\n    fill: \"#88c6c3\",\n    stroke: \"#707070\",\n    strokeWidth: \"1\",\n    opacity: \"0.747\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: \"99\",\n    height: \"72\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"0.5\",\n    y: \"0.5\",\n    width: \"98\",\n    height: \"71\",\n    fill: \"none\"\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Rectangle_271\",\n    \"data-name\": \"Rectangle 271\",\n    transform: \"translate(159 40.647)\",\n    fill: \"#88c6c3\",\n    stroke: \"#707070\",\n    strokeWidth: \"1\",\n    opacity: \"0.747\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: \"99\",\n    height: \"72\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"0.5\",\n    y: \"0.5\",\n    width: \"98\",\n    height: \"71\",\n    fill: \"none\"\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Rectangle_272\",\n    \"data-name\": \"Rectangle 272\",\n    transform: \"translate(192 112.647)\",\n    fill: \"#88c6c3\",\n    stroke: \"#707070\",\n    strokeWidth: \"1\",\n    opacity: \"0.747\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: \"66\",\n    height: \"71.45\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"0.5\",\n    y: \"0.5\",\n    width: \"65\",\n    height: \"70.45\",\n    fill: \"none\"\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Rectangle_284\",\n    \"data-name\": \"Rectangle 284\",\n    transform: \"translate(60 112.647)\",\n    fill: \"#88c6c3\",\n    stroke: \"#707070\",\n    strokeWidth: \"1\",\n    opacity: \"0.747\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: \"66\",\n    height: \"71.45\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"0.5\",\n    y: \"0.5\",\n    width: \"65\",\n    height: \"70.45\",\n    fill: \"none\"\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Rectangle_285\",\n    \"data-name\": \"Rectangle 285\",\n    transform: \"translate(126 112.647)\",\n    fill: \"#88c6c3\",\n    stroke: \"#707070\",\n    strokeWidth: \"1\",\n    opacity: \"0.747\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: \"66\",\n    height: \"71.45\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"0.5\",\n    y: \"0.5\",\n    width: \"65\",\n    height: \"70.45\",\n    fill: \"none\"\n  })))));\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { Card, CardContent, MenuList, MenuItem, Typography } from '@material-ui/core';\nimport WorkspaceTypeElasticIcon from './icons/WorkspaceTypeElasticIcon';\nimport WorkspaceTypeMosaicIcon from './icons/WorkspaceTypeMosaicIcon';\nimport ScrollIndicatedDialogContent from '../containers/ScrollIndicatedDialogContent';\n/**\n */\n\nexport var WorkspaceSelectionDialog = /*#__PURE__*/function (_Component) {\n  _inherits(WorkspaceSelectionDialog, _Component);\n\n  var _super = _createSuper(WorkspaceSelectionDialog);\n\n  _createClass(WorkspaceSelectionDialog, null, [{\n    key: \"setInitialFocus\",\n\n    /**\n     * Set the initial focus when the dialog enters\n     * Find the selected item by using the current workspace type\n     * in a selector on the value attribute (which we need to set)\n    */\n    value: function setInitialFocus(dialogElement, workspaceType) {\n      var selectedListItem = dialogElement.querySelectorAll(\"li[value=\\\"\".concat(workspaceType, \"\\\"]\"));\n      if (!selectedListItem || selectedListItem.length === 0) return;\n      selectedListItem[0].focus();\n    }\n    /**\n     * constructor\n     */\n\n  }]);\n\n  function WorkspaceSelectionDialog(props) {\n    var _this;\n\n    _classCallCheck(this, WorkspaceSelectionDialog);\n\n    _this = _super.call(this, props);\n    _this.handleWorkspaceTypeChange = _this.handleWorkspaceTypeChange.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /**\n   * Propagate workspace type selection into the global state\n   */\n\n\n  _createClass(WorkspaceSelectionDialog, [{\n    key: \"handleWorkspaceTypeChange\",\n    value: function handleWorkspaceTypeChange(workspaceType) {\n      var _this$props = this.props,\n          handleClose = _this$props.handleClose,\n          updateWorkspace = _this$props.updateWorkspace;\n      updateWorkspace({\n        type: workspaceType\n      });\n      handleClose();\n    }\n    /**\n     * render\n     * @return\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          classes = _this$props2.classes,\n          container = _this$props2.container,\n          handleClose = _this$props2.handleClose,\n          open = _this$props2.open,\n          children = _this$props2.children,\n          t = _this$props2.t,\n          workspaceType = _this$props2.workspaceType;\n      return /*#__PURE__*/React.createElement(Dialog, {\n        \"aria-labelledby\": \"workspace-selection-dialog-title\",\n        container: container,\n        id: \"workspace-selection-dialog\",\n        onClose: handleClose,\n        onEntered: function onEntered(dialog) {\n          return WorkspaceSelectionDialog.setInitialFocus(dialog, workspaceType);\n        },\n        onEscapeKeyDown: handleClose,\n        open: open\n      }, /*#__PURE__*/React.createElement(DialogTitle, {\n        id: \"workspace-selection-dialog-title\",\n        disableTypography: true\n      }, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"h2\"\n      }, t('workspaceSelectionTitle'))), /*#__PURE__*/React.createElement(ScrollIndicatedDialogContent, null, children, /*#__PURE__*/React.createElement(MenuList, {\n        classes: {\n          root: classes.list\n        },\n        selected: workspaceType\n      }, /*#__PURE__*/React.createElement(MenuItem, {\n        className: classes.menuItem,\n        onClick: function onClick() {\n          return _this2.handleWorkspaceTypeChange('elastic');\n        },\n        selected: workspaceType === 'elastic',\n        value: \"elastic\"\n      }, /*#__PURE__*/React.createElement(Card, {\n        className: classes.card\n      }, /*#__PURE__*/React.createElement(WorkspaceTypeElasticIcon, {\n        className: classes.svgIcon,\n        viewBox: \"0 0 120 90\"\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.details\n      }, /*#__PURE__*/React.createElement(CardContent, {\n        classes: {\n          root: classes.root\n        },\n        className: classes.content\n      }, /*#__PURE__*/React.createElement(Typography, {\n        className: classes.headline,\n        component: \"p\",\n        variant: \"h3\"\n      }, t('elastic')), /*#__PURE__*/React.createElement(Typography, {\n        variant: \"body1\"\n      }, t('elasticDescription')))))), /*#__PURE__*/React.createElement(MenuItem, {\n        className: classes.menuItem,\n        onClick: function onClick() {\n          return _this2.handleWorkspaceTypeChange('mosaic');\n        },\n        selected: workspaceType === 'mosaic',\n        value: \"mosaic\"\n      }, /*#__PURE__*/React.createElement(Card, {\n        className: classes.card\n      }, /*#__PURE__*/React.createElement(WorkspaceTypeMosaicIcon, {\n        className: classes.svgIcon,\n        viewBox: \"0 0 120 90\"\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.details\n      }, /*#__PURE__*/React.createElement(CardContent, {\n        className: classes.content,\n        classes: {\n          root: classes.root\n        }\n      }, /*#__PURE__*/React.createElement(Typography, {\n        className: classes.headline,\n        component: \"p\",\n        variant: \"h3\"\n      }, t('mosaic')), /*#__PURE__*/React.createElement(Typography, {\n        variant: \"body1\"\n      }, t('mosaicDescription')))))))));\n    }\n  }]);\n\n  return WorkspaceSelectionDialog;\n}(Component);\nWorkspaceSelectionDialog.defaultProps = {\n  children: null,\n  container: null,\n  open: false,\n  t: function t(key) {\n    return key;\n  }\n};","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n/**\n * RestoreZoomIcon ~\n*/\n\nexport default function RestoreZoomIcon(props) {\n  return /*#__PURE__*/React.createElement(SvgIcon, props, /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"24\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6,15H9v3h2V13H6Zm9-6V6H13v5h5V9Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12,2A10,10,0,1,0,22,12,10,10,0,0,0,12,2Zm0,18a8,8,0,1,1,8-8,8,8,0,0,1-8,8Z\"\n  })));\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React, { Component } from 'react';\nimport AddCircleIcon from '@material-ui/icons/AddCircleOutlineSharp';\nimport RemoveCircleIcon from '@material-ui/icons/RemoveCircleOutlineSharp';\nimport RestoreZoomIcon from './icons/RestoreZoomIcon';\nimport MiradorMenuButton from '../containers/MiradorMenuButton';\n/**\n */\n\nexport var ZoomControls = /*#__PURE__*/function (_Component) {\n  _inherits(ZoomControls, _Component);\n\n  var _super = _createSuper(ZoomControls);\n\n  /**\n   * constructor -\n   */\n  function ZoomControls(props) {\n    var _this;\n\n    _classCallCheck(this, ZoomControls);\n\n    _this = _super.call(this, props);\n    _this.handleZoomInClick = _this.handleZoomInClick.bind(_assertThisInitialized(_this));\n    _this.handleZoomOutClick = _this.handleZoomOutClick.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  /**\n   * @private\n   */\n\n\n  _createClass(ZoomControls, [{\n    key: \"handleZoomInClick\",\n    value: function handleZoomInClick() {\n      var _this$props = this.props,\n          windowId = _this$props.windowId,\n          updateViewport = _this$props.updateViewport,\n          viewer = _this$props.viewer;\n      updateViewport(windowId, {\n        zoom: viewer.zoom * 2\n      });\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: \"handleZoomOutClick\",\n    value: function handleZoomOutClick() {\n      var _this$props2 = this.props,\n          windowId = _this$props2.windowId,\n          updateViewport = _this$props2.updateViewport,\n          viewer = _this$props2.viewer;\n      updateViewport(windowId, {\n        zoom: viewer.zoom / 2\n      });\n    }\n    /**\n     * render\n     * @return\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          displayDivider = _this$props3.displayDivider,\n          showZoomControls = _this$props3.showZoomControls,\n          classes = _this$props3.classes,\n          t = _this$props3.t,\n          zoomToWorld = _this$props3.zoomToWorld;\n\n      if (!showZoomControls) {\n        return /*#__PURE__*/React.createElement(React.Fragment, null);\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.zoom_controls\n      }, /*#__PURE__*/React.createElement(MiradorMenuButton, {\n        \"aria-label\": t('zoomIn'),\n        onClick: this.handleZoomInClick\n      }, /*#__PURE__*/React.createElement(AddCircleIcon, null)), /*#__PURE__*/React.createElement(MiradorMenuButton, {\n        \"aria-label\": t('zoomOut'),\n        onClick: this.handleZoomOutClick\n      }, /*#__PURE__*/React.createElement(RemoveCircleIcon, null)), /*#__PURE__*/React.createElement(MiradorMenuButton, {\n        \"aria-label\": t('zoomReset'),\n        onClick: function onClick() {\n          return zoomToWorld(false);\n        }\n      }, /*#__PURE__*/React.createElement(RestoreZoomIcon, null)), displayDivider && /*#__PURE__*/React.createElement(\"span\", {\n        className: classes.divider\n      }));\n    }\n  }]);\n\n  return ZoomControls;\n}(Component);\nZoomControls.defaultProps = {\n  displayDivider: true,\n  showZoomControls: false,\n  t: function t(key) {\n    return key;\n  },\n  updateViewport: function updateViewport() {},\n  viewer: {},\n  windowId: ''\n};","import settings from './settings';\nimport flatten from 'lodash/flatten';\n/**\n * export ns - sets up css namespacing for everything to be `mirador-`\n */\n\nvar ns = function ns(classNames) {\n  return flatten([classNames]).map(function (className) {\n    return [settings.createGenerateClassNameOptions.productionPrefix, className].join('-');\n  }).join(' ');\n};\n\nexport default ns;","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { v4 as uuid } from 'uuid';\nexport default {\n  state: {// slice: 'mirador' // Configure the top-level slice of state for mirador selectors\n  },\n  canvasNavigation: {\n    // Set the height and width of canvas thumbnails in the  CanvasNavigation companion window\n    height: 50,\n    width: 50\n  },\n  selectedTheme: 'light',\n  // dark also available\n  themes: {\n    dark: {\n      palette: {\n        type: 'dark',\n        primary: {\n          main: '#4db6ac'\n        },\n        secondary: {\n          main: '#4db6ac'\n        },\n        shades: {\n          dark: '#000000',\n          main: '#424242',\n          light: '#616161'\n        }\n      }\n    },\n    light: {\n      palette: {\n        type: 'light'\n      }\n    }\n  },\n  theme: {\n    // Sets up a MaterialUI theme. See https://material-ui.com/customization/default-theme/\n    palette: {\n      type: 'light',\n      primary: {\n        main: '#1967d2' // Controls the color of the Add button and current window indicator\n\n      },\n      secondary: {\n        main: '#1967d2' // Controls the color of Selects and FormControls\n\n      },\n      shades: {\n        // Shades that can be used to offset color areas of the Workspace / Window\n        dark: '#eeeeee',\n        main: '#ffffff',\n        light: '#f5f5f5'\n      },\n      error: {\n        main: '#b00020'\n      },\n      notification: {\n        // Color used in MUI Badge dots\n        main: '#ffa224'\n      },\n      hitCounter: {\n        \"default\": '#bdbdbd'\n      },\n      highlights: {\n        primary: '#ffff00',\n        secondary: '#00BFFF'\n      },\n      section_divider: 'rgba(0, 0, 0, 0.25)',\n      annotations: {\n        hidden: {\n          globalAlpha: 0\n        },\n        \"default\": {\n          strokeStyle: '#00BFFF',\n          globalAlpha: 1\n        },\n        hovered: {\n          strokeStyle: '#BF00FF',\n          globalAlpha: 1\n        },\n        selected: {\n          strokeStyle: '#ffff00',\n          globalAlpha: 1\n        }\n      },\n      search: {\n        \"default\": {\n          fillStyle: '#00BFFF',\n          globalAlpha: 0.3\n        },\n        hovered: {\n          fillStyle: '#00FFFF',\n          globalAlpha: 0.3\n        },\n        selected: {\n          fillStyle: '#ffff00',\n          globalAlpha: 0.3\n        }\n      }\n    },\n    typography: {\n      body1: {\n        fontSize: \"1rem\",\n        letterSpacing: \"0em\",\n        lineHeight: \"1.6em\"\n      },\n      body2: {\n        fontSize: \"0.878rem\",\n        letterSpacing: \"0.015em\",\n        lineHeight: \"1.6em\"\n      },\n      button: {\n        fontSize: \"0.878rem\",\n        letterSpacing: \"0.09em\",\n        lineHeight: \"2.25rem\",\n        textTransform: \"uppercase\"\n      },\n      caption: {\n        fontSize: \"0.772rem\",\n        letterSpacing: \"0.033em\",\n        lineHeight: \"1.6rem\"\n      },\n      body1Next: {\n        fontSize: \"1rem\",\n        letterSpacing: \"0em\",\n        lineHeight: \"1.6em\"\n      },\n      body2Next: {\n        fontSize: \"0.878rem\",\n        letterSpacing: \"0.015em\",\n        lineHeight: \"1.6em\"\n      },\n      buttonNext: {\n        fontSize: \"0.878rem\",\n        letterSpacing: \"0.09em\",\n        lineHeight: \"2.25rem\"\n      },\n      captionNext: {\n        fontSize: \"0.772rem\",\n        letterSpacing: \"0.33em\",\n        lineHeight: \"1.6rem\"\n      },\n      overline: {\n        fontSize: \"0.678rem\",\n        fontWeight: 500,\n        letterSpacing: \"0.166em\",\n        lineHeight: \"2em\",\n        textTransform: \"uppercase\"\n      },\n      h1: {\n        fontSize: \"2.822rem\",\n        letterSpacing: \"-0.015em\",\n        lineHeight: \"1.2em\"\n      },\n      h2: {\n        fontSize: \"1.575rem\",\n        letterSpacing: \"0em\",\n        lineHeight: \"1.33em\"\n      },\n      h3: {\n        fontSize: \"1.383rem\",\n        fontWeight: 300,\n        letterSpacing: \"0em\",\n        lineHeight: \"1.33em\"\n      },\n      h4: {\n        fontSize: \"1.215rem\",\n        letterSpacing: \"0.007em\",\n        lineHeight: \"1.45em\"\n      },\n      h5: {\n        fontSize: \"1.138rem\",\n        letterSpacing: \"0.005em\",\n        lineHeight: \"1.55em\"\n      },\n      h6: {\n        fontSize: \"1.067rem\",\n        fontWeight: 400,\n        letterSpacing: \"0.01em\",\n        lineHeight: \"1.6em\"\n      },\n      subtitle1: {\n        fontSize: \"0.937rem\",\n        letterSpacing: \"0.015em\",\n        lineHeight: \"1.6em\",\n        fontWeight: 300\n      },\n      subtitle2: {\n        fontSize: \"0.878rem\",\n        fontWeight: 500,\n        letterSpacing: \"0.02em\",\n        lineHeight: \"1.75em\"\n      },\n      useNextVariants: true // set so that console deprecation warning is removed\n\n    },\n    overrides: {\n      MuiListSubheader: {\n        root: {\n          '&[role=\"presentation\"]:focus': {\n            outline: 0\n          }\n        }\n      },\n      MuiTooltip: {\n        // Overridden from https://github.com/mui-org/material-ui/blob/master/packages/material-ui/src/Tooltip/Tooltip.js#L40-L70\n        tooltipPlacementLeft: _defineProperty({}, '@media (min-width:600px)', {\n          margin: 0\n        }),\n        tooltipPlacementRight: _defineProperty({}, '@media (min-width:600px)', {\n          margin: 0\n        }),\n        tooltipPlacementTop: _defineProperty({}, '@media (min-width:600px)', {\n          margin: 0\n        }),\n        tooltipPlacementBottom: _defineProperty({}, '@media (min-width:600px)', {\n          margin: 0\n        })\n      },\n      MuiTouchRipple: {\n        childPulsate: {\n          animation: 'none'\n        },\n        rippleVisible: {\n          animation: 'none'\n        }\n      }\n    },\n    props: {\n      MuiButtonBase: {\n        disableTouchRipple: true\n      },\n      MuiLink: {\n        underline: 'always'\n      }\n    }\n  },\n  language: 'en',\n  // The default language set in the application\n  availableLanguages: {\n    // All the languages available in the language switcher\n    ar: '',\n    de: 'Deutsch',\n    en: 'English',\n    fr: 'Franais',\n    ja: '',\n    kr: '',\n    lt: 'Lietuvi',\n    nl: 'Nederlands',\n    'nb-NO': 'Norwegian Bokml',\n    pl: 'Polski',\n    'pt-BR': 'Portugus do Brasil',\n    vi: 'Ting Vit',\n    'zh-CN': '()',\n    'zh-TW': '()',\n    it: \"Italiano\",\n    sr: '',\n    sv: 'Svenska'\n  },\n  annotations: {\n    htmlSanitizationRuleSet: 'iiif',\n    // See src/lib/htmlRules.js for acceptable values\n    filteredMotivations: ['oa:commenting', 'oa:tagging', 'sc:painting', 'commenting', 'tagging']\n  },\n  createGenerateClassNameOptions: {\n    // Options passed directly to createGenerateClassName in Material-UI https://material-ui.com/styles/api/#creategenerateclassname-options-class-name-generator\n    productionPrefix: 'mirador'\n  },\n  requests: {\n    preprocessors: [// Functions that receive HTTP requests and manipulate them (e.g. to add headers)\n      // (url, options) => (url.match('info.json') && { ...options, myCustomThing: 'blah' })\n    ],\n    postprocessors: [// Functions that receive HTTP responses and manipulates them before adding to store\n      // An example of manipulating the response for an annotation request\n      // (url, action) => {\n      //   if (action.annotationId) {\n      //     action.annotationJson = {};\n      //   }\n      // }\n    ]\n  },\n  translations: {// Translations can be added to inject new languages or override existing labels\n  },\n  window: {\n    //global window defaults\n    allowClose: true,\n    // Configure if windows can be closed or not\n    allowFullscreen: false,\n    // Configure to show a \"fullscreen\" button in the WindowTopBar\n    allowMaximize: true,\n    // Configure if windows can be maximized or not\n    allowTopMenuButton: true,\n    // Configure if window view and thumbnail display menu are visible or not\n    allowWindowSideBar: true,\n    // Configure if side bar menu is visible or not\n    authNewWindowCenter: 'parent',\n    // Configure how to center a new window created by the authentication flow. Options: parent, screen\n    sideBarPanel: 'info',\n    // Configure which sidebar is selected by default. Options: info, attribution, canvas, annotations, search\n    defaultSidebarPanelHeight: 201,\n    // Configure default sidebar height in pixels\n    defaultSidebarPanelWidth: 235,\n    // Configure default sidebar width in pixels\n    defaultView: 'single',\n    // Configure which viewing mode (e.g. single, book, gallery) for windows to be opened in\n    forceDrawAnnotations: false,\n    hideWindowTitle: false,\n    // Configure if the window title is shown in the window title bar or not\n    highlightAllAnnotations: false,\n    // Configure whether to display annotations on the canvas by default\n    showLocalePicker: false,\n    // Configure locale picker for multi-lingual metadata\n    sideBarOpen: false,\n    // Configure if the sidebar (and its content panel) is open by default\n    switchCanvasOnSearch: true,\n    // Configure if Mirador should automatically switch to the canvas of the first search result\n    panels: {\n      // Configure which panels are visible in WindowSideBarButtons\n      info: true,\n      attribution: true,\n      canvas: true,\n      annotations: true,\n      search: true,\n      layers: true\n    },\n    views: [{\n      key: 'single',\n      behaviors: ['individuals']\n    }, {\n      key: 'book',\n      behaviors: ['paged']\n    }, {\n      key: 'scroll',\n      behaviors: ['continuous']\n    }, {\n      key: 'gallery'\n    }],\n    elastic: {\n      height: 400,\n      width: 480\n    }\n  },\n  windows: [// Array of windows to be open when mirador initializes (each object should at least provide a manifestId key with the value of the IIIF presentation manifest to load)\n\n    /**\n    Example Window:\n    {\n      manifestId: 'https://iiif.harvardartmuseums.org/manifests/object/299843',\n      canvasId: 'https://iiif.harvardartmuseums.org/manifests/object/299843/page_2',\n      thumbnailNavigationPosition: 'far-bottom',\n    }\n    // ../state/actions/window.js `defaultOptions`\n    // ../lib/MiradorViewer.js `windowAction`\n    */\n  ],\n  thumbnails: {\n    preferredFormats: ['jpg', 'png', 'webp', 'tif']\n  },\n  thumbnailNavigation: {\n    defaultPosition: 'off',\n    // Which position for the thumbnail navigation to be be displayed. Other possible values are \"far-bottom\" or \"far-right\"\n    displaySettings: true,\n    // Display the settings for this in WindowTopMenu\n    height: 130,\n    // height of entire ThumbnailNavigation area when position is \"far-bottom\"\n    width: 100 // width of one canvas (doubled for book view) in ThumbnailNavigation area when position is \"far-right\"\n\n  },\n  workspace: {\n    draggingEnabled: true,\n    allowNewWindows: true,\n    id: uuid(),\n    isWorkspaceAddVisible: false,\n    // Catalog/Workspace add window feature visible by default\n    exposeModeOn: false,\n    // unused?\n    height: 5000,\n    // height of the elastic mode's virtual canvas\n    showZoomControls: false,\n    // Configure if zoom controls should be displayed by default\n    type: 'mosaic',\n    // Which workspace type to load by default. Other possible values are \"elastic\". If \"mosaic\" or \"elastic\" are not selected no worksapce type will be used.\n    viewportPosition: {\n      // center coordinates for the elastic mode workspace\n      x: 0,\n      y: 0\n    },\n    width: 5000 // width of the elastic mode's virtual canvas\n\n  },\n  workspaceControlPanel: {\n    enabled: true // Configure if the control panel should be rendered.  Useful if you want to lock the viewer down to only the configured manifests\n\n  },\n  galleryView: {\n    height: 120,\n    // height of gallery view thumbnails\n    width: null // width of gallery view thumbnails (or null, to auto-calculate an aspect-ratio appropriate size)\n\n  },\n  osdConfig: {\n    // Default config used for OpenSeadragon\n    alwaysBlend: false,\n    blendTime: 0.1,\n    preserveImageSizeOnResize: true,\n    preserveViewport: true,\n    showNavigationControl: false\n  },\n  \"export\": {\n    catalog: true,\n    companionWindows: true,\n    config: true,\n    elasticLayout: true,\n    layers: true,\n    // filter out anything re-retrievable:\n    manifests: {\n      filter: function filter(_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n            id = _ref2[0],\n            value = _ref2[1];\n\n        return !id.startsWith('http');\n      }\n    },\n    viewers: true,\n    windows: true,\n    workspace: true\n  },\n  audioOptions: {\n    // Additional props passed to <audio> element\n    controls: true,\n    crossOrigin: 'anonymous'\n  },\n  videoOptions: {\n    // Additional props passed to <audio> element\n    controls: true,\n    crossOrigin: 'anonymous'\n  },\n  auth: {\n    serviceProfiles: [{\n      profile: 'http://iiif.io/api/auth/1/external',\n      external: true\n    }, {\n      profile: 'http://iiif.io/api/auth/1/kiosk',\n      kiosk: true\n    }, {\n      profile: 'http://iiif.io/api/auth/1/clickthrough'\n    }, {\n      profile: 'http://iiif.io/api/auth/1/login'\n    }, {\n      profile: 'http://iiif.io/api/auth/0/external',\n      external: true\n    }, {\n      profile: 'http://iiif.io/api/auth/0/kiosk',\n      kiosk: true\n    }, {\n      profile: 'http://iiif.io/api/auth/0/clickthrough'\n    }, {\n      profile: 'http://iiif.io/api/auth/0/login'\n    }]\n  }\n};","\"use strict\";\n\nvar utils = require(\"./utils\");\n\nmodule.exports = function batchProcessorMaker(options) {\n    options             = options || {};\n    var reporter        = options.reporter;\n    var asyncProcess    = utils.getOption(options, \"async\", true);\n    var autoProcess     = utils.getOption(options, \"auto\", true);\n\n    if(autoProcess && !asyncProcess) {\n        reporter && reporter.warn(\"Invalid options combination. auto=true and async=false is invalid. Setting async=true.\");\n        asyncProcess = true;\n    }\n\n    var batch = Batch();\n    var asyncFrameHandler;\n    var isProcessing = false;\n\n    function addFunction(level, fn) {\n        if(!isProcessing && autoProcess && asyncProcess && batch.size() === 0) {\n            // Since this is async, it is guaranteed to be executed after that the fn is added to the batch.\n            // This needs to be done before, since we're checking the size of the batch to be 0.\n            processBatchAsync();\n        }\n\n        batch.add(level, fn);\n    }\n\n    function processBatch() {\n        // Save the current batch, and create a new batch so that incoming functions are not added into the currently processing batch.\n        // Continue processing until the top-level batch is empty (functions may be added to the new batch while processing, and so on).\n        isProcessing = true;\n        while (batch.size()) {\n            var processingBatch = batch;\n            batch = Batch();\n            processingBatch.process();\n        }\n        isProcessing = false;\n    }\n\n    function forceProcessBatch(localAsyncProcess) {\n        if (isProcessing) {\n            return;\n        }\n\n        if(localAsyncProcess === undefined) {\n            localAsyncProcess = asyncProcess;\n        }\n\n        if(asyncFrameHandler) {\n            cancelFrame(asyncFrameHandler);\n            asyncFrameHandler = null;\n        }\n\n        if(localAsyncProcess) {\n            processBatchAsync();\n        } else {\n            processBatch();\n        }\n    }\n\n    function processBatchAsync() {\n        asyncFrameHandler = requestFrame(processBatch);\n    }\n\n    function clearBatch() {\n        batch           = {};\n        batchSize       = 0;\n        topLevel        = 0;\n        bottomLevel     = 0;\n    }\n\n    function cancelFrame(listener) {\n        // var cancel = window.cancelAnimationFrame || window.mozCancelAnimationFrame || window.webkitCancelAnimationFrame || window.clearTimeout;\n        var cancel = clearTimeout;\n        return cancel(listener);\n    }\n\n    function requestFrame(callback) {\n        // var raf = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || function(fn) { return window.setTimeout(fn, 20); };\n        var raf = function(fn) { return setTimeout(fn, 0); };\n        return raf(callback);\n    }\n\n    return {\n        add: addFunction,\n        force: forceProcessBatch\n    };\n};\n\nfunction Batch() {\n    var batch       = {};\n    var size        = 0;\n    var topLevel    = 0;\n    var bottomLevel = 0;\n\n    function add(level, fn) {\n        if(!fn) {\n            fn = level;\n            level = 0;\n        }\n\n        if(level > topLevel) {\n            topLevel = level;\n        } else if(level < bottomLevel) {\n            bottomLevel = level;\n        }\n\n        if(!batch[level]) {\n            batch[level] = [];\n        }\n\n        batch[level].push(fn);\n        size++;\n    }\n\n    function process() {\n        for(var level = bottomLevel; level <= topLevel; level++) {\n            var fns = batch[level];\n\n            for(var i = 0; i < fns.length; i++) {\n                var fn = fns[i];\n                fn();\n            }\n        }\n    }\n\n    function getSize() {\n        return size;\n    }\n\n    return {\n        add: add,\n        process: process,\n        size: getSize\n    };\n}\n","\"use strict\";\n\nvar utils = module.exports = {};\n\nutils.getOption = getOption;\n\nfunction getOption(options, name, defaultValue) {\n    var value = options[name];\n\n    if((value === undefined || value === null) && defaultValue !== undefined) {\n        return defaultValue;\n    }\n\n    return value;\n}\n","/*!\n  Copyright (c) 2018 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString === Object.prototype.toString) {\n\t\t\t\t\tfor (var key in arg) {\n\t\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","function toVal(mix) {\n\tvar k, y, str='';\n\n\tif (typeof mix === 'string' || typeof mix === 'number') {\n\t\tstr += mix;\n\t} else if (typeof mix === 'object') {\n\t\tif (Array.isArray(mix)) {\n\t\t\tfor (k=0; k < mix.length; k++) {\n\t\t\t\tif (mix[k]) {\n\t\t\t\t\tif (y = toVal(mix[k])) {\n\t\t\t\t\t\tstr && (str += ' ');\n\t\t\t\t\t\tstr += y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (k in mix) {\n\t\t\t\tif (mix[k]) {\n\t\t\t\t\tstr && (str += ' ');\n\t\t\t\t\tstr += k;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn str;\n}\n\nexport default function () {\n\tvar i=0, tmp, x, str='';\n\twhile (i < arguments.length) {\n\t\tif (tmp = arguments[i++]) {\n\t\t\tif (x = toVal(tmp)) {\n\t\t\t\tstr && (str += ' ');\n\t\t\t\tstr += x\n\t\t\t}\n\t\t}\n\t}\n\treturn str;\n}\n","\"use strict\";\n\nvar deselectCurrent = require(\"toggle-selection\");\n\nvar clipboardToIE11Formatting = {\n  \"text/plain\": \"Text\",\n  \"text/html\": \"Url\",\n  \"default\": \"Text\"\n}\n\nvar defaultMessage = \"Copy to clipboard: #{key}, Enter\";\n\nfunction format(message) {\n  var copyKey = (/mac os x/i.test(navigator.userAgent) ? \"\" : \"Ctrl\") + \"+C\";\n  return message.replace(/#{\\s*key\\s*}/g, copyKey);\n}\n\nfunction copy(text, options) {\n  var debug,\n    message,\n    reselectPrevious,\n    range,\n    selection,\n    mark,\n    success = false;\n  if (!options) {\n    options = {};\n  }\n  debug = options.debug || false;\n  try {\n    reselectPrevious = deselectCurrent();\n\n    range = document.createRange();\n    selection = document.getSelection();\n\n    mark = document.createElement(\"span\");\n    mark.textContent = text;\n    // reset user styles for span element\n    mark.style.all = \"unset\";\n    // prevents scrolling to the end of the page\n    mark.style.position = \"fixed\";\n    mark.style.top = 0;\n    mark.style.clip = \"rect(0, 0, 0, 0)\";\n    // used to preserve spaces and line breaks\n    mark.style.whiteSpace = \"pre\";\n    // do not inherit user-select (it may be `none`)\n    mark.style.webkitUserSelect = \"text\";\n    mark.style.MozUserSelect = \"text\";\n    mark.style.msUserSelect = \"text\";\n    mark.style.userSelect = \"text\";\n    mark.addEventListener(\"copy\", function(e) {\n      e.stopPropagation();\n      if (options.format) {\n        e.preventDefault();\n        if (typeof e.clipboardData === \"undefined\") { // IE 11\n          debug && console.warn(\"unable to use e.clipboardData\");\n          debug && console.warn(\"trying IE specific stuff\");\n          window.clipboardData.clearData();\n          var format = clipboardToIE11Formatting[options.format] || clipboardToIE11Formatting[\"default\"]\n          window.clipboardData.setData(format, text);\n        } else { // all other browsers\n          e.clipboardData.clearData();\n          e.clipboardData.setData(options.format, text);\n        }\n      }\n      if (options.onCopy) {\n        e.preventDefault();\n        options.onCopy(e.clipboardData);\n      }\n    });\n\n    document.body.appendChild(mark);\n\n    range.selectNodeContents(mark);\n    selection.addRange(range);\n\n    var successful = document.execCommand(\"copy\");\n    if (!successful) {\n      throw new Error(\"copy command was unsuccessful\");\n    }\n    success = true;\n  } catch (err) {\n    debug && console.error(\"unable to copy using execCommand: \", err);\n    debug && console.warn(\"trying IE specific stuff\");\n    try {\n      window.clipboardData.setData(options.format || \"text\", text);\n      options.onCopy && options.onCopy(window.clipboardData);\n      success = true;\n    } catch (err) {\n      debug && console.error(\"unable to copy using clipboardData: \", err);\n      debug && console.error(\"falling back to prompt\");\n      message = format(\"message\" in options ? options.message : defaultMessage);\n      window.prompt(message, text);\n    }\n  } finally {\n    if (selection) {\n      if (typeof selection.removeRange == \"function\") {\n        selection.removeRange(range);\n      } else {\n        selection.removeAllRanges();\n      }\n    }\n\n    if (mark) {\n      document.body.removeChild(mark);\n    }\n    reselectPrevious();\n  }\n\n  return success;\n}\n\nmodule.exports = copy;\n","import invariant from 'tiny-invariant';\n\nvar getRect = function getRect(_ref) {\n  var top = _ref.top,\n      right = _ref.right,\n      bottom = _ref.bottom,\n      left = _ref.left;\n  var width = right - left;\n  var height = bottom - top;\n  var rect = {\n    top: top,\n    right: right,\n    bottom: bottom,\n    left: left,\n    width: width,\n    height: height,\n    x: left,\n    y: top,\n    center: {\n      x: (right + left) / 2,\n      y: (bottom + top) / 2\n    }\n  };\n  return rect;\n};\nvar expand = function expand(target, expandBy) {\n  return {\n    top: target.top - expandBy.top,\n    left: target.left - expandBy.left,\n    bottom: target.bottom + expandBy.bottom,\n    right: target.right + expandBy.right\n  };\n};\nvar shrink = function shrink(target, shrinkBy) {\n  return {\n    top: target.top + shrinkBy.top,\n    left: target.left + shrinkBy.left,\n    bottom: target.bottom - shrinkBy.bottom,\n    right: target.right - shrinkBy.right\n  };\n};\n\nvar shift = function shift(target, shiftBy) {\n  return {\n    top: target.top + shiftBy.y,\n    left: target.left + shiftBy.x,\n    bottom: target.bottom + shiftBy.y,\n    right: target.right + shiftBy.x\n  };\n};\n\nvar noSpacing = {\n  top: 0,\n  right: 0,\n  bottom: 0,\n  left: 0\n};\nvar createBox = function createBox(_ref2) {\n  var borderBox = _ref2.borderBox,\n      _ref2$margin = _ref2.margin,\n      margin = _ref2$margin === void 0 ? noSpacing : _ref2$margin,\n      _ref2$border = _ref2.border,\n      border = _ref2$border === void 0 ? noSpacing : _ref2$border,\n      _ref2$padding = _ref2.padding,\n      padding = _ref2$padding === void 0 ? noSpacing : _ref2$padding;\n  var marginBox = getRect(expand(borderBox, margin));\n  var paddingBox = getRect(shrink(borderBox, border));\n  var contentBox = getRect(shrink(paddingBox, padding));\n  return {\n    marginBox: marginBox,\n    borderBox: getRect(borderBox),\n    paddingBox: paddingBox,\n    contentBox: contentBox,\n    margin: margin,\n    border: border,\n    padding: padding\n  };\n};\n\nvar parse = function parse(raw) {\n  var value = raw.slice(0, -2);\n  var suffix = raw.slice(-2);\n\n  if (suffix !== 'px') {\n    return 0;\n  }\n\n  var result = Number(value);\n  !!isNaN(result) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Could not parse value [raw: \" + raw + \", without suffix: \" + value + \"]\") : invariant(false) : void 0;\n  return result;\n};\n\nvar getWindowScroll = function getWindowScroll() {\n  return {\n    x: window.pageXOffset,\n    y: window.pageYOffset\n  };\n};\n\nvar offset = function offset(original, change) {\n  var borderBox = original.borderBox,\n      border = original.border,\n      margin = original.margin,\n      padding = original.padding;\n  var shifted = shift(borderBox, change);\n  return createBox({\n    borderBox: shifted,\n    border: border,\n    margin: margin,\n    padding: padding\n  });\n};\nvar withScroll = function withScroll(original, scroll) {\n  if (scroll === void 0) {\n    scroll = getWindowScroll();\n  }\n\n  return offset(original, scroll);\n};\nvar calculateBox = function calculateBox(borderBox, styles) {\n  var margin = {\n    top: parse(styles.marginTop),\n    right: parse(styles.marginRight),\n    bottom: parse(styles.marginBottom),\n    left: parse(styles.marginLeft)\n  };\n  var padding = {\n    top: parse(styles.paddingTop),\n    right: parse(styles.paddingRight),\n    bottom: parse(styles.paddingBottom),\n    left: parse(styles.paddingLeft)\n  };\n  var border = {\n    top: parse(styles.borderTopWidth),\n    right: parse(styles.borderRightWidth),\n    bottom: parse(styles.borderBottomWidth),\n    left: parse(styles.borderLeftWidth)\n  };\n  return createBox({\n    borderBox: borderBox,\n    margin: margin,\n    padding: padding,\n    border: border\n  });\n};\nvar getBox = function getBox(el) {\n  var borderBox = el.getBoundingClientRect();\n  var styles = window.getComputedStyle(el);\n  return calculateBox(borderBox, styles);\n};\n\nexport { calculateBox, createBox, expand, getBox, getRect, offset, shrink, withScroll };\n","import isInBrowser from 'is-in-browser';\nimport _toConsumableArray from '@babel/runtime/helpers/esm/toConsumableArray';\n\n// Export javascript style and css style vendor prefixes.\nvar js = '';\nvar css = '';\nvar vendor = '';\nvar browser = '';\nvar isTouch = isInBrowser && 'ontouchstart' in document.documentElement; // We should not do anything if required serverside.\n\nif (isInBrowser) {\n  // Order matters. We need to check Webkit the last one because\n  // other vendors use to add Webkit prefixes to some properties\n  var jsCssMap = {\n    Moz: '-moz-',\n    ms: '-ms-',\n    O: '-o-',\n    Webkit: '-webkit-'\n  };\n\n  var _document$createEleme = document.createElement('p'),\n      style = _document$createEleme.style;\n\n  var testProp = 'Transform';\n\n  for (var key in jsCssMap) {\n    if (key + testProp in style) {\n      js = key;\n      css = jsCssMap[key];\n      break;\n    }\n  } // Correctly detect the Edge browser.\n\n\n  if (js === 'Webkit' && 'msHyphens' in style) {\n    js = 'ms';\n    css = jsCssMap.ms;\n    browser = 'edge';\n  } // Correctly detect the Safari browser.\n\n\n  if (js === 'Webkit' && '-apple-trailing-word' in style) {\n    vendor = 'apple';\n  }\n}\n/**\n * Vendor prefix string for the current browser.\n *\n * @type {{js: String, css: String, vendor: String, browser: String}}\n * @api public\n */\n\n\nvar prefix = {\n  js: js,\n  css: css,\n  vendor: vendor,\n  browser: browser,\n  isTouch: isTouch\n};\n\n/**\n * Test if a keyframe at-rule should be prefixed or not\n *\n * @param {String} vendor prefix string for the current browser.\n * @return {String}\n * @api public\n */\n\nfunction supportedKeyframes(key) {\n  // Keyframes is already prefixed. e.g. key = '@-webkit-keyframes a'\n  if (key[1] === '-') return key; // No need to prefix IE/Edge. Older browsers will ignore unsupported rules.\n  // https://caniuse.com/#search=keyframes\n\n  if (prefix.js === 'ms') return key;\n  return \"@\" + prefix.css + \"keyframes\" + key.substr(10);\n}\n\n// https://caniuse.com/#search=appearance\n\nvar appearence = {\n  noPrefill: ['appearance'],\n  supportedProperty: function supportedProperty(prop) {\n    if (prop !== 'appearance') return false;\n    if (prefix.js === 'ms') return \"-webkit-\" + prop;\n    return prefix.css + prop;\n  }\n};\n\n// https://caniuse.com/#search=color-adjust\n\nvar colorAdjust = {\n  noPrefill: ['color-adjust'],\n  supportedProperty: function supportedProperty(prop) {\n    if (prop !== 'color-adjust') return false;\n    if (prefix.js === 'Webkit') return prefix.css + \"print-\" + prop;\n    return prop;\n  }\n};\n\nvar regExp = /[-\\s]+(.)?/g;\n/**\n * Replaces the letter with the capital letter\n *\n * @param {String} match\n * @param {String} c\n * @return {String}\n * @api private\n */\n\nfunction toUpper(match, c) {\n  return c ? c.toUpperCase() : '';\n}\n/**\n * Convert dash separated strings to camel-cased.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\n\nfunction camelize(str) {\n  return str.replace(regExp, toUpper);\n}\n\n/**\n * Convert dash separated strings to pascal cased.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nfunction pascalize(str) {\n  return camelize(\"-\" + str);\n}\n\n// but we can use a longhand property instead.\n// https://caniuse.com/#search=mask\n\nvar mask = {\n  noPrefill: ['mask'],\n  supportedProperty: function supportedProperty(prop, style) {\n    if (!/^mask/.test(prop)) return false;\n\n    if (prefix.js === 'Webkit') {\n      var longhand = 'mask-image';\n\n      if (camelize(longhand) in style) {\n        return prop;\n      }\n\n      if (prefix.js + pascalize(longhand) in style) {\n        return prefix.css + prop;\n      }\n    }\n\n    return prop;\n  }\n};\n\n// https://caniuse.com/#search=text-orientation\n\nvar textOrientation = {\n  noPrefill: ['text-orientation'],\n  supportedProperty: function supportedProperty(prop) {\n    if (prop !== 'text-orientation') return false;\n\n    if (prefix.vendor === 'apple' && !prefix.isTouch) {\n      return prefix.css + prop;\n    }\n\n    return prop;\n  }\n};\n\n// https://caniuse.com/#search=transform\n\nvar transform = {\n  noPrefill: ['transform'],\n  supportedProperty: function supportedProperty(prop, style, options) {\n    if (prop !== 'transform') return false;\n\n    if (options.transform) {\n      return prop;\n    }\n\n    return prefix.css + prop;\n  }\n};\n\n// https://caniuse.com/#search=transition\n\nvar transition = {\n  noPrefill: ['transition'],\n  supportedProperty: function supportedProperty(prop, style, options) {\n    if (prop !== 'transition') return false;\n\n    if (options.transition) {\n      return prop;\n    }\n\n    return prefix.css + prop;\n  }\n};\n\n// https://caniuse.com/#search=writing-mode\n\nvar writingMode = {\n  noPrefill: ['writing-mode'],\n  supportedProperty: function supportedProperty(prop) {\n    if (prop !== 'writing-mode') return false;\n\n    if (prefix.js === 'Webkit' || prefix.js === 'ms' && prefix.browser !== 'edge') {\n      return prefix.css + prop;\n    }\n\n    return prop;\n  }\n};\n\n// https://caniuse.com/#search=user-select\n\nvar userSelect = {\n  noPrefill: ['user-select'],\n  supportedProperty: function supportedProperty(prop) {\n    if (prop !== 'user-select') return false;\n\n    if (prefix.js === 'Moz' || prefix.js === 'ms' || prefix.vendor === 'apple') {\n      return prefix.css + prop;\n    }\n\n    return prop;\n  }\n};\n\n// https://caniuse.com/#search=multicolumn\n// https://github.com/postcss/autoprefixer/issues/491\n// https://github.com/postcss/autoprefixer/issues/177\n\nvar breakPropsOld = {\n  supportedProperty: function supportedProperty(prop, style) {\n    if (!/^break-/.test(prop)) return false;\n\n    if (prefix.js === 'Webkit') {\n      var jsProp = \"WebkitColumn\" + pascalize(prop);\n      return jsProp in style ? prefix.css + \"column-\" + prop : false;\n    }\n\n    if (prefix.js === 'Moz') {\n      var _jsProp = \"page\" + pascalize(prop);\n\n      return _jsProp in style ? \"page-\" + prop : false;\n    }\n\n    return false;\n  }\n};\n\n// See https://github.com/postcss/autoprefixer/issues/324.\n\nvar inlineLogicalOld = {\n  supportedProperty: function supportedProperty(prop, style) {\n    if (!/^(border|margin|padding)-inline/.test(prop)) return false;\n    if (prefix.js === 'Moz') return prop;\n    var newProp = prop.replace('-inline', '');\n    return prefix.js + pascalize(newProp) in style ? prefix.css + newProp : false;\n  }\n};\n\n// Camelization is required because we can't test using.\n// CSS syntax for e.g. in FF.\n\nvar unprefixed = {\n  supportedProperty: function supportedProperty(prop, style) {\n    return camelize(prop) in style ? prop : false;\n  }\n};\n\nvar prefixed = {\n  supportedProperty: function supportedProperty(prop, style) {\n    var pascalized = pascalize(prop); // Return custom CSS variable without prefixing.\n\n    if (prop[0] === '-') return prop; // Return already prefixed value without prefixing.\n\n    if (prop[0] === '-' && prop[1] === '-') return prop;\n    if (prefix.js + pascalized in style) return prefix.css + prop; // Try webkit fallback.\n\n    if (prefix.js !== 'Webkit' && \"Webkit\" + pascalized in style) return \"-webkit-\" + prop;\n    return false;\n  }\n};\n\n// https://caniuse.com/#search=scroll-snap\n\nvar scrollSnap = {\n  supportedProperty: function supportedProperty(prop) {\n    if (prop.substring(0, 11) !== 'scroll-snap') return false;\n\n    if (prefix.js === 'ms') {\n      return \"\" + prefix.css + prop;\n    }\n\n    return prop;\n  }\n};\n\n// https://caniuse.com/#search=overscroll-behavior\n\nvar overscrollBehavior = {\n  supportedProperty: function supportedProperty(prop) {\n    if (prop !== 'overscroll-behavior') return false;\n\n    if (prefix.js === 'ms') {\n      return prefix.css + \"scroll-chaining\";\n    }\n\n    return prop;\n  }\n};\n\nvar propMap = {\n  'flex-grow': 'flex-positive',\n  'flex-shrink': 'flex-negative',\n  'flex-basis': 'flex-preferred-size',\n  'justify-content': 'flex-pack',\n  order: 'flex-order',\n  'align-items': 'flex-align',\n  'align-content': 'flex-line-pack' // 'align-self' is handled by 'align-self' plugin.\n\n}; // Support old flex spec from 2012.\n\nvar flex2012 = {\n  supportedProperty: function supportedProperty(prop, style) {\n    var newProp = propMap[prop];\n    if (!newProp) return false;\n    return prefix.js + pascalize(newProp) in style ? prefix.css + newProp : false;\n  }\n};\n\nvar propMap$1 = {\n  flex: 'box-flex',\n  'flex-grow': 'box-flex',\n  'flex-direction': ['box-orient', 'box-direction'],\n  order: 'box-ordinal-group',\n  'align-items': 'box-align',\n  'flex-flow': ['box-orient', 'box-direction'],\n  'justify-content': 'box-pack'\n};\nvar propKeys = Object.keys(propMap$1);\n\nvar prefixCss = function prefixCss(p) {\n  return prefix.css + p;\n}; // Support old flex spec from 2009.\n\n\nvar flex2009 = {\n  supportedProperty: function supportedProperty(prop, style, _ref) {\n    var multiple = _ref.multiple;\n\n    if (propKeys.indexOf(prop) > -1) {\n      var newProp = propMap$1[prop];\n\n      if (!Array.isArray(newProp)) {\n        return prefix.js + pascalize(newProp) in style ? prefix.css + newProp : false;\n      }\n\n      if (!multiple) return false;\n\n      for (var i = 0; i < newProp.length; i++) {\n        if (!(prefix.js + pascalize(newProp[0]) in style)) {\n          return false;\n        }\n      }\n\n      return newProp.map(prefixCss);\n    }\n\n    return false;\n  }\n};\n\n// plugins = [\n//   ...plugins,\n//    breakPropsOld,\n//    inlineLogicalOld,\n//    unprefixed,\n//    prefixed,\n//    scrollSnap,\n//    flex2012,\n//    flex2009\n// ]\n// Plugins without 'noPrefill' value, going last.\n// 'flex-*' plugins should be at the bottom.\n// 'flex2009' going after 'flex2012'.\n// 'prefixed' going after 'unprefixed'\n\nvar plugins = [appearence, colorAdjust, mask, textOrientation, transform, transition, writingMode, userSelect, breakPropsOld, inlineLogicalOld, unprefixed, prefixed, scrollSnap, overscrollBehavior, flex2012, flex2009];\nvar propertyDetectors = plugins.filter(function (p) {\n  return p.supportedProperty;\n}).map(function (p) {\n  return p.supportedProperty;\n});\nvar noPrefill = plugins.filter(function (p) {\n  return p.noPrefill;\n}).reduce(function (a, p) {\n  a.push.apply(a, _toConsumableArray(p.noPrefill));\n  return a;\n}, []);\n\nvar el;\nvar cache = {};\n\nif (isInBrowser) {\n  el = document.createElement('p'); // We test every property on vendor prefix requirement.\n  // Once tested, result is cached. It gives us up to 70% perf boost.\n  // http://jsperf.com/element-style-object-access-vs-plain-object\n  //\n  // Prefill cache with known css properties to reduce amount of\n  // properties we need to feature test at runtime.\n  // http://davidwalsh.name/vendor-prefix\n\n  var computed = window.getComputedStyle(document.documentElement, '');\n\n  for (var key$1 in computed) {\n    // eslint-disable-next-line no-restricted-globals\n    if (!isNaN(key$1)) cache[computed[key$1]] = computed[key$1];\n  } // Properties that cannot be correctly detected using the\n  // cache prefill method.\n\n\n  noPrefill.forEach(function (x) {\n    return delete cache[x];\n  });\n}\n/**\n * Test if a property is supported, returns supported property with vendor\n * prefix if required. Returns `false` if not supported.\n *\n * @param {String} prop dash separated\n * @param {Object} [options]\n * @return {String|Boolean}\n * @api public\n */\n\n\nfunction supportedProperty(prop, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  // For server-side rendering.\n  if (!el) return prop; // Remove cache for benchmark tests or return property from the cache.\n\n  if (process.env.NODE_ENV !== 'benchmark' && cache[prop] != null) {\n    return cache[prop];\n  } // Check if 'transition' or 'transform' natively supported in browser.\n\n\n  if (prop === 'transition' || prop === 'transform') {\n    options[prop] = prop in el.style;\n  } // Find a plugin for current prefix property.\n\n\n  for (var i = 0; i < propertyDetectors.length; i++) {\n    cache[prop] = propertyDetectors[i](prop, el.style, options); // Break loop, if value found.\n\n    if (cache[prop]) break;\n  } // Reset styles for current property.\n  // Firefox can even throw an error for invalid properties, e.g., \"0\".\n\n\n  try {\n    el.style[prop] = '';\n  } catch (err) {\n    return false;\n  }\n\n  return cache[prop];\n}\n\nvar cache$1 = {};\nvar transitionProperties = {\n  transition: 1,\n  'transition-property': 1,\n  '-webkit-transition': 1,\n  '-webkit-transition-property': 1\n};\nvar transPropsRegExp = /(^\\s*[\\w-]+)|, (\\s*[\\w-]+)(?![^()]*\\))/g;\nvar el$1;\n/**\n * Returns prefixed value transition/transform if needed.\n *\n * @param {String} match\n * @param {String} p1\n * @param {String} p2\n * @return {String}\n * @api private\n */\n\nfunction prefixTransitionCallback(match, p1, p2) {\n  if (p1 === 'var') return 'var';\n  if (p1 === 'all') return 'all';\n  if (p2 === 'all') return ', all';\n  var prefixedValue = p1 ? supportedProperty(p1) : \", \" + supportedProperty(p2);\n  if (!prefixedValue) return p1 || p2;\n  return prefixedValue;\n}\n\nif (isInBrowser) el$1 = document.createElement('p');\n/**\n * Returns prefixed value if needed. Returns `false` if value is not supported.\n *\n * @param {String} property\n * @param {String} value\n * @return {String|Boolean}\n * @api public\n */\n\nfunction supportedValue(property, value) {\n  // For server-side rendering.\n  var prefixedValue = value;\n  if (!el$1 || property === 'content') return value; // It is a string or a number as a string like '1'.\n  // We want only prefixable values here.\n  // eslint-disable-next-line no-restricted-globals\n\n  if (typeof prefixedValue !== 'string' || !isNaN(parseInt(prefixedValue, 10))) {\n    return prefixedValue;\n  } // Create cache key for current value.\n\n\n  var cacheKey = property + prefixedValue; // Remove cache for benchmark tests or return value from cache.\n\n  if (process.env.NODE_ENV !== 'benchmark' && cache$1[cacheKey] != null) {\n    return cache$1[cacheKey];\n  } // IE can even throw an error in some cases, for e.g. style.content = 'bar'.\n\n\n  try {\n    // Test value as it is.\n    el$1.style[property] = prefixedValue;\n  } catch (err) {\n    // Return false if value not supported.\n    cache$1[cacheKey] = false;\n    return false;\n  } // If 'transition' or 'transition-property' property.\n\n\n  if (transitionProperties[property]) {\n    prefixedValue = prefixedValue.replace(transPropsRegExp, prefixTransitionCallback);\n  } else if (el$1.style[property] === '') {\n    // Value with a vendor prefix.\n    prefixedValue = prefix.css + prefixedValue; // Hardcode test to convert \"flex\" to \"-ms-flexbox\" for IE10.\n\n    if (prefixedValue === '-ms-flex') el$1.style[property] = '-ms-flexbox'; // Test prefixed value.\n\n    el$1.style[property] = prefixedValue; // Return false if value not supported.\n\n    if (el$1.style[property] === '') {\n      cache$1[cacheKey] = false;\n      return false;\n    }\n  } // Reset styles for current property.\n\n\n  el$1.style[property] = ''; // Write current value to cache.\n\n  cache$1[cacheKey] = prefixedValue;\n  return cache$1[cacheKey];\n}\n\nexport { prefix, supportedKeyframes, supportedProperty, supportedValue };\n","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","export var INIT_COORDS = 'dnd-core/INIT_COORDS';\nexport var BEGIN_DRAG = 'dnd-core/BEGIN_DRAG';\nexport var PUBLISH_DRAG_SOURCE = 'dnd-core/PUBLISH_DRAG_SOURCE';\nexport var HOVER = 'dnd-core/HOVER';\nexport var DROP = 'dnd-core/DROP';\nexport var END_DRAG = 'dnd-core/END_DRAG';","export var strictEquality = function strictEquality(a, b) {\n  return a === b;\n};\n/**\n * Determine if two cartesian coordinate offsets are equal\n * @param offsetA\n * @param offsetB\n */\n\nexport function areCoordsEqual(offsetA, offsetB) {\n  if (!offsetA && !offsetB) {\n    return true;\n  } else if (!offsetA || !offsetB) {\n    return false;\n  } else {\n    return offsetA.x === offsetB.x && offsetA.y === offsetB.y;\n  }\n}\n/**\n * Determines if two arrays of items are equal\n * @param a The first array of items\n * @param b The second array of items\n */\n\nexport function areArraysEqual(a, b) {\n  var isEqual = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : strictEquality;\n\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  for (var i = 0; i < a.length; ++i) {\n    if (!isEqual(a[i], b[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { INIT_COORDS, BEGIN_DRAG, HOVER, END_DRAG, DROP } from '../actions/dragDrop';\nimport { areCoordsEqual } from '../utils/equality';\nvar initialState = {\n  initialSourceClientOffset: null,\n  initialClientOffset: null,\n  clientOffset: null\n};\nexport default function dragOffset() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var payload = action.payload;\n\n  switch (action.type) {\n    case INIT_COORDS:\n    case BEGIN_DRAG:\n      return {\n        initialSourceClientOffset: payload.sourceClientOffset,\n        initialClientOffset: payload.clientOffset,\n        clientOffset: payload.clientOffset\n      };\n\n    case HOVER:\n      if (areCoordsEqual(state.clientOffset, payload.clientOffset)) {\n        return state;\n      }\n\n      return _objectSpread({}, state, {\n        clientOffset: payload.clientOffset\n      });\n\n    case END_DRAG:\n    case DROP:\n      return initialState;\n\n    default:\n      return state;\n  }\n}","export var ADD_SOURCE = 'dnd-core/ADD_SOURCE';\nexport var ADD_TARGET = 'dnd-core/ADD_TARGET';\nexport var REMOVE_SOURCE = 'dnd-core/REMOVE_SOURCE';\nexport var REMOVE_TARGET = 'dnd-core/REMOVE_TARGET';\nexport function addSource(sourceId) {\n  return {\n    type: ADD_SOURCE,\n    payload: {\n      sourceId: sourceId\n    }\n  };\n}\nexport function addTarget(targetId) {\n  return {\n    type: ADD_TARGET,\n    payload: {\n      targetId: targetId\n    }\n  };\n}\nexport function removeSource(sourceId) {\n  return {\n    type: REMOVE_SOURCE,\n    payload: {\n      sourceId: sourceId\n    }\n  };\n}\nexport function removeTarget(targetId) {\n  return {\n    type: REMOVE_TARGET,\n    payload: {\n      targetId: targetId\n    }\n  };\n}","function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n// cheap lodash replacements\n\n/**\n * drop-in replacement for _.get\n * @param obj\n * @param path\n * @param defaultValue\n */\nexport function get(obj, path, defaultValue) {\n  return path.split('.').reduce(function (a, c) {\n    return a && a[c] ? a[c] : defaultValue || null;\n  }, obj);\n}\n/**\n * drop-in replacement for _.without\n */\n\nexport function without(items, item) {\n  return items.filter(function (i) {\n    return i !== item;\n  });\n}\n/**\n * drop-in replacement for _.isString\n * @param input\n */\n\nexport function isString(input) {\n  return typeof input === 'string';\n}\n/**\n * drop-in replacement for _.isString\n * @param input\n */\n\nexport function isObject(input) {\n  return _typeof(input) === 'object';\n}\n/**\n * repalcement for _.xor\n * @param itemsA\n * @param itemsB\n */\n\nexport function xor(itemsA, itemsB) {\n  var map = new Map();\n\n  var insertItem = function insertItem(item) {\n    return map.set(item, map.has(item) ? map.get(item) + 1 : 1);\n  };\n\n  itemsA.forEach(insertItem);\n  itemsB.forEach(insertItem);\n  var result = [];\n  map.forEach(function (count, key) {\n    if (count === 1) {\n      result.push(key);\n    }\n  });\n  return result;\n}\n/**\n * replacement for _.intersection\n * @param itemsA\n * @param itemsB\n */\n\nexport function intersection(itemsA, itemsB) {\n  return itemsA.filter(function (t) {\n    return itemsB.indexOf(t) > -1;\n  });\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { BEGIN_DRAG, PUBLISH_DRAG_SOURCE, HOVER, END_DRAG, DROP } from '../actions/dragDrop';\nimport { REMOVE_TARGET } from '../actions/registry';\nimport { without } from '../utils/js_utils';\nvar initialState = {\n  itemType: null,\n  item: null,\n  sourceId: null,\n  targetIds: [],\n  dropResult: null,\n  didDrop: false,\n  isSourcePublic: null\n};\nexport default function dragOperation() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var payload = action.payload;\n\n  switch (action.type) {\n    case BEGIN_DRAG:\n      return _objectSpread({}, state, {\n        itemType: payload.itemType,\n        item: payload.item,\n        sourceId: payload.sourceId,\n        isSourcePublic: payload.isSourcePublic,\n        dropResult: null,\n        didDrop: false\n      });\n\n    case PUBLISH_DRAG_SOURCE:\n      return _objectSpread({}, state, {\n        isSourcePublic: true\n      });\n\n    case HOVER:\n      return _objectSpread({}, state, {\n        targetIds: payload.targetIds\n      });\n\n    case REMOVE_TARGET:\n      if (state.targetIds.indexOf(payload.targetId) === -1) {\n        return state;\n      }\n\n      return _objectSpread({}, state, {\n        targetIds: without(state.targetIds, payload.targetId)\n      });\n\n    case DROP:\n      return _objectSpread({}, state, {\n        dropResult: payload.dropResult,\n        didDrop: true,\n        targetIds: []\n      });\n\n    case END_DRAG:\n      return _objectSpread({}, state, {\n        itemType: null,\n        item: null,\n        sourceId: null,\n        dropResult: null,\n        didDrop: false,\n        isSourcePublic: null,\n        targetIds: []\n      });\n\n    default:\n      return state;\n  }\n}","import { ADD_SOURCE, ADD_TARGET, REMOVE_SOURCE, REMOVE_TARGET } from '../actions/registry';\nexport default function refCount() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ADD_SOURCE:\n    case ADD_TARGET:\n      return state + 1;\n\n    case REMOVE_SOURCE:\n    case REMOVE_TARGET:\n      return state - 1;\n\n    default:\n      return state;\n  }\n}","import { intersection } from './js_utils';\nexport var NONE = [];\nexport var ALL = [];\nNONE.__IS_NONE__ = true;\nALL.__IS_ALL__ = true;\n/**\n * Determines if the given handler IDs are dirty or not.\n *\n * @param dirtyIds The set of dirty handler ids\n * @param handlerIds The set of handler ids to check\n */\n\nexport function areDirty(dirtyIds, handlerIds) {\n  if (dirtyIds === NONE) {\n    return false;\n  }\n\n  if (dirtyIds === ALL || typeof handlerIds === 'undefined') {\n    return true;\n  }\n\n  var commonIds = intersection(handlerIds, dirtyIds);\n  return commonIds.length > 0;\n}","import { BEGIN_DRAG, PUBLISH_DRAG_SOURCE, HOVER, END_DRAG, DROP } from '../actions/dragDrop';\nimport { ADD_SOURCE, ADD_TARGET, REMOVE_SOURCE, REMOVE_TARGET } from '../actions/registry';\nimport { areArraysEqual } from '../utils/equality';\nimport { NONE, ALL } from '../utils/dirtiness';\nimport { xor } from '../utils/js_utils';\nexport default function dirtyHandlerIds() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : NONE;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case HOVER:\n      break;\n\n    case ADD_SOURCE:\n    case ADD_TARGET:\n    case REMOVE_TARGET:\n    case REMOVE_SOURCE:\n      return NONE;\n\n    case BEGIN_DRAG:\n    case PUBLISH_DRAG_SOURCE:\n    case END_DRAG:\n    case DROP:\n    default:\n      return ALL;\n  }\n\n  var _action$payload = action.payload,\n      _action$payload$targe = _action$payload.targetIds,\n      targetIds = _action$payload$targe === void 0 ? [] : _action$payload$targe,\n      _action$payload$prevT = _action$payload.prevTargetIds,\n      prevTargetIds = _action$payload$prevT === void 0 ? [] : _action$payload$prevT;\n  var result = xor(targetIds, prevTargetIds);\n  var didChange = result.length > 0 || !areArraysEqual(targetIds, prevTargetIds);\n\n  if (!didChange) {\n    return NONE;\n  } // Check the target ids at the innermost position. If they are valid, add them\n  // to the result\n\n\n  var prevInnermostTargetId = prevTargetIds[prevTargetIds.length - 1];\n  var innermostTargetId = targetIds[targetIds.length - 1];\n\n  if (prevInnermostTargetId !== innermostTargetId) {\n    if (prevInnermostTargetId) {\n      result.push(prevInnermostTargetId);\n    }\n\n    if (innermostTargetId) {\n      result.push(innermostTargetId);\n    }\n  }\n\n  return result;\n}","export default function stateId() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  return state + 1;\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport dragOffset from './dragOffset';\nimport dragOperation from './dragOperation';\nimport refCount from './refCount';\nimport dirtyHandlerIds from './dirtyHandlerIds';\nimport stateId from './stateId';\nimport { get } from '../utils/js_utils';\nexport default function reduce() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  return {\n    dirtyHandlerIds: dirtyHandlerIds(state.dirtyHandlerIds, {\n      type: action.type,\n      payload: _objectSpread({}, action.payload, {\n        prevTargetIds: get(state, 'dragOperation.targetIds', [])\n      })\n    }),\n    dragOffset: dragOffset(state.dragOffset, action),\n    refCount: refCount(state.refCount, action),\n    dragOperation: dragOperation(state.dragOperation, action),\n    stateId: stateId(state.stateId)\n  };\n}","import { INIT_COORDS } from '../types';\nexport function setClientOffset(clientOffset, sourceClientOffset) {\n  return {\n    type: INIT_COORDS,\n    payload: {\n      sourceClientOffset: sourceClientOffset || null,\n      clientOffset: clientOffset || null\n    }\n  };\n}","import { invariant } from '@react-dnd/invariant';\nimport { setClientOffset } from './local/setClientOffset';\nimport { isObject } from '../../utils/js_utils';\nimport { BEGIN_DRAG, INIT_COORDS } from './types';\nvar ResetCoordinatesAction = {\n  type: INIT_COORDS,\n  payload: {\n    clientOffset: null,\n    sourceClientOffset: null\n  }\n};\nexport default function createBeginDrag(manager) {\n  return function beginDrag() {\n    var sourceIds = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      publishSource: true\n    };\n    var _options$publishSourc = options.publishSource,\n        publishSource = _options$publishSourc === void 0 ? true : _options$publishSourc,\n        clientOffset = options.clientOffset,\n        getSourceClientOffset = options.getSourceClientOffset;\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry(); // Initialize the coordinates using the client offset\n\n    manager.dispatch(setClientOffset(clientOffset));\n    verifyInvariants(sourceIds, monitor, registry); // Get the draggable source\n\n    var sourceId = getDraggableSource(sourceIds, monitor);\n\n    if (sourceId === null) {\n      manager.dispatch(ResetCoordinatesAction);\n      return;\n    } // Get the source client offset\n\n\n    var sourceClientOffset = null;\n\n    if (clientOffset) {\n      verifyGetSourceClientOffsetIsFunction(getSourceClientOffset);\n      sourceClientOffset = getSourceClientOffset(sourceId);\n    } // Initialize the full coordinates\n\n\n    manager.dispatch(setClientOffset(clientOffset, sourceClientOffset));\n    var source = registry.getSource(sourceId);\n    var item = source.beginDrag(monitor, sourceId);\n    verifyItemIsObject(item);\n    registry.pinSource(sourceId);\n    var itemType = registry.getSourceType(sourceId);\n    return {\n      type: BEGIN_DRAG,\n      payload: {\n        itemType: itemType,\n        item: item,\n        sourceId: sourceId,\n        clientOffset: clientOffset || null,\n        sourceClientOffset: sourceClientOffset || null,\n        isSourcePublic: !!publishSource\n      }\n    };\n  };\n}\n\nfunction verifyInvariants(sourceIds, monitor, registry) {\n  invariant(!monitor.isDragging(), 'Cannot call beginDrag while dragging.');\n  sourceIds.forEach(function (sourceId) {\n    invariant(registry.getSource(sourceId), 'Expected sourceIds to be registered.');\n  });\n}\n\nfunction verifyGetSourceClientOffsetIsFunction(getSourceClientOffset) {\n  invariant(typeof getSourceClientOffset === 'function', 'When clientOffset is provided, getSourceClientOffset must be a function.');\n}\n\nfunction verifyItemIsObject(item) {\n  invariant(isObject(item), 'Item must be an object.');\n}\n\nfunction getDraggableSource(sourceIds, monitor) {\n  var sourceId = null;\n\n  for (var i = sourceIds.length - 1; i >= 0; i--) {\n    if (monitor.canDragSource(sourceIds[i])) {\n      sourceId = sourceIds[i];\n      break;\n    }\n  }\n\n  return sourceId;\n}","import { PUBLISH_DRAG_SOURCE } from './types';\nexport default function createPublishDragSource(manager) {\n  return function publishDragSource() {\n    var monitor = manager.getMonitor();\n\n    if (monitor.isDragging()) {\n      return {\n        type: PUBLISH_DRAG_SOURCE\n      };\n    }\n  };\n}","export default function matchesType(targetType, draggedItemType) {\n  if (draggedItemType === null) {\n    return targetType === null;\n  }\n\n  return Array.isArray(targetType) ? targetType.some(function (t) {\n    return t === draggedItemType;\n  }) : targetType === draggedItemType;\n}","import { invariant } from '@react-dnd/invariant';\nimport matchesType from '../../utils/matchesType';\nimport { HOVER } from './types';\nexport default function createHover(manager) {\n  return function hover(targetIdsArg) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        clientOffset = _ref.clientOffset;\n\n    verifyTargetIdsIsArray(targetIdsArg);\n    var targetIds = targetIdsArg.slice(0);\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry();\n    checkInvariants(targetIds, monitor, registry);\n    var draggedItemType = monitor.getItemType();\n    removeNonMatchingTargetIds(targetIds, registry, draggedItemType);\n    hoverAllTargets(targetIds, monitor, registry);\n    return {\n      type: HOVER,\n      payload: {\n        targetIds: targetIds,\n        clientOffset: clientOffset || null\n      }\n    };\n  };\n}\n\nfunction verifyTargetIdsIsArray(targetIdsArg) {\n  invariant(Array.isArray(targetIdsArg), 'Expected targetIds to be an array.');\n}\n\nfunction checkInvariants(targetIds, monitor, registry) {\n  invariant(monitor.isDragging(), 'Cannot call hover while not dragging.');\n  invariant(!monitor.didDrop(), 'Cannot call hover after drop.');\n\n  for (var i = 0; i < targetIds.length; i++) {\n    var targetId = targetIds[i];\n    invariant(targetIds.lastIndexOf(targetId) === i, 'Expected targetIds to be unique in the passed array.');\n    var target = registry.getTarget(targetId);\n    invariant(target, 'Expected targetIds to be registered.');\n  }\n}\n\nfunction removeNonMatchingTargetIds(targetIds, registry, draggedItemType) {\n  // Remove those targetIds that don't match the targetType.  This\n  // fixes shallow isOver which would only be non-shallow because of\n  // non-matching targets.\n  for (var i = targetIds.length - 1; i >= 0; i--) {\n    var targetId = targetIds[i];\n    var targetType = registry.getTargetType(targetId);\n\n    if (!matchesType(targetType, draggedItemType)) {\n      targetIds.splice(i, 1);\n    }\n  }\n}\n\nfunction hoverAllTargets(targetIds, monitor, registry) {\n  // Finally call hover on all matching targets.\n  targetIds.forEach(function (targetId) {\n    var target = registry.getTarget(targetId);\n    target.hover(monitor, targetId);\n  });\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { invariant } from '@react-dnd/invariant';\nimport { DROP } from './types';\nimport { isObject } from '../../utils/js_utils';\nexport default function createDrop(manager) {\n  return function drop() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry();\n    verifyInvariants(monitor);\n    var targetIds = getDroppableTargets(monitor); // Multiple actions are dispatched here, which is why this doesn't return an action\n\n    targetIds.forEach(function (targetId, index) {\n      var dropResult = determineDropResult(targetId, index, registry, monitor);\n      var action = {\n        type: DROP,\n        payload: {\n          dropResult: _objectSpread({}, options, {}, dropResult)\n        }\n      };\n      manager.dispatch(action);\n    });\n  };\n}\n\nfunction verifyInvariants(monitor) {\n  invariant(monitor.isDragging(), 'Cannot call drop while not dragging.');\n  invariant(!monitor.didDrop(), 'Cannot call drop twice during one drag operation.');\n}\n\nfunction determineDropResult(targetId, index, registry, monitor) {\n  var target = registry.getTarget(targetId);\n  var dropResult = target ? target.drop(monitor, targetId) : undefined;\n  verifyDropResultType(dropResult);\n\n  if (typeof dropResult === 'undefined') {\n    dropResult = index === 0 ? {} : monitor.getDropResult();\n  }\n\n  return dropResult;\n}\n\nfunction verifyDropResultType(dropResult) {\n  invariant(typeof dropResult === 'undefined' || isObject(dropResult), 'Drop result must either be an object or undefined.');\n}\n\nfunction getDroppableTargets(monitor) {\n  var targetIds = monitor.getTargetIds().filter(monitor.canDropOnTarget, monitor);\n  targetIds.reverse();\n  return targetIds;\n}","import { invariant } from '@react-dnd/invariant';\nimport { END_DRAG } from './types';\nexport default function createEndDrag(manager) {\n  return function endDrag() {\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry();\n    verifyIsDragging(monitor);\n    var sourceId = monitor.getSourceId();\n    var source = registry.getSource(sourceId, true);\n    source.endDrag(monitor, sourceId);\n    registry.unpinSource();\n    return {\n      type: END_DRAG\n    };\n  };\n}\n\nfunction verifyIsDragging(monitor) {\n  invariant(monitor.isDragging(), 'Cannot call endDrag while not dragging.');\n}","/**\n * Coordinate addition\n * @param a The first coordinate\n * @param b The second coordinate\n */\nexport function add(a, b) {\n  return {\n    x: a.x + b.x,\n    y: a.y + b.y\n  };\n}\n/**\n * Coordinate subtraction\n * @param a The first coordinate\n * @param b The second coordinate\n */\n\nexport function subtract(a, b) {\n  return {\n    x: a.x - b.x,\n    y: a.y - b.y\n  };\n}\n/**\n * Returns the cartesian distance of the drag source component's position, based on its position\n * at the time when the current drag operation has started, and the movement difference.\n *\n * Returns null if no item is being dragged.\n *\n * @param state The offset state to compute from\n */\n\nexport function getSourceClientOffset(state) {\n  var clientOffset = state.clientOffset,\n      initialClientOffset = state.initialClientOffset,\n      initialSourceClientOffset = state.initialSourceClientOffset;\n\n  if (!clientOffset || !initialClientOffset || !initialSourceClientOffset) {\n    return null;\n  }\n\n  return subtract(add(clientOffset, initialSourceClientOffset), initialClientOffset);\n}\n/**\n * Determines the x,y offset between the client offset and the initial client offset\n *\n * @param state The offset state to compute from\n */\n\nexport function getDifferenceFromInitialOffset(state) {\n  var clientOffset = state.clientOffset,\n      initialClientOffset = state.initialClientOffset;\n\n  if (!clientOffset || !initialClientOffset) {\n    return null;\n  }\n\n  return subtract(clientOffset, initialClientOffset);\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { invariant } from '@react-dnd/invariant';\nimport matchesType from './utils/matchesType';\nimport { getSourceClientOffset as _getSourceClientOffset, getDifferenceFromInitialOffset as _getDifferenceFromInitialOffset } from './utils/coords';\nimport { areDirty } from './utils/dirtiness';\n\nvar DragDropMonitorImpl =\n/*#__PURE__*/\nfunction () {\n  function DragDropMonitorImpl(store, registry) {\n    _classCallCheck(this, DragDropMonitorImpl);\n\n    this.store = store;\n    this.registry = registry;\n  }\n\n  _createClass(DragDropMonitorImpl, [{\n    key: \"subscribeToStateChange\",\n    value: function subscribeToStateChange(listener) {\n      var _this = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        handlerIds: undefined\n      };\n      var handlerIds = options.handlerIds;\n      invariant(typeof listener === 'function', 'listener must be a function.');\n      invariant(typeof handlerIds === 'undefined' || Array.isArray(handlerIds), 'handlerIds, when specified, must be an array of strings.');\n      var prevStateId = this.store.getState().stateId;\n\n      var handleChange = function handleChange() {\n        var state = _this.store.getState();\n\n        var currentStateId = state.stateId;\n\n        try {\n          var canSkipListener = currentStateId === prevStateId || currentStateId === prevStateId + 1 && !areDirty(state.dirtyHandlerIds, handlerIds);\n\n          if (!canSkipListener) {\n            listener();\n          }\n        } finally {\n          prevStateId = currentStateId;\n        }\n      };\n\n      return this.store.subscribe(handleChange);\n    }\n  }, {\n    key: \"subscribeToOffsetChange\",\n    value: function subscribeToOffsetChange(listener) {\n      var _this2 = this;\n\n      invariant(typeof listener === 'function', 'listener must be a function.');\n      var previousState = this.store.getState().dragOffset;\n\n      var handleChange = function handleChange() {\n        var nextState = _this2.store.getState().dragOffset;\n\n        if (nextState === previousState) {\n          return;\n        }\n\n        previousState = nextState;\n        listener();\n      };\n\n      return this.store.subscribe(handleChange);\n    }\n  }, {\n    key: \"canDragSource\",\n    value: function canDragSource(sourceId) {\n      if (!sourceId) {\n        return false;\n      }\n\n      var source = this.registry.getSource(sourceId);\n      invariant(source, 'Expected to find a valid source.');\n\n      if (this.isDragging()) {\n        return false;\n      }\n\n      return source.canDrag(this, sourceId);\n    }\n  }, {\n    key: \"canDropOnTarget\",\n    value: function canDropOnTarget(targetId) {\n      // undefined on initial render\n      if (!targetId) {\n        return false;\n      }\n\n      var target = this.registry.getTarget(targetId);\n      invariant(target, 'Expected to find a valid target.');\n\n      if (!this.isDragging() || this.didDrop()) {\n        return false;\n      }\n\n      var targetType = this.registry.getTargetType(targetId);\n      var draggedItemType = this.getItemType();\n      return matchesType(targetType, draggedItemType) && target.canDrop(this, targetId);\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging() {\n      return Boolean(this.getItemType());\n    }\n  }, {\n    key: \"isDraggingSource\",\n    value: function isDraggingSource(sourceId) {\n      // undefined on initial render\n      if (!sourceId) {\n        return false;\n      }\n\n      var source = this.registry.getSource(sourceId, true);\n      invariant(source, 'Expected to find a valid source.');\n\n      if (!this.isDragging() || !this.isSourcePublic()) {\n        return false;\n      }\n\n      var sourceType = this.registry.getSourceType(sourceId);\n      var draggedItemType = this.getItemType();\n\n      if (sourceType !== draggedItemType) {\n        return false;\n      }\n\n      return source.isDragging(this, sourceId);\n    }\n  }, {\n    key: \"isOverTarget\",\n    value: function isOverTarget(targetId) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        shallow: false\n      };\n\n      // undefined on initial render\n      if (!targetId) {\n        return false;\n      }\n\n      var shallow = options.shallow;\n\n      if (!this.isDragging()) {\n        return false;\n      }\n\n      var targetType = this.registry.getTargetType(targetId);\n      var draggedItemType = this.getItemType();\n\n      if (draggedItemType && !matchesType(targetType, draggedItemType)) {\n        return false;\n      }\n\n      var targetIds = this.getTargetIds();\n\n      if (!targetIds.length) {\n        return false;\n      }\n\n      var index = targetIds.indexOf(targetId);\n\n      if (shallow) {\n        return index === targetIds.length - 1;\n      } else {\n        return index > -1;\n      }\n    }\n  }, {\n    key: \"getItemType\",\n    value: function getItemType() {\n      return this.store.getState().dragOperation.itemType;\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem() {\n      return this.store.getState().dragOperation.item;\n    }\n  }, {\n    key: \"getSourceId\",\n    value: function getSourceId() {\n      return this.store.getState().dragOperation.sourceId;\n    }\n  }, {\n    key: \"getTargetIds\",\n    value: function getTargetIds() {\n      return this.store.getState().dragOperation.targetIds;\n    }\n  }, {\n    key: \"getDropResult\",\n    value: function getDropResult() {\n      return this.store.getState().dragOperation.dropResult;\n    }\n  }, {\n    key: \"didDrop\",\n    value: function didDrop() {\n      return this.store.getState().dragOperation.didDrop;\n    }\n  }, {\n    key: \"isSourcePublic\",\n    value: function isSourcePublic() {\n      return this.store.getState().dragOperation.isSourcePublic;\n    }\n  }, {\n    key: \"getInitialClientOffset\",\n    value: function getInitialClientOffset() {\n      return this.store.getState().dragOffset.initialClientOffset;\n    }\n  }, {\n    key: \"getInitialSourceClientOffset\",\n    value: function getInitialSourceClientOffset() {\n      return this.store.getState().dragOffset.initialSourceClientOffset;\n    }\n  }, {\n    key: \"getClientOffset\",\n    value: function getClientOffset() {\n      return this.store.getState().dragOffset.clientOffset;\n    }\n  }, {\n    key: \"getSourceClientOffset\",\n    value: function getSourceClientOffset() {\n      return _getSourceClientOffset(this.store.getState().dragOffset);\n    }\n  }, {\n    key: \"getDifferenceFromInitialOffset\",\n    value: function getDifferenceFromInitialOffset() {\n      return _getDifferenceFromInitialOffset(this.store.getState().dragOffset);\n    }\n  }]);\n\n  return DragDropMonitorImpl;\n}();\n\nexport { DragDropMonitorImpl as default };","export var HandlerRole;\n\n(function (HandlerRole) {\n  HandlerRole[\"SOURCE\"] = \"SOURCE\";\n  HandlerRole[\"TARGET\"] = \"TARGET\";\n})(HandlerRole || (HandlerRole = {}));","var nextUniqueId = 0;\nexport default function getNextUniqueId() {\n  return nextUniqueId++;\n}","function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport { invariant } from '@react-dnd/invariant';\nexport function validateSourceContract(source) {\n  invariant(typeof source.canDrag === 'function', 'Expected canDrag to be a function.');\n  invariant(typeof source.beginDrag === 'function', 'Expected beginDrag to be a function.');\n  invariant(typeof source.endDrag === 'function', 'Expected endDrag to be a function.');\n}\nexport function validateTargetContract(target) {\n  invariant(typeof target.canDrop === 'function', 'Expected canDrop to be a function.');\n  invariant(typeof target.hover === 'function', 'Expected hover to be a function.');\n  invariant(typeof target.drop === 'function', 'Expected beginDrag to be a function.');\n}\nexport function validateType(type, allowArray) {\n  if (allowArray && Array.isArray(type)) {\n    type.forEach(function (t) {\n      return validateType(t, false);\n    });\n    return;\n  }\n\n  invariant(typeof type === 'string' || _typeof(type) === 'symbol', allowArray ? 'Type can only be a string, a symbol, or an array of either.' : 'Type can only be a string or a symbol.');\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { invariant } from '@react-dnd/invariant';\nimport { addSource as _addSource, addTarget as _addTarget, removeSource as _removeSource, removeTarget as _removeTarget } from './actions/registry';\nimport getNextUniqueId from './utils/getNextUniqueId';\nimport { HandlerRole } from './interfaces';\nimport { validateSourceContract, validateTargetContract, validateType } from './contracts';\nimport { asap } from '@react-dnd/asap';\n\nfunction getNextHandlerId(role) {\n  var id = getNextUniqueId().toString();\n\n  switch (role) {\n    case HandlerRole.SOURCE:\n      return \"S\".concat(id);\n\n    case HandlerRole.TARGET:\n      return \"T\".concat(id);\n\n    default:\n      throw new Error(\"Unknown Handler Role: \".concat(role));\n  }\n}\n\nfunction parseRoleFromHandlerId(handlerId) {\n  switch (handlerId[0]) {\n    case 'S':\n      return HandlerRole.SOURCE;\n\n    case 'T':\n      return HandlerRole.TARGET;\n\n    default:\n      invariant(false, \"Cannot parse handler ID: \".concat(handlerId));\n  }\n}\n\nfunction mapContainsValue(map, searchValue) {\n  var entries = map.entries();\n  var isDone = false;\n\n  do {\n    var _entries$next = entries.next(),\n        done = _entries$next.done,\n        _entries$next$value = _slicedToArray(_entries$next.value, 2),\n        value = _entries$next$value[1];\n\n    if (value === searchValue) {\n      return true;\n    }\n\n    isDone = !!done;\n  } while (!isDone);\n\n  return false;\n}\n\nvar HandlerRegistryImpl =\n/*#__PURE__*/\nfunction () {\n  function HandlerRegistryImpl(store) {\n    _classCallCheck(this, HandlerRegistryImpl);\n\n    this.types = new Map();\n    this.dragSources = new Map();\n    this.dropTargets = new Map();\n    this.pinnedSourceId = null;\n    this.pinnedSource = null;\n    this.store = store;\n  }\n\n  _createClass(HandlerRegistryImpl, [{\n    key: \"addSource\",\n    value: function addSource(type, source) {\n      validateType(type);\n      validateSourceContract(source);\n      var sourceId = this.addHandler(HandlerRole.SOURCE, type, source);\n      this.store.dispatch(_addSource(sourceId));\n      return sourceId;\n    }\n  }, {\n    key: \"addTarget\",\n    value: function addTarget(type, target) {\n      validateType(type, true);\n      validateTargetContract(target);\n      var targetId = this.addHandler(HandlerRole.TARGET, type, target);\n      this.store.dispatch(_addTarget(targetId));\n      return targetId;\n    }\n  }, {\n    key: \"containsHandler\",\n    value: function containsHandler(handler) {\n      return mapContainsValue(this.dragSources, handler) || mapContainsValue(this.dropTargets, handler);\n    }\n  }, {\n    key: \"getSource\",\n    value: function getSource(sourceId) {\n      var includePinned = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n      var isPinned = includePinned && sourceId === this.pinnedSourceId;\n      var source = isPinned ? this.pinnedSource : this.dragSources.get(sourceId);\n      return source;\n    }\n  }, {\n    key: \"getTarget\",\n    value: function getTarget(targetId) {\n      invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n      return this.dropTargets.get(targetId);\n    }\n  }, {\n    key: \"getSourceType\",\n    value: function getSourceType(sourceId) {\n      invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n      return this.types.get(sourceId);\n    }\n  }, {\n    key: \"getTargetType\",\n    value: function getTargetType(targetId) {\n      invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n      return this.types.get(targetId);\n    }\n  }, {\n    key: \"isSourceId\",\n    value: function isSourceId(handlerId) {\n      var role = parseRoleFromHandlerId(handlerId);\n      return role === HandlerRole.SOURCE;\n    }\n  }, {\n    key: \"isTargetId\",\n    value: function isTargetId(handlerId) {\n      var role = parseRoleFromHandlerId(handlerId);\n      return role === HandlerRole.TARGET;\n    }\n  }, {\n    key: \"removeSource\",\n    value: function removeSource(sourceId) {\n      var _this = this;\n\n      invariant(this.getSource(sourceId), 'Expected an existing source.');\n      this.store.dispatch(_removeSource(sourceId));\n      asap(function () {\n        _this.dragSources.delete(sourceId);\n\n        _this.types.delete(sourceId);\n      });\n    }\n  }, {\n    key: \"removeTarget\",\n    value: function removeTarget(targetId) {\n      invariant(this.getTarget(targetId), 'Expected an existing target.');\n      this.store.dispatch(_removeTarget(targetId));\n      this.dropTargets.delete(targetId);\n      this.types.delete(targetId);\n    }\n  }, {\n    key: \"pinSource\",\n    value: function pinSource(sourceId) {\n      var source = this.getSource(sourceId);\n      invariant(source, 'Expected an existing source.');\n      this.pinnedSourceId = sourceId;\n      this.pinnedSource = source;\n    }\n  }, {\n    key: \"unpinSource\",\n    value: function unpinSource() {\n      invariant(this.pinnedSource, 'No source is pinned at the time.');\n      this.pinnedSourceId = null;\n      this.pinnedSource = null;\n    }\n  }, {\n    key: \"addHandler\",\n    value: function addHandler(role, type, handler) {\n      var id = getNextHandlerId(role);\n      this.types.set(id, type);\n\n      if (role === HandlerRole.SOURCE) {\n        this.dragSources.set(id, handler);\n      } else if (role === HandlerRole.TARGET) {\n        this.dropTargets.set(id, handler);\n      }\n\n      return id;\n    }\n  }]);\n\n  return HandlerRegistryImpl;\n}();\n\nexport { HandlerRegistryImpl as default };","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { createStore } from 'redux';\nimport reducer from './reducers';\nimport dragDropActions from './actions/dragDrop';\nimport DragDropMonitorImpl from './DragDropMonitorImpl';\nimport HandlerRegistryImpl from './HandlerRegistryImpl';\n\nfunction makeStoreInstance(debugMode) {\n  // TODO: if we ever make a react-native version of this,\n  // we'll need to consider how to pull off dev-tooling\n  var reduxDevTools = typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION__;\n  return createStore(reducer, debugMode && reduxDevTools && reduxDevTools({\n    name: 'dnd-core',\n    instanceId: 'dnd-core'\n  }));\n}\n\nvar DragDropManagerImpl =\n/*#__PURE__*/\nfunction () {\n  function DragDropManagerImpl() {\n    var _this = this;\n\n    var debugMode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n    _classCallCheck(this, DragDropManagerImpl);\n\n    this.isSetUp = false;\n\n    this.handleRefCountChange = function () {\n      var shouldSetUp = _this.store.getState().refCount > 0;\n\n      if (_this.backend) {\n        if (shouldSetUp && !_this.isSetUp) {\n          _this.backend.setup();\n\n          _this.isSetUp = true;\n        } else if (!shouldSetUp && _this.isSetUp) {\n          _this.backend.teardown();\n\n          _this.isSetUp = false;\n        }\n      }\n    };\n\n    var store = makeStoreInstance(debugMode);\n    this.store = store;\n    this.monitor = new DragDropMonitorImpl(store, new HandlerRegistryImpl(store));\n    store.subscribe(this.handleRefCountChange);\n  }\n\n  _createClass(DragDropManagerImpl, [{\n    key: \"receiveBackend\",\n    value: function receiveBackend(backend) {\n      this.backend = backend;\n    }\n  }, {\n    key: \"getMonitor\",\n    value: function getMonitor() {\n      return this.monitor;\n    }\n  }, {\n    key: \"getBackend\",\n    value: function getBackend() {\n      return this.backend;\n    }\n  }, {\n    key: \"getRegistry\",\n    value: function getRegistry() {\n      return this.monitor.registry;\n    }\n  }, {\n    key: \"getActions\",\n    value: function getActions() {\n      /* eslint-disable-next-line @typescript-eslint/no-this-alias */\n      var manager = this;\n      var dispatch = this.store.dispatch;\n\n      function bindActionCreator(actionCreator) {\n        return function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          var action = actionCreator.apply(manager, args);\n\n          if (typeof action !== 'undefined') {\n            dispatch(action);\n          }\n        };\n      }\n\n      var actions = dragDropActions(this);\n      return Object.keys(actions).reduce(function (boundActions, key) {\n        var action = actions[key];\n        boundActions[key] = bindActionCreator(action);\n        return boundActions;\n      }, {});\n    }\n  }, {\n    key: \"dispatch\",\n    value: function dispatch(action) {\n      this.store.dispatch(action);\n    }\n  }]);\n\n  return DragDropManagerImpl;\n}();\n\nexport { DragDropManagerImpl as default };","import createBeginDrag from './beginDrag';\nimport createPublishDragSource from './publishDragSource';\nimport createHover from './hover';\nimport createDrop from './drop';\nimport createEndDrag from './endDrag';\nexport * from './types';\nexport default function createDragDropActions(manager) {\n  return {\n    beginDrag: createBeginDrag(manager),\n    publishDragSource: createPublishDragSource(manager),\n    hover: createHover(manager),\n    drop: createDrop(manager),\n    endDrag: createEndDrag(manager)\n  };\n}","import DragDropManagerImpl from './DragDropManagerImpl';\nexport function createDragDropManager(backendFactory, globalContext, backendOptions, debugMode) {\n  var manager = new DragDropManagerImpl(debugMode);\n  var backend = backendFactory(manager, globalContext, backendOptions);\n  manager.receiveBackend(backend);\n  return manager;\n}","export default (function (event, check) {\n  return {\n    _isMBTransition: true,\n    event: event,\n    check: check\n  };\n});","import createTransition from './createTransition';\nexport var TouchTransition = createTransition('touchstart', function (event) {\n  return event.touches != null; // eslint-disable-line no-eq-null, eqeqeq\n});\nexport var HTML5DragTransition = createTransition('dragstart', function (event) {\n  if (event.type) {\n    return event.type.indexOf('drag') !== -1 || event.type.indexOf('drop') !== -1;\n  }\n\n  return false;\n});\nexport var MouseTransition = createTransition('mousedown', function (event) {\n  if (event.type) {\n    return event.type.indexOf('touch') === -1 && event.type.indexOf('mouse') !== -1;\n  }\n\n  return false;\n});","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _createForOfIteratorHelper(o) { if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) { var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var it, normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport objectAssign from './objectAssign';\n\nvar PreviewList = function PreviewList() {\n  var _this = this;\n\n  _classCallCheck(this, PreviewList);\n\n  this.register = function (preview) {\n    _this.previews.push(preview);\n  };\n\n  this.unregister = function (preview) {\n    var index;\n\n    while ((index = _this.previews.indexOf(preview)) !== -1) {\n      _this.previews.splice(index, 1);\n    }\n  };\n\n  this.backendChanged = function (backend) {\n    var _iterator = _createForOfIteratorHelper(_this.previews),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var preview = _step.value;\n        preview.backendChanged(backend);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  };\n\n  this.previews = [];\n};\n\nexport var PreviewManager = new PreviewList();\n\nvar _default = function _default(manager, context, sourceOptions) {\n  var _this2 = this;\n\n  _classCallCheck(this, _default);\n\n  this.setup = function () {\n    if (typeof window === 'undefined') {\n      return;\n    }\n\n    if (_this2.constructor.isSetUp) {\n      throw new Error('Cannot have two MultiBackends at the same time.');\n    }\n\n    _this2.constructor.isSetUp = true;\n\n    _this2.addEventListeners(window);\n\n    _this2.backends[_this2.current].instance.setup();\n  };\n\n  this.teardown = function () {\n    if (typeof window === 'undefined') {\n      return;\n    }\n\n    _this2.constructor.isSetUp = false;\n\n    _this2.removeEventListeners(window);\n\n    _this2.backends[_this2.current].instance.teardown();\n  };\n\n  this.connectDragSource = function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _this2.connectBackend('connectDragSource', args);\n  };\n\n  this.connectDragPreview = function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return _this2.connectBackend('connectDragPreview', args);\n  };\n\n  this.connectDropTarget = function () {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    return _this2.connectBackend('connectDropTarget', args);\n  };\n\n  this.previewEnabled = function () {\n    return _this2.backends[_this2.current].preview;\n  };\n\n  this.addEventListeners = function (target) {\n    _this2.backends.forEach(function (backend) {\n      if (backend.transition) {\n        target.addEventListener(backend.transition.event, _this2.backendSwitcher, true);\n      }\n    });\n  };\n\n  this.removeEventListeners = function (target) {\n    _this2.backends.forEach(function (backend) {\n      if (backend.transition) {\n        target.removeEventListener(backend.transition.event, _this2.backendSwitcher, true);\n      }\n    });\n  };\n\n  this.backendSwitcher = function (event) {\n    var oldBackend = _this2.current;\n    var i = 0;\n\n    _this2.backends.some(function (backend) {\n      if (i !== _this2.current && backend.transition && backend.transition.check(event)) {\n        _this2.current = i;\n        return true;\n      }\n\n      i += 1;\n      return false;\n    });\n\n    if (_this2.current !== oldBackend) {\n      _this2.backends[oldBackend].instance.teardown();\n\n      Object.keys(_this2.nodes).forEach(function (id) {\n        var node = _this2.nodes[id];\n        node.handler();\n        node.handler = _this2.callBackend(node.func, node.args);\n      });\n      PreviewManager.backendChanged(_this2);\n      var newBackend = _this2.backends[_this2.current];\n      newBackend.instance.setup();\n\n      if (newBackend.skipDispatchOnTransition) {\n        return;\n      }\n\n      var newEvent = null;\n\n      try {\n        newEvent = new event.constructor(event.type, event);\n      } catch (_e) {\n        newEvent = document.createEvent('Event');\n        newEvent.initEvent(event.type, event.bubbles, event.cancelable);\n      }\n\n      event.target.dispatchEvent(newEvent);\n    }\n  };\n\n  this.callBackend = function (func, args) {\n    var _this2$backends$_this;\n\n    return (_this2$backends$_this = _this2.backends[_this2.current].instance)[func].apply(_this2$backends$_this, _toConsumableArray(args));\n  };\n\n  this.connectBackend = function (func, args) {\n    var nodeId = \"\".concat(func, \"_\").concat(args[0]);\n\n    var handler = _this2.callBackend(func, args);\n\n    _this2.nodes[nodeId] = {\n      func: func,\n      args: args,\n      handler: handler\n    };\n    return function () {\n      var _this2$nodes$nodeId;\n\n      var r = (_this2$nodes$nodeId = _this2.nodes[nodeId]).handler.apply(_this2$nodes$nodeId, arguments);\n\n      delete _this2.nodes[nodeId];\n      return r;\n    };\n  };\n\n  var options = objectAssign({\n    backends: []\n  }, sourceOptions || {});\n\n  if (options.backends.length < 1) {\n    throw new Error(\"You must specify at least one Backend, if you are coming from 2.x.x (or don't understand this error)\\n        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-2xx\");\n  }\n\n  this.current = 0;\n  this.backends = [];\n  options.backends.forEach(function (backend) {\n    if (!backend.backend) {\n      throw new Error(\"You must specify a 'backend' property in your Backend entry: \".concat(backend));\n    }\n\n    var transition = backend.transition;\n\n    if (transition && !transition._isMBTransition) {\n      throw new Error(\"You must specify a valid 'transition' property (either undefined or the return of 'createTransition') in your Backend entry: \".concat(backend));\n    }\n\n    _this2.backends.push({\n      instance: backend.backend(manager, context, backend.options),\n      preview: backend.preview || false,\n      transition: transition,\n      skipDispatchOnTransition: Boolean(backend.skipDispatchOnTransition)\n    });\n  });\n  this.nodes = {};\n} // DnD Backend API\n;\n\nexport { _default as default };","export default function (target) {\n  for (var _len = arguments.length, sources = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    sources[_key - 1] = arguments[_key];\n  }\n\n  sources.forEach(function (source) {\n    for (var name in source) {\n      if (Object.prototype.hasOwnProperty.call(source, name)) {\n        target[name] = source[name];\n      }\n    }\n  });\n  return target;\n}","export { HTML5DragTransition, TouchTransition, MouseTransition } from './Transitions';\nexport { default as createTransition } from './createTransition';\nimport MultiBackend, { PreviewManager } from './MultiBackend';\nexport { MultiBackend, PreviewManager };\nexport default (function (manager, context, options) {\n  return new MultiBackend(manager, context, options);\n});","/*! @license DOMPurify 2.3.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.6/LICENSE */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.DOMPurify = factory());\n}(this, function () { 'use strict';\n\n  function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n  var hasOwnProperty = Object.hasOwnProperty,\n      setPrototypeOf = Object.setPrototypeOf,\n      isFrozen = Object.isFrozen,\n      getPrototypeOf = Object.getPrototypeOf,\n      getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n  var freeze = Object.freeze,\n      seal = Object.seal,\n      create = Object.create; // eslint-disable-line import/no-mutable-exports\n\n  var _ref = typeof Reflect !== 'undefined' && Reflect,\n      apply = _ref.apply,\n      construct = _ref.construct;\n\n  if (!apply) {\n    apply = function apply(fun, thisValue, args) {\n      return fun.apply(thisValue, args);\n    };\n  }\n\n  if (!freeze) {\n    freeze = function freeze(x) {\n      return x;\n    };\n  }\n\n  if (!seal) {\n    seal = function seal(x) {\n      return x;\n    };\n  }\n\n  if (!construct) {\n    construct = function construct(Func, args) {\n      return new (Function.prototype.bind.apply(Func, [null].concat(_toConsumableArray(args))))();\n    };\n  }\n\n  var arrayForEach = unapply(Array.prototype.forEach);\n  var arrayPop = unapply(Array.prototype.pop);\n  var arrayPush = unapply(Array.prototype.push);\n\n  var stringToLowerCase = unapply(String.prototype.toLowerCase);\n  var stringMatch = unapply(String.prototype.match);\n  var stringReplace = unapply(String.prototype.replace);\n  var stringIndexOf = unapply(String.prototype.indexOf);\n  var stringTrim = unapply(String.prototype.trim);\n\n  var regExpTest = unapply(RegExp.prototype.test);\n\n  var typeErrorCreate = unconstruct(TypeError);\n\n  function unapply(func) {\n    return function (thisArg) {\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      return apply(func, thisArg, args);\n    };\n  }\n\n  function unconstruct(func) {\n    return function () {\n      for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return construct(func, args);\n    };\n  }\n\n  /* Add properties to a lookup table */\n  function addToSet(set, array) {\n    if (setPrototypeOf) {\n      // Make 'in' and truthy checks like Boolean(set.constructor)\n      // independent of any properties defined on Object.prototype.\n      // Prevent prototype setters from intercepting set as a this value.\n      setPrototypeOf(set, null);\n    }\n\n    var l = array.length;\n    while (l--) {\n      var element = array[l];\n      if (typeof element === 'string') {\n        var lcElement = stringToLowerCase(element);\n        if (lcElement !== element) {\n          // Config presets (e.g. tags.js, attrs.js) are immutable.\n          if (!isFrozen(array)) {\n            array[l] = lcElement;\n          }\n\n          element = lcElement;\n        }\n      }\n\n      set[element] = true;\n    }\n\n    return set;\n  }\n\n  /* Shallow clone an object */\n  function clone(object) {\n    var newObject = create(null);\n\n    var property = void 0;\n    for (property in object) {\n      if (apply(hasOwnProperty, object, [property])) {\n        newObject[property] = object[property];\n      }\n    }\n\n    return newObject;\n  }\n\n  /* IE10 doesn't support __lookupGetter__ so lets'\n   * simulate it. It also automatically checks\n   * if the prop is function or getter and behaves\n   * accordingly. */\n  function lookupGetter(object, prop) {\n    while (object !== null) {\n      var desc = getOwnPropertyDescriptor(object, prop);\n      if (desc) {\n        if (desc.get) {\n          return unapply(desc.get);\n        }\n\n        if (typeof desc.value === 'function') {\n          return unapply(desc.value);\n        }\n      }\n\n      object = getPrototypeOf(object);\n    }\n\n    function fallbackValue(element) {\n      console.warn('fallback value for', element);\n      return null;\n    }\n\n    return fallbackValue;\n  }\n\n  var html = freeze(['a', 'abbr', 'acronym', 'address', 'area', 'article', 'aside', 'audio', 'b', 'bdi', 'bdo', 'big', 'blink', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'content', 'data', 'datalist', 'dd', 'decorator', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt', 'element', 'em', 'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'img', 'input', 'ins', 'kbd', 'label', 'legend', 'li', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meter', 'nav', 'nobr', 'ol', 'optgroup', 'option', 'output', 'p', 'picture', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'tr', 'track', 'tt', 'u', 'ul', 'var', 'video', 'wbr']);\n\n  // SVG\n  var svg = freeze(['svg', 'a', 'altglyph', 'altglyphdef', 'altglyphitem', 'animatecolor', 'animatemotion', 'animatetransform', 'circle', 'clippath', 'defs', 'desc', 'ellipse', 'filter', 'font', 'g', 'glyph', 'glyphref', 'hkern', 'image', 'line', 'lineargradient', 'marker', 'mask', 'metadata', 'mpath', 'path', 'pattern', 'polygon', 'polyline', 'radialgradient', 'rect', 'stop', 'style', 'switch', 'symbol', 'text', 'textpath', 'title', 'tref', 'tspan', 'view', 'vkern']);\n\n  var svgFilters = freeze(['feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence']);\n\n  // List of SVG elements that are disallowed by default.\n  // We still need to know them so that we can do namespace\n  // checks properly in case one wants to add them to\n  // allow-list.\n  var svgDisallowed = freeze(['animate', 'color-profile', 'cursor', 'discard', 'fedropshadow', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri', 'foreignobject', 'hatch', 'hatchpath', 'mesh', 'meshgradient', 'meshpatch', 'meshrow', 'missing-glyph', 'script', 'set', 'solidcolor', 'unknown', 'use']);\n\n  var mathMl = freeze(['math', 'menclose', 'merror', 'mfenced', 'mfrac', 'mglyph', 'mi', 'mlabeledtr', 'mmultiscripts', 'mn', 'mo', 'mover', 'mpadded', 'mphantom', 'mroot', 'mrow', 'ms', 'mspace', 'msqrt', 'mstyle', 'msub', 'msup', 'msubsup', 'mtable', 'mtd', 'mtext', 'mtr', 'munder', 'munderover']);\n\n  // Similarly to SVG, we want to know all MathML elements,\n  // even those that we disallow by default.\n  var mathMlDisallowed = freeze(['maction', 'maligngroup', 'malignmark', 'mlongdiv', 'mscarries', 'mscarry', 'msgroup', 'mstack', 'msline', 'msrow', 'semantics', 'annotation', 'annotation-xml', 'mprescripts', 'none']);\n\n  var text = freeze(['#text']);\n\n  var html$1 = freeze(['accept', 'action', 'align', 'alt', 'autocapitalize', 'autocomplete', 'autopictureinpicture', 'autoplay', 'background', 'bgcolor', 'border', 'capture', 'cellpadding', 'cellspacing', 'checked', 'cite', 'class', 'clear', 'color', 'cols', 'colspan', 'controls', 'controlslist', 'coords', 'crossorigin', 'datetime', 'decoding', 'default', 'dir', 'disabled', 'disablepictureinpicture', 'disableremoteplayback', 'download', 'draggable', 'enctype', 'enterkeyhint', 'face', 'for', 'headers', 'height', 'hidden', 'high', 'href', 'hreflang', 'id', 'inputmode', 'integrity', 'ismap', 'kind', 'label', 'lang', 'list', 'loading', 'loop', 'low', 'max', 'maxlength', 'media', 'method', 'min', 'minlength', 'multiple', 'muted', 'name', 'nonce', 'noshade', 'novalidate', 'nowrap', 'open', 'optimum', 'pattern', 'placeholder', 'playsinline', 'poster', 'preload', 'pubdate', 'radiogroup', 'readonly', 'rel', 'required', 'rev', 'reversed', 'role', 'rows', 'rowspan', 'spellcheck', 'scope', 'selected', 'shape', 'size', 'sizes', 'span', 'srclang', 'start', 'src', 'srcset', 'step', 'style', 'summary', 'tabindex', 'title', 'translate', 'type', 'usemap', 'valign', 'value', 'width', 'xmlns', 'slot']);\n\n  var svg$1 = freeze(['accent-height', 'accumulate', 'additive', 'alignment-baseline', 'ascent', 'attributename', 'attributetype', 'azimuth', 'basefrequency', 'baseline-shift', 'begin', 'bias', 'by', 'class', 'clip', 'clippathunits', 'clip-path', 'clip-rule', 'color', 'color-interpolation', 'color-interpolation-filters', 'color-profile', 'color-rendering', 'cx', 'cy', 'd', 'dx', 'dy', 'diffuseconstant', 'direction', 'display', 'divisor', 'dur', 'edgemode', 'elevation', 'end', 'fill', 'fill-opacity', 'fill-rule', 'filter', 'filterunits', 'flood-color', 'flood-opacity', 'font-family', 'font-size', 'font-size-adjust', 'font-stretch', 'font-style', 'font-variant', 'font-weight', 'fx', 'fy', 'g1', 'g2', 'glyph-name', 'glyphref', 'gradientunits', 'gradienttransform', 'height', 'href', 'id', 'image-rendering', 'in', 'in2', 'k', 'k1', 'k2', 'k3', 'k4', 'kerning', 'keypoints', 'keysplines', 'keytimes', 'lang', 'lengthadjust', 'letter-spacing', 'kernelmatrix', 'kernelunitlength', 'lighting-color', 'local', 'marker-end', 'marker-mid', 'marker-start', 'markerheight', 'markerunits', 'markerwidth', 'maskcontentunits', 'maskunits', 'max', 'mask', 'media', 'method', 'mode', 'min', 'name', 'numoctaves', 'offset', 'operator', 'opacity', 'order', 'orient', 'orientation', 'origin', 'overflow', 'paint-order', 'path', 'pathlength', 'patterncontentunits', 'patterntransform', 'patternunits', 'points', 'preservealpha', 'preserveaspectratio', 'primitiveunits', 'r', 'rx', 'ry', 'radius', 'refx', 'refy', 'repeatcount', 'repeatdur', 'restart', 'result', 'rotate', 'scale', 'seed', 'shape-rendering', 'specularconstant', 'specularexponent', 'spreadmethod', 'startoffset', 'stddeviation', 'stitchtiles', 'stop-color', 'stop-opacity', 'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-linejoin', 'stroke-miterlimit', 'stroke-opacity', 'stroke', 'stroke-width', 'style', 'surfacescale', 'systemlanguage', 'tabindex', 'targetx', 'targety', 'transform', 'transform-origin', 'text-anchor', 'text-decoration', 'text-rendering', 'textlength', 'type', 'u1', 'u2', 'unicode', 'values', 'viewbox', 'visibility', 'version', 'vert-adv-y', 'vert-origin-x', 'vert-origin-y', 'width', 'word-spacing', 'wrap', 'writing-mode', 'xchannelselector', 'ychannelselector', 'x', 'x1', 'x2', 'xmlns', 'y', 'y1', 'y2', 'z', 'zoomandpan']);\n\n  var mathMl$1 = freeze(['accent', 'accentunder', 'align', 'bevelled', 'close', 'columnsalign', 'columnlines', 'columnspan', 'denomalign', 'depth', 'dir', 'display', 'displaystyle', 'encoding', 'fence', 'frame', 'height', 'href', 'id', 'largeop', 'length', 'linethickness', 'lspace', 'lquote', 'mathbackground', 'mathcolor', 'mathsize', 'mathvariant', 'maxsize', 'minsize', 'movablelimits', 'notation', 'numalign', 'open', 'rowalign', 'rowlines', 'rowspacing', 'rowspan', 'rspace', 'rquote', 'scriptlevel', 'scriptminsize', 'scriptsizemultiplier', 'selection', 'separator', 'separators', 'stretchy', 'subscriptshift', 'supscriptshift', 'symmetric', 'voffset', 'width', 'xmlns']);\n\n  var xml = freeze(['xlink:href', 'xml:id', 'xlink:title', 'xml:space', 'xmlns:xlink']);\n\n  // eslint-disable-next-line unicorn/better-regex\n  var MUSTACHE_EXPR = seal(/\\{\\{[\\s\\S]*|[\\s\\S]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\n  var ERB_EXPR = seal(/<%[\\s\\S]*|[\\s\\S]*%>/gm);\n  var DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]/); // eslint-disable-line no-useless-escape\n  var ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\n  var IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n  );\n  var IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\n  var ATTR_WHITESPACE = seal(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g // eslint-disable-line no-control-regex\n  );\n  var DOCTYPE_NAME = seal(/^html$/i);\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n  function _toConsumableArray$1(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n  var getGlobal = function getGlobal() {\n    return typeof window === 'undefined' ? null : window;\n  };\n\n  /**\n   * Creates a no-op policy for internal use only.\n   * Don't export this function outside this module!\n   * @param {?TrustedTypePolicyFactory} trustedTypes The policy factory.\n   * @param {Document} document The document object (to determine policy name suffix)\n   * @return {?TrustedTypePolicy} The policy created (or null, if Trusted Types\n   * are not supported).\n   */\n  var _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, document) {\n    if ((typeof trustedTypes === 'undefined' ? 'undefined' : _typeof(trustedTypes)) !== 'object' || typeof trustedTypes.createPolicy !== 'function') {\n      return null;\n    }\n\n    // Allow the callers to control the unique policy name\n    // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n    // Policy creation with duplicate names throws in Trusted Types.\n    var suffix = null;\n    var ATTR_NAME = 'data-tt-policy-suffix';\n    if (document.currentScript && document.currentScript.hasAttribute(ATTR_NAME)) {\n      suffix = document.currentScript.getAttribute(ATTR_NAME);\n    }\n\n    var policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n\n    try {\n      return trustedTypes.createPolicy(policyName, {\n        createHTML: function createHTML(html$$1) {\n          return html$$1;\n        }\n      });\n    } catch (_) {\n      // Policy creation failed (most likely another DOMPurify script has\n      // already run). Skip creating the policy, as this will only cause errors\n      // if TT are enforced.\n      console.warn('TrustedTypes policy ' + policyName + ' could not be created.');\n      return null;\n    }\n  };\n\n  function createDOMPurify() {\n    var window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();\n\n    var DOMPurify = function DOMPurify(root) {\n      return createDOMPurify(root);\n    };\n\n    /**\n     * Version label, exposed for easier checks\n     * if DOMPurify is up to date or not\n     */\n    DOMPurify.version = '2.3.6';\n\n    /**\n     * Array of elements that DOMPurify removed during sanitation.\n     * Empty if nothing was removed.\n     */\n    DOMPurify.removed = [];\n\n    if (!window || !window.document || window.document.nodeType !== 9) {\n      // Not running in a browser, provide a factory function\n      // so that you can pass your own Window\n      DOMPurify.isSupported = false;\n\n      return DOMPurify;\n    }\n\n    var originalDocument = window.document;\n\n    var document = window.document;\n    var DocumentFragment = window.DocumentFragment,\n        HTMLTemplateElement = window.HTMLTemplateElement,\n        Node = window.Node,\n        Element = window.Element,\n        NodeFilter = window.NodeFilter,\n        _window$NamedNodeMap = window.NamedNodeMap,\n        NamedNodeMap = _window$NamedNodeMap === undefined ? window.NamedNodeMap || window.MozNamedAttrMap : _window$NamedNodeMap,\n        HTMLFormElement = window.HTMLFormElement,\n        DOMParser = window.DOMParser,\n        trustedTypes = window.trustedTypes;\n\n\n    var ElementPrototype = Element.prototype;\n\n    var cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n    var getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n    var getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n    var getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n\n    // As per issue #47, the web-components registry is inherited by a\n    // new document created via createHTMLDocument. As per the spec\n    // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n    // a new empty registry is used when creating a template contents owner\n    // document, so we use that as our parent document to ensure nothing\n    // is inherited.\n    if (typeof HTMLTemplateElement === 'function') {\n      var template = document.createElement('template');\n      if (template.content && template.content.ownerDocument) {\n        document = template.content.ownerDocument;\n      }\n    }\n\n    var trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, originalDocument);\n    var emptyHTML = trustedTypesPolicy ? trustedTypesPolicy.createHTML('') : '';\n\n    var _document = document,\n        implementation = _document.implementation,\n        createNodeIterator = _document.createNodeIterator,\n        createDocumentFragment = _document.createDocumentFragment,\n        getElementsByTagName = _document.getElementsByTagName;\n    var importNode = originalDocument.importNode;\n\n\n    var documentMode = {};\n    try {\n      documentMode = clone(document).documentMode ? document.documentMode : {};\n    } catch (_) {}\n\n    var hooks = {};\n\n    /**\n     * Expose whether this browser supports running the full DOMPurify.\n     */\n    DOMPurify.isSupported = typeof getParentNode === 'function' && implementation && typeof implementation.createHTMLDocument !== 'undefined' && documentMode !== 9;\n\n    var MUSTACHE_EXPR$$1 = MUSTACHE_EXPR,\n        ERB_EXPR$$1 = ERB_EXPR,\n        DATA_ATTR$$1 = DATA_ATTR,\n        ARIA_ATTR$$1 = ARIA_ATTR,\n        IS_SCRIPT_OR_DATA$$1 = IS_SCRIPT_OR_DATA,\n        ATTR_WHITESPACE$$1 = ATTR_WHITESPACE;\n    var IS_ALLOWED_URI$$1 = IS_ALLOWED_URI;\n\n    /**\n     * We consider the elements and attributes below to be safe. Ideally\n     * don't add any new ones but feel free to remove unwanted ones.\n     */\n\n    /* allowed element names */\n\n    var ALLOWED_TAGS = null;\n    var DEFAULT_ALLOWED_TAGS = addToSet({}, [].concat(_toConsumableArray$1(html), _toConsumableArray$1(svg), _toConsumableArray$1(svgFilters), _toConsumableArray$1(mathMl), _toConsumableArray$1(text)));\n\n    /* Allowed attribute names */\n    var ALLOWED_ATTR = null;\n    var DEFAULT_ALLOWED_ATTR = addToSet({}, [].concat(_toConsumableArray$1(html$1), _toConsumableArray$1(svg$1), _toConsumableArray$1(mathMl$1), _toConsumableArray$1(xml)));\n\n    /*\n     * Configure how DOMPUrify should handle custom elements and their attributes as well as customized built-in elements.\n     * @property {RegExp|Function|null} tagNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any custom elements)\n     * @property {RegExp|Function|null} attributeNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any attributes not on the allow list)\n     * @property {boolean} allowCustomizedBuiltInElements allow custom elements derived from built-ins if they pass CUSTOM_ELEMENT_HANDLING.tagNameCheck. Default: `false`.\n     */\n    var CUSTOM_ELEMENT_HANDLING = Object.seal(Object.create(null, {\n      tagNameCheck: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: null\n      },\n      attributeNameCheck: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: null\n      },\n      allowCustomizedBuiltInElements: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: false\n      }\n    }));\n\n    /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n    var FORBID_TAGS = null;\n\n    /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n    var FORBID_ATTR = null;\n\n    /* Decide if ARIA attributes are okay */\n    var ALLOW_ARIA_ATTR = true;\n\n    /* Decide if custom data attributes are okay */\n    var ALLOW_DATA_ATTR = true;\n\n    /* Decide if unknown protocols are okay */\n    var ALLOW_UNKNOWN_PROTOCOLS = false;\n\n    /* Output should be safe for common template engines.\n     * This means, DOMPurify removes data attributes, mustaches and ERB\n     */\n    var SAFE_FOR_TEMPLATES = false;\n\n    /* Decide if document with <html>... should be returned */\n    var WHOLE_DOCUMENT = false;\n\n    /* Track whether config is already set on this instance of DOMPurify. */\n    var SET_CONFIG = false;\n\n    /* Decide if all elements (e.g. style, script) must be children of\n     * document.body. By default, browsers might move them to document.head */\n    var FORCE_BODY = false;\n\n    /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n     * string (or a TrustedHTML object if Trusted Types are supported).\n     * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n     */\n    var RETURN_DOM = false;\n\n    /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n     * string  (or a TrustedHTML object if Trusted Types are supported) */\n    var RETURN_DOM_FRAGMENT = false;\n\n    /* Try to return a Trusted Type object instead of a string, return a string in\n     * case Trusted Types are not supported  */\n    var RETURN_TRUSTED_TYPE = false;\n\n    /* Output should be free from DOM clobbering attacks? */\n    var SANITIZE_DOM = true;\n\n    /* Keep element content when removing element? */\n    var KEEP_CONTENT = true;\n\n    /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n     * of importing it into a new Document and returning a sanitized copy */\n    var IN_PLACE = false;\n\n    /* Allow usage of profiles like html, svg and mathMl */\n    var USE_PROFILES = {};\n\n    /* Tags to ignore content of when KEEP_CONTENT is true */\n    var FORBID_CONTENTS = null;\n    var DEFAULT_FORBID_CONTENTS = addToSet({}, ['annotation-xml', 'audio', 'colgroup', 'desc', 'foreignobject', 'head', 'iframe', 'math', 'mi', 'mn', 'mo', 'ms', 'mtext', 'noembed', 'noframes', 'noscript', 'plaintext', 'script', 'style', 'svg', 'template', 'thead', 'title', 'video', 'xmp']);\n\n    /* Tags that are safe for data: URIs */\n    var DATA_URI_TAGS = null;\n    var DEFAULT_DATA_URI_TAGS = addToSet({}, ['audio', 'video', 'img', 'source', 'image', 'track']);\n\n    /* Attributes safe for values like \"javascript:\" */\n    var URI_SAFE_ATTRIBUTES = null;\n    var DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, ['alt', 'class', 'for', 'id', 'label', 'name', 'pattern', 'placeholder', 'role', 'summary', 'title', 'value', 'style', 'xmlns']);\n\n    var MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n    var SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n    var HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n    /* Document namespace */\n    var NAMESPACE = HTML_NAMESPACE;\n    var IS_EMPTY_INPUT = false;\n\n    /* Parsing of strict XHTML documents */\n    var PARSER_MEDIA_TYPE = void 0;\n    var SUPPORTED_PARSER_MEDIA_TYPES = ['application/xhtml+xml', 'text/html'];\n    var DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n    var transformCaseFunc = void 0;\n\n    /* Keep a reference to config to pass to hooks */\n    var CONFIG = null;\n\n    /* Ideally, do not touch anything below this line */\n    /* ______________________________________________ */\n\n    var formElement = document.createElement('form');\n\n    var isRegexOrFunction = function isRegexOrFunction(testValue) {\n      return testValue instanceof RegExp || testValue instanceof Function;\n    };\n\n    /**\n     * _parseConfig\n     *\n     * @param  {Object} cfg optional config literal\n     */\n    // eslint-disable-next-line complexity\n    var _parseConfig = function _parseConfig(cfg) {\n      if (CONFIG && CONFIG === cfg) {\n        return;\n      }\n\n      /* Shield configuration object from tampering */\n      if (!cfg || (typeof cfg === 'undefined' ? 'undefined' : _typeof(cfg)) !== 'object') {\n        cfg = {};\n      }\n\n      /* Shield configuration object from prototype pollution */\n      cfg = clone(cfg);\n\n      /* Set configuration parameters */\n      ALLOWED_TAGS = 'ALLOWED_TAGS' in cfg ? addToSet({}, cfg.ALLOWED_TAGS) : DEFAULT_ALLOWED_TAGS;\n      ALLOWED_ATTR = 'ALLOWED_ATTR' in cfg ? addToSet({}, cfg.ALLOWED_ATTR) : DEFAULT_ALLOWED_ATTR;\n      URI_SAFE_ATTRIBUTES = 'ADD_URI_SAFE_ATTR' in cfg ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES), cfg.ADD_URI_SAFE_ATTR) : DEFAULT_URI_SAFE_ATTRIBUTES;\n      DATA_URI_TAGS = 'ADD_DATA_URI_TAGS' in cfg ? addToSet(clone(DEFAULT_DATA_URI_TAGS), cfg.ADD_DATA_URI_TAGS) : DEFAULT_DATA_URI_TAGS;\n      FORBID_CONTENTS = 'FORBID_CONTENTS' in cfg ? addToSet({}, cfg.FORBID_CONTENTS) : DEFAULT_FORBID_CONTENTS;\n      FORBID_TAGS = 'FORBID_TAGS' in cfg ? addToSet({}, cfg.FORBID_TAGS) : {};\n      FORBID_ATTR = 'FORBID_ATTR' in cfg ? addToSet({}, cfg.FORBID_ATTR) : {};\n      USE_PROFILES = 'USE_PROFILES' in cfg ? cfg.USE_PROFILES : false;\n      ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n      ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n      ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n      SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n      WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n      RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n      RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n      RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false\n      FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n      SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n      KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n      IN_PLACE = cfg.IN_PLACE || false; // Default false\n      IS_ALLOWED_URI$$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI$$1;\n      NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n      if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)) {\n        CUSTOM_ELEMENT_HANDLING.tagNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n      }\n\n      if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)) {\n        CUSTOM_ELEMENT_HANDLING.attributeNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n      }\n\n      if (cfg.CUSTOM_ELEMENT_HANDLING && typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements === 'boolean') {\n        CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements = cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n      }\n\n      PARSER_MEDIA_TYPE =\n      // eslint-disable-next-line unicorn/prefer-includes\n      SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1 ? PARSER_MEDIA_TYPE = DEFAULT_PARSER_MEDIA_TYPE : PARSER_MEDIA_TYPE = cfg.PARSER_MEDIA_TYPE;\n\n      // HTML tags and attributes are not case-sensitive, converting to lowercase. Keeping XHTML as is.\n      transformCaseFunc = PARSER_MEDIA_TYPE === 'application/xhtml+xml' ? function (x) {\n        return x;\n      } : stringToLowerCase;\n\n      if (SAFE_FOR_TEMPLATES) {\n        ALLOW_DATA_ATTR = false;\n      }\n\n      if (RETURN_DOM_FRAGMENT) {\n        RETURN_DOM = true;\n      }\n\n      /* Parse profile info */\n      if (USE_PROFILES) {\n        ALLOWED_TAGS = addToSet({}, [].concat(_toConsumableArray$1(text)));\n        ALLOWED_ATTR = [];\n        if (USE_PROFILES.html === true) {\n          addToSet(ALLOWED_TAGS, html);\n          addToSet(ALLOWED_ATTR, html$1);\n        }\n\n        if (USE_PROFILES.svg === true) {\n          addToSet(ALLOWED_TAGS, svg);\n          addToSet(ALLOWED_ATTR, svg$1);\n          addToSet(ALLOWED_ATTR, xml);\n        }\n\n        if (USE_PROFILES.svgFilters === true) {\n          addToSet(ALLOWED_TAGS, svgFilters);\n          addToSet(ALLOWED_ATTR, svg$1);\n          addToSet(ALLOWED_ATTR, xml);\n        }\n\n        if (USE_PROFILES.mathMl === true) {\n          addToSet(ALLOWED_TAGS, mathMl);\n          addToSet(ALLOWED_ATTR, mathMl$1);\n          addToSet(ALLOWED_ATTR, xml);\n        }\n      }\n\n      /* Merge configuration parameters */\n      if (cfg.ADD_TAGS) {\n        if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n          ALLOWED_TAGS = clone(ALLOWED_TAGS);\n        }\n\n        addToSet(ALLOWED_TAGS, cfg.ADD_TAGS);\n      }\n\n      if (cfg.ADD_ATTR) {\n        if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n          ALLOWED_ATTR = clone(ALLOWED_ATTR);\n        }\n\n        addToSet(ALLOWED_ATTR, cfg.ADD_ATTR);\n      }\n\n      if (cfg.ADD_URI_SAFE_ATTR) {\n        addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR);\n      }\n\n      if (cfg.FORBID_CONTENTS) {\n        if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n          FORBID_CONTENTS = clone(FORBID_CONTENTS);\n        }\n\n        addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS);\n      }\n\n      /* Add #text in case KEEP_CONTENT is set to true */\n      if (KEEP_CONTENT) {\n        ALLOWED_TAGS['#text'] = true;\n      }\n\n      /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n      if (WHOLE_DOCUMENT) {\n        addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n      }\n\n      /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */\n      if (ALLOWED_TAGS.table) {\n        addToSet(ALLOWED_TAGS, ['tbody']);\n        delete FORBID_TAGS.tbody;\n      }\n\n      // Prevent further manipulation of configuration.\n      // Not available in IE8, Safari 5, etc.\n      if (freeze) {\n        freeze(cfg);\n      }\n\n      CONFIG = cfg;\n    };\n\n    var MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, ['mi', 'mo', 'mn', 'ms', 'mtext']);\n\n    var HTML_INTEGRATION_POINTS = addToSet({}, ['foreignobject', 'desc', 'title', 'annotation-xml']);\n\n    /* Keep track of all possible SVG and MathML tags\n     * so that we can perform the namespace checks\n     * correctly. */\n    var ALL_SVG_TAGS = addToSet({}, svg);\n    addToSet(ALL_SVG_TAGS, svgFilters);\n    addToSet(ALL_SVG_TAGS, svgDisallowed);\n\n    var ALL_MATHML_TAGS = addToSet({}, mathMl);\n    addToSet(ALL_MATHML_TAGS, mathMlDisallowed);\n\n    /**\n     *\n     *\n     * @param  {Element} element a DOM element whose namespace is being checked\n     * @returns {boolean} Return false if the element has a\n     *  namespace that a spec-compliant parser would never\n     *  return. Return true otherwise.\n     */\n    var _checkValidNamespace = function _checkValidNamespace(element) {\n      var parent = getParentNode(element);\n\n      // In JSDOM, if we're inside shadow DOM, then parentNode\n      // can be null. We just simulate parent in this case.\n      if (!parent || !parent.tagName) {\n        parent = {\n          namespaceURI: HTML_NAMESPACE,\n          tagName: 'template'\n        };\n      }\n\n      var tagName = stringToLowerCase(element.tagName);\n      var parentTagName = stringToLowerCase(parent.tagName);\n\n      if (element.namespaceURI === SVG_NAMESPACE) {\n        // The only way to switch from HTML namespace to SVG\n        // is via <svg>. If it happens via any other tag, then\n        // it should be killed.\n        if (parent.namespaceURI === HTML_NAMESPACE) {\n          return tagName === 'svg';\n        }\n\n        // The only way to switch from MathML to SVG is via\n        // svg if parent is either <annotation-xml> or MathML\n        // text integration points.\n        if (parent.namespaceURI === MATHML_NAMESPACE) {\n          return tagName === 'svg' && (parentTagName === 'annotation-xml' || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);\n        }\n\n        // We only allow elements that are defined in SVG\n        // spec. All others are disallowed in SVG namespace.\n        return Boolean(ALL_SVG_TAGS[tagName]);\n      }\n\n      if (element.namespaceURI === MATHML_NAMESPACE) {\n        // The only way to switch from HTML namespace to MathML\n        // is via <math>. If it happens via any other tag, then\n        // it should be killed.\n        if (parent.namespaceURI === HTML_NAMESPACE) {\n          return tagName === 'math';\n        }\n\n        // The only way to switch from SVG to MathML is via\n        // <math> and HTML integration points\n        if (parent.namespaceURI === SVG_NAMESPACE) {\n          return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n        }\n\n        // We only allow elements that are defined in MathML\n        // spec. All others are disallowed in MathML namespace.\n        return Boolean(ALL_MATHML_TAGS[tagName]);\n      }\n\n      if (element.namespaceURI === HTML_NAMESPACE) {\n        // The only way to switch from SVG to HTML is via\n        // HTML integration points, and from MathML to HTML\n        // is via MathML text integration points\n        if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {\n          return false;\n        }\n\n        if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {\n          return false;\n        }\n\n        // Certain elements are allowed in both SVG and HTML\n        // namespace. We need to specify them explicitly\n        // so that they don't get erronously deleted from\n        // HTML namespace.\n        var commonSvgAndHTMLElements = addToSet({}, ['title', 'style', 'font', 'a', 'script']);\n\n        // We disallow tags that are specific for MathML\n        // or SVG and should never appear in HTML namespace\n        return !ALL_MATHML_TAGS[tagName] && (commonSvgAndHTMLElements[tagName] || !ALL_SVG_TAGS[tagName]);\n      }\n\n      // The code should never reach this place (this means\n      // that the element somehow got namespace that is not\n      // HTML, SVG or MathML). Return false just in case.\n      return false;\n    };\n\n    /**\n     * _forceRemove\n     *\n     * @param  {Node} node a DOM node\n     */\n    var _forceRemove = function _forceRemove(node) {\n      arrayPush(DOMPurify.removed, { element: node });\n      try {\n        // eslint-disable-next-line unicorn/prefer-dom-node-remove\n        node.parentNode.removeChild(node);\n      } catch (_) {\n        try {\n          node.outerHTML = emptyHTML;\n        } catch (_) {\n          node.remove();\n        }\n      }\n    };\n\n    /**\n     * _removeAttribute\n     *\n     * @param  {String} name an Attribute name\n     * @param  {Node} node a DOM node\n     */\n    var _removeAttribute = function _removeAttribute(name, node) {\n      try {\n        arrayPush(DOMPurify.removed, {\n          attribute: node.getAttributeNode(name),\n          from: node\n        });\n      } catch (_) {\n        arrayPush(DOMPurify.removed, {\n          attribute: null,\n          from: node\n        });\n      }\n\n      node.removeAttribute(name);\n\n      // We void attribute values for unremovable \"is\"\" attributes\n      if (name === 'is' && !ALLOWED_ATTR[name]) {\n        if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n          try {\n            _forceRemove(node);\n          } catch (_) {}\n        } else {\n          try {\n            node.setAttribute(name, '');\n          } catch (_) {}\n        }\n      }\n    };\n\n    /**\n     * _initDocument\n     *\n     * @param  {String} dirty a string of dirty markup\n     * @return {Document} a DOM, filled with the dirty markup\n     */\n    var _initDocument = function _initDocument(dirty) {\n      /* Create a HTML document */\n      var doc = void 0;\n      var leadingWhitespace = void 0;\n\n      if (FORCE_BODY) {\n        dirty = '<remove></remove>' + dirty;\n      } else {\n        /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n        var matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n        leadingWhitespace = matches && matches[0];\n      }\n\n      if (PARSER_MEDIA_TYPE === 'application/xhtml+xml') {\n        // Root of XHTML doc must contain xmlns declaration (see https://www.w3.org/TR/xhtml1/normative.html#strict)\n        dirty = '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' + dirty + '</body></html>';\n      }\n\n      var dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n      /*\n       * Use the DOMParser API by default, fallback later if needs be\n       * DOMParser not work for svg when has multiple root element.\n       */\n      if (NAMESPACE === HTML_NAMESPACE) {\n        try {\n          doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n        } catch (_) {}\n      }\n\n      /* Use createHTMLDocument in case DOMParser is not available */\n      if (!doc || !doc.documentElement) {\n        doc = implementation.createDocument(NAMESPACE, 'template', null);\n        try {\n          doc.documentElement.innerHTML = IS_EMPTY_INPUT ? '' : dirtyPayload;\n        } catch (_) {\n          // Syntax error if dirtyPayload is invalid xml\n        }\n      }\n\n      var body = doc.body || doc.documentElement;\n\n      if (dirty && leadingWhitespace) {\n        body.insertBefore(document.createTextNode(leadingWhitespace), body.childNodes[0] || null);\n      }\n\n      /* Work on whole document or just its body */\n      if (NAMESPACE === HTML_NAMESPACE) {\n        return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n      }\n\n      return WHOLE_DOCUMENT ? doc.documentElement : body;\n    };\n\n    /**\n     * _createIterator\n     *\n     * @param  {Document} root document/fragment to create iterator for\n     * @return {Iterator} iterator instance\n     */\n    var _createIterator = function _createIterator(root) {\n      return createNodeIterator.call(root.ownerDocument || root, root,\n      // eslint-disable-next-line no-bitwise\n      NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT, null, false);\n    };\n\n    /**\n     * _isClobbered\n     *\n     * @param  {Node} elm element to check for clobbering attacks\n     * @return {Boolean} true if clobbered, false if safe\n     */\n    var _isClobbered = function _isClobbered(elm) {\n      return elm instanceof HTMLFormElement && (typeof elm.nodeName !== 'string' || typeof elm.textContent !== 'string' || typeof elm.removeChild !== 'function' || !(elm.attributes instanceof NamedNodeMap) || typeof elm.removeAttribute !== 'function' || typeof elm.setAttribute !== 'function' || typeof elm.namespaceURI !== 'string' || typeof elm.insertBefore !== 'function');\n    };\n\n    /**\n     * _isNode\n     *\n     * @param  {Node} obj object to check whether it's a DOM node\n     * @return {Boolean} true is object is a DOM node\n     */\n    var _isNode = function _isNode(object) {\n      return (typeof Node === 'undefined' ? 'undefined' : _typeof(Node)) === 'object' ? object instanceof Node : object && (typeof object === 'undefined' ? 'undefined' : _typeof(object)) === 'object' && typeof object.nodeType === 'number' && typeof object.nodeName === 'string';\n    };\n\n    /**\n     * _executeHook\n     * Execute user configurable hooks\n     *\n     * @param  {String} entryPoint  Name of the hook's entry point\n     * @param  {Node} currentNode node to work on with the hook\n     * @param  {Object} data additional hook parameters\n     */\n    var _executeHook = function _executeHook(entryPoint, currentNode, data) {\n      if (!hooks[entryPoint]) {\n        return;\n      }\n\n      arrayForEach(hooks[entryPoint], function (hook) {\n        hook.call(DOMPurify, currentNode, data, CONFIG);\n      });\n    };\n\n    /**\n     * _sanitizeElements\n     *\n     * @protect nodeName\n     * @protect textContent\n     * @protect removeChild\n     *\n     * @param   {Node} currentNode to check for permission to exist\n     * @return  {Boolean} true if node was killed, false if left alive\n     */\n    var _sanitizeElements = function _sanitizeElements(currentNode) {\n      var content = void 0;\n\n      /* Execute a hook if present */\n      _executeHook('beforeSanitizeElements', currentNode, null);\n\n      /* Check if element is clobbered or can clobber */\n      if (_isClobbered(currentNode)) {\n        _forceRemove(currentNode);\n        return true;\n      }\n\n      /* Check if tagname contains Unicode */\n      if (stringMatch(currentNode.nodeName, /[\\u0080-\\uFFFF]/)) {\n        _forceRemove(currentNode);\n        return true;\n      }\n\n      /* Now let's check the element's type and name */\n      var tagName = transformCaseFunc(currentNode.nodeName);\n\n      /* Execute a hook if present */\n      _executeHook('uponSanitizeElement', currentNode, {\n        tagName: tagName,\n        allowedTags: ALLOWED_TAGS\n      });\n\n      /* Detect mXSS attempts abusing namespace confusion */\n      if (!_isNode(currentNode.firstElementChild) && (!_isNode(currentNode.content) || !_isNode(currentNode.content.firstElementChild)) && regExpTest(/<[/\\w]/g, currentNode.innerHTML) && regExpTest(/<[/\\w]/g, currentNode.textContent)) {\n        _forceRemove(currentNode);\n        return true;\n      }\n\n      /* Mitigate a problem with templates inside select */\n      if (tagName === 'select' && regExpTest(/<template/i, currentNode.innerHTML)) {\n        _forceRemove(currentNode);\n        return true;\n      }\n\n      /* Remove element if anything forbids its presence */\n      if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n        /* Check if we have a custom element to handle */\n        if (!FORBID_TAGS[tagName] && _basicCustomElementTest(tagName)) {\n          if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName)) return false;\n          if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName)) return false;\n        }\n\n        /* Keep content except for bad-listed elements */\n        if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n          var parentNode = getParentNode(currentNode) || currentNode.parentNode;\n          var childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n\n          if (childNodes && parentNode) {\n            var childCount = childNodes.length;\n\n            for (var i = childCount - 1; i >= 0; --i) {\n              parentNode.insertBefore(cloneNode(childNodes[i], true), getNextSibling(currentNode));\n            }\n          }\n        }\n\n        _forceRemove(currentNode);\n        return true;\n      }\n\n      /* Check whether element has a valid namespace */\n      if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n        _forceRemove(currentNode);\n        return true;\n      }\n\n      if ((tagName === 'noscript' || tagName === 'noembed') && regExpTest(/<\\/no(script|embed)/i, currentNode.innerHTML)) {\n        _forceRemove(currentNode);\n        return true;\n      }\n\n      /* Sanitize element content to be template-safe */\n      if (SAFE_FOR_TEMPLATES && currentNode.nodeType === 3) {\n        /* Get the element's text content */\n        content = currentNode.textContent;\n        content = stringReplace(content, MUSTACHE_EXPR$$1, ' ');\n        content = stringReplace(content, ERB_EXPR$$1, ' ');\n        if (currentNode.textContent !== content) {\n          arrayPush(DOMPurify.removed, { element: currentNode.cloneNode() });\n          currentNode.textContent = content;\n        }\n      }\n\n      /* Execute a hook if present */\n      _executeHook('afterSanitizeElements', currentNode, null);\n\n      return false;\n    };\n\n    /**\n     * _isValidAttribute\n     *\n     * @param  {string} lcTag Lowercase tag name of containing element.\n     * @param  {string} lcName Lowercase attribute name.\n     * @param  {string} value Attribute value.\n     * @return {Boolean} Returns true if `value` is valid, otherwise false.\n     */\n    // eslint-disable-next-line complexity\n    var _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {\n      /* Make sure attribute cannot clobber */\n      if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {\n        return false;\n      }\n\n      /* Allow valid data-* attributes: At least one character after \"-\"\n          (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n          XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n          We don't need to check the value; it's always URI safe. */\n      if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR$$1, lcName)) ; else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR$$1, lcName)) ; else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n        if (\n        // First condition does a very basic check if a) it's basically a valid custom element tagname AND\n        // b) if the tagName passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n        // and c) if the attribute name passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.attributeNameCheck\n        _basicCustomElementTest(lcTag) && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag)) && (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName) || CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName)) ||\n        // Alternative, second condition checks if it's an `is`-attribute, AND\n        // the value passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n        lcName === 'is' && CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(value))) ; else {\n          return false;\n        }\n        /* Check value is safe. First, is attr inert? If so, is safe */\n      } else if (URI_SAFE_ATTRIBUTES[lcName]) ; else if (regExpTest(IS_ALLOWED_URI$$1, stringReplace(value, ATTR_WHITESPACE$$1, ''))) ; else if ((lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') && lcTag !== 'script' && stringIndexOf(value, 'data:') === 0 && DATA_URI_TAGS[lcTag]) ; else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA$$1, stringReplace(value, ATTR_WHITESPACE$$1, ''))) ; else if (!value) ; else {\n        return false;\n      }\n\n      return true;\n    };\n\n    /**\n     * _basicCustomElementCheck\n     * checks if at least one dash is included in tagName, and it's not the first char\n     * for more sophisticated checking see https://github.com/sindresorhus/validate-element-name\n     * @param {string} tagName name of the tag of the node to sanitize\n     */\n    var _basicCustomElementTest = function _basicCustomElementTest(tagName) {\n      return tagName.indexOf('-') > 0;\n    };\n\n    /**\n     * _sanitizeAttributes\n     *\n     * @protect attributes\n     * @protect nodeName\n     * @protect removeAttribute\n     * @protect setAttribute\n     *\n     * @param  {Node} currentNode to sanitize\n     */\n    var _sanitizeAttributes = function _sanitizeAttributes(currentNode) {\n      var attr = void 0;\n      var value = void 0;\n      var lcName = void 0;\n      var l = void 0;\n      /* Execute a hook if present */\n      _executeHook('beforeSanitizeAttributes', currentNode, null);\n\n      var attributes = currentNode.attributes;\n\n      /* Check if we have attributes; if not we might have a text node */\n\n      if (!attributes) {\n        return;\n      }\n\n      var hookEvent = {\n        attrName: '',\n        attrValue: '',\n        keepAttr: true,\n        allowedAttributes: ALLOWED_ATTR\n      };\n      l = attributes.length;\n\n      /* Go backwards over all attributes; safely remove bad ones */\n      while (l--) {\n        attr = attributes[l];\n        var _attr = attr,\n            name = _attr.name,\n            namespaceURI = _attr.namespaceURI;\n\n        value = stringTrim(attr.value);\n        lcName = transformCaseFunc(name);\n\n        /* Execute a hook if present */\n        hookEvent.attrName = lcName;\n        hookEvent.attrValue = value;\n        hookEvent.keepAttr = true;\n        hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set\n        _executeHook('uponSanitizeAttribute', currentNode, hookEvent);\n        value = hookEvent.attrValue;\n        /* Did the hooks approve of the attribute? */\n        if (hookEvent.forceKeepAttr) {\n          continue;\n        }\n\n        /* Remove attribute */\n        _removeAttribute(name, currentNode);\n\n        /* Did the hooks approve of the attribute? */\n        if (!hookEvent.keepAttr) {\n          continue;\n        }\n\n        /* Work around a security issue in jQuery 3.0 */\n        if (regExpTest(/\\/>/i, value)) {\n          _removeAttribute(name, currentNode);\n          continue;\n        }\n\n        /* Sanitize attribute content to be template-safe */\n        if (SAFE_FOR_TEMPLATES) {\n          value = stringReplace(value, MUSTACHE_EXPR$$1, ' ');\n          value = stringReplace(value, ERB_EXPR$$1, ' ');\n        }\n\n        /* Is `value` valid for this attribute? */\n        var lcTag = transformCaseFunc(currentNode.nodeName);\n        if (!_isValidAttribute(lcTag, lcName, value)) {\n          continue;\n        }\n\n        /* Handle invalid data-* attribute set by try-catching it */\n        try {\n          if (namespaceURI) {\n            currentNode.setAttributeNS(namespaceURI, name, value);\n          } else {\n            /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n            currentNode.setAttribute(name, value);\n          }\n\n          arrayPop(DOMPurify.removed);\n        } catch (_) {}\n      }\n\n      /* Execute a hook if present */\n      _executeHook('afterSanitizeAttributes', currentNode, null);\n    };\n\n    /**\n     * _sanitizeShadowDOM\n     *\n     * @param  {DocumentFragment} fragment to iterate over recursively\n     */\n    var _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {\n      var shadowNode = void 0;\n      var shadowIterator = _createIterator(fragment);\n\n      /* Execute a hook if present */\n      _executeHook('beforeSanitizeShadowDOM', fragment, null);\n\n      while (shadowNode = shadowIterator.nextNode()) {\n        /* Execute a hook if present */\n        _executeHook('uponSanitizeShadowNode', shadowNode, null);\n\n        /* Sanitize tags and elements */\n        if (_sanitizeElements(shadowNode)) {\n          continue;\n        }\n\n        /* Deep shadow DOM detected */\n        if (shadowNode.content instanceof DocumentFragment) {\n          _sanitizeShadowDOM(shadowNode.content);\n        }\n\n        /* Check attributes, sanitize if necessary */\n        _sanitizeAttributes(shadowNode);\n      }\n\n      /* Execute a hook if present */\n      _executeHook('afterSanitizeShadowDOM', fragment, null);\n    };\n\n    /**\n     * Sanitize\n     * Public method providing core sanitation functionality\n     *\n     * @param {String|Node} dirty string or DOM node\n     * @param {Object} configuration object\n     */\n    // eslint-disable-next-line complexity\n    DOMPurify.sanitize = function (dirty, cfg) {\n      var body = void 0;\n      var importedNode = void 0;\n      var currentNode = void 0;\n      var oldNode = void 0;\n      var returnNode = void 0;\n      /* Make sure we have a string to sanitize.\n        DO NOT return early, as this will return the wrong type if\n        the user has requested a DOM object rather than a string */\n      IS_EMPTY_INPUT = !dirty;\n      if (IS_EMPTY_INPUT) {\n        dirty = '<!-->';\n      }\n\n      /* Stringify, in case dirty is an object */\n      if (typeof dirty !== 'string' && !_isNode(dirty)) {\n        // eslint-disable-next-line no-negated-condition\n        if (typeof dirty.toString !== 'function') {\n          throw typeErrorCreate('toString is not a function');\n        } else {\n          dirty = dirty.toString();\n          if (typeof dirty !== 'string') {\n            throw typeErrorCreate('dirty is not a string, aborting');\n          }\n        }\n      }\n\n      /* Check we can run. Otherwise fall back or ignore */\n      if (!DOMPurify.isSupported) {\n        if (_typeof(window.toStaticHTML) === 'object' || typeof window.toStaticHTML === 'function') {\n          if (typeof dirty === 'string') {\n            return window.toStaticHTML(dirty);\n          }\n\n          if (_isNode(dirty)) {\n            return window.toStaticHTML(dirty.outerHTML);\n          }\n        }\n\n        return dirty;\n      }\n\n      /* Assign config vars */\n      if (!SET_CONFIG) {\n        _parseConfig(cfg);\n      }\n\n      /* Clean up removed elements */\n      DOMPurify.removed = [];\n\n      /* Check if dirty is correctly typed for IN_PLACE */\n      if (typeof dirty === 'string') {\n        IN_PLACE = false;\n      }\n\n      if (IN_PLACE) {\n        /* Do some early pre-sanitization to avoid unsafe root nodes */\n        if (dirty.nodeName) {\n          var tagName = transformCaseFunc(dirty.nodeName);\n          if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n            throw typeErrorCreate('root node is forbidden and cannot be sanitized in-place');\n          }\n        }\n      } else if (dirty instanceof Node) {\n        /* If dirty is a DOM element, append to an empty document to avoid\n           elements being stripped by the parser */\n        body = _initDocument('<!---->');\n        importedNode = body.ownerDocument.importNode(dirty, true);\n        if (importedNode.nodeType === 1 && importedNode.nodeName === 'BODY') {\n          /* Node is already a body, use as is */\n          body = importedNode;\n        } else if (importedNode.nodeName === 'HTML') {\n          body = importedNode;\n        } else {\n          // eslint-disable-next-line unicorn/prefer-dom-node-append\n          body.appendChild(importedNode);\n        }\n      } else {\n        /* Exit directly if we have nothing to do */\n        if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT &&\n        // eslint-disable-next-line unicorn/prefer-includes\n        dirty.indexOf('<') === -1) {\n          return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;\n        }\n\n        /* Initialize the document to work on */\n        body = _initDocument(dirty);\n\n        /* Check we have a DOM node from the data */\n        if (!body) {\n          return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';\n        }\n      }\n\n      /* Remove first element node (ours) if FORCE_BODY is set */\n      if (body && FORCE_BODY) {\n        _forceRemove(body.firstChild);\n      }\n\n      /* Get node iterator */\n      var nodeIterator = _createIterator(IN_PLACE ? dirty : body);\n\n      /* Now start iterating over the created document */\n      while (currentNode = nodeIterator.nextNode()) {\n        /* Fix IE's strange behavior with manipulated textNodes #89 */\n        if (currentNode.nodeType === 3 && currentNode === oldNode) {\n          continue;\n        }\n\n        /* Sanitize tags and elements */\n        if (_sanitizeElements(currentNode)) {\n          continue;\n        }\n\n        /* Shadow DOM detected, sanitize it */\n        if (currentNode.content instanceof DocumentFragment) {\n          _sanitizeShadowDOM(currentNode.content);\n        }\n\n        /* Check attributes, sanitize if necessary */\n        _sanitizeAttributes(currentNode);\n\n        oldNode = currentNode;\n      }\n\n      oldNode = null;\n\n      /* If we sanitized `dirty` in-place, return it. */\n      if (IN_PLACE) {\n        return dirty;\n      }\n\n      /* Return sanitized string or DOM */\n      if (RETURN_DOM) {\n        if (RETURN_DOM_FRAGMENT) {\n          returnNode = createDocumentFragment.call(body.ownerDocument);\n\n          while (body.firstChild) {\n            // eslint-disable-next-line unicorn/prefer-dom-node-append\n            returnNode.appendChild(body.firstChild);\n          }\n        } else {\n          returnNode = body;\n        }\n\n        if (ALLOWED_ATTR.shadowroot) {\n          /*\n            AdoptNode() is not used because internal state is not reset\n            (e.g. the past names map of a HTMLFormElement), this is safe\n            in theory but we would rather not risk another attack vector.\n            The state that is cloned by importNode() is explicitly defined\n            by the specs.\n          */\n          returnNode = importNode.call(originalDocument, returnNode, true);\n        }\n\n        return returnNode;\n      }\n\n      var serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n\n      /* Serialize doctype if allowed */\n      if (WHOLE_DOCUMENT && ALLOWED_TAGS['!doctype'] && body.ownerDocument && body.ownerDocument.doctype && body.ownerDocument.doctype.name && regExpTest(DOCTYPE_NAME, body.ownerDocument.doctype.name)) {\n        serializedHTML = '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\\n' + serializedHTML;\n      }\n\n      /* Sanitize final string template-safe */\n      if (SAFE_FOR_TEMPLATES) {\n        serializedHTML = stringReplace(serializedHTML, MUSTACHE_EXPR$$1, ' ');\n        serializedHTML = stringReplace(serializedHTML, ERB_EXPR$$1, ' ');\n      }\n\n      return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;\n    };\n\n    /**\n     * Public method to set the configuration once\n     * setConfig\n     *\n     * @param {Object} cfg configuration object\n     */\n    DOMPurify.setConfig = function (cfg) {\n      _parseConfig(cfg);\n      SET_CONFIG = true;\n    };\n\n    /**\n     * Public method to remove the configuration\n     * clearConfig\n     *\n     */\n    DOMPurify.clearConfig = function () {\n      CONFIG = null;\n      SET_CONFIG = false;\n    };\n\n    /**\n     * Public method to check if an attribute value is valid.\n     * Uses last set config, if any. Otherwise, uses config defaults.\n     * isValidAttribute\n     *\n     * @param  {string} tag Tag name of containing element.\n     * @param  {string} attr Attribute name.\n     * @param  {string} value Attribute value.\n     * @return {Boolean} Returns true if `value` is valid. Otherwise, returns false.\n     */\n    DOMPurify.isValidAttribute = function (tag, attr, value) {\n      /* Initialize shared config vars if necessary. */\n      if (!CONFIG) {\n        _parseConfig({});\n      }\n\n      var lcTag = transformCaseFunc(tag);\n      var lcName = transformCaseFunc(attr);\n      return _isValidAttribute(lcTag, lcName, value);\n    };\n\n    /**\n     * AddHook\n     * Public method to add DOMPurify hooks\n     *\n     * @param {String} entryPoint entry point for the hook to add\n     * @param {Function} hookFunction function to execute\n     */\n    DOMPurify.addHook = function (entryPoint, hookFunction) {\n      if (typeof hookFunction !== 'function') {\n        return;\n      }\n\n      hooks[entryPoint] = hooks[entryPoint] || [];\n      arrayPush(hooks[entryPoint], hookFunction);\n    };\n\n    /**\n     * RemoveHook\n     * Public method to remove a DOMPurify hook at a given entryPoint\n     * (pops it from the stack of hooks if more are present)\n     *\n     * @param {String} entryPoint entry point for the hook to remove\n     */\n    DOMPurify.removeHook = function (entryPoint) {\n      if (hooks[entryPoint]) {\n        arrayPop(hooks[entryPoint]);\n      }\n    };\n\n    /**\n     * RemoveHooks\n     * Public method to remove all DOMPurify hooks at a given entryPoint\n     *\n     * @param  {String} entryPoint entry point for the hooks to remove\n     */\n    DOMPurify.removeHooks = function (entryPoint) {\n      if (hooks[entryPoint]) {\n        hooks[entryPoint] = [];\n      }\n    };\n\n    /**\n     * RemoveAllHooks\n     * Public method to remove all DOMPurify hooks\n     *\n     */\n    DOMPurify.removeAllHooks = function () {\n      hooks = {};\n    };\n\n    return DOMPurify;\n  }\n\n  var purify = createDOMPurify();\n\n  return purify;\n\n}));\n//# sourceMappingURL=purify.js.map\n","\"use strict\";\n\nvar detector = module.exports = {};\n\ndetector.isIE = function(version) {\n    function isAnyIeVersion() {\n        var agent = navigator.userAgent.toLowerCase();\n        return agent.indexOf(\"msie\") !== -1 || agent.indexOf(\"trident\") !== -1 || agent.indexOf(\" edge/\") !== -1;\n    }\n\n    if(!isAnyIeVersion()) {\n        return false;\n    }\n\n    if(!version) {\n        return true;\n    }\n\n    //Shamelessly stolen from https://gist.github.com/padolsey/527683\n    var ieVersion = (function(){\n        var undef,\n            v = 3,\n            div = document.createElement(\"div\"),\n            all = div.getElementsByTagName(\"i\");\n\n        do {\n            div.innerHTML = \"<!--[if gt IE \" + (++v) + \"]><i></i><![endif]-->\";\n        }\n        while (all[0]);\n\n        return v > 4 ? v : undef;\n    }());\n\n    return version === ieVersion;\n};\n\ndetector.isLegacyOpera = function() {\n    return !!window.opera;\n};\n","\"use strict\";\n\nvar utils = module.exports = {};\n\n/**\n * Loops through the collection and calls the callback for each element. if the callback returns truthy, the loop is broken and returns the same value.\n * @public\n * @param {*} collection The collection to loop through. Needs to have a length property set and have indices set from 0 to length - 1.\n * @param {function} callback The callback to be called for each element. The element will be given as a parameter to the callback. If this callback returns truthy, the loop is broken and the same value is returned.\n * @returns {*} The value that a callback has returned (if truthy). Otherwise nothing.\n */\nutils.forEach = function(collection, callback) {\n    for(var i = 0; i < collection.length; i++) {\n        var result = callback(collection[i]);\n        if(result) {\n            return result;\n        }\n    }\n};\n","/**\n * Resize detection strategy that injects objects to elements in order to detect resize events.\n * Heavily inspired by: http://www.backalleycoder.com/2013/03/18/cross-browser-event-based-element-resize-detection/\n */\n\n\"use strict\";\n\nvar browserDetector = require(\"../browser-detector\");\n\nmodule.exports = function(options) {\n    options             = options || {};\n    var reporter        = options.reporter;\n    var batchProcessor  = options.batchProcessor;\n    var getState        = options.stateHandler.getState;\n\n    if(!reporter) {\n        throw new Error(\"Missing required dependency: reporter.\");\n    }\n\n    /**\n     * Adds a resize event listener to the element.\n     * @public\n     * @param {element} element The element that should have the listener added.\n     * @param {function} listener The listener callback to be called for each resize event of the element. The element will be given as a parameter to the listener callback.\n     */\n    function addListener(element, listener) {\n        function listenerProxy() {\n            listener(element);\n        }\n\n        if(browserDetector.isIE(8)) {\n            //IE 8 does not support object, but supports the resize event directly on elements.\n            getState(element).object = {\n                proxy: listenerProxy\n            };\n            element.attachEvent(\"onresize\", listenerProxy);\n        } else {\n            var object = getObject(element);\n\n            if(!object) {\n                throw new Error(\"Element is not detectable by this strategy.\");\n            }\n\n            object.contentDocument.defaultView.addEventListener(\"resize\", listenerProxy);\n        }\n    }\n\n    function buildCssTextString(rules) {\n        var seperator = options.important ? \" !important; \" : \"; \";\n\n        return (rules.join(seperator) + seperator).trim();\n    }\n\n    /**\n     * Makes an element detectable and ready to be listened for resize events. Will call the callback when the element is ready to be listened for resize changes.\n     * @private\n     * @param {object} options Optional options object.\n     * @param {element} element The element to make detectable\n     * @param {function} callback The callback to be called when the element is ready to be listened for resize changes. Will be called with the element as first parameter.\n     */\n    function makeDetectable(options, element, callback) {\n        if (!callback) {\n            callback = element;\n            element = options;\n            options = null;\n        }\n\n        options = options || {};\n        var debug = options.debug;\n\n        function injectObject(element, callback) {\n            var OBJECT_STYLE = buildCssTextString([\"display: block\", \"position: absolute\", \"top: 0\", \"left: 0\", \"width: 100%\", \"height: 100%\", \"border: none\", \"padding: 0\", \"margin: 0\", \"opacity: 0\", \"z-index: -1000\", \"pointer-events: none\"]);\n\n            //The target element needs to be positioned (everything except static) so the absolute positioned object will be positioned relative to the target element.\n\n            // Position altering may be performed directly or on object load, depending on if style resolution is possible directly or not.\n            var positionCheckPerformed = false;\n\n            // The element may not yet be attached to the DOM, and therefore the style object may be empty in some browsers.\n            // Since the style object is a reference, it will be updated as soon as the element is attached to the DOM.\n            var style = window.getComputedStyle(element);\n            var width = element.offsetWidth;\n            var height = element.offsetHeight;\n\n            getState(element).startSize = {\n                width: width,\n                height: height\n            };\n\n            function mutateDom() {\n                function alterPositionStyles() {\n                    if(style.position === \"static\") {\n                        element.style.setProperty(\"position\", \"relative\", options.important ? \"important\" : \"\");\n\n                        var removeRelativeStyles = function(reporter, element, style, property) {\n                            function getNumericalValue(value) {\n                                return value.replace(/[^-\\d\\.]/g, \"\");\n                            }\n\n                            var value = style[property];\n\n                            if(value !== \"auto\" && getNumericalValue(value) !== \"0\") {\n                                reporter.warn(\"An element that is positioned static has style.\" + property + \"=\" + value + \" which is ignored due to the static positioning. The element will need to be positioned relative, so the style.\" + property + \" will be set to 0. Element: \", element);\n                                element.style.setProperty(property, \"0\", options.important ? \"important\" : \"\");\n                            }\n                        };\n\n                        //Check so that there are no accidental styles that will make the element styled differently now that is is relative.\n                        //If there are any, set them to 0 (this should be okay with the user since the style properties did nothing before [since the element was positioned static] anyway).\n                        removeRelativeStyles(reporter, element, style, \"top\");\n                        removeRelativeStyles(reporter, element, style, \"right\");\n                        removeRelativeStyles(reporter, element, style, \"bottom\");\n                        removeRelativeStyles(reporter, element, style, \"left\");\n                    }\n                }\n\n                function onObjectLoad() {\n                    // The object has been loaded, which means that the element now is guaranteed to be attached to the DOM.\n                    if (!positionCheckPerformed) {\n                        alterPositionStyles();\n                    }\n\n                    /*jshint validthis: true */\n\n                    function getDocument(element, callback) {\n                        //Opera 12 seem to call the object.onload before the actual document has been created.\n                        //So if it is not present, poll it with an timeout until it is present.\n                        //TODO: Could maybe be handled better with object.onreadystatechange or similar.\n                        if(!element.contentDocument) {\n                            var state = getState(element);\n                            if (state.checkForObjectDocumentTimeoutId) {\n                                window.clearTimeout(state.checkForObjectDocumentTimeoutId);\n                            }\n                            state.checkForObjectDocumentTimeoutId = setTimeout(function checkForObjectDocument() {\n                                state.checkForObjectDocumentTimeoutId = 0;\n                                getDocument(element, callback);\n                            }, 100);\n\n                            return;\n                        }\n\n                        callback(element.contentDocument);\n                    }\n\n                    //Mutating the object element here seems to fire another load event.\n                    //Mutating the inner document of the object element is fine though.\n                    var objectElement = this;\n\n                    //Create the style element to be added to the object.\n                    getDocument(objectElement, function onObjectDocumentReady(objectDocument) {\n                        //Notify that the element is ready to be listened to.\n                        callback(element);\n                    });\n                }\n\n                // The element may be detached from the DOM, and some browsers does not support style resolving of detached elements.\n                // The alterPositionStyles needs to be delayed until we know the element has been attached to the DOM (which we are sure of when the onObjectLoad has been fired), if style resolution is not possible.\n                if (style.position !== \"\") {\n                    alterPositionStyles(style);\n                    positionCheckPerformed = true;\n                }\n\n                //Add an object element as a child to the target element that will be listened to for resize events.\n                var object = document.createElement(\"object\");\n                object.style.cssText = OBJECT_STYLE;\n                object.tabIndex = -1;\n                object.type = \"text/html\";\n                object.setAttribute(\"aria-hidden\", \"true\");\n                object.onload = onObjectLoad;\n\n                //Safari: This must occur before adding the object to the DOM.\n                //IE: Does not like that this happens before, even if it is also added after.\n                if(!browserDetector.isIE()) {\n                    object.data = \"about:blank\";\n                }\n\n                if (!getState(element)) {\n                    // The element has been uninstalled before the actual loading happened.\n                    return;\n                }\n\n                element.appendChild(object);\n                getState(element).object = object;\n\n                //IE: This must occur after adding the object to the DOM.\n                if(browserDetector.isIE()) {\n                    object.data = \"about:blank\";\n                }\n            }\n\n            if(batchProcessor) {\n                batchProcessor.add(mutateDom);\n            } else {\n                mutateDom();\n            }\n        }\n\n        if(browserDetector.isIE(8)) {\n            //IE 8 does not support objects properly. Luckily they do support the resize event.\n            //So do not inject the object and notify that the element is already ready to be listened to.\n            //The event handler for the resize event is attached in the utils.addListener instead.\n            callback(element);\n        } else {\n            injectObject(element, callback);\n        }\n    }\n\n    /**\n     * Returns the child object of the target element.\n     * @private\n     * @param {element} element The target element.\n     * @returns The object element of the target.\n     */\n    function getObject(element) {\n        return getState(element).object;\n    }\n\n    function uninstall(element) {\n        if (!getState(element)) {\n            return;\n        }\n\n        var object = getObject(element);\n\n        if (!object) {\n            return;\n        }\n\n        if (browserDetector.isIE(8)) {\n            element.detachEvent(\"onresize\", object.proxy);\n        } else {\n            element.removeChild(object);\n        }\n\n        if (getState(element).checkForObjectDocumentTimeoutId) {\n            window.clearTimeout(getState(element).checkForObjectDocumentTimeoutId);\n        }\n\n        delete getState(element).object;\n    }\n\n    return {\n        makeDetectable: makeDetectable,\n        addListener: addListener,\n        uninstall: uninstall\n    };\n};\n","/**\n * Resize detection strategy that injects divs to elements in order to detect resize events on scroll events.\n * Heavily inspired by: https://github.com/marcj/css-element-queries/blob/master/src/ResizeSensor.js\n */\n\n\"use strict\";\n\nvar forEach = require(\"../collection-utils\").forEach;\n\nmodule.exports = function(options) {\n    options             = options || {};\n    var reporter        = options.reporter;\n    var batchProcessor  = options.batchProcessor;\n    var getState        = options.stateHandler.getState;\n    var hasState        = options.stateHandler.hasState;\n    var idHandler       = options.idHandler;\n\n    if (!batchProcessor) {\n        throw new Error(\"Missing required dependency: batchProcessor\");\n    }\n\n    if (!reporter) {\n        throw new Error(\"Missing required dependency: reporter.\");\n    }\n\n    //TODO: Could this perhaps be done at installation time?\n    var scrollbarSizes = getScrollbarSizes();\n\n    var styleId = \"erd_scroll_detection_scrollbar_style\";\n    var detectionContainerClass = \"erd_scroll_detection_container\";\n\n    function initDocument(targetDocument) {\n        // Inject the scrollbar styling that prevents them from appearing sometimes in Chrome.\n        // The injected container needs to have a class, so that it may be styled with CSS (pseudo elements).\n        injectScrollStyle(targetDocument, styleId, detectionContainerClass);\n    }\n\n    initDocument(window.document);\n\n    function buildCssTextString(rules) {\n        var seperator = options.important ? \" !important; \" : \"; \";\n\n        return (rules.join(seperator) + seperator).trim();\n    }\n\n    function getScrollbarSizes() {\n        var width = 500;\n        var height = 500;\n\n        var child = document.createElement(\"div\");\n        child.style.cssText = buildCssTextString([\"position: absolute\", \"width: \" + width*2 + \"px\", \"height: \" + height*2 + \"px\", \"visibility: hidden\", \"margin: 0\", \"padding: 0\"]);\n\n        var container = document.createElement(\"div\");\n        container.style.cssText = buildCssTextString([\"position: absolute\", \"width: \" + width + \"px\", \"height: \" + height + \"px\", \"overflow: scroll\", \"visibility: none\", \"top: \" + -width*3 + \"px\", \"left: \" + -height*3 + \"px\", \"visibility: hidden\", \"margin: 0\", \"padding: 0\"]);\n\n        container.appendChild(child);\n\n        document.body.insertBefore(container, document.body.firstChild);\n\n        var widthSize = width - container.clientWidth;\n        var heightSize = height - container.clientHeight;\n\n        document.body.removeChild(container);\n\n        return {\n            width: widthSize,\n            height: heightSize\n        };\n    }\n\n    function injectScrollStyle(targetDocument, styleId, containerClass) {\n        function injectStyle(style, method) {\n            method = method || function (element) {\n                targetDocument.head.appendChild(element);\n            };\n\n            var styleElement = targetDocument.createElement(\"style\");\n            styleElement.innerHTML = style;\n            styleElement.id = styleId;\n            method(styleElement);\n            return styleElement;\n        }\n\n        if (!targetDocument.getElementById(styleId)) {\n            var containerAnimationClass = containerClass + \"_animation\";\n            var containerAnimationActiveClass = containerClass + \"_animation_active\";\n            var style = \"/* Created by the element-resize-detector library. */\\n\";\n            style += \".\" + containerClass + \" > div::-webkit-scrollbar { \" + buildCssTextString([\"display: none\"]) + \" }\\n\\n\";\n            style += \".\" + containerAnimationActiveClass + \" { \" + buildCssTextString([\"-webkit-animation-duration: 0.1s\", \"animation-duration: 0.1s\", \"-webkit-animation-name: \" + containerAnimationClass, \"animation-name: \" + containerAnimationClass]) + \" }\\n\";\n            style += \"@-webkit-keyframes \" + containerAnimationClass +  \" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }\\n\";\n            style += \"@keyframes \" + containerAnimationClass +          \" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }\";\n            injectStyle(style);\n        }\n    }\n\n    function addAnimationClass(element) {\n        element.className += \" \" + detectionContainerClass + \"_animation_active\";\n    }\n\n    function addEvent(el, name, cb) {\n        if (el.addEventListener) {\n            el.addEventListener(name, cb);\n        } else if(el.attachEvent) {\n            el.attachEvent(\"on\" + name, cb);\n        } else {\n            return reporter.error(\"[scroll] Don't know how to add event listeners.\");\n        }\n    }\n\n    function removeEvent(el, name, cb) {\n        if (el.removeEventListener) {\n            el.removeEventListener(name, cb);\n        } else if(el.detachEvent) {\n            el.detachEvent(\"on\" + name, cb);\n        } else {\n            return reporter.error(\"[scroll] Don't know how to remove event listeners.\");\n        }\n    }\n\n    function getExpandElement(element) {\n        return getState(element).container.childNodes[0].childNodes[0].childNodes[0];\n    }\n\n    function getShrinkElement(element) {\n        return getState(element).container.childNodes[0].childNodes[0].childNodes[1];\n    }\n\n    /**\n     * Adds a resize event listener to the element.\n     * @public\n     * @param {element} element The element that should have the listener added.\n     * @param {function} listener The listener callback to be called for each resize event of the element. The element will be given as a parameter to the listener callback.\n     */\n    function addListener(element, listener) {\n        var listeners = getState(element).listeners;\n\n        if (!listeners.push) {\n            throw new Error(\"Cannot add listener to an element that is not detectable.\");\n        }\n\n        getState(element).listeners.push(listener);\n    }\n\n    /**\n     * Makes an element detectable and ready to be listened for resize events. Will call the callback when the element is ready to be listened for resize changes.\n     * @private\n     * @param {object} options Optional options object.\n     * @param {element} element The element to make detectable\n     * @param {function} callback The callback to be called when the element is ready to be listened for resize changes. Will be called with the element as first parameter.\n     */\n    function makeDetectable(options, element, callback) {\n        if (!callback) {\n            callback = element;\n            element = options;\n            options = null;\n        }\n\n        options = options || {};\n\n        function debug() {\n            if (options.debug) {\n                var args = Array.prototype.slice.call(arguments);\n                args.unshift(idHandler.get(element), \"Scroll: \");\n                if (reporter.log.apply) {\n                    reporter.log.apply(null, args);\n                } else {\n                    for (var i = 0; i < args.length; i++) {\n                        reporter.log(args[i]);\n                    }\n                }\n            }\n        }\n\n        function isDetached(element) {\n            function isInDocument(element) {\n                var isInShadowRoot = element.getRootNode && element.getRootNode().contains(element);\n                return element === element.ownerDocument.body || element.ownerDocument.body.contains(element) || isInShadowRoot;\n            }\n\n            if (!isInDocument(element)) {\n                return true;\n            }\n\n            // FireFox returns null style in hidden iframes. See https://github.com/wnr/element-resize-detector/issues/68 and https://bugzilla.mozilla.org/show_bug.cgi?id=795520\n            if (window.getComputedStyle(element) === null) {\n                return true;\n            }\n\n            return false;\n        }\n\n        function isUnrendered(element) {\n            // Check the absolute positioned container since the top level container is display: inline.\n            var container = getState(element).container.childNodes[0];\n            var style = window.getComputedStyle(container);\n            return !style.width || style.width.indexOf(\"px\") === -1; //Can only compute pixel value when rendered.\n        }\n\n        function getStyle() {\n            // Some browsers only force layouts when actually reading the style properties of the style object, so make sure that they are all read here,\n            // so that the user of the function can be sure that it will perform the layout here, instead of later (important for batching).\n            var elementStyle            = window.getComputedStyle(element);\n            var style                   = {};\n            style.position              = elementStyle.position;\n            style.width                 = element.offsetWidth;\n            style.height                = element.offsetHeight;\n            style.top                   = elementStyle.top;\n            style.right                 = elementStyle.right;\n            style.bottom                = elementStyle.bottom;\n            style.left                  = elementStyle.left;\n            style.widthCSS              = elementStyle.width;\n            style.heightCSS             = elementStyle.height;\n            return style;\n        }\n\n        function storeStartSize() {\n            var style = getStyle();\n            getState(element).startSize = {\n                width: style.width,\n                height: style.height\n            };\n            debug(\"Element start size\", getState(element).startSize);\n        }\n\n        function initListeners() {\n            getState(element).listeners = [];\n        }\n\n        function storeStyle() {\n            debug(\"storeStyle invoked.\");\n            if (!getState(element)) {\n                debug(\"Aborting because element has been uninstalled\");\n                return;\n            }\n\n            var style = getStyle();\n            getState(element).style = style;\n        }\n\n        function storeCurrentSize(element, width, height) {\n            getState(element).lastWidth = width;\n            getState(element).lastHeight  = height;\n        }\n\n        function getExpandChildElement(element) {\n            return getExpandElement(element).childNodes[0];\n        }\n\n        function getWidthOffset() {\n            return 2 * scrollbarSizes.width + 1;\n        }\n\n        function getHeightOffset() {\n            return 2 * scrollbarSizes.height + 1;\n        }\n\n        function getExpandWidth(width) {\n            return width + 10 + getWidthOffset();\n        }\n\n        function getExpandHeight(height) {\n            return height + 10 + getHeightOffset();\n        }\n\n        function getShrinkWidth(width) {\n            return width * 2 + getWidthOffset();\n        }\n\n        function getShrinkHeight(height) {\n            return height * 2 + getHeightOffset();\n        }\n\n        function positionScrollbars(element, width, height) {\n            var expand          = getExpandElement(element);\n            var shrink          = getShrinkElement(element);\n            var expandWidth     = getExpandWidth(width);\n            var expandHeight    = getExpandHeight(height);\n            var shrinkWidth     = getShrinkWidth(width);\n            var shrinkHeight    = getShrinkHeight(height);\n            expand.scrollLeft   = expandWidth;\n            expand.scrollTop    = expandHeight;\n            shrink.scrollLeft   = shrinkWidth;\n            shrink.scrollTop    = shrinkHeight;\n        }\n\n        function injectContainerElement() {\n            var container = getState(element).container;\n\n            if (!container) {\n                container                   = document.createElement(\"div\");\n                container.className         = detectionContainerClass;\n                container.style.cssText     = buildCssTextString([\"visibility: hidden\", \"display: inline\", \"width: 0px\", \"height: 0px\", \"z-index: -1\", \"overflow: hidden\", \"margin: 0\", \"padding: 0\"]);\n                getState(element).container = container;\n                addAnimationClass(container);\n                element.appendChild(container);\n\n                var onAnimationStart = function () {\n                    getState(element).onRendered && getState(element).onRendered();\n                };\n\n                addEvent(container, \"animationstart\", onAnimationStart);\n\n                // Store the event handler here so that they may be removed when uninstall is called.\n                // See uninstall function for an explanation why it is needed.\n                getState(element).onAnimationStart = onAnimationStart;\n            }\n\n            return container;\n        }\n\n        function injectScrollElements() {\n            function alterPositionStyles() {\n                var style = getState(element).style;\n\n                if(style.position === \"static\") {\n                    element.style.setProperty(\"position\", \"relative\",options.important ? \"important\" : \"\");\n\n                    var removeRelativeStyles = function(reporter, element, style, property) {\n                        function getNumericalValue(value) {\n                            return value.replace(/[^-\\d\\.]/g, \"\");\n                        }\n\n                        var value = style[property];\n\n                        if(value !== \"auto\" && getNumericalValue(value) !== \"0\") {\n                            reporter.warn(\"An element that is positioned static has style.\" + property + \"=\" + value + \" which is ignored due to the static positioning. The element will need to be positioned relative, so the style.\" + property + \" will be set to 0. Element: \", element);\n                            element.style[property] = 0;\n                        }\n                    };\n\n                    //Check so that there are no accidental styles that will make the element styled differently now that is is relative.\n                    //If there are any, set them to 0 (this should be okay with the user since the style properties did nothing before [since the element was positioned static] anyway).\n                    removeRelativeStyles(reporter, element, style, \"top\");\n                    removeRelativeStyles(reporter, element, style, \"right\");\n                    removeRelativeStyles(reporter, element, style, \"bottom\");\n                    removeRelativeStyles(reporter, element, style, \"left\");\n                }\n            }\n\n            function getLeftTopBottomRightCssText(left, top, bottom, right) {\n                left = (!left ? \"0\" : (left + \"px\"));\n                top = (!top ? \"0\" : (top + \"px\"));\n                bottom = (!bottom ? \"0\" : (bottom + \"px\"));\n                right = (!right ? \"0\" : (right + \"px\"));\n\n                return [\"left: \" + left, \"top: \" + top, \"right: \" + right, \"bottom: \" + bottom];\n            }\n\n            debug(\"Injecting elements\");\n\n            if (!getState(element)) {\n                debug(\"Aborting because element has been uninstalled\");\n                return;\n            }\n\n            alterPositionStyles();\n\n            var rootContainer = getState(element).container;\n\n            if (!rootContainer) {\n                rootContainer = injectContainerElement();\n            }\n\n            // Due to this WebKit bug https://bugs.webkit.org/show_bug.cgi?id=80808 (currently fixed in Blink, but still present in WebKit browsers such as Safari),\n            // we need to inject two containers, one that is width/height 100% and another that is left/top -1px so that the final container always is 1x1 pixels bigger than\n            // the targeted element.\n            // When the bug is resolved, \"containerContainer\" may be removed.\n\n            // The outer container can occasionally be less wide than the targeted when inside inline elements element in WebKit (see https://bugs.webkit.org/show_bug.cgi?id=152980).\n            // This should be no problem since the inner container either way makes sure the injected scroll elements are at least 1x1 px.\n\n            var scrollbarWidth          = scrollbarSizes.width;\n            var scrollbarHeight         = scrollbarSizes.height;\n            var containerContainerStyle = buildCssTextString([\"position: absolute\", \"flex: none\", \"overflow: hidden\", \"z-index: -1\", \"visibility: hidden\", \"width: 100%\", \"height: 100%\", \"left: 0px\", \"top: 0px\"]);\n            var containerStyle          = buildCssTextString([\"position: absolute\", \"flex: none\", \"overflow: hidden\", \"z-index: -1\", \"visibility: hidden\"].concat(getLeftTopBottomRightCssText(-(1 + scrollbarWidth), -(1 + scrollbarHeight), -scrollbarHeight, -scrollbarWidth)));\n            var expandStyle             = buildCssTextString([\"position: absolute\", \"flex: none\", \"overflow: scroll\", \"z-index: -1\", \"visibility: hidden\", \"width: 100%\", \"height: 100%\"]);\n            var shrinkStyle             = buildCssTextString([\"position: absolute\", \"flex: none\", \"overflow: scroll\", \"z-index: -1\", \"visibility: hidden\", \"width: 100%\", \"height: 100%\"]);\n            var expandChildStyle        = buildCssTextString([\"position: absolute\", \"left: 0\", \"top: 0\"]);\n            var shrinkChildStyle        = buildCssTextString([\"position: absolute\", \"width: 200%\", \"height: 200%\"]);\n\n            var containerContainer      = document.createElement(\"div\");\n            var container               = document.createElement(\"div\");\n            var expand                  = document.createElement(\"div\");\n            var expandChild             = document.createElement(\"div\");\n            var shrink                  = document.createElement(\"div\");\n            var shrinkChild             = document.createElement(\"div\");\n\n            // Some browsers choke on the resize system being rtl, so force it to ltr. https://github.com/wnr/element-resize-detector/issues/56\n            // However, dir should not be set on the top level container as it alters the dimensions of the target element in some browsers.\n            containerContainer.dir              = \"ltr\";\n\n            containerContainer.style.cssText    = containerContainerStyle;\n            containerContainer.className        = detectionContainerClass;\n            container.className                 = detectionContainerClass;\n            container.style.cssText             = containerStyle;\n            expand.style.cssText                = expandStyle;\n            expandChild.style.cssText           = expandChildStyle;\n            shrink.style.cssText                = shrinkStyle;\n            shrinkChild.style.cssText           = shrinkChildStyle;\n\n            expand.appendChild(expandChild);\n            shrink.appendChild(shrinkChild);\n            container.appendChild(expand);\n            container.appendChild(shrink);\n            containerContainer.appendChild(container);\n            rootContainer.appendChild(containerContainer);\n\n            function onExpandScroll() {\n                var state = getState(element);\n                if (state && state.onExpand) {\n                    state.onExpand();\n                } else {\n                    debug(\"Aborting expand scroll handler: element has been uninstalled\");\n                }\n            }\n\n            function onShrinkScroll() {\n                var state = getState(element);\n                if (state && state.onShrink) {\n                    state.onShrink();\n                } else {\n                    debug(\"Aborting shrink scroll handler: element has been uninstalled\");\n                }\n            }\n\n            addEvent(expand, \"scroll\", onExpandScroll);\n            addEvent(shrink, \"scroll\", onShrinkScroll);\n\n            // Store the event handlers here so that they may be removed when uninstall is called.\n            // See uninstall function for an explanation why it is needed.\n            getState(element).onExpandScroll = onExpandScroll;\n            getState(element).onShrinkScroll = onShrinkScroll;\n        }\n\n        function registerListenersAndPositionElements() {\n            function updateChildSizes(element, width, height) {\n                var expandChild             = getExpandChildElement(element);\n                var expandWidth             = getExpandWidth(width);\n                var expandHeight            = getExpandHeight(height);\n                expandChild.style.setProperty(\"width\", expandWidth + \"px\", options.important ? \"important\" : \"\");\n                expandChild.style.setProperty(\"height\", expandHeight + \"px\", options.important ? \"important\" : \"\");\n            }\n\n            function updateDetectorElements(done) {\n                var width           = element.offsetWidth;\n                var height          = element.offsetHeight;\n\n                // Check whether the size has actually changed since last time the algorithm ran. If not, some steps may be skipped.\n                var sizeChanged = width !== getState(element).lastWidth || height !== getState(element).lastHeight;\n\n                debug(\"Storing current size\", width, height);\n\n                // Store the size of the element sync here, so that multiple scroll events may be ignored in the event listeners.\n                // Otherwise the if-check in handleScroll is useless.\n                storeCurrentSize(element, width, height);\n\n                // Since we delay the processing of the batch, there is a risk that uninstall has been called before the batch gets to execute.\n                // Since there is no way to cancel the fn executions, we need to add an uninstall guard to all fns of the batch.\n\n                batchProcessor.add(0, function performUpdateChildSizes() {\n                    if (!sizeChanged) {\n                        return;\n                    }\n\n                    if (!getState(element)) {\n                        debug(\"Aborting because element has been uninstalled\");\n                        return;\n                    }\n\n                    if (!areElementsInjected()) {\n                        debug(\"Aborting because element container has not been initialized\");\n                        return;\n                    }\n\n                    if (options.debug) {\n                        var w = element.offsetWidth;\n                        var h = element.offsetHeight;\n\n                        if (w !== width || h !== height) {\n                            reporter.warn(idHandler.get(element), \"Scroll: Size changed before updating detector elements.\");\n                        }\n                    }\n\n                    updateChildSizes(element, width, height);\n                });\n\n                batchProcessor.add(1, function updateScrollbars() {\n                    // This function needs to be invoked event though the size is unchanged. The element could have been resized very quickly and then\n                    // been restored to the original size, which will have changed the scrollbar positions.\n\n                    if (!getState(element)) {\n                        debug(\"Aborting because element has been uninstalled\");\n                        return;\n                    }\n\n                    if (!areElementsInjected()) {\n                        debug(\"Aborting because element container has not been initialized\");\n                        return;\n                    }\n\n                    positionScrollbars(element, width, height);\n                });\n\n                if (sizeChanged && done) {\n                    batchProcessor.add(2, function () {\n                        if (!getState(element)) {\n                            debug(\"Aborting because element has been uninstalled\");\n                            return;\n                        }\n\n                        if (!areElementsInjected()) {\n                          debug(\"Aborting because element container has not been initialized\");\n                          return;\n                        }\n\n                        done();\n                    });\n                }\n            }\n\n            function areElementsInjected() {\n                return !!getState(element).container;\n            }\n\n            function notifyListenersIfNeeded() {\n                function isFirstNotify() {\n                    return getState(element).lastNotifiedWidth === undefined;\n                }\n\n                debug(\"notifyListenersIfNeeded invoked\");\n\n                var state = getState(element);\n\n                // Don't notify if the current size is the start size, and this is the first notification.\n                if (isFirstNotify() && state.lastWidth === state.startSize.width && state.lastHeight === state.startSize.height) {\n                    return debug(\"Not notifying: Size is the same as the start size, and there has been no notification yet.\");\n                }\n\n                // Don't notify if the size already has been notified.\n                if (state.lastWidth === state.lastNotifiedWidth && state.lastHeight === state.lastNotifiedHeight) {\n                    return debug(\"Not notifying: Size already notified\");\n                }\n\n\n                debug(\"Current size not notified, notifying...\");\n                state.lastNotifiedWidth = state.lastWidth;\n                state.lastNotifiedHeight = state.lastHeight;\n                forEach(getState(element).listeners, function (listener) {\n                    listener(element);\n                });\n            }\n\n            function handleRender() {\n                debug(\"startanimation triggered.\");\n\n                if (isUnrendered(element)) {\n                    debug(\"Ignoring since element is still unrendered...\");\n                    return;\n                }\n\n                debug(\"Element rendered.\");\n                var expand = getExpandElement(element);\n                var shrink = getShrinkElement(element);\n                if (expand.scrollLeft === 0 || expand.scrollTop === 0 || shrink.scrollLeft === 0 || shrink.scrollTop === 0) {\n                    debug(\"Scrollbars out of sync. Updating detector elements...\");\n                    updateDetectorElements(notifyListenersIfNeeded);\n                }\n            }\n\n            function handleScroll() {\n                debug(\"Scroll detected.\");\n\n                if (isUnrendered(element)) {\n                    // Element is still unrendered. Skip this scroll event.\n                    debug(\"Scroll event fired while unrendered. Ignoring...\");\n                    return;\n                }\n\n                updateDetectorElements(notifyListenersIfNeeded);\n            }\n\n            debug(\"registerListenersAndPositionElements invoked.\");\n\n            if (!getState(element)) {\n                debug(\"Aborting because element has been uninstalled\");\n                return;\n            }\n\n            getState(element).onRendered = handleRender;\n            getState(element).onExpand = handleScroll;\n            getState(element).onShrink = handleScroll;\n\n            var style = getState(element).style;\n            updateChildSizes(element, style.width, style.height);\n        }\n\n        function finalizeDomMutation() {\n            debug(\"finalizeDomMutation invoked.\");\n\n            if (!getState(element)) {\n                debug(\"Aborting because element has been uninstalled\");\n                return;\n            }\n\n            var style = getState(element).style;\n            storeCurrentSize(element, style.width, style.height);\n            positionScrollbars(element, style.width, style.height);\n        }\n\n        function ready() {\n            callback(element);\n        }\n\n        function install() {\n            debug(\"Installing...\");\n            initListeners();\n            storeStartSize();\n\n            batchProcessor.add(0, storeStyle);\n            batchProcessor.add(1, injectScrollElements);\n            batchProcessor.add(2, registerListenersAndPositionElements);\n            batchProcessor.add(3, finalizeDomMutation);\n            batchProcessor.add(4, ready);\n        }\n\n        debug(\"Making detectable...\");\n\n        if (isDetached(element)) {\n            debug(\"Element is detached\");\n\n            injectContainerElement();\n\n            debug(\"Waiting until element is attached...\");\n\n            getState(element).onRendered = function () {\n                debug(\"Element is now attached\");\n                install();\n            };\n        } else {\n            install();\n        }\n    }\n\n    function uninstall(element) {\n        var state = getState(element);\n\n        if (!state) {\n            // Uninstall has been called on a non-erd element.\n            return;\n        }\n\n        // Uninstall may have been called in the following scenarios:\n        // (1) Right between the sync code and async batch (here state.busy = true, but nothing have been registered or injected).\n        // (2) In the ready callback of the last level of the batch by another element (here, state.busy = true, but all the stuff has been injected).\n        // (3) After the installation process (here, state.busy = false and all the stuff has been injected).\n        // So to be on the safe side, let's check for each thing before removing.\n\n        // We need to remove the event listeners, because otherwise the event might fire on an uninstall element which results in an error when trying to get the state of the element.\n        state.onExpandScroll && removeEvent(getExpandElement(element), \"scroll\", state.onExpandScroll);\n        state.onShrinkScroll && removeEvent(getShrinkElement(element), \"scroll\", state.onShrinkScroll);\n        state.onAnimationStart && removeEvent(state.container, \"animationstart\", state.onAnimationStart);\n\n        state.container && element.removeChild(state.container);\n    }\n\n    return {\n        makeDetectable: makeDetectable,\n        addListener: addListener,\n        uninstall: uninstall,\n        initDocument: initDocument\n    };\n};\n","\"use strict\";\n\nvar forEach                 = require(\"./collection-utils\").forEach;\nvar elementUtilsMaker       = require(\"./element-utils\");\nvar listenerHandlerMaker    = require(\"./listener-handler\");\nvar idGeneratorMaker        = require(\"./id-generator\");\nvar idHandlerMaker          = require(\"./id-handler\");\nvar reporterMaker           = require(\"./reporter\");\nvar browserDetector         = require(\"./browser-detector\");\nvar batchProcessorMaker     = require(\"batch-processor\");\nvar stateHandler            = require(\"./state-handler\");\n\n//Detection strategies.\nvar objectStrategyMaker     = require(\"./detection-strategy/object.js\");\nvar scrollStrategyMaker     = require(\"./detection-strategy/scroll.js\");\n\nfunction isCollection(obj) {\n    return Array.isArray(obj) || obj.length !== undefined;\n}\n\nfunction toArray(collection) {\n    if (!Array.isArray(collection)) {\n        var array = [];\n        forEach(collection, function (obj) {\n            array.push(obj);\n        });\n        return array;\n    } else {\n        return collection;\n    }\n}\n\nfunction isElement(obj) {\n    return obj && obj.nodeType === 1;\n}\n\n/**\n * @typedef idHandler\n * @type {object}\n * @property {function} get Gets the resize detector id of the element.\n * @property {function} set Generate and sets the resize detector id of the element.\n */\n\n/**\n * @typedef Options\n * @type {object}\n * @property {boolean} callOnAdd    Determines if listeners should be called when they are getting added.\n                                    Default is true. If true, the listener is guaranteed to be called when it has been added.\n                                    If false, the listener will not be guarenteed to be called when it has been added (does not prevent it from being called).\n * @property {idHandler} idHandler  A custom id handler that is responsible for generating, setting and retrieving id's for elements.\n                                    If not provided, a default id handler will be used.\n * @property {reporter} reporter    A custom reporter that handles reporting logs, warnings and errors.\n                                    If not provided, a default id handler will be used.\n                                    If set to false, then nothing will be reported.\n * @property {boolean} debug        If set to true, the the system will report debug messages as default for the listenTo method.\n */\n\n/**\n * Creates an element resize detector instance.\n * @public\n * @param {Options?} options Optional global options object that will decide how this instance will work.\n */\nmodule.exports = function(options) {\n    options = options || {};\n\n    //idHandler is currently not an option to the listenTo function, so it should not be added to globalOptions.\n    var idHandler;\n\n    if (options.idHandler) {\n        // To maintain compatability with idHandler.get(element, readonly), make sure to wrap the given idHandler\n        // so that readonly flag always is true when it's used here. This may be removed next major version bump.\n        idHandler = {\n            get: function (element) { return options.idHandler.get(element, true); },\n            set: options.idHandler.set\n        };\n    } else {\n        var idGenerator = idGeneratorMaker();\n        var defaultIdHandler = idHandlerMaker({\n            idGenerator: idGenerator,\n            stateHandler: stateHandler\n        });\n        idHandler = defaultIdHandler;\n    }\n\n    //reporter is currently not an option to the listenTo function, so it should not be added to globalOptions.\n    var reporter = options.reporter;\n\n    if(!reporter) {\n        //If options.reporter is false, then the reporter should be quiet.\n        var quiet = reporter === false;\n        reporter = reporterMaker(quiet);\n    }\n\n    //batchProcessor is currently not an option to the listenTo function, so it should not be added to globalOptions.\n    var batchProcessor = getOption(options, \"batchProcessor\", batchProcessorMaker({ reporter: reporter }));\n\n    //Options to be used as default for the listenTo function.\n    var globalOptions = {};\n    globalOptions.callOnAdd     = !!getOption(options, \"callOnAdd\", true);\n    globalOptions.debug         = !!getOption(options, \"debug\", false);\n\n    var eventListenerHandler    = listenerHandlerMaker(idHandler);\n    var elementUtils            = elementUtilsMaker({\n        stateHandler: stateHandler\n    });\n\n    //The detection strategy to be used.\n    var detectionStrategy;\n    var desiredStrategy = getOption(options, \"strategy\", \"object\");\n    var importantCssRules = getOption(options, \"important\", false);\n    var strategyOptions = {\n        reporter: reporter,\n        batchProcessor: batchProcessor,\n        stateHandler: stateHandler,\n        idHandler: idHandler,\n        important: importantCssRules\n    };\n\n    if(desiredStrategy === \"scroll\") {\n        if (browserDetector.isLegacyOpera()) {\n            reporter.warn(\"Scroll strategy is not supported on legacy Opera. Changing to object strategy.\");\n            desiredStrategy = \"object\";\n        } else if (browserDetector.isIE(9)) {\n            reporter.warn(\"Scroll strategy is not supported on IE9. Changing to object strategy.\");\n            desiredStrategy = \"object\";\n        }\n    }\n\n    if(desiredStrategy === \"scroll\") {\n        detectionStrategy = scrollStrategyMaker(strategyOptions);\n    } else if(desiredStrategy === \"object\") {\n        detectionStrategy = objectStrategyMaker(strategyOptions);\n    } else {\n        throw new Error(\"Invalid strategy name: \" + desiredStrategy);\n    }\n\n    //Calls can be made to listenTo with elements that are still being installed.\n    //Also, same elements can occur in the elements list in the listenTo function.\n    //With this map, the ready callbacks can be synchronized between the calls\n    //so that the ready callback can always be called when an element is ready - even if\n    //it wasn't installed from the function itself.\n    var onReadyCallbacks = {};\n\n    /**\n     * Makes the given elements resize-detectable and starts listening to resize events on the elements. Calls the event callback for each event for each element.\n     * @public\n     * @param {Options?} options Optional options object. These options will override the global options. Some options may not be overriden, such as idHandler.\n     * @param {element[]|element} elements The given array of elements to detect resize events of. Single element is also valid.\n     * @param {function} listener The callback to be executed for each resize event for each element.\n     */\n    function listenTo(options, elements, listener) {\n        function onResizeCallback(element) {\n            var listeners = eventListenerHandler.get(element);\n            forEach(listeners, function callListenerProxy(listener) {\n                listener(element);\n            });\n        }\n\n        function addListener(callOnAdd, element, listener) {\n            eventListenerHandler.add(element, listener);\n\n            if(callOnAdd) {\n                listener(element);\n            }\n        }\n\n        //Options object may be omitted.\n        if(!listener) {\n            listener = elements;\n            elements = options;\n            options = {};\n        }\n\n        if(!elements) {\n            throw new Error(\"At least one element required.\");\n        }\n\n        if(!listener) {\n            throw new Error(\"Listener required.\");\n        }\n\n        if (isElement(elements)) {\n            // A single element has been passed in.\n            elements = [elements];\n        } else if (isCollection(elements)) {\n            // Convert collection to array for plugins.\n            // TODO: May want to check so that all the elements in the collection are valid elements.\n            elements = toArray(elements);\n        } else {\n            return reporter.error(\"Invalid arguments. Must be a DOM element or a collection of DOM elements.\");\n        }\n\n        var elementsReady = 0;\n\n        var callOnAdd = getOption(options, \"callOnAdd\", globalOptions.callOnAdd);\n        var onReadyCallback = getOption(options, \"onReady\", function noop() {});\n        var debug = getOption(options, \"debug\", globalOptions.debug);\n\n        forEach(elements, function attachListenerToElement(element) {\n            if (!stateHandler.getState(element)) {\n                stateHandler.initState(element);\n                idHandler.set(element);\n            }\n\n            var id = idHandler.get(element);\n\n            debug && reporter.log(\"Attaching listener to element\", id, element);\n\n            if(!elementUtils.isDetectable(element)) {\n                debug && reporter.log(id, \"Not detectable.\");\n                if(elementUtils.isBusy(element)) {\n                    debug && reporter.log(id, \"System busy making it detectable\");\n\n                    //The element is being prepared to be detectable. Do not make it detectable.\n                    //Just add the listener, because the element will soon be detectable.\n                    addListener(callOnAdd, element, listener);\n                    onReadyCallbacks[id] = onReadyCallbacks[id] || [];\n                    onReadyCallbacks[id].push(function onReady() {\n                        elementsReady++;\n\n                        if(elementsReady === elements.length) {\n                            onReadyCallback();\n                        }\n                    });\n                    return;\n                }\n\n                debug && reporter.log(id, \"Making detectable...\");\n                //The element is not prepared to be detectable, so do prepare it and add a listener to it.\n                elementUtils.markBusy(element, true);\n                return detectionStrategy.makeDetectable({ debug: debug, important: importantCssRules }, element, function onElementDetectable(element) {\n                    debug && reporter.log(id, \"onElementDetectable\");\n\n                    if (stateHandler.getState(element)) {\n                        elementUtils.markAsDetectable(element);\n                        elementUtils.markBusy(element, false);\n                        detectionStrategy.addListener(element, onResizeCallback);\n                        addListener(callOnAdd, element, listener);\n\n                        // Since the element size might have changed since the call to \"listenTo\", we need to check for this change,\n                        // so that a resize event may be emitted.\n                        // Having the startSize object is optional (since it does not make sense in some cases such as unrendered elements), so check for its existance before.\n                        // Also, check the state existance before since the element may have been uninstalled in the installation process.\n                        var state = stateHandler.getState(element);\n                        if (state && state.startSize) {\n                            var width = element.offsetWidth;\n                            var height = element.offsetHeight;\n                            if (state.startSize.width !== width || state.startSize.height !== height) {\n                                onResizeCallback(element);\n                            }\n                        }\n\n                        if(onReadyCallbacks[id]) {\n                            forEach(onReadyCallbacks[id], function(callback) {\n                                callback();\n                            });\n                        }\n                    } else {\n                        // The element has been unisntalled before being detectable.\n                        debug && reporter.log(id, \"Element uninstalled before being detectable.\");\n                    }\n\n                    delete onReadyCallbacks[id];\n\n                    elementsReady++;\n                    if(elementsReady === elements.length) {\n                        onReadyCallback();\n                    }\n                });\n            }\n\n            debug && reporter.log(id, \"Already detecable, adding listener.\");\n\n            //The element has been prepared to be detectable and is ready to be listened to.\n            addListener(callOnAdd, element, listener);\n            elementsReady++;\n        });\n\n        if(elementsReady === elements.length) {\n            onReadyCallback();\n        }\n    }\n\n    function uninstall(elements) {\n        if(!elements) {\n            return reporter.error(\"At least one element is required.\");\n        }\n\n        if (isElement(elements)) {\n            // A single element has been passed in.\n            elements = [elements];\n        } else if (isCollection(elements)) {\n            // Convert collection to array for plugins.\n            // TODO: May want to check so that all the elements in the collection are valid elements.\n            elements = toArray(elements);\n        } else {\n            return reporter.error(\"Invalid arguments. Must be a DOM element or a collection of DOM elements.\");\n        }\n\n        forEach(elements, function (element) {\n            eventListenerHandler.removeAllListeners(element);\n            detectionStrategy.uninstall(element);\n            stateHandler.cleanState(element);\n        });\n    }\n\n    function initDocument(targetDocument) {\n        detectionStrategy.initDocument && detectionStrategy.initDocument(targetDocument);\n    }\n\n    return {\n        listenTo: listenTo,\n        removeListener: eventListenerHandler.removeListener,\n        removeAllListeners: eventListenerHandler.removeAllListeners,\n        uninstall: uninstall,\n        initDocument: initDocument\n    };\n};\n\nfunction getOption(options, name, defaultValue) {\n    var value = options[name];\n\n    if((value === undefined || value === null) && defaultValue !== undefined) {\n        return defaultValue;\n    }\n\n    return value;\n}\n","\"use strict\";\n\nmodule.exports = function(options) {\n    var getState = options.stateHandler.getState;\n\n    /**\n     * Tells if the element has been made detectable and ready to be listened for resize events.\n     * @public\n     * @param {element} The element to check.\n     * @returns {boolean} True or false depending on if the element is detectable or not.\n     */\n    function isDetectable(element) {\n        var state = getState(element);\n        return state && !!state.isDetectable;\n    }\n\n    /**\n     * Marks the element that it has been made detectable and ready to be listened for resize events.\n     * @public\n     * @param {element} The element to mark.\n     */\n    function markAsDetectable(element) {\n        getState(element).isDetectable = true;\n    }\n\n    /**\n     * Tells if the element is busy or not.\n     * @public\n     * @param {element} The element to check.\n     * @returns {boolean} True or false depending on if the element is busy or not.\n     */\n    function isBusy(element) {\n        return !!getState(element).busy;\n    }\n\n    /**\n     * Marks the object is busy and should not be made detectable.\n     * @public\n     * @param {element} element The element to mark.\n     * @param {boolean} busy If the element is busy or not.\n     */\n    function markBusy(element, busy) {\n        getState(element).busy = !!busy;\n    }\n\n    return {\n        isDetectable: isDetectable,\n        markAsDetectable: markAsDetectable,\n        isBusy: isBusy,\n        markBusy: markBusy\n    };\n};\n","\"use strict\";\n\nmodule.exports = function() {\n    var idCount = 1;\n\n    /**\n     * Generates a new unique id in the context.\n     * @public\n     * @returns {number} A unique id in the context.\n     */\n    function generate() {\n        return idCount++;\n    }\n\n    return {\n        generate: generate\n    };\n};\n","\"use strict\";\n\nmodule.exports = function(options) {\n    var idGenerator     = options.idGenerator;\n    var getState        = options.stateHandler.getState;\n\n    /**\n     * Gets the resize detector id of the element.\n     * @public\n     * @param {element} element The target element to get the id of.\n     * @returns {string|number|null} The id of the element. Null if it has no id.\n     */\n    function getId(element) {\n        var state = getState(element);\n\n        if (state && state.id !== undefined) {\n            return state.id;\n        }\n\n        return null;\n    }\n\n    /**\n     * Sets the resize detector id of the element. Requires the element to have a resize detector state initialized.\n     * @public\n     * @param {element} element The target element to set the id of.\n     * @returns {string|number|null} The id of the element.\n     */\n    function setId(element) {\n        var state = getState(element);\n\n        if (!state) {\n            throw new Error(\"setId required the element to have a resize detection state.\");\n        }\n\n        var id = idGenerator.generate();\n\n        state.id = id;\n\n        return id;\n    }\n\n    return {\n        get: getId,\n        set: setId\n    };\n};\n","\"use strict\";\n\nmodule.exports = function(idHandler) {\n    var eventListeners = {};\n\n    /**\n     * Gets all listeners for the given element.\n     * @public\n     * @param {element} element The element to get all listeners for.\n     * @returns All listeners for the given element.\n     */\n    function getListeners(element) {\n        var id = idHandler.get(element);\n\n        if (id === undefined) {\n            return [];\n        }\n\n        return eventListeners[id] || [];\n    }\n\n    /**\n     * Stores the given listener for the given element. Will not actually add the listener to the element.\n     * @public\n     * @param {element} element The element that should have the listener added.\n     * @param {function} listener The callback that the element has added.\n     */\n    function addListener(element, listener) {\n        var id = idHandler.get(element);\n\n        if(!eventListeners[id]) {\n            eventListeners[id] = [];\n        }\n\n        eventListeners[id].push(listener);\n    }\n\n    function removeListener(element, listener) {\n        var listeners = getListeners(element);\n        for (var i = 0, len = listeners.length; i < len; ++i) {\n            if (listeners[i] === listener) {\n              listeners.splice(i, 1);\n              break;\n            }\n        }\n    }\n\n    function removeAllListeners(element) {\n      var listeners = getListeners(element);\n      if (!listeners) { return; }\n      listeners.length = 0;\n    }\n\n    return {\n        get: getListeners,\n        add: addListener,\n        removeListener: removeListener,\n        removeAllListeners: removeAllListeners\n    };\n};\n","\"use strict\";\n\n/* global console: false */\n\n/**\n * Reporter that handles the reporting of logs, warnings and errors.\n * @public\n * @param {boolean} quiet Tells if the reporter should be quiet or not.\n */\nmodule.exports = function(quiet) {\n    function noop() {\n        //Does nothing.\n    }\n\n    var reporter = {\n        log: noop,\n        warn: noop,\n        error: noop\n    };\n\n    if(!quiet && window.console) {\n        var attachFunction = function(reporter, name) {\n            //The proxy is needed to be able to call the method with the console context,\n            //since we cannot use bind.\n            reporter[name] = function reporterProxy() {\n                var f = console[name];\n                if (f.apply) { //IE9 does not support console.log.apply :)\n                    f.apply(console, arguments);\n                } else {\n                    for (var i = 0; i < arguments.length; i++) {\n                        f(arguments[i]);\n                    }\n                }\n            };\n        };\n\n        attachFunction(reporter, \"log\");\n        attachFunction(reporter, \"warn\");\n        attachFunction(reporter, \"error\");\n    }\n\n    return reporter;\n};","\"use strict\";\n\nvar prop = \"_erd\";\n\nfunction initState(element) {\n    element[prop] = {};\n    return getState(element);\n}\n\nfunction getState(element) {\n    return element[prop];\n}\n\nfunction cleanState(element) {\n    delete element[prop];\n}\n\nmodule.exports = {\n    initState: initState,\n    getState: getState,\n    cleanState: cleanState\n};\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import defineProperty from \"./defineProperty.js\";\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? Object(arguments[i]) : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys.push.apply(ownKeys, Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import _typeof from \"@babel/runtime/helpers/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _toArray(arr) {\n  return arrayWithHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableRest();\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}"],"names":["module","exports","obj","key","value","Object","defineProperty","enumerable","configurable","writable","__esModule","_extends","assign","target","i","arguments","length","source","prototype","hasOwnProperty","call","apply","this","_typeof","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","desc","set","objectWithoutPropertiesLoose","excluded","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","keys","Symbol","iterator","constructor","OK","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_possibleConstructorReturn","self","ReferenceError","_assertThisInitialized","_getPrototypeOf","getPrototypeOf","AnnotationSettings","_Component","subClass","superClass","create","_inherits","protoProps","Derived","hasNativeReflectConstruct","_super","Reflect","construct","sham","Proxy","Date","toString","e","_isNativeReflectConstruct","result","Super","NewTarget","_this$props","displayAll","displayAllDisabled","t","toggleAnnotationDisplay","onClick","disabled","size","Component","ownKeys","object","enumerableOnly","symbols","filter","sym","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toConsumableArray","arr","Array","isArray","_arrayLikeToArray","_arrayWithoutHoles","iter","from","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","_slicedToArray","_arrayWithHoles","_arr","_n","_d","_e","undefined","_s","_i","next","done","err","_iterableToArrayLimit","_nonIterableRest","minLen","n","slice","name","test","len","arr2","_createClass","staticProps","AnnotationsOverlay","_this","ref","osdCanvasOverlay","updateCanvas","onUpdateViewport","bind","onCanvasClick","onCanvasMouseMove","onCanvasExit","currentAnnotations","prevAnnotations","every","annotation","index","newIds","resources","map","r","id","prevIds","initializeViewer","prevProps","drawAnnotations","drawSearchAnnotations","annotations","searchAnnotations","hoveredAnnotationIds","selectedAnnotationId","highlightAllAnnotations","viewer","annotationsUpdated","annotationsMatch","searchAnnotationsUpdated","hoveredAnnotationsUpdated","canvasDiv","style","cursor","selectedAnnotationsUpdated","redrawAnnotations","canvasUpdateCallback","forceRedraw","removeHandler","event","_this2","canvasWorld","webPosition","position","point","eventSource","viewport","pointFromPixel","canvas","canvasAtPoint","_canvasWorld$canvasTo2","canvasToWorldCoordinates","canvasWidth","canvasHeight","annos","annotationsAtPoint","preventDefaultAction","toggleAnnotation","annosWithClickScore","radius","degreesToRadians","Math","PI","anno","score","degrees","x","cos","y","sin","isAnnotationAtPoint","annosWithScore","max","_this$props2","hoverAnnotation","windowId","a","_this$props3","cancel","addHandler","_this3","clear","resize","canvasUpdate","renderAnnotations","resource","_canvasWorld$canvasTo4","canvasX","canvasY","relativeX","relativeY","svgSelector","context","context2d","svgPaths","some","path","isPointInPath","Path2D","attributes","d","nodeValue","fragmentSelector","_resource$fragmentSel","w","h","_this4","_this$props4","lists","concat","l","targetId","_this$props5","selectAnnotation","deselectAnnotation","palette","_this$props6","zoomRatio","getZoom","getMaxZoom","canvasIds","includes","offset","offsetByCanvas","hovered","hidden","selected","toContext","_this$props7","annotationsToContext","search","height","left","top","width","defaultProps","WorkspaceArea","lazy","App","dndManager","plugins","Suspense","fallback","MaybeDndProvider","children","backend","options","AppProviders","i18n","language","changeLanguage","createGenerateClassNameOptions","isFullscreenEnabled","setWorkspaceFullscreen","theme","translations","generateClassName","lng","addResourceBundle","enabled","onChange","jss","AttributionPanel","manifestLogo","requiredStatement","rights","classes","title","paperClassName","className","section","labelValuePairs","defaultLabel","variant","component","v","rel","href","Img","src","alt","role","logo","unloader","placeholder","AudioViewer","captions","audioOptions","audioResources","container","audio","Fragment","type","getFormat","caption","label","getDefaultLabel","srcLang","getProperty","BackgroundPluginArea","display","PluginComponents","MiradorIcon","SvgIcon","viewBox","transform","Branding","ContainerProps","_objectWithoutPropertiesLoose","_objectWithoutProperties","Typography","align","IconButton","titleAccess","fontSize","k","CanvasAnnotations","handleClick","handleAnnotationHover","handleAnnotationBlur","totalSize","listContainerComponent","htmlSanitizationRuleSet","containerRef","sectionHeading","autoFocusItem","offsetTop","scrollTo","button","annotationListItem","annotationid","onFocus","onBlur","onMouseEnter","onMouseLeave","primaryTypographyProps","ruleSet","htmlString","content","tags","tag","chip","CanvasInfo","canvasDescription","canvasLabel","canvasMetadata","reorder","list","startIndex","endIndex","removed","splice","CanvasLayers","droppableId","onDragEnd","handleOpacityChange","setLayerVisibility","moveToTop","getLabel","getValue","String","layerId","canvasId","updateLayers","opacity","layers","destination","sortedLayers","reduce","acc","layer","visibility","findIndex","layerMetadata","flex","alignItems","maxHeight","maxWidth","image","root","thumbnail","getUseableLabel","edge","opacityIcon","color","input","opacityInput","round","min","endAdornment","disableTypography","inputProps","slider","draggableId","provided","snapshot","innerRef","draggableProps","listItem","dragging","isDragging","disableGutters","dragHandleProps","dragHandle","renderLayer","droppableProps","renderDraggableLayer","ChangeThemeDialog","selectedItemRef","handleThemeChange","dialogElement","selectedTheme","selectedListItem","querySelectorAll","focus","setSelectedTheme","handleClose","open","themeIds","onClose","onEntered","dialog","setInitialFocus","dialogContent","listitem","CollapsibleSection","state","toggleSection","setState","heading","CollectionDialog","hideDialog","hideCollectionDialog","c","collectionPath","manifestId","showCollectionDialog","m","addWindow","setWorkspaceAddVisibility","updateWindow","containerId","document","querySelector","dialogContainer","BackdropProps","backdropProps","collection","error","isMultipart","manifest","ready","forceUpdate","getRequiredStatement","labelValuePair","values","getValues","collections","getCollections","currentFilter","startIcon","goToPreviousCollection","collectionMetadata","collectionFilter","getTotalCollections","clickable","setFilter","count","getTotalManifests","selectCollection","collectionItem","getManifests","selectManifest","CollectionInfo","openCollectionDialog","collectionLabel","CompanionArea","horizontal","companionAreaOpen","direction","defaultPosition","oppositePosition","companionWindowIds","setCompanionAreaOpen","sideBarOpen","areaLayoutClass","join","slideDirection","toggle","toggleButton","TooltipProps","placement","collapseIcon","CompanionWindow","positions","ltr","opposite","rtl","base","bottom","bottomLeft","bottomRight","right","topLeft","topRight","ariaLabel","onCloseClick","updateCompanionWindow","isDisplayed","titleControls","defaultSidebarPanelWidth","defaultSidebarPanelHeight","isBottom","childrenWithAdditionalProps","child","parentactions","closeCompanionWindow","vertical","order","square","rnd","disableDragging","enableResizing","resizeHandles","minHeight","minWidth","toolbar","companionWindowHeader","small","windowSideBarTitle","openInNewStyle","positionButton","closeButton","companionWindowTitleControlsBottom","companionWindowTitleControls","elevation","CompanionWindowFactory","hasError","_this$state","companionWindowId","CustomPanel","ErrorContent","metadata","showJsError","severity","alert","expandIcon","message","details","stack","JSON","stringify","ErrorDialog","removeError","noWrap","FullScreenButton","GalleryView","canvases","viewingDirection","htmlDir","dir","galleryContainer","GalleryViewThumbnail","requestedAnnotations","handleSelect","handleKey","handleIntersection","setCanvas","focusOnCanvas","enter","space","chars","which","_ref","isIntersecting","annotationsCount","requestCanvasAnnotations","searchAnnotationsCount","config","miradorCanvas","galleryViewItem","hasAnnotations","onKeyUp","tabIndex","labelled","margin","ceil","aspectRatio","chips","avatar","circle","avatarIcon","searchChip","annotationIcon","annotationsChip","AccessTokenSender","onReceiveAccessTokenMessage","handleAccessTokenMessage","url","data","messageId","window","origin","handleReceiveMessage","NewWindow","released","checkIfWindowClosed","openWindow","close","clearInterval","depWindow","features","setInterval","closed","IIIFAuthentication","performLogout","payload","authServiceId","accessTokenServiceId","resolveAccessTokenRequest","status","hasLogoutService","logoutServiceId","resetAuthenticationState","tokenServiceId","isInteractive","logoutConfirm","WindowAuthenticationBar","confirmButton","onConfirm","defaultAuthBarProps","handleAuthInteraction","header","failureHeader","description","failureDescription","resolveAuthenticationRequest","renderLogin","confirm","_this$props8","renderLoggingInCookie","renderLoggingInToken","renderFailure","renderLoggedIn","handleDrop","item","monitor","onDrop","urls","str","URL","searchParams","files","imagePromise","manifestPromises","f","file","Promise","resolve","reject","reader","FileReader","addEventListener","manifestJson","readAsText","imageFiles","startsWith","imageData","all","then","images","items","_ref2","body","format","motivation","IIIFDropTarget","_useDrop2","accept","collect","canDrop","isOver","drop","_useDrop2$","isActive","safari","dataTransfer","types","getData","zIndex","IIIFThumbnail","loaded","styleProps","thumbHeight","thumbWidth","thumbnailsConfig","imagePlaceholder","_ref$url","imageStyles","LabelValueMetadata","marginBottom","marginLeft","LanguageSettings","languages","current","locale","LayersPanel","LocalePicker","availableLocales","setLocale","MenuProps","anchorOrigin","getContentAnchorEl","displayEmpty","select","selectEmpty","ManifestForm","formValue","formSubmit","handleCancel","handleInputChange","onCancel","preventDefault","addResource","onSubmit","addResourcesOpen","spacing","xs","sm","md","autoFocus","fullWidth","helperText","InputLabelProps","shrink","InputProps","buttons","ManifestInfo","manifestDescription","manifestLabel","manifestMetadata","ManifestListItem","_React$Component","handleOpenButtonClick","fetchManifest","isFetching","provider","active","buttonRef","isCollection","divider","buttonGrid","animation","number","ManifestListItemError","onDismissClick","onTryAgainClick","justify","errorIcon","manifestIdText","ManifestRelatedLinks","homepage","manifestUrl","renderings","seeAlso","labelValueMetadata","page","rendering","related","MinimalWindow","allowClose","allowWindowSideBar","removeWindow","windowTopBarStyle","MiradorMenuButton","badge","BadgeProps","dispatch","iconButtonProps","PopperProps","MosaicRenderPreview","_construct","Parent","args","Class","Function","OpenSeadragonViewer","apiRef","onViewportChange","zoomToWorld","osdUpdating","osdConfig","firstElementChild","setAttribute","innerTracker","moveHandler","prevState","viewerConfig","panTo","zoomTo","zoom","setRotation","flip","setFlip","addAllImageSources","infoResponsesMatch","infoResponses","nonTiledImagedMatch","nonTiledImages","centerSpringX","centerSpringY","zoomSpring","rotation","getRotation","getFlip","refreshTileProperties","canvasesChanged","removeAllHandlers","raiseEvent","updateViewport","zoomAfterAdd","infoResponse","addTileSource","addNonTiledImage","contentResource","addSimpleImage","fitBounds","contentResourceToWorldCoordinates","layerIndexOfImageResource","layerOpacityOfImageResource","success","tileSource","json","addTiledImage","world","getItemCount","getItemAt","newIndex","setItemIndex","setOpacity","immediately","prevInfoResponses","prevNonTiledImages","worldBounds","enhancedChildren","osdContainer","PluginHook","otherProps","PluginComponent","SelectCollection","WindowViewer","VideoViewer","displayName","PrimaryWindow","videoResources","view","isCollectionDialogVisible","primaryWindow","renderViewer","SanitizedHtml","node","dangerouslySetInnerHTML","__html","ScrollIndicatedDialogContent","ourClassName","shadowScrollDialog","ScrollTo","scrollToRef","scrollToElement","domEl","getBoundingClientRect","elementToScrollTo","getElementsByClassName","scrollToBoundingRect","containerBoundingRect","elementIsVisible","scrollabelContainer","scrollBy","SearchHit","announceHit","annotationId","annotationLabel","announcer","hit","total","truncatedHit","before","match","after","_clsx","adjacent","focused","showDetails","windowSelected","truncated","canvasLabelHtmlId","subtitle","hitCounter","inlineButton","SearchPanel","fetchSearch","query","removeSearch","searchService","suggestedSearches","clearChip","onDelete","getMatch","option","SearchPanelControls","suggestions","handleChange","submitSearch","getSuggestions","selectItem","fetchAutocomplete","receiveAutocomplete","reason","_ref$showEmpty","showEmpty","inputValue","trim","toLowerCase","inputLength","autocompleteService","fetch","response","terms","_event","selectedItem","_reason","searchIsFetching","form","getOptionLabel","getOptionSelected","noOptionsText","onInputChange","freeSolo","renderInput","params","Boolean","searchProgress","SearchPanelNavigation","currentHitIndex","searchHits","numTotal","selectedContentSearchAnnotation","iconStyle","val","lengthText","hasPreviousResult","previousSearchResult","unicodeBidi","hasNextResult","nextSearchResult","SearchResults","toggleFocus","nextSearch","searchNumTotal","noResultsState","navigation","noResults","disablePadding","announcePolite","renderSearchHitsAndAnnotations","moreButton","numLeft","paragraph","SidebarIndexItem","SidebarIndexList","Item","selectedCanvasIds","canvasesIdAndLabel","getIdAndLabelOfCanvases","canvasIndex","SidebarIndexTableOfContents","expandedNodeIds","toggleNode","selectTreeItem","nodes","getCanvasIds","jsonld","__jsonld","startCanvas","start","getStartCanvasId","substr","visibleNodeIds","nodeIdToScrollTo","nodeId","group","treeItemRoot","visibleNode","onKeyDown","handleKeyPressed","buildTreeItems","treeStructure","defaultCollapseIcon","defaultExpandIcon","defaultEndIcon","expanded","SidebarIndexThumbnail","ThumbnailCanvasGrouping","_PureComponent","currentTarget","dataset","canvasIndices","currentCanvasId","canvasGroupings","currentGroupings","boxSizing","Number","isInteger","currentCanvasClass","currentCanvas","PureComponent","ThumbnailNavigation","scrollbarSize","calculateScaledSize","itemCount","gridRef","resetAfterIndex","scrollToItem","thumbnailNavigation","bounds","calc","floor","calculatingWidth","canvasesLength","rightWidth","itemData","thumbNavigation","defaultHeight","defaultWidth","areaHeight","itemSize","layout","videoOptions","video","ViewerInfo","canvasCount","osdInfo","ViewerNavigation","hasNextCanvas","hasPreviousCanvas","setNextCanvas","setPreviousCanvas","previousIconStyle","nextIconStyle","osdNavigation","Window","workspaceType","windowDraggable","topBar","mosaicWindowActions","connectDragSource","focusWindow","maximized","manifestError","wrappedTopBar","middle","middleLeft","companionAreaBottom","companionAreaRight","contextType","MosaicWindowContext","setOpen","continueLabel","icon","ConfirmProps","buttonInvert","paper","fauxButton","WindowCanvasNavigationControls","visible","controls","canvasNav","canvasNavControlsAreStacked","canvasNavStacked","Z","displayDivider","WindowList","menuElement","titles","anchorEl","windowIds","transformOrigin","disableAutoFocusItem","onEntering","focus2ndListIitem","titleContent","WindowListButton","windowListAnchor","handleOpen","windowCount","ctrlBtn","ctrlBtnSelected","badgeContent","WindowSideBar","drawer","anchor","PaperProps","SlideProps","mountOnEnter","unmountOnExit","WindowSideBarAnnotationsPanel","annotationCount","otherRef","CanvasIndexIcon","xmlns","WindowSideBarButtons","addCompanionWindow","hasAnyAnnotations","hasAnyLayers","hasCurrentLayers","hasSearchResults","hasSearchService","panels","sideBarPanel","TabButton","Tooltip","Tab","tab","tabSelected","disableRipple","handleKeyUp","Tabs","flexContainer","tabsFlexContainer","indicator","tabsIndicator","indicatorColor","textColor","orientation","info","attribution","Badge","invisible","WindowSideBarCanvasPanel","handleSequenceChange","handleVariantChange","updateSequence","updateVariant","listComponent","showMultipart","sequenceId","sequences","showToc","s","variantTab","endIcon","collectionNavigationButton","WindowSideBarCollectionPanel","behaviors","canvasNavigation","parentCollection","menuItem","multipart","WindowSideBarInfoPanel","showLocalePicker","ThumbnailNavigationBottomIcon","ThumbnailNavigationRightIcon","fill","WindowThumbnailSettings","setWindowThumbnailPosition","thumbnailNavigationPosition","ListSubheader","disableSticky","MenuItem","FormControlLabel","selectedLabel","control","labelPlacement","WindowMaxIcon","WindowMinIcon","WindowTopBar","toggleWindowSideBar","maximizeWindow","minimizeWindow","allowMaximize","allowFullscreen","allowTopMenuButton","AppBar","Toolbar","onMouseDown","windowTopBarStyleDraggable","WindowTopBarTitle","WindowTopMenuButton","WindowTopBarPluginArea","WindowTopBarPluginMenu","handleMenuClick","handleMenuClose","menuIcon","hideWindowTitle","manifestTitle","TitleTypography","PluginHookWithHeader","WindowTopMenu","showThumbnailNavigationSettings","toggleDraggingEnabled","onExit","WindowOptionsIcon","BookViewIcon","GalleryViewIcon","WindowViewSettings","setWindowViewType","windowViewType","viewTypes","iconMap","book","gallery","scroll","single","Icon","OSDViewer","Workspace","allowNewWindows","workspaceId","maximizedWindows","zeroWindows","maximizedWindowIds","isWorkspaceControlPanelVisible","workspaceWithControlPanel","workspaceViewport","workspaceByType","WorkspaceAdd","setAddResourcesVisibility","scrollToTop","bool","behavior","catalog","manifestList","workspaceAdd","fab","displayNone","ModalProps","disablePortal","hideBackdrop","menuButton","typographyBody","WorkspaceAddButton","isWorkspaceAddVisible","useExtendedFab","primary","fabPrimary","secondary","fabSecondary","controlPanelVariant","lang","WorkspaceControlPanel","wide","workspaceButtons","branding","WorkspaceControlPanelButtons","WorkspaceElastic","workspace","elasticLayout","setWorkspaceViewportDimensions","setWorkspaceViewportPosition","viewportPosition","offsetX","offsetY","onResize","rect","onDragStop","draggingEnabled","WorkspaceElasticWindow","companionWindowDimensions","updateElasticWindowLayout","delta","parseInt","dragHandleClassName","WorkspaceExport","copied","onCopy","exportableState","autoHideDuration","action","accordionTitle","exportedState","CopyToClipboard","text","WorkspaceImport","configImportValue","handleImportConfig","importConfig","parse","ex","addError","onEscapeKeyDown","textField","multiline","rows","textInput","cancelBtn","NestedMenu","nestedMenuIsOpen","ListItemIcon","ListItemText","WorkspaceMenu","changeTheme","toggleZoom","workspaceSelection","handleMenuItemClick","handleMenuItemClose","toggleZoomControls","showZoomControls","showThemePicker","Menu","handleZoomToggleClick","afterSelect","WorkspaceSelectionDialog","WorkspaceMenuButton","WorkspaceMosaic","tileRenderer","mosaicChange","determineWorkspaceLayout","zeroStateView","windowPaths","toolbarControls","additionalControls","mosaicProps","updateWorkspaceMosaicLayout","newLayout","prevWindows","removedWindows","_newLayout","removeWindows","leaveKeys","addedWindows","addWindows","bookkeepPath","renderPreview","renderTile","initialValue","WorkspaceOptionsButton","WorkspaceOptionsMenu","exportWorkspace","importWorkspace","ElasticWorkspaceIcon","x1","y1","x2","gradientUnits","stopOpacity","stopColor","clipPath","stroke","strokeWidth","fillRule","cx","cy","WorkspaceTypeMosaicIcon","handleWorkspaceTypeChange","updateWorkspace","Dialog","DialogTitle","MenuList","Card","card","svgIcon","CardContent","headline","RestoreZoomIcon","ZoomControls","handleZoomInClick","handleZoomOutClick","zoom_controls","classNames","themes","dark","main","shades","light","notification","highlights","section_divider","globalAlpha","strokeStyle","fillStyle","typography","body1","letterSpacing","lineHeight","body2","textTransform","body1Next","body2Next","buttonNext","captionNext","overline","fontWeight","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","useNextVariants","overrides","MuiListSubheader","outline","MuiTooltip","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","MuiTouchRipple","childPulsate","rippleVisible","MuiButtonBase","disableTouchRipple","MuiLink","underline","availableLanguages","ar","de","en","fr","ja","kr","lt","nl","pl","vi","it","sr","sv","filteredMotivations","productionPrefix","requests","preprocessors","postprocessors","authNewWindowCenter","defaultView","forceDrawAnnotations","switchCanvasOnSearch","views","elastic","windows","thumbnails","preferredFormats","displaySettings","exposeModeOn","workspaceControlPanel","galleryView","alwaysBlend","blendTime","preserveImageSizeOnResize","preserveViewport","showNavigationControl","companionWindows","manifests","viewers","crossOrigin","auth","serviceProfiles","profile","external","kiosk","utils","Batch","batch","topLevel","bottomLevel","add","level","fn","process","fns","reporter","asyncProcess","getOption","autoProcess","warn","asyncFrameHandler","isProcessing","processBatch","processingBatch","processBatchAsync","setTimeout","force","localAsyncProcess","clearTimeout","defaultValue","hasOwn","arg","argType","inner","default","toVal","mix","tmp","deselectCurrent","clipboardToIE11Formatting","debug","reselectPrevious","range","selection","mark","createRange","getSelection","createElement","textContent","clip","whiteSpace","webkitUserSelect","MozUserSelect","msUserSelect","userSelect","stopPropagation","clipboardData","console","clearData","setData","appendChild","selectNodeContents","addRange","execCommand","Error","copyKey","navigator","userAgent","replace","prompt","removeRange","removeAllRanges","removeChild","getRect","center","expand","expandBy","shrinkBy","noSpacing","createBox","borderBox","_ref2$margin","_ref2$border","border","_ref2$padding","padding","marginBox","paddingBox","contentBox","raw","isNaN","original","change","shiftBy","shifted","withScroll","pageXOffset","pageYOffset","calculateBox","styles","marginTop","marginRight","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","getBox","el","getComputedStyle","js","css","vendor","browser","isTouch","documentElement","jsCssMap","Moz","ms","O","Webkit","prefix","supportedKeyframes","appearence","noPrefill","supportedProperty","prop","colorAdjust","regExp","toUpper","toUpperCase","camelize","pascalize","mask","longhand","textOrientation","transition","writingMode","breakPropsOld","inlineLogicalOld","newProp","unprefixed","prefixed","pascalized","scrollSnap","substring","overscrollBehavior","propMap","flex2012","propMap$1","propKeys","prefixCss","flex2009","multiple","propertyDetectors","computed","key$1","el$1","cache$1","transitionProperties","transPropsRegExp","prefixTransitionCallback","p1","p2","supportedValue","property","prefixedValue","cacheKey","isMergeableObject","isNonNullObject","stringValue","$$typeof","REACT_ELEMENT_TYPE","isReactElement","isSpecial","for","cloneUnlessOtherwiseSpecified","clone","deepmerge","defaultArrayMerge","element","getKeys","symbol","getEnumerableOwnPropertySymbols","propertyIsOnObject","_","arrayMerge","sourceIsArray","propertyIsUnsafe","customMerge","getMergeFunction","mergeObject","array","prev","deepmerge_1","INIT_COORDS","BEGIN_DRAG","PUBLISH_DRAG_SOURCE","HOVER","DROP","END_DRAG","strictEquality","b","areCoordsEqual","offsetA","offsetB","areArraysEqual","isEqual","initialState","initialSourceClientOffset","initialClientOffset","clientOffset","dragOffset","sourceClientOffset","ADD_SOURCE","ADD_TARGET","REMOVE_SOURCE","REMOVE_TARGET","split","without","isObject","xor","itemsA","itemsB","Map","insertItem","itemType","sourceId","targetIds","dropResult","didDrop","isSourcePublic","dragOperation","refCount","NONE","ALL","areDirty","dirtyIds","handlerIds","dirtyHandlerIds","_action$payload","_action$payload$targe","_action$payload$prevT","prevTargetIds","didChange","prevInnermostTargetId","innermostTargetId","stateId","__IS_NONE__","__IS_ALL__","setClientOffset","ResetCoordinatesAction","createBeginDrag","manager","sourceIds","publishSource","_options$publishSourc","getSourceClientOffset","getMonitor","registry","getRegistry","verifyInvariants","getDraggableSource","verifyGetSourceClientOffsetIsFunction","getSource","beginDrag","verifyItemIsObject","pinSource","getSourceType","canDragSource","createPublishDragSource","matchesType","targetType","draggedItemType","createHover","targetIdsArg","verifyTargetIdsIsArray","checkInvariants","getItemType","removeNonMatchingTargetIds","hoverAllTargets","lastIndexOf","getTarget","getTargetType","hover","createDrop","getDroppableTargets","determineDropResult","verifyDropResultType","getDropResult","getTargetIds","canDropOnTarget","reverse","createEndDrag","verifyIsDragging","getSourceId","endDrag","unpinSource","subtract","HandlerRole","DragDropMonitorImpl","store","listener","prevStateId","getState","currentStateId","subscribe","previousState","nextState","canDrag","shallow","nextUniqueId","validateType","allowArray","parseRoleFromHandlerId","handlerId","SOURCE","TARGET","mapContainsValue","searchValue","entries","isDone","_entries$next","HandlerRegistryImpl","dragSources","dropTargets","pinnedSourceId","pinnedSource","validateSourceContract","validateTargetContract","handler","includePinned","isSourceId","isPinned","isTargetId","delete","getNextHandlerId","makeStoreInstance","debugMode","reduxDevTools","__REDUX_DEVTOOLS_EXTENSION__","instanceId","DragDropManagerImpl","isSetUp","handleRefCountChange","shouldSetUp","setup","teardown","actions","publishDragSource","boundActions","actionCreator","_len","_key","createDragDropManager","backendFactory","globalContext","backendOptions","receiveBackend","check","_isMBTransition","TouchTransition","createTransition","touches","HTML5DragTransition","MouseTransition","PreviewManager","PreviewList","register","preview","previews","unregister","backendChanged","_step","_iterator","F","_e2","normalCompletion","didErr","step","_e3","return","_createForOfIteratorHelper","_default","sourceOptions","addEventListeners","backends","removeEventListeners","connectBackend","connectDragPreview","_len2","_key2","connectDropTarget","_len3","_key3","previewEnabled","backendSwitcher","removeEventListener","oldBackend","callBackend","func","newBackend","skipDispatchOnTransition","newEvent","createEvent","initEvent","bubbles","cancelable","dispatchEvent","_this2$backends$_this","_this2$nodes$nodeId","sources","objectAssign","isFrozen","freeze","seal","fun","thisValue","Func","arrayForEach","unapply","arrayPop","pop","arrayPush","stringToLowerCase","stringMatch","stringReplace","stringIndexOf","stringTrim","regExpTest","RegExp","typeErrorCreate","thisArg","addToSet","lcElement","newObject","lookupGetter","html","svg","svgFilters","svgDisallowed","mathMl","mathMlDisallowed","html$1","svg$1","mathMl$1","xml","MUSTACHE_EXPR","ERB_EXPR","DATA_ATTR","ARIA_ATTR","IS_ALLOWED_URI","IS_SCRIPT_OR_DATA","ATTR_WHITESPACE","DOCTYPE_NAME","_toConsumableArray$1","getGlobal","_createTrustedTypesPolicy","trustedTypes","createPolicy","suffix","ATTR_NAME","currentScript","hasAttribute","getAttribute","policyName","createHTML","html$$1","createDOMPurify","DOMPurify","version","nodeType","isSupported","originalDocument","DocumentFragment","HTMLTemplateElement","Node","Element","NodeFilter","_window$NamedNodeMap","NamedNodeMap","MozNamedAttrMap","HTMLFormElement","DOMParser","ElementPrototype","cloneNode","getNextSibling","getChildNodes","getParentNode","template","ownerDocument","trustedTypesPolicy","emptyHTML","_document","implementation","createNodeIterator","createDocumentFragment","getElementsByTagName","importNode","documentMode","hooks","createHTMLDocument","MUSTACHE_EXPR$$1","ERB_EXPR$$1","DATA_ATTR$$1","ARIA_ATTR$$1","IS_SCRIPT_OR_DATA$$1","ATTR_WHITESPACE$$1","IS_ALLOWED_URI$$1","ALLOWED_TAGS","DEFAULT_ALLOWED_TAGS","ALLOWED_ATTR","DEFAULT_ALLOWED_ATTR","CUSTOM_ELEMENT_HANDLING","tagNameCheck","attributeNameCheck","allowCustomizedBuiltInElements","FORBID_TAGS","FORBID_ATTR","ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","SAFE_FOR_TEMPLATES","WHOLE_DOCUMENT","SET_CONFIG","FORCE_BODY","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_TRUSTED_TYPE","SANITIZE_DOM","KEEP_CONTENT","IN_PLACE","USE_PROFILES","FORBID_CONTENTS","DEFAULT_FORBID_CONTENTS","DATA_URI_TAGS","DEFAULT_DATA_URI_TAGS","URI_SAFE_ATTRIBUTES","DEFAULT_URI_SAFE_ATTRIBUTES","MATHML_NAMESPACE","SVG_NAMESPACE","HTML_NAMESPACE","NAMESPACE","IS_EMPTY_INPUT","PARSER_MEDIA_TYPE","SUPPORTED_PARSER_MEDIA_TYPES","DEFAULT_PARSER_MEDIA_TYPE","transformCaseFunc","CONFIG","formElement","isRegexOrFunction","testValue","_parseConfig","cfg","ADD_URI_SAFE_ATTR","ADD_DATA_URI_TAGS","ALLOWED_URI_REGEXP","ADD_TAGS","ADD_ATTR","table","tbody","MATHML_TEXT_INTEGRATION_POINTS","HTML_INTEGRATION_POINTS","ALL_SVG_TAGS","ALL_MATHML_TAGS","_checkValidNamespace","parent","tagName","namespaceURI","parentTagName","commonSvgAndHTMLElements","_forceRemove","parentNode","outerHTML","remove","_removeAttribute","attribute","getAttributeNode","removeAttribute","_initDocument","dirty","doc","leadingWhitespace","matches","dirtyPayload","parseFromString","createDocument","innerHTML","insertBefore","createTextNode","childNodes","_createIterator","SHOW_ELEMENT","SHOW_COMMENT","SHOW_TEXT","_isClobbered","elm","nodeName","_isNode","_executeHook","entryPoint","currentNode","hook","_sanitizeElements","allowedTags","_basicCustomElementTest","_isValidAttribute","lcTag","lcName","_sanitizeAttributes","attr","hookEvent","attrName","attrValue","keepAttr","allowedAttributes","_attr","forceKeepAttr","setAttributeNS","_sanitizeShadowDOM","fragment","shadowNode","shadowIterator","nextNode","sanitize","importedNode","oldNode","returnNode","toStaticHTML","firstChild","nodeIterator","shadowroot","serializedHTML","doctype","setConfig","clearConfig","isValidAttribute","addHook","hookFunction","removeHook","removeHooks","removeAllHooks","factory","detector","isIE","agent","div","undef","isLegacyOpera","opera","callback","browserDetector","batchProcessor","stateHandler","buildCssTextString","rules","seperator","important","getObject","makeDetectable","OBJECT_STYLE","positionCheckPerformed","offsetWidth","offsetHeight","mutateDom","alterPositionStyles","setProperty","removeRelativeStyles","getNumericalValue","cssText","onload","getDocument","contentDocument","checkForObjectDocumentTimeoutId","objectDocument","startSize","injectObject","addListener","listenerProxy","proxy","attachEvent","uninstall","detachEvent","idHandler","hasState","scrollbarSizes","widthSize","clientWidth","heightSize","clientHeight","getScrollbarSizes","detectionContainerClass","initDocument","targetDocument","styleId","containerClass","getElementById","containerAnimationClass","method","head","styleElement","injectStyle","injectScrollStyle","addEvent","cb","removeEvent","getExpandElement","getShrinkElement","unshift","log","isUnrendered","getStyle","elementStyle","widthCSS","heightCSS","storeStyle","storeCurrentSize","lastWidth","lastHeight","getWidthOffset","getHeightOffset","getExpandWidth","getExpandHeight","positionScrollbars","expandWidth","expandHeight","shrinkWidth","getShrinkWidth","shrinkHeight","getShrinkHeight","scrollLeft","scrollTop","injectContainerElement","addAnimationClass","onAnimationStart","onRendered","injectScrollElements","rootContainer","scrollbarWidth","scrollbarHeight","containerContainerStyle","containerStyle","expandStyle","shrinkStyle","expandChildStyle","shrinkChildStyle","containerContainer","expandChild","shrinkChild","onExpandScroll","onShrinkScroll","onExpand","onShrink","registerListenersAndPositionElements","updateChildSizes","getExpandChildElement","updateDetectorElements","sizeChanged","areElementsInjected","notifyListenersIfNeeded","lastNotifiedWidth","lastNotifiedHeight","listeners","handleScroll","finalizeDomMutation","install","isInShadowRoot","getRootNode","contains","isInDocument","isDetached","elementUtilsMaker","listenerHandlerMaker","idGeneratorMaker","idHandlerMaker","reporterMaker","batchProcessorMaker","objectStrategyMaker","scrollStrategyMaker","toArray","isElement","idGenerator","defaultIdHandler","globalOptions","callOnAdd","detectionStrategy","eventListenerHandler","elementUtils","desiredStrategy","importantCssRules","strategyOptions","onReadyCallbacks","listenTo","elements","onResizeCallback","elementsReady","onReadyCallback","initState","isDetectable","isBusy","markBusy","markAsDetectable","removeListener","removeAllListeners","cleanState","busy","idCount","generate","eventListeners","getListeners","quiet","noop","attachFunction","_inheritsLoose","_objectSpread2","arrayWithHoles","unsupportedIterableToArray","nonIterableRest","_toArray","arrayLikeToArray","iterableToArray"],"sourceRoot":""}