{"version":3,"file":"vendors~2764c147-3ce069adec05e8982157.js","mappings":"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","sources":["webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/AnnotationSettings.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/AnnotationsOverlay.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/AppProviders.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/AudioViewer.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/BackgroundPluginArea.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/Branding.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/CanvasAnnotations.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/CanvasInfo.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/CanvasLayers.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/ChangeThemeDialog.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/CollapsibleSection.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/CollectionDialog.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/CollectionInfo.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/CompanionArea.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/CompanionWindow.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/extend/withRef.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/CompanionWindowFactory.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/ErrorContent.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/ErrorDialog.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/FullScreenButton.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/GalleryView.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/GalleryViewThumbnail.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/IIIFAuthentication.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/IIIFThumbnail.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/LanguageSettings.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/LocalePicker.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/ManifestForm.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/ManifestInfo.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/ManifestListItem.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/ManifestListItemError.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/ManifestRelatedLinks.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/MinimalWindow.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/MiradorMenuButton.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/MosaicRenderPreview.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/OpenSeadragonViewer.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/PrimaryWindow.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/SanitizedHtml.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/ScrollIndicatedDialogContent.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/SearchHit.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/SearchPanelControls.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/SearchPanelNavigation.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/SearchResults.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/SelectCollection.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/SidebarIndexItem.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/SidebarIndexList.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/SidebarIndexTableOfContents.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/SidebarIndexThumbnail.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/ThumbnailCanvasGrouping.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/VideoViewer.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/ViewerInfo.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/ViewerNavigation.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/Window.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowAuthenticationBar.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowCanvasNavigationControls.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowList.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowListButton.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowSideBar.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowSideBarButtons.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowThumbnailSettings.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowTopBar.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowTopBarPluginArea.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowTopBarPluginMenu.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowTopBarTitle.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowTopMenu.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowTopMenuButton.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowViewSettings.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowViewer.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/Workspace.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WorkspaceAdd.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WorkspaceAddButton.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WorkspaceArea.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WorkspaceControlPanel.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WorkspaceControlPanelButtons.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WorkspaceElastic.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WorkspaceElasticWindow.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WorkspaceExport.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WorkspaceImport.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WorkspaceMenu.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WorkspaceMenuButton.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WorkspaceMosaic.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/styles/react-mosaic-component.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WorkspaceOptionsButton.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WorkspaceOptionsMenu.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WorkspaceSelectionDialog.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/ZoomControls.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/extend/PluginContext.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/extend/pluginMapping.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/extend/PluginProvider.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/extend/withPlugins.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/i18n.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/extend/pluginValidation.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/extend/pluginPreprocessing.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/accessTokens.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/annotations.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/auth.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/catalog.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/companionWindows.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/config.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/elasticLayout.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/errors.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/infoResponses.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/layers.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/manifests.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/search.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/viewers.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/windows.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/workspace.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/rootReducer.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/sagas/iiif.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/sagas/windows.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/sagas/app.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/sagas/annotations.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/sagas/auth.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/sagas/index.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/createStore.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/createPluggableStore.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/MiradorViewer.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/init.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/index.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/index.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/AnnotationResource.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/AnnotationList.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/CanvasAnnotationDisplay.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/CanvasWorld.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/ThumbnailNavigation.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowSideBarAnnotationsPanel.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowSideBarInfoPanel.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowSideBarCanvasPanel.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/AttributionPanel.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/SearchPanel.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/LayersPanel.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/CustomPanel.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/CompanionWindowRegistry.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowSideBarCollectionPanel.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/MiradorCanvas.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/MiradorManifest.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/MosaicLayout.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/OpenSeadragonCanvasOverlay.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/ThumbnailFactory.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/TruncatedHit.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/asArray.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/htmlRules.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/readImageMetadata.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/plugins/OSDReferences.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/actions/action-types.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/actions/annotation.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/actions/auth.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/actions/canvas.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/actions/catalog.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/actions/companionWindow.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/actions/config.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/actions/elasticLayout.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/actions/errors.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/actions/infoResponse.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/actions/layers.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/actions/manifest.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/actions/search.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/actions/window.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/actions/workspace.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/AnnotationItem.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/AnnotationPage.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/AnnotationFactory.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/selectors/annotations.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/selectors/auth.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/CanvasGroupings.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/selectors/canvases.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/selectors/companionWindows.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/selectors/config.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/selectors/getters.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/selectors/layers.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/selectors/manifests.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/selectors/ranges.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/selectors/searches.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/selectors/sequences.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/selectors/utils.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/selectors/viewer.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/selectors/windows.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/selectors/workspace.js"],"sourcesContent":["import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport * as actions from '../state/actions';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getAnnotationResourcesByMotivation, getWindow } from '../state/selectors';\nimport { AnnotationSettings } from '../components/AnnotationSettings';\n/**\n * Mapping redux state to component props using connect\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    displayAll: getWindow(state, {\n      windowId: windowId\n    }).highlightAllAnnotations,\n    displayAllDisabled: getAnnotationResourcesByMotivation(state, {\n      windowId: windowId\n    }).length < 2\n  };\n};\n/**\n * Mapping redux action dispatches to component props using connect\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref2) {\n  var windowId = _ref2.windowId;\n  return {\n    toggleAnnotationDisplay: function toggleAnnotationDisplay() {\n      dispatch(actions.toggleAnnotationDisplay(windowId));\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), connect(mapStateToProps, mapDispatchToProps), withPlugins('AnnotationSettings'));\nexport default enhance(AnnotationSettings);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport { AnnotationsOverlay } from '../components/AnnotationsOverlay';\nimport * as actions from '../state/actions';\nimport { getWindow, getSearchAnnotationsForWindow, getCompanionWindowsForContent, getTheme, getConfig, getPresentAnnotationsOnSelectedCanvases, getSelectedAnnotationId, getCurrentCanvasWorld } from '../state/selectors';\n/**\n * mapStateToProps - used to hook up connect to action creators\n * @memberof Window\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    annotations: getPresentAnnotationsOnSelectedCanvases(state, {\n      windowId: windowId\n    }),\n    canvasWorld: getCurrentCanvasWorld(state, {\n      windowId: windowId\n    }),\n    drawAnnotations: getConfig(state).window.forceDrawAnnotations || getCompanionWindowsForContent(state, {\n      content: 'annotations',\n      windowId: windowId\n    }).length > 0,\n    drawSearchAnnotations: getConfig(state).window.forceDrawAnnotations || getCompanionWindowsForContent(state, {\n      content: 'search',\n      windowId: windowId\n    }).length > 0,\n    highlightAllAnnotations: getWindow(state, {\n      windowId: windowId\n    }).highlightAllAnnotations,\n    hoveredAnnotationIds: getWindow(state, {\n      windowId: windowId\n    }).hoveredAnnotationIds,\n    palette: getTheme(state).palette,\n    searchAnnotations: getSearchAnnotationsForWindow(state, {\n      windowId: windowId\n    }),\n    selectedAnnotationId: getSelectedAnnotationId(state, {\n      windowId: windowId\n    })\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestListItem\n * @private\n */\n\n\nvar mapDispatchToProps = {\n  deselectAnnotation: actions.deselectAnnotation,\n  hoverAnnotation: actions.hoverAnnotation,\n  selectAnnotation: actions.selectAnnotation\n};\nvar enhance = compose(withTranslation(), connect(mapStateToProps, mapDispatchToProps), withPlugins('AnnotationsOverlay'));\nexport default enhance(AnnotationsOverlay);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getConfig, getTheme, getFullScreenEnabled } from '../state/selectors';\nimport { AppProviders } from '../components/AppProviders';\n/**\n * mapStateToProps - to hook up connect\n * @memberof App\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    createGenerateClassNameOptions: getConfig(state).createGenerateClassNameOptions,\n    isFullscreenEnabled: getFullScreenEnabled(state),\n    language: getConfig(state).language,\n    theme: getTheme(state),\n    translations: getConfig(state).translations\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof App\n * @private\n */\n\n\nvar mapDispatchToProps = {\n  setWorkspaceFullscreen: actions.setWorkspaceFullscreen\n};\nvar enhance = compose(connect(mapStateToProps, mapDispatchToProps), withPlugins('AppProviders'));\nexport default enhance(AppProviders);","import { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport { withPlugins } from '../extend/withPlugins';\nimport { AudioViewer } from '../components/AudioViewer';\nimport { getConfig, getVisibleCanvasAudioResources, getVisibleCanvasCaptions } from '../state/selectors';\n/** */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    audioOptions: getConfig(state).audioOptions,\n    audioResources: getVisibleCanvasAudioResources(state, {\n      windowId: windowId\n    }) || [],\n    captions: getVisibleCanvasCaptions(state, {\n      windowId: windowId\n    }) || []\n  };\n};\n/** */\n\n\nvar styles = function styles() {\n  return {\n    audio: {\n      width: '100%'\n    },\n    container: {\n      alignItems: 'center',\n      display: 'flex',\n      width: '100%'\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, null), withPlugins('AudioViewer'));\nexport default enhance(AudioViewer);","import { withPlugins } from '../extend/withPlugins';\nimport { BackgroundPluginArea } from '../components/BackgroundPluginArea';\nexport default withPlugins('BackgroundPluginArea')(BackgroundPluginArea);","import { withPlugins } from '../extend/withPlugins';\nimport { Branding } from '../components/Branding';\nexport default withPlugins('Branding')(Branding);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getAnnotationResourcesByMotivationForCanvas, getCanvasLabel, getSelectedAnnotationId, getConfig } from '../state/selectors';\nimport { CanvasAnnotations } from '../components/CanvasAnnotations';\n/**\n * @param {Array} resources\n * @return {Array} [{ id: 'abc123', content: 'Annotation Content' }, ...]\n */\n\nfunction getIdAndContentOfResources(resources) {\n  return resources.map(function (resource, i) {\n    return {\n      content: resource.chars,\n      id: resource.id,\n      tags: resource.tags,\n      targetId: resource.targetId\n    };\n  });\n}\n/** For connect */\n\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var canvasId = _ref.canvasId,\n      windowId = _ref.windowId;\n  return {\n    annotations: getIdAndContentOfResources(getAnnotationResourcesByMotivationForCanvas(state, {\n      canvasId: canvasId,\n      windowId: windowId\n    })),\n    htmlSanitizationRuleSet: getConfig(state).annotations.htmlSanitizationRuleSet,\n    label: getCanvasLabel(state, {\n      canvasId: canvasId,\n      windowId: windowId\n    }),\n    selectedAnnotationId: getSelectedAnnotationId(state, {\n      windowId: windowId\n    })\n  };\n};\n/**\n * mapDispatchToProps - to hook up connect\n * @memberof WindowSideBarAnnotationsPanel\n * @private\n */\n\n\nvar mapDispatchToProps = {\n  deselectAnnotation: actions.deselectAnnotation,\n  hoverAnnotation: actions.hoverAnnotation,\n  selectAnnotation: actions.selectAnnotation\n};\n/** For withStlyes */\n\nvar styles = function styles(theme) {\n  return {\n    annotationListItem: {\n      '&$hovered': {\n        backgroundColor: theme.palette.action.hover\n      },\n      '&:hover,&:focus': {\n        backgroundColor: theme.palette.action.hover\n      },\n      borderBottom: \"0.5px solid \".concat(theme.palette.divider),\n      cursor: 'pointer',\n      whiteSpace: 'normal'\n    },\n    chip: {\n      backgroundColor: theme.palette.background.paper,\n      marginRight: theme.spacing(0.5),\n      marginTop: theme.spacing(1)\n    },\n    hovered: {},\n    sectionHeading: {\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(1),\n      paddingTop: theme.spacing(2)\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('CanvasAnnotations'));\nexport default enhance(CanvasAnnotations);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getDestructuredMetadata, getCanvas, getCanvasLabel, getCanvasDescription } from '../state/selectors';\nimport { CanvasInfo } from '../components/CanvasInfo';\n/**\n * mapStateToProps - to hook up connect\n * @memberof WindowSideBarInfoPanel\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var canvasId = _ref.canvasId,\n      id = _ref.id,\n      windowId = _ref.windowId;\n  return {\n    canvasDescription: getCanvasDescription(state, {\n      canvasId: canvasId,\n      companionWindowId: id,\n      windowId: windowId\n    }),\n    canvasLabel: getCanvasLabel(state, {\n      canvasId: canvasId,\n      companionWindowId: id,\n      windowId: windowId\n    }),\n    canvasMetadata: getDestructuredMetadata(getCanvas(state, {\n      canvasId: canvasId,\n      companionWindowId: id,\n      windowId: windowId\n    }))\n  };\n};\n\nvar enhance = compose(withTranslation(), connect(mapStateToProps), withPlugins('CanvasInfo'));\nexport default enhance(CanvasInfo);","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as actions from '../state/actions';\nimport { getCanvasLabel, getLayers, getSortedLayers } from '../state/selectors';\nimport { CanvasLayers } from '../components/CanvasLayers';\n/** For connect */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var canvasId = _ref.canvasId,\n      windowId = _ref.windowId;\n  return {\n    label: getCanvasLabel(state, {\n      canvasId: canvasId,\n      windowId: windowId\n    }),\n    layerMetadata: getLayers(state, {\n      canvasId: canvasId,\n      windowId: windowId\n    }),\n    layers: getSortedLayers(state, {\n      canvasId: canvasId,\n      windowId: windowId\n    })\n  };\n};\n/**\n * mapDispatchToProps - to hook up connect\n * @memberof WindowSideBarAnnotationsPanel\n * @private\n */\n\n\nvar mapDispatchToProps = {\n  updateLayers: actions.updateLayers\n};\n/** For withStlyes */\n\nvar styles = function styles(theme) {\n  return {\n    dragging: {},\n    dragHandle: {\n      alignItems: 'center',\n      borderRight: \"0.5px solid \".concat(theme.palette.divider),\n      display: 'flex',\n      flex: 1,\n      flexDirection: 'row',\n      marginBottom: -1 * theme.spacing(2) + 0.5,\n      marginRight: theme.spacing(1),\n      marginTop: -1 * theme.spacing(2),\n      maxWidth: theme.spacing(3),\n      width: theme.spacing(3)\n    },\n    image: {\n      borderBottom: \"1px solid \".concat(theme.palette.divider)\n    },\n    label: {\n      paddingLeft: theme.spacing(1)\n    },\n    list: {\n      paddingTop: 0\n    },\n    listItem: {\n      '& $dragHandle': {\n        '&:hover': {\n          backgroundColor: theme.palette.action.hover\n        },\n        backgroundColor: theme.palette.shades.light\n      },\n      '&$dragging': {\n        '& $dragHandle, & $dragHandle:hover': {\n          backgroundColor: theme.palette.action.selected\n        },\n        backgroundColor: theme.palette.action.hover\n      },\n      alignItems: 'stretch',\n      borderBottom: \"0.5px solid \".concat(theme.palette.divider),\n      cursor: 'pointer',\n      paddingBottom: theme.spacing(2),\n      paddingRight: theme.spacing(1),\n      paddingTop: theme.spacing(2)\n    },\n    opacityIcon: {\n      marginRight: theme.spacing(0.5)\n    },\n    opacityInput: _objectSpread(_objectSpread({}, theme.typography.caption), {}, {\n      '&::-webkit-outer-spin-button,&::-webkit-inner-spin-button': {\n        '-webkit-appearance': 'none',\n        margin: 0\n      },\n      '-moz-appearance': 'textfield',\n      textAlign: 'right',\n      width: '3ch'\n    }),\n    sectionHeading: {\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(1),\n      paddingTop: theme.spacing(2)\n    },\n    slider: {\n      marginLeft: theme.spacing(2),\n      marginRight: theme.spacing(2),\n      maxWidth: 150\n    },\n    thumbnail: {\n      minWidth: 50\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps));\nexport default enhance(CanvasLayers);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getThemeIds, getConfig } from '../state/selectors';\nimport { ChangeThemeDialog } from '../components/ChangeThemeDialog';\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ChangeThemeDialog\n * @private\n */\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    setSelectedTheme: function setSelectedTheme(theme) {\n      return dispatch(actions.updateConfig({\n        selectedTheme: theme\n      }));\n    }\n  };\n};\n/**\n * mapStateToProps - to hook up connect\n * @memberof ChangeThemeDialog\n * @private\n */\n\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    selectedTheme: getConfig(state).selectedTheme,\n    themeIds: getThemeIds(state)\n  };\n};\n/** */\n\n\nvar styles = function styles(theme) {\n  return {\n    dark: {\n      color: '#000000'\n    },\n    dialogContent: {\n      padding: 0\n    },\n    light: {\n      color: '#BDBDBD'\n    },\n    listitem: {\n      '&:focus': {\n        backgroundColor: theme.palette.action.focus\n      },\n      '&:hover': {\n        backgroundColor: theme.palette.action.hover\n      },\n      cursor: 'pointer'\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('ChangeThemeDialog'));\nexport default enhance(ChangeThemeDialog);","import { compose } from 'redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { CollapsibleSection } from '../components/CollapsibleSection';\nvar styles = {\n  button: {\n    padding: 0\n  },\n  container: {\n    display: 'flex',\n    justifyContent: 'space-between'\n  },\n  heading: {\n    cursor: 'pointer'\n  }\n};\nvar enhance = compose(withTranslation(), withStyles(styles));\nexport default enhance(CollapsibleSection);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getContainerId, getManifest, getManifestoInstance, getSequenceBehaviors, getWindow } from '../state/selectors';\nimport { CollectionDialog } from '../components/CollectionDialog';\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof CollectionDialog\n * @private\n */\n\nvar mapDispatchToProps = {\n  addWindow: actions.addWindow,\n  hideCollectionDialog: actions.hideCollectionDialog,\n  setWorkspaceAddVisibility: actions.setWorkspaceAddVisibility,\n  showCollectionDialog: actions.showCollectionDialog,\n  updateWindow: actions.updateWindow\n};\n/**\n * mapStateToProps - to hook up connect\n * @memberof CollectionDialog\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n\n  var _getWindow = getWindow(state, {\n    windowId: windowId\n  }),\n      collectionPath = _getWindow.collectionPath,\n      manifestId = _getWindow.collectionManifestId;\n\n  var manifest = getManifest(state, {\n    manifestId: manifestId\n  });\n  var collectionId = collectionPath && collectionPath[collectionPath.length - 1];\n  var collection = collectionId && getManifest(state, {\n    manifestId: collectionId\n  });\n  return {\n    collection: collection && getManifestoInstance(state, {\n      manifestId: collection.id\n    }),\n    collectionPath: collectionPath,\n    containerId: getContainerId(state),\n    error: manifest && manifest.error,\n    isMultipart: getSequenceBehaviors(state, {\n      manifestId: manifestId\n    }).includes('multi-part'),\n    manifest: manifest && getManifestoInstance(state, {\n      manifestId: manifestId\n    }),\n    manifestId: manifestId,\n    open: state.workspace.collectionDialogOn,\n    ready: manifest && !!manifest.json,\n    windowId: windowId\n  };\n};\n/** */\n\n\nvar styles = function styles(theme) {\n  return {\n    collectionFilter: {\n      padding: '16px',\n      paddingTop: 0\n    },\n    collectionItem: {\n      whiteSpace: 'normal'\n    },\n    collectionMetadata: {\n      padding: '16px'\n    },\n    dark: {\n      color: '#000000'\n    },\n    dialog: {\n      position: 'absolute !important'\n    },\n    dialogContent: {\n      padding: theme.spacing(1)\n    },\n    light: {\n      color: theme.palette.grey[400]\n    },\n    listitem: {\n      '&:focus': {\n        backgroundColor: theme.palette.action.focus\n      },\n      '&:hover': {\n        backgroundColor: theme.palette.action.hover\n      },\n      cursor: 'pointer'\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('CollectionDialog'));\nexport default enhance(CollectionDialog);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getManifestTitle, getWindow } from '../state/selectors';\nimport * as actions from '../state/actions';\nimport { CollectionInfo } from '../components/CollectionInfo';\n/**\n * mapStateToProps - to hook up connect\n * @memberof WindowSideBarInfoPanel\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var id = _ref.id,\n      windowId = _ref.windowId;\n\n  var _ref2 = getWindow(state, {\n    windowId: windowId\n  }) || {},\n      collectionPath = _ref2.collectionPath;\n\n  var manifestId = collectionPath[collectionPath.length - 1];\n  return {\n    collectionLabel: getManifestTitle(state, {\n      manifestId: manifestId\n    }),\n    collectionPath: collectionPath\n  };\n};\n\nvar mapDispatchToProps = {\n  showCollectionDialog: actions.showCollectionDialog\n};\nvar enhance = compose(withTranslation(), connect(mapStateToProps, mapDispatchToProps), withPlugins('CollectionInfo'));\nexport default enhance(CollectionInfo);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getCompanionWindowIdsForPosition, getCompanionAreaVisibility, getThemeDirection, getWindow } from '../state/selectors';\nimport * as actions from '../state/actions';\nimport { CompanionArea } from '../components/CompanionArea';\n/** */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId,\n      position = _ref.position;\n  return {\n    companionAreaOpen: getCompanionAreaVisibility(state, {\n      position: position,\n      windowId: windowId\n    }),\n    companionWindowIds: getCompanionWindowIdsForPosition(state, {\n      position: position,\n      windowId: windowId\n    }),\n    direction: getThemeDirection(state),\n    sideBarOpen: (getWindow(state, {\n      windowId: windowId\n    }) || {}).sideBarOpen\n  };\n};\n\nvar mapDispatchToProps = {\n  setCompanionAreaOpen: actions.setCompanionAreaOpen\n};\n/** */\n\nvar styles = function styles(theme) {\n  return {\n    horizontal: {\n      flexDirection: 'column',\n      width: '100%'\n    },\n    left: {\n      minWidth: 235\n    },\n    root: {\n      display: 'flex',\n      minHeight: 0,\n      position: 'relative',\n      zIndex: theme.zIndex.appBar - 2\n    },\n    toggle: {\n      backgroundColor: theme.palette.background.paper,\n      border: \"1px solid \".concat(theme.palette.shades.dark),\n      borderRadius: 0,\n      height: '48px',\n      left: '100%',\n      marginTop: '1rem',\n      padding: 2,\n      position: 'absolute',\n      width: '23px',\n      zIndex: theme.zIndex.drawer\n    },\n    toggleButton: {\n      marginBottom: 12,\n      marginTop: 12,\n      padding: 0\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('CompanionArea'));\nexport default enhance(CompanionArea);","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport { withSize } from 'react-sizeme';\nimport { withPlugins } from '../extend/withPlugins';\nimport { withRef } from '../extend/withRef';\nimport * as actions from '../state/actions';\nimport { getCompanionWindow, getThemeDirection, getWindowConfig } from '../state/selectors';\nimport { CompanionWindow } from '../components/CompanionWindow';\n/**\n * mapStateToProps - to hook up connect\n * @memberof CompanionWindow\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var id = _ref.id,\n      windowId = _ref.windowId;\n  var companionWindow = getCompanionWindow(state, {\n    companionWindowId: id\n  });\n\n  var _getWindowConfig = getWindowConfig(state, {\n    windowId: windowId\n  }),\n      defaultSidebarPanelHeight = _getWindowConfig.defaultSidebarPanelHeight,\n      defaultSidebarPanelWidth = _getWindowConfig.defaultSidebarPanelWidth;\n\n  return _objectSpread(_objectSpread({}, companionWindow), {}, {\n    defaultSidebarPanelHeight: defaultSidebarPanelHeight,\n    defaultSidebarPanelWidth: defaultSidebarPanelWidth,\n    direction: getThemeDirection(state),\n    isDisplayed: companionWindow && companionWindow.content && companionWindow.content.length > 0\n  });\n};\n/**\n * mapDispatchToProps - to hook up connect\n * @memberof CompanionWindow\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref2) {\n  var windowId = _ref2.windowId,\n      id = _ref2.id;\n  return {\n    onCloseClick: function onCloseClick() {\n      return dispatch(actions.removeCompanionWindow(windowId, id));\n    },\n    updateCompanionWindow: function updateCompanionWindow() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return dispatch(actions.updateCompanionWindow.apply(actions, [windowId, id].concat(args)));\n    }\n  };\n};\n/**\n *\n * @param theme\n * @returns {{closeButton: {top: number, position: string, right: number},\n * root: {overflowY: string, width: string}}}\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    closeButton: {\n      order: 4\n    },\n    'companionWindow-bottom': {\n      borderTop: \"0.5px solid \".concat(theme.palette.divider)\n    },\n    'companionWindow-left': {\n      borderRight: \"0.5px solid \".concat(theme.palette.divider)\n    },\n    'companionWindow-right': {\n      borderLeft: \"0.5px solid \".concat(theme.palette.divider)\n    },\n    companionWindowHeader: {\n      flexWrap: 'wrap'\n    },\n    companionWindowTitleControls: {\n      flexGrow: 1,\n      order: 1000\n    },\n    companionWindowTitleControlsBottom: {\n      order: 'unset'\n    },\n    content: {\n      overflowY: 'auto',\n      wordBreak: 'break-word'\n    },\n    horizontal: {},\n    positionButton: {\n      marginLeft: -16,\n      order: -100,\n      width: 24\n    },\n    rnd: {\n      display: 'flex',\n      flexDirection: 'column',\n      minHeight: 0\n    },\n    root: {\n      boxShadow: 'none',\n      boxSizing: 'border-box',\n      display: 'flex',\n      flexDirection: 'column',\n      minHeight: 0\n    },\n    small: {},\n    titleControls: {\n      alignItems: 'center',\n      display: 'flex',\n      flexFlow: 'row wrap',\n      minHeight: 48,\n      order: 3\n    },\n    toolbar: {\n      '&$small': {\n        '& $closeButton': {\n          order: 'unset'\n        },\n        '& $titleControls': {\n          order: 'unset'\n        }\n      },\n      alignItems: 'flex-start',\n      background: theme.palette.shades.light,\n      justifyContent: 'space-between',\n      minHeight: 'max-content',\n      paddingLeft: theme.spacing(2)\n    },\n    vertical: {},\n    windowSideBarTitle: _objectSpread(_objectSpread({}, theme.typography.subtitle1), {}, {\n      alignSelf: 'center',\n      flexGrow: 1,\n      width: 160\n    })\n  };\n};\n\nvar enhance = compose(withRef(), withTranslation(), withStyles(styles), withSize(), connect(mapStateToProps, mapDispatchToProps), withPlugins('CompanionWindow'));\nexport default enhance(CompanionWindow);","import React, { forwardRef } from 'react';\n/** */\n\nexport var withRef = function withRef() {\n  return function (Component) {\n    var WithRefs = /*#__PURE__*/forwardRef(function (props, ref) {\n      return /*#__PURE__*/React.createElement(Component, Object.assign({\n        innerRef: ref\n      }, props));\n    });\n    return WithRefs;\n  };\n};","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getCompanionWindow } from '../state/selectors';\nimport { CompanionWindowFactory } from '../components/CompanionWindowFactory';\n/**\n * mapStateToProps - to hook up connect\n * @memberof CompanionWindow\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var id = _ref.id;\n  var companionWindow = getCompanionWindow(state, {\n    companionWindowId: id\n  });\n  return {\n    content: companionWindow.content,\n    id: id\n  };\n};\n\nvar enhance = compose(withTranslation(), connect(mapStateToProps), withPlugins('CompanionWindowFactory'));\nexport default enhance(CompanionWindowFactory);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { ErrorContent } from '../components/ErrorContent';\nimport { getCompanionWindow, getManifest, getWindow, getViewer, getConfig } from '../state/selectors';\n/** mapStateToProps */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var companionWindowId = _ref.companionWindowId,\n      windowId = _ref.windowId;\n  return {\n    metadata: {\n      companionWindow: companionWindowId && getCompanionWindow(state, {\n        companionWindowId: companionWindowId\n      }),\n      manifest: getManifest(state, {\n        windowId: windowId\n      }),\n      viewer: getViewer(state, {\n        windowId: windowId\n      }),\n      window: getWindow(state, {\n        windowId: windowId\n      })\n    },\n    showJsError: getConfig(state).window.showJsError\n  };\n};\n/**\n * @param theme\n * @returns {{typographyBody: {flexGrow: number, fontSize: number|string},\n * windowTopBarStyle: {minHeight: number, paddingLeft: number, backgroundColor: string}}}\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    alert: {\n      '& $icon': {\n        color: theme.palette.error.main\n      },\n      backgroundColor: theme.palette.error.main,\n      color: '#fff',\n      fontWeight: theme.typography.fontWeightMedium\n    },\n    details: {\n      '& pre': {\n        height: '100px',\n        overflowY: 'scroll'\n      },\n      flexDirection: 'column'\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps), withPlugins('ErrorContent'));\nexport default enhance(ErrorContent);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport { ErrorDialog } from '../components/ErrorDialog';\nimport * as actions from '../state/actions';\nimport { getLatestError } from '../state/selectors';\n/**\n * mapStateToProps - to hook up connect\n * @memberof ErrorDialog\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    error: getLatestError(state)\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof App\n * @private\n */\n\n\nvar mapDispatchToProps = {\n  removeError: actions.removeError\n};\nvar enhance = compose(withTranslation(), connect(mapStateToProps, mapDispatchToProps), withPlugins('ErrorDialog'));\nexport default enhance(ErrorDialog);","import { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getFullScreenEnabled } from '../state/selectors';\nimport { FullScreenButton } from '../components/FullScreenButton';\n/**\n * mapStateToProps - to hook up connect\n * @memberof FullScreenButton\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    isFullscreenEnabled: getFullScreenEnabled(state)\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestListItem\n * @private\n */\n\n\nvar mapDispatchToProps = {\n  setWorkspaceFullscreen: actions.setWorkspaceFullscreen\n};\nvar enhance = compose(withTranslation(), connect(mapStateToProps, mapDispatchToProps), withPlugins('FullScreenButton'));\nexport default enhance(FullScreenButton);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { GalleryView } from '../components/GalleryView';\nimport { getCanvases, getSequenceViewingDirection } from '../state/selectors';\n/**\n * mapStateToProps - to hook up connect\n * @memberof WindowViewer\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    canvases: getCanvases(state, {\n      windowId: windowId\n    }),\n    viewingDirection: getSequenceViewingDirection(state, {\n      windowId: windowId\n    })\n  };\n};\n/**\n * Styles to be passed to the withStyles HOC\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    galleryContainer: {\n      alignItems: 'flex-start',\n      display: 'flex',\n      flexDirection: 'row',\n      flexWrap: 'wrap',\n      overflowX: 'hidden',\n      overflowY: 'scroll',\n      padding: '50px 0 50px 20px',\n      width: '100%'\n    }\n  };\n};\n\nvar enhance = compose(withStyles(styles), connect(mapStateToProps), withPlugins('GalleryView') // further HOC go here\n);\nexport default enhance(GalleryView);","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport flatten from 'lodash/flatten';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as actions from '../state/actions';\nimport { GalleryViewThumbnail } from '../components/GalleryViewThumbnail';\nimport { getSearchAnnotationsForWindow, getCurrentCanvas, getConfig, getPresentAnnotationsOnSelectedCanvases, getCompanionWindowsForContent } from '../state/selectors';\n/**\n * Styles to be passed to the withStyles HOC\n */\n\nvar styles = function styles(theme) {\n  return {\n    annotationIcon: {\n      height: '1rem',\n      width: '1rem'\n    },\n    annotationsChip: _objectSpread({}, theme.typography.caption),\n    avatar: {\n      backgroundColor: 'transparent'\n    },\n    chips: {\n      opacity: 0.875,\n      position: 'absolute',\n      right: 0,\n      textAlign: 'right',\n      top: 0\n    },\n    galleryViewItem: {\n      '&$hasAnnotations': {\n        border: \"2px solid \".concat(theme.palette.action.selected)\n      },\n      '&$selected,&$selected$hasAnnotations': {\n        border: \"2px solid \".concat(theme.palette.primary.main)\n      },\n      '&:focus': {\n        outline: 'none'\n      },\n      '&:hover': {\n        backgroundColor: theme.palette.action.hover\n      },\n      border: '2px solid transparent',\n      cursor: 'pointer',\n      display: 'inline-block',\n      margin: \"\".concat(theme.spacing(1), \"px \").concat(theme.spacing(0.5), \"px\"),\n      maxHeight: function maxHeight(props) {\n        return props.config.height + 45;\n      },\n      minWidth: '60px',\n      overflow: 'hidden',\n      padding: theme.spacing(0.5),\n      position: 'relative',\n      width: 'min-content'\n    },\n    hasAnnotations: {},\n    searchChip: _objectSpread(_objectSpread({}, theme.typography.caption), {}, {\n      '&$selected $avatar': {\n        backgroundColor: theme.palette.highlights.primary\n      },\n      marginTop: 2\n    }),\n    selected: {}\n  };\n};\n/** */\n\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var canvas = _ref.canvas,\n      windowId = _ref.windowId;\n  var currentCanvas = getCurrentCanvas(state, {\n    windowId: windowId\n  });\n  var searchAnnotations = getSearchAnnotationsForWindow(state, {\n    windowId: windowId\n  });\n  var canvasAnnotations = flatten(searchAnnotations.map(function (a) {\n    return a.resources;\n  })).filter(function (a) {\n    return a.targetId === canvas.id;\n  });\n  var hasOpenAnnotationsWindow = getCompanionWindowsForContent(state, {\n    content: 'annotations',\n    windowId: windowId\n  }).length > 0;\n  return {\n    annotationsCount: function () {\n      if (!hasOpenAnnotationsWindow) return undefined;\n      var annotations = getPresentAnnotationsOnSelectedCanvases(state, {\n        canvasId: canvas.id\n      });\n      return annotations.reduce(function (v, a) {\n        return v + a.resources.filter(function (r) {\n          return r.targetId === canvas.id;\n        }).length;\n      }, 0);\n    }(),\n    config: getConfig(state).galleryView,\n    searchAnnotationsCount: canvasAnnotations.length,\n    selected: currentCanvas && currentCanvas.id === canvas.id\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof WindowViewer\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref2) {\n  var canvas = _ref2.canvas,\n      id = _ref2.id,\n      windowId = _ref2.windowId;\n  return {\n    focusOnCanvas: function focusOnCanvas() {\n      return dispatch(actions.setWindowViewType(windowId, 'single'));\n    },\n    requestCanvasAnnotations: function requestCanvasAnnotations() {\n      return dispatch(actions.requestCanvasAnnotations(windowId, canvas.id));\n    },\n    setCanvas: function setCanvas() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return dispatch(actions.setCanvas.apply(actions, [windowId].concat(args)));\n    }\n  };\n};\n\nvar enhance = compose(connect(mapStateToProps, mapDispatchToProps), withStyles(styles) // further HOC go here\n);\nexport default enhance(GalleryViewThumbnail);","import { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { withTranslation } from 'react-i18next';\nimport { Utils } from 'manifesto.js';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getAuth, getAuthProfiles, selectCurrentAuthServices, getAccessTokens } from '../state/selectors';\nimport { IIIFAuthentication } from '../components/IIIFAuthentication';\n/**\n * mapStateToProps - to hook up connect\n * @memberof FullScreenButton\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  var services = selectCurrentAuthServices(state, {\n    windowId: windowId\n  }); // TODO: get the most actionable auth service...\n\n  var service = services[0];\n  var accessTokenService = service && (Utils.getService(service, 'http://iiif.io/api/auth/1/token') || Utils.getService(service, 'http://iiif.io/api/auth/0/token'));\n  var logoutService = service && (Utils.getService(service, 'http://iiif.io/api/auth/1/logout') || Utils.getService(service, 'http://iiif.io/api/auth/0/logout'));\n  var authStatuses = getAuth(state);\n  var authStatus = service && authStatuses[service.id];\n  var accessTokens = getAccessTokens(state);\n  var accessTokenStatus = accessTokenService && accessTokens[accessTokenService.id];\n  var status = null;\n\n  if (!authStatus) {\n    status = null;\n  } else if (authStatus.isFetching) {\n    if (authStatus.windowId === windowId) status = 'cookie';\n  } else if (accessTokenStatus && accessTokenStatus.isFetching) {\n    if (authStatus.windowId === windowId) status = 'token';\n  } else if (authStatus.ok) {\n    status = 'ok';\n  } else if (authStatus.ok === false) {\n    status = 'failed';\n  }\n\n  var authProfiles = getAuthProfiles(state);\n  var profile = service && service.getProfile();\n  var isInteractive = authProfiles.some(function (config) {\n    return config.profile === profile && !(config.external || config.kiosk);\n  });\n  return {\n    accessTokenServiceId: accessTokenService && accessTokenService.id,\n    authServiceId: service && service.id,\n    confirm: service && service.getConfirmLabel(),\n    description: service && service.getDescription(),\n    failureDescription: service && service.getFailureDescription(),\n    failureHeader: service && service.getFailureHeader(),\n    header: service && service.getHeader(),\n    isInteractive: isInteractive,\n    label: service && service.getLabel()[0].value,\n    logoutConfirm: logoutService && logoutService.getLabel()[0] && logoutService.getLabel()[0].value,\n    logoutServiceId: logoutService && logoutService.id,\n    profile: profile,\n    status: status\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestListItem\n * @private\n */\n\n\nvar mapDispatchToProps = {\n  handleAuthInteraction: actions.addAuthenticationRequest,\n  resetAuthenticationState: actions.resetAuthenticationState,\n  resolveAccessTokenRequest: actions.resolveAccessTokenRequest,\n  resolveAuthenticationRequest: actions.resolveAuthenticationRequest\n};\nvar enhance = compose(withTranslation(), connect(mapStateToProps, mapDispatchToProps), withPlugins('IIIFAuthentication'));\nexport default enhance(IIIFAuthentication);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getConfig } from '../state/selectors';\nimport { IIIFThumbnail } from '../components/IIIFThumbnail';\n/**\n * mapStateToProps - to hook up connect\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    thumbnailsConfig: getConfig(state).thumbnails\n  };\n};\n/**\n * Styles for withStyles HOC\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    caption: {\n      lineHeight: '1.5em',\n      wordBreak: 'break-word'\n    },\n    image: {},\n    insideCaption: {\n      color: '#ffffff',\n      lineClamp: '1',\n      whiteSpace: 'nowrap'\n    },\n    insideLabel: {\n      background: 'linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 70%, rgba(0,0,0,0) 100%)',\n      bottom: '5px',\n      boxSizing: 'border-box',\n      left: '0px',\n      padding: '4px',\n      position: 'absolute',\n      width: '100%'\n    },\n    insideRoot: {\n      display: 'inline-block',\n      height: 'inherit',\n      position: 'relative'\n    },\n    label: {\n      overflow: 'hidden',\n      textOverflow: 'ellipsis'\n    },\n    outsideCaption: {\n      boxOrient: 'vertical',\n      display: '-webkit-box',\n      lineClamp: '2',\n      maxHeight: '3em'\n    },\n    outsideLabel: {},\n    outsideRoot: {},\n    root: {}\n  };\n};\n\nvar enhance = compose(withStyles(styles), withTranslation(), connect(mapStateToProps), withPlugins('IIIFThumbnail'));\nexport default enhance(IIIFThumbnail);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getLanguagesFromConfigWithCurrent } from '../state/selectors';\nimport { LanguageSettings } from '../components/LanguageSettings';\n/**\n * Map state to props for connect\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    languages: getLanguagesFromConfigWithCurrent(state)\n  };\n};\n/**\n * Map action dispatches to props for connect\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref) {\n  var afterSelect = _ref.afterSelect;\n  return {\n    handleClick: function handleClick(language) {\n      dispatch(actions.updateConfig({\n        language: language\n      }));\n      afterSelect && afterSelect();\n    }\n  };\n};\n\nexport default compose(connect(mapStateToProps, mapDispatchToProps), withPlugins('LanguageSettings'))(LanguageSettings);","import { compose } from 'redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { LocalePicker } from '../components/LocalePicker';\n/**\n *\n * @param theme\n * @returns {label: {paddingLeft: number}}}\n */\n\nvar styles = function styles(theme) {\n  return {\n    select: {\n      '&:focus': {\n        backgroundColor: theme.palette.background.paper\n      }\n    },\n    selectEmpty: {\n      backgroundColor: theme.palette.background.paper\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles));\nexport default enhance(LocalePicker);","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { ManifestForm } from '../components/ManifestForm';\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestForm\n * @private\n */\n\nvar mapDispatchToProps = {\n  addResource: actions.addResource\n};\n/**\n *\n * @param theme\n */\n\nvar styles = function styles(theme) {\n  return {\n    buttons: _defineProperty({\n      textAlign: 'right'\n    }, theme.breakpoints.up('sm'), {\n      textAlign: 'inherit'\n    }),\n    input: _objectSpread({}, theme.typography.body1)\n  };\n};\n\nvar enhance = compose(withStyles(styles), withTranslation(), connect(null, mapDispatchToProps), withPlugins('ManifestForm'));\nexport default enhance(ManifestForm);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getManifestDescription, getManifestTitle, getManifestMetadata } from '../state/selectors';\nimport { ManifestInfo } from '../components/ManifestInfo';\n/**\n * mapStateToProps - to hook up connect\n * @memberof WindowSideBarInfoPanel\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var id = _ref.id,\n      manifestId = _ref.manifestId,\n      windowId = _ref.windowId;\n  return {\n    manifestDescription: getManifestDescription(state, {\n      companionWindowId: id,\n      manifestId: manifestId,\n      windowId: windowId\n    }),\n    manifestLabel: getManifestTitle(state, {\n      companionWindowId: id,\n      manifestId: manifestId,\n      windowId: windowId\n    }),\n    manifestMetadata: getManifestMetadata(state, {\n      companionWindowId: id,\n      manifestId: manifestId,\n      windowId: windowId\n    })\n  };\n};\n\nvar enhance = compose(withTranslation(), connect(mapStateToProps), withPlugins('ManifestInfo'));\nexport default enhance(ManifestInfo);","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getManifest, getManifestTitle, getManifestThumbnail, getCanvases, getManifestLogo, getManifestProvider, getWindowManifests, getManifestoInstance, getSequenceBehaviors } from '../state/selectors';\nimport * as actions from '../state/actions';\nimport { ManifestListItem } from '../components/ManifestListItem';\n/** */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var manifestId = _ref.manifestId,\n      provider = _ref.provider;\n  var manifest = getManifest(state, {\n    manifestId: manifestId\n  }) || {};\n  var manifesto = getManifestoInstance(state, {\n    manifestId: manifestId\n  });\n  var isCollection = (manifesto || {\n    isCollection: function isCollection() {\n      return false;\n    }\n  }).isCollection();\n  var size = isCollection ? manifesto.getTotalItems() : getCanvases(state, {\n    manifestId: manifestId\n  }).length;\n  return {\n    active: getWindowManifests(state).includes(manifestId),\n    error: manifest.error,\n    isCollection: isCollection,\n    isFetching: manifest.isFetching,\n    isMultipart: isCollection && getSequenceBehaviors(state, {\n      manifestId: manifestId\n    }).includes('multi-part'),\n    manifestLogo: getManifestLogo(state, {\n      manifestId: manifestId\n    }),\n    provider: provider || getManifestProvider(state, {\n      manifestId: manifestId\n    }),\n    ready: !!manifest.json,\n    size: size,\n    thumbnail: getManifestThumbnail(state, {\n      manifestId: manifestId\n    }),\n    title: getManifestTitle(state, {\n      manifestId: manifestId\n    })\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestListItem\n * @private\n */\n\n\nvar mapDispatchToProps = {\n  addWindow: actions.addWindow,\n  fetchManifest: actions.fetchManifest\n};\n/**\n *\n * @param theme\n * @returns {{root: {}, label: {textAlign: string, textTransform: string}}}\n */\n\nvar styles = function styles(theme) {\n  return {\n    active: {},\n    buttonGrid: {},\n    label: {\n      textAlign: 'left',\n      textTransform: 'initial'\n    },\n    logo: {\n      height: '2.5rem',\n      maxWidth: '100%',\n      objectFit: 'contain',\n      paddingRight: 8\n    },\n    placeholder: {\n      backgroundColor: theme.palette.grey[300]\n    },\n    root: _objectSpread(_objectSpread({}, theme.mixins.gutters()), {}, {\n      '&$active': {\n        borderLeft: \"4px solid \".concat(theme.palette.primary.main)\n      },\n      '&:hover,&:focus-within': {\n        '&$active': {\n          borderLeft: \"4px solid \".concat(theme.palette.primary.main)\n        },\n        backgroundColor: theme.palette.action.hover,\n        borderLeft: \"4px solid \".concat(theme.palette.action.hover)\n      },\n      borderLeft: '4px solid transparent'\n    }),\n    thumbnail: {\n      maxWidth: '100%',\n      objectFit: 'contain'\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('ManifestListItem'));\nexport default enhance(ManifestListItem);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { fetchManifest, removeResource } from '../state/actions';\nimport { ManifestListItemError } from '../components/ManifestListItemError';\n/** */\n\nvar mapDispatchToProps = {\n  onDismissClick: removeResource,\n  onTryAgainClick: fetchManifest\n};\n/**\n *\n * @param theme\n * @returns {{manifestIdText: {wordBreak: string},\n * errorIcon: {color: string, width: string, height: string}}}\n */\n\nvar styles = function styles(theme) {\n  return {\n    errorIcon: {\n      color: theme.palette.error.main,\n      height: '2rem',\n      width: '2rem'\n    },\n    manifestIdText: {\n      wordBreak: 'break-all'\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(null, mapDispatchToProps), withPlugins('ManifestListItemError'));\nexport default enhance(ManifestListItemError);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getManifestHomepage, getManifestRelated, getManifestRenderings, getManifestSeeAlso, getManifestUrl } from '../state/selectors';\nimport { ManifestRelatedLinks } from '../components/ManifestRelatedLinks';\n/**\n * mapStateToProps - to hook up connect\n * @memberof WindowSideBarInfoPanel\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var id = _ref.id,\n      windowId = _ref.windowId;\n  return {\n    homepage: getManifestHomepage(state, {\n      windowId: windowId\n    }),\n    manifestUrl: getManifestUrl(state, {\n      windowId: windowId\n    }),\n    related: getManifestRelated(state, {\n      windowId: windowId\n    }),\n    renderings: getManifestRenderings(state, {\n      windowId: windowId\n    }),\n    seeAlso: getManifestSeeAlso(state, {\n      windowId: windowId\n    })\n  };\n};\n\nvar styles = {\n  labelValueMetadata: {\n    '& dd': {\n      marginBottom: '.5em',\n      marginLeft: '0'\n    }\n  }\n};\nvar enhance = compose(withStyles(styles), withTranslation(), connect(mapStateToProps), withPlugins('ManifestRelatedLinks'));\nexport default enhance(ManifestRelatedLinks);","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { MinimalWindow } from '../components/MinimalWindow';\nimport { getWindowConfig } from '../state/selectors';\n/** mapStateToProps */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    allowClose: getWindowConfig(state, {\n      windowId: windowId\n    }).allowClose,\n    allowWindowSideBar: getWindowConfig(state, {\n      windowId: windowId\n    }).allowWindowSideBar\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestListItem\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref2) {\n  var windowId = _ref2.windowId;\n  return {\n    removeWindow: function removeWindow() {\n      return dispatch(actions.removeWindow(windowId));\n    }\n  };\n};\n/**\n * @param theme\n * @returns {{typographyBody: {flexGrow: number, fontSize: number|string},\n * windowTopBarStyle: {minHeight: number, paddingLeft: number, backgroundColor: string}}}\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    button: {\n      marginLeft: 'auto'\n    },\n    title: _objectSpread(_objectSpread({}, theme.typography.h6), {}, {\n      flexGrow: 1,\n      paddingLeft: theme.spacing(0.5)\n    }),\n    window: {\n      backgroundColor: theme.palette.shades.dark,\n      borderRadius: 0,\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%',\n      minHeight: 0,\n      overflow: 'hidden',\n      width: '100%'\n    },\n    windowTopBarStyle: {\n      backgroundColor: theme.palette.shades.main,\n      borderTop: '2px solid transparent',\n      minHeight: 32,\n      paddingLeft: theme.spacing(0.5),\n      paddingRight: theme.spacing(0.5)\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('MinimalWindow'));\nexport default enhance(MinimalWindow);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withPlugins } from '../extend/withPlugins';\nimport { MiradorMenuButton } from '../components/MiradorMenuButton';\nimport { getContainerId } from '../state/selectors';\n/** */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    containerId: getContainerId(state)\n  };\n};\n\nvar enhance = compose(connect(mapStateToProps, null), withPlugins('MiradorMenuButton'));\nexport default enhance(MiradorMenuButton);","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getManifestTitle } from '../state/selectors';\nimport { MosaicRenderPreview } from '../components/MosaicRenderPreview';\n/** */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    title: getManifestTitle(state, {\n      windowId: windowId\n    })\n  };\n};\n/**\n *\n * @param theme\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    preview: _objectSpread({}, theme.typography.h4)\n  };\n};\n\nvar enhance = compose(withStyles(styles), withTranslation(), connect(mapStateToProps, null), withPlugins('MosaicRenderPreview'));\nexport default enhance(MosaicRenderPreview);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport flatten from 'lodash/flatten';\nimport { withPlugins } from '../extend/withPlugins';\nimport { OpenSeadragonViewer } from '../components/OpenSeadragonViewer';\nimport * as actions from '../state/actions';\nimport { getVisibleCanvasNonTiledResources, getCurrentCanvas, getCanvasLabel, getViewer, getConfig, getCompanionWindowsForContent, selectInfoResponses, getCurrentCanvasWorld } from '../state/selectors';\n/**\n * mapStateToProps - used to hook up connect to action creators\n * @memberof Window\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  var canvasWorld = getCurrentCanvasWorld(state, {\n    windowId: windowId\n  });\n  var infoResponses = selectInfoResponses(state);\n  var imageServiceIds = flatten(canvasWorld.canvases.map(function (c) {\n    return c.imageServiceIds;\n  }));\n  return {\n    canvasWorld: canvasWorld,\n    drawAnnotations: getConfig(state).window.forceDrawAnnotations || getCompanionWindowsForContent(state, {\n      content: 'annotations',\n      windowId: windowId\n    }).length > 0 || getCompanionWindowsForContent(state, {\n      content: 'search',\n      windowId: windowId\n    }).length > 0,\n    infoResponses: imageServiceIds.map(function (id) {\n      return infoResponses[id];\n    }).filter(function (infoResponse) {\n      return infoResponse !== undefined && infoResponse.isFetching === false && infoResponse.error === undefined;\n    }),\n    label: getCanvasLabel(state, {\n      canvasId: (getCurrentCanvas(state, {\n        windowId: windowId\n      }) || {}).id,\n      windowId: windowId\n    }),\n    nonTiledImages: getVisibleCanvasNonTiledResources(state, {\n      windowId: windowId\n    }),\n    osdConfig: getConfig(state).osdConfig,\n    viewerConfig: getViewer(state, {\n      windowId: windowId\n    })\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestListItem\n * @private\n */\n\n\nvar mapDispatchToProps = {\n  updateViewport: actions.updateViewport\n};\nvar styles = {\n  osdContainer: {\n    flex: 1,\n    position: 'relative'\n  }\n};\nvar enhance = compose(withStyles(styles), withTranslation(), connect(mapStateToProps, mapDispatchToProps), withPlugins('OpenSeadragonViewer'));\nexport default enhance(OpenSeadragonViewer);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getManifestoInstance, getVisibleCanvasAudioResources, getVisibleCanvasVideoResources, getWindow } from '../state/selectors';\nimport { PrimaryWindow } from '../components/PrimaryWindow';\n/** */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  var manifestoInstance = getManifestoInstance(state, {\n    windowId: windowId\n  });\n  return {\n    audioResources: getVisibleCanvasAudioResources(state, {\n      windowId: windowId\n    }) || [],\n    isCollection: manifestoInstance && manifestoInstance.isCollection(),\n    isCollectionDialogVisible: getWindow(state, {\n      windowId: windowId\n    }).collectionDialogOn,\n    videoResources: getVisibleCanvasVideoResources(state, {\n      windowId: windowId\n    }) || []\n  };\n};\n\nvar styles = {\n  primaryWindow: {\n    display: 'flex',\n    flex: 1,\n    position: 'relative'\n  }\n};\nvar enhance = compose(withStyles(styles), connect(mapStateToProps, null), withPlugins('PrimaryWindow'));\nexport default enhance(PrimaryWindow);","import { withStyles } from '@material-ui/core/styles';\nimport { SanitizedHtml } from '../components/SanitizedHtml';\n/**\n * Styles for withStyles HOC\n */\n\nvar styles = function styles(theme) {\n  return {\n    root: {\n      '& a': {\n        color: theme.palette.primary.main,\n        textDecoration: 'underline'\n      }\n    }\n  };\n};\n\nexport default withStyles(styles)(SanitizedHtml);","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { withStyles } from '@material-ui/core/styles';\nimport { ScrollIndicatedDialogContent } from '../components/ScrollIndicatedDialogContent';\n/**\n * Styles for the withStyles HOC\n */\n\nvar styles = function styles(theme) {\n  var _shadowScrollDialog;\n\n  return {\n    shadowScrollDialog: (_shadowScrollDialog = {\n      /* Shadow covers */\n      background: \"linear-gradient(\".concat(theme.palette.background.paper, \" 30%, rgba(255, 255, 255, 0)), \") + \"linear-gradient(rgba(255, 255, 255, 0), \".concat(theme.palette.background.paper, \" 70%) 0 100%, \") // Shaddows\n      + 'radial-gradient(50% 0, farthest-side, rgba(0, 0, 0, .2), rgba(0, 0, 0, 0)), ' + 'radial-gradient(50% 100%, farthest-side, rgba(0, 0, 0, .2), rgba(0, 0, 0, 0)) 0 100%,'\n    }, _defineProperty(_shadowScrollDialog, \"background\", \"linear-gradient(\".concat(theme.palette.background.paper, \" 30%, rgba(255, 255, 255, 0)), \") // eslint-disable-line no-dupe-keys\n    + \"linear-gradient(rgba(255, 255, 255, 0), \".concat(theme.palette.background.paper, \" 70%) 0 100%, \") // Shaddows\n    + 'radial-gradient(farthest-side at 50% 0, rgba(0, 0, 0, .2), rgba(0, 0, 0, 0)), ' + 'radial-gradient(farthest-side at 50% 100%, rgba(0, 0, 0, .2), rgba(0, 0, 0, 0)) 0 100%;'), _defineProperty(_shadowScrollDialog, \"backgroundAttachment\", 'local, local, scroll, scroll'), _defineProperty(_shadowScrollDialog, \"backgroundRepeat\", 'no-repeat'), _defineProperty(_shadowScrollDialog, \"backgroundSize\", '100% 40px, 100% 40px, 100% 14px, 100% 14px'), _defineProperty(_shadowScrollDialog, \"overflowY\", 'auto'), _shadowScrollDialog)\n  };\n};\n\nexport default withStyles(styles)(ScrollIndicatedDialogContent);","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { SearchHit } from '../components/SearchHit';\nimport * as actions from '../state/actions';\nimport { getCanvasLabel, getVisibleCanvasIds, getResourceAnnotationForSearchHit, getResourceAnnotationLabel, getSelectedContentSearchAnnotationIds, getSelectedAnnotationId } from '../state/selectors';\n/**\n * mapStateToProps - used to hook up connect to state\n * @memberof SearchHit\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var annotationId = _ref.annotationId,\n      _ref$hit = _ref.hit,\n      hit = _ref$hit === void 0 ? {\n    annotations: []\n  } : _ref$hit,\n      companionWindowId = _ref.companionWindowId,\n      windowId = _ref.windowId;\n  var realAnnoId = annotationId || hit.annotations[0];\n  var hitAnnotation = getResourceAnnotationForSearchHit(state, {\n    annotationUri: realAnnoId,\n    companionWindowId: companionWindowId,\n    windowId: windowId\n  });\n  var annotationLabel = getResourceAnnotationLabel(state, {\n    annotationUri: realAnnoId,\n    companionWindowId: companionWindowId,\n    windowId: windowId\n  });\n  var selectedCanvasIds = getVisibleCanvasIds(state, {\n    windowId: windowId\n  });\n  var selectedContentSearchAnnotationsIds = getSelectedContentSearchAnnotationIds(state, {\n    companionWindowId: companionWindowId,\n    windowId: windowId\n  });\n  var windowSelectedAnnotationId = getSelectedAnnotationId(state, {\n    windowId: windowId\n  });\n  var allAnnoIds = [annotationId].concat(_toConsumableArray(hit.annotations));\n  return {\n    adjacent: selectedCanvasIds.includes(hitAnnotation.targetId),\n    annotation: hitAnnotation,\n    annotationId: realAnnoId,\n    annotationLabel: annotationLabel[0],\n    canvasLabel: hitAnnotation && getCanvasLabel(state, {\n      canvasId: hitAnnotation.targetId,\n      windowId: windowId\n    }),\n    selected: selectedContentSearchAnnotationsIds[0] && allAnnoIds.includes(selectedContentSearchAnnotationsIds[0]),\n    windowSelected: windowSelectedAnnotationId && allAnnoIds.includes(windowSelectedAnnotationId)\n  };\n};\n/**\n * mapDispatchToProps - to hook up connect\n * @memberof SearchPanelNavigation\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref2) {\n  var windowId = _ref2.windowId;\n  return {\n    selectAnnotation: function selectAnnotation() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return dispatch(actions.selectAnnotation.apply(actions, [windowId].concat(args)));\n    }\n  };\n};\n/** */\n\n\nvar styles = function styles(theme) {\n  return {\n    adjacent: {},\n    focused: {},\n    hitCounter: _objectSpread(_objectSpread({}, theme.typography.subtitle2), {}, {\n      backgroundColor: theme.palette.hitCounter[\"default\"],\n      height: 30,\n      marginRight: theme.spacing(1),\n      verticalAlign: 'inherit'\n    }),\n    inlineButton: {\n      '& span': {\n        lineHeight: '1.5em'\n      },\n      margin: 0,\n      padding: 0,\n      textTransform: 'none'\n    },\n    listItem: {\n      '&$adjacent': {\n        '& $hitCounter': {\n          backgroundColor: theme.palette.highlights.secondary\n        },\n        '&$windowSelected': {\n          '& $hitCounter': {\n            backgroundColor: theme.palette.highlights.primary\n          }\n        }\n      },\n      '&$windowSelected': {\n        '& $hitCounter': {\n          backgroundColor: theme.palette.highlights.primary\n        },\n        '&$focused': {\n          '&:hover': {\n            backgroundColor: 'inherit'\n          },\n          backgroundColor: 'inherit'\n        }\n      },\n      borderBottom: \"0.5px solid \".concat(theme.palette.divider),\n      paddingRight: 8\n    },\n    selected: {},\n    subtitle: {\n      marginBottom: theme.spacing(1.5)\n    },\n    windowSelected: {}\n  };\n};\n\nvar enhance = compose(connect(mapStateToProps, mapDispatchToProps), withStyles(styles), withTranslation(), withPlugins('SearchHit'));\nexport default enhance(SearchHit);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { SearchPanelControls } from '../components/SearchPanelControls';\nimport * as actions from '../state/actions';\nimport { getManifestAutocompleteService, getManifestSearchService, getSearchIsFetching, getSearchQuery } from '../state/selectors';\n/**\n * mapStateToProps - used to hook up connect to state\n * @memberof SearchPanelControls\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var companionWindowId = _ref.companionWindowId,\n      windowId = _ref.windowId;\n  return {\n    autocompleteService: getManifestAutocompleteService(state, {\n      windowId: windowId\n    }),\n    query: getSearchQuery(state, {\n      companionWindowId: companionWindowId,\n      windowId: windowId\n    }),\n    searchIsFetching: getSearchIsFetching(state, {\n      companionWindowId: companionWindowId,\n      windowId: windowId\n    }),\n    searchService: getManifestSearchService(state, {\n      windowId: windowId\n    })\n  };\n};\n/**\n * mapDispatchToProps - to hook up connect\n * @memberof SearchPanelControls\n * @private\n */\n\n\nvar mapDispatchToProps = {\n  fetchSearch: actions.fetchSearch\n};\n/** */\n\nvar styles = function styles(theme) {\n  return {\n    endAdornment: {\n      position: 'absolute',\n      right: 0\n    },\n    form: {\n      paddingBottom: theme.spacing(1),\n      paddingRight: theme.spacing(1.5),\n      width: '100%'\n    },\n    searchProgress: {\n      position: 'absolute',\n      right: 0\n    }\n  };\n};\n\nvar enhance = compose(connect(mapStateToProps, mapDispatchToProps), withStyles(styles), withTranslation(), withPlugins('SearchPanelControls'));\nexport default enhance(SearchPanelControls);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { SearchPanelNavigation } from '../components/SearchPanelNavigation';\nimport * as actions from '../state/actions';\nimport { getSelectedContentSearchAnnotationIds, getSearchNumTotal, getSortedSearchHitsForCompanionWindow, getThemeDirection } from '../state/selectors';\n/**\n * mapStateToProps - used to hook up connect to state\n * @memberof SearchPanelControls\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var companionWindowId = _ref.companionWindowId,\n      windowId = _ref.windowId;\n  return {\n    direction: getThemeDirection(state),\n    numTotal: getSearchNumTotal(state, {\n      companionWindowId: companionWindowId,\n      windowId: windowId\n    }),\n    searchHits: getSortedSearchHitsForCompanionWindow(state, {\n      companionWindowId: companionWindowId,\n      windowId: windowId\n    }),\n    selectedContentSearchAnnotation: getSelectedContentSearchAnnotationIds(state, {\n      companionWindowId: companionWindowId,\n      windowId: windowId\n    })\n  };\n};\n/**\n * mapDispatchToProps - to hook up connect\n * @memberof SearchPanelNavigation\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref2) {\n  var windowId = _ref2.windowId;\n  return {\n    selectAnnotation: function selectAnnotation() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return dispatch(actions.selectAnnotation.apply(actions, [windowId].concat(args)));\n    }\n  };\n};\n/** */\n\n\nvar styles = function styles(theme) {\n  return {\n    body2: {\n      marginLeft: '-16px',\n      width: '100%'\n    }\n  };\n};\n\nvar enhance = compose(connect(mapStateToProps, mapDispatchToProps), withStyles(styles), withTranslation(), withPlugins('SearchPanelNavigation'));\nexport default enhance(SearchPanelNavigation);","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { SearchResults } from '../components/SearchResults';\nimport * as actions from '../state/actions';\nimport { getNextSearchId, getSearchQuery, getSearchIsFetching, getSearchNumTotal, getSortedSearchHitsForCompanionWindow, getSortedSearchAnnotationsForCompanionWindow } from '../state/selectors';\n/**\n * mapStateToProps - used to hook up connect to state\n * @memberof SearchResult\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var companionWindowId = _ref.companionWindowId,\n      windowId = _ref.windowId;\n  return {\n    isFetching: getSearchIsFetching(state, {\n      companionWindowId: companionWindowId,\n      windowId: windowId\n    }),\n    nextSearch: getNextSearchId(state, {\n      companionWindowId: companionWindowId,\n      windowId: windowId\n    }),\n    query: getSearchQuery(state, {\n      companionWindowId: companionWindowId,\n      windowId: windowId\n    }),\n    searchAnnotations: getSortedSearchAnnotationsForCompanionWindow(state, {\n      companionWindowId: companionWindowId,\n      windowId: windowId\n    }),\n    searchHits: getSortedSearchHitsForCompanionWindow(state, {\n      companionWindowId: companionWindowId,\n      windowId: windowId\n    }),\n    searchNumTotal: getSearchNumTotal(state, {\n      companionWindowId: companionWindowId,\n      windowId: windowId\n    })\n  };\n};\n\nvar mapDispatchToProps = {\n  fetchSearch: actions.fetchSearch\n};\n/** */\n\nvar styles = function styles(theme) {\n  return {\n    moreButton: {\n      width: '100%'\n    },\n    navigation: {\n      textTransform: 'none'\n    },\n    noResults: _objectSpread(_objectSpread({}, theme.typography.h6), {}, {\n      padding: theme.spacing(2)\n    }),\n    toggleFocus: _objectSpread({}, theme.typography.subtitle1)\n  };\n};\n\nvar enhance = compose(connect(mapStateToProps, mapDispatchToProps), withStyles(styles), withTranslation(), withPlugins('SearchResults'));\nexport default enhance(SearchResults);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as actions from '../state/actions';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getWindow } from '../state/selectors';\nimport { SelectCollection } from '../components/SelectCollection';\n/** */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n\n  var _ref2 = getWindow(state, {\n    windowId: windowId\n  }) || {},\n      collectionPath = _ref2.collectionPath,\n      manifestId = _ref2.manifestId;\n\n  return {\n    collectionPath: collectionPath,\n    manifestId: manifestId\n  };\n};\n\nvar mapDispatchToProps = {\n  showCollectionDialog: actions.showCollectionDialog\n};\n/** */\n\nvar styles = function styles(theme) {\n  return {};\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('SelectCollection'));\nexport default enhance(SelectCollection);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { SidebarIndexItem } from '../components/SidebarIndexItem';\n/**\n * Styles for withStyles HOC\n */\n\nvar styles = function styles(theme) {\n  return {\n    label: {\n      paddingLeft: theme.spacing(1)\n    }\n  };\n};\n\nvar enhance = compose(withStyles(styles), withTranslation(), connect(null, null), withPlugins('SidebarIndexItem'));\nexport default enhance(SidebarIndexItem);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getCompanionWindow, getCanvases, getVisibleCanvasIds } from '../state/selectors';\nimport { SidebarIndexList } from '../components/SidebarIndexList';\n/**\n * mapStateToProps - to hook up connect\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var id = _ref.id,\n      windowId = _ref.windowId;\n  return {\n    canvases: getCanvases(state, {\n      windowId: windowId\n    }),\n    selectedCanvasIds: getVisibleCanvasIds(state, {\n      windowId: windowId\n    }),\n    variant: getCompanionWindow(state, {\n      companionWindowId: id,\n      windowId: windowId\n    }).variant\n  };\n};\n/**\n * mapStateToProps - used to hook up connect to state\n * @memberof SidebarIndexList\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref2) {\n  var id = _ref2.id,\n      windowId = _ref2.windowId;\n  return {\n    setCanvas: function setCanvas() {\n      return dispatch(actions.setCanvas.apply(actions, arguments));\n    }\n  };\n};\n/**\n * Styles for withStyles HOC\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    label: {\n      paddingLeft: theme.spacing(1)\n    },\n    listItem: {\n      borderBottom: \"0.5px solid \".concat(theme.palette.divider),\n      paddingRight: theme.spacing(1)\n    }\n  };\n};\n\nvar enhance = compose(withStyles(styles), withTranslation(), connect(mapStateToProps, mapDispatchToProps), withPlugins('SidebarIndexList'));\nexport default enhance(SidebarIndexList);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { alpha } from '@material-ui/core/styles/colorManipulator';\nimport { withPlugins } from '../extend/withPlugins';\nimport { SidebarIndexTableOfContents } from '../components/SidebarIndexTableOfContents';\nimport { getSequenceTreeStructure, getVisibleNodeIds, getExpandedNodeIds, getNodeIdToScrollTo } from '../state/selectors';\nimport * as actions from '../state/actions';\n/**\n * mapStateToProps - to hook up connect\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var id = _ref.id,\n      windowId = _ref.windowId;\n  return {\n    expandedNodeIds: getExpandedNodeIds(state, {\n      companionWindowId: id,\n      windowId: windowId\n    }),\n    nodeIdToScrollTo: getNodeIdToScrollTo(state, {\n      companionWindowId: id,\n      windowId: windowId\n    }),\n    treeStructure: getSequenceTreeStructure(state, {\n      windowId: windowId\n    }),\n    visibleNodeIds: getVisibleNodeIds(state, {\n      companionWindowId: id,\n      windowId: windowId\n    })\n  };\n};\n/**\n * mapStateToProps - used to hook up connect to state\n * @memberof SidebarIndexTableOfContents\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref2) {\n  var id = _ref2.id,\n      windowId = _ref2.windowId;\n  return {\n    setCanvas: function setCanvas() {\n      return dispatch(actions.setCanvas.apply(actions, arguments));\n    },\n    toggleNode: function toggleNode(nodeId) {\n      return dispatch(actions.toggleNode(windowId, id, nodeId));\n    }\n  };\n};\n/**\n * Styles for withStyles HOC\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    content: {\n      alignItems: 'flex-start',\n      borderLeft: '1px solid transparent',\n      padding: '8px 16px 8px 0',\n      width: 'auto'\n    },\n    group: {\n      borderLeft: \"1px solid \".concat(theme.palette.grey[300])\n    },\n    label: {\n      paddingLeft: 0\n    },\n    // needed for pseudo $label class\n    root: {\n      flexGrow: 1\n    },\n    selected: {},\n    // needed for pseudo $selected class\n    treeItemRoot: {\n      '&:focus > $content': {\n        backgroundColor: theme.palette.action.selected\n      },\n      '&:hover > $content': {\n        backgroundColor: theme.palette.action.hover\n      },\n      '&:hover >$content $label, &:focus > $content $label, &$selected > $content $label, &$selected > $content $label:hover, &$selected:focus > $content $label': {\n        backgroundColor: 'transparent'\n      }\n    },\n    visibleNode: {\n      backgroundColor: alpha(theme.palette.highlights.primary, 0.35),\n      display: 'inline'\n    }\n  };\n};\n\nvar enhance = compose(withStyles(styles), withTranslation(), connect(mapStateToProps, mapDispatchToProps), withPlugins('SidebarIndexTableOfContents'));\nexport default enhance(SidebarIndexTableOfContents);","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { SidebarIndexThumbnail } from '../components/SidebarIndexThumbnail';\nimport { getConfig } from '../state/selectors';\n/**\n * mapStateToProps - used to hook up state to props\n * @memberof SidebarIndexThumbnail\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var data = _ref.data;\n  return _objectSpread({}, getConfig(state).canvasNavigation || {});\n};\n/**\n * Styles for withStyles HOC\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    label: {\n      paddingLeft: theme.spacing(1)\n    }\n  };\n};\n\nvar enhance = compose(withStyles(styles), withTranslation(), connect(mapStateToProps, null), withPlugins('SidebarIndexThumbnail'));\nexport default enhance(SidebarIndexThumbnail);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getCurrentCanvas } from '../state/selectors';\nimport { ThumbnailCanvasGrouping } from '../components/ThumbnailCanvasGrouping';\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ThumbnailCanvasGrouping\n * @private\n */\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref) {\n  var data = _ref.data;\n  return {\n    setCanvas: function setCanvas() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return dispatch(actions.setCanvas.apply(actions, [data.windowId].concat(args)));\n    }\n  };\n};\n/**\n * mapStateToProps - used to hook up state to props\n * @memberof ThumbnailCanvasGrouping\n * @private\n */\n\n\nvar mapStateToProps = function mapStateToProps(state, _ref2) {\n  var data = _ref2.data;\n  return {\n    currentCanvasId: (getCurrentCanvas(state, {\n      windowId: data.windowId\n    }) || {}).id\n  };\n};\n/**\n * Styles for withStyles HOC\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    canvas: {\n      '&$currentCanvas': {\n        outline: \"2px solid \".concat(theme.palette.primary.main),\n        outlineOffset: '3px'\n      },\n      '&:hover': {\n        outline: \"9px solid \".concat(theme.palette.action.hover),\n        outlineOffset: '-2px'\n      },\n      boxSizing: 'border-box',\n      color: theme.palette.common.white,\n      cursor: 'pointer',\n      display: 'inline-block',\n      outline: 0,\n      whiteSpace: 'nowrap'\n    },\n    currentCanvas: {}\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('ThumbnailCanvasGrouping'));\nexport default enhance(ThumbnailCanvasGrouping);","import { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport { withPlugins } from '../extend/withPlugins';\nimport { VideoViewer } from '../components/VideoViewer';\nimport { getConfig, getVisibleCanvasCaptions, getVisibleCanvasVideoResources } from '../state/selectors';\n/** */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    captions: getVisibleCanvasCaptions(state, {\n      windowId: windowId\n    }) || [],\n    videoOptions: getConfig(state).videoOptions,\n    videoResources: getVisibleCanvasVideoResources(state, {\n      windowId: windowId\n    }) || []\n  };\n};\n/** */\n\n\nvar styles = function styles() {\n  return {\n    container: {\n      alignItems: 'center',\n      display: 'flex',\n      width: '100%'\n    },\n    video: {\n      maxHeight: '100%',\n      width: '100%'\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, null), withPlugins('VideoViewer'));\nexport default enhance(VideoViewer);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { ViewerInfo } from '../components/ViewerInfo';\nimport { getCanvasLabel, getCanvases, getCanvasIndex, getCurrentCanvas } from '../state/selectors';\n/**\n * mapStateToProps - to hook up connect\n * @memberof Window\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  var windowId = props.windowId;\n  var canvases = getCanvases(state, {\n    windowId: windowId\n  });\n  var canvasIndex = getCanvasIndex(state, {\n    windowId: windowId\n  });\n  var canvasId = (getCurrentCanvas(state, {\n    windowId: windowId\n  }) || {}).id;\n  return {\n    canvasCount: canvases.length,\n    canvasIndex: canvasIndex,\n    canvasLabel: getCanvasLabel(state, {\n      canvasId: canvasId,\n      windowId: windowId\n    })\n  };\n};\n\nvar styles = {\n  osdInfo: {\n    order: 2,\n    overflow: 'hidden',\n    paddingBottom: 3,\n    textOverflow: 'ellipsis',\n    unicodeBidi: 'plaintext',\n    whiteSpace: 'nowrap',\n    width: '100%'\n  }\n};\nvar enhance = compose(withStyles(styles), withTranslation(), connect(mapStateToProps, null), withPlugins('ViewerInfo'));\nexport default enhance(ViewerInfo);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getSequenceViewingDirection, getNextCanvasGrouping, getPreviousCanvasGrouping } from '../state/selectors';\nimport { ViewerNavigation } from '../components/ViewerNavigation';\n/** */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    hasNextCanvas: !!getNextCanvasGrouping(state, {\n      windowId: windowId\n    }),\n    hasPreviousCanvas: !!getPreviousCanvasGrouping(state, {\n      windowId: windowId\n    }),\n    viewingDirection: getSequenceViewingDirection(state, {\n      windowId: windowId\n    })\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestForm\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref2) {\n  var windowId = _ref2.windowId;\n  return {\n    setNextCanvas: function setNextCanvas() {\n      return dispatch(actions.setNextCanvas(windowId));\n    },\n    setPreviousCanvas: function setPreviousCanvas() {\n      return dispatch(actions.setPreviousCanvas(windowId));\n    }\n  };\n};\n\nvar styles = {\n  osdNavigation: {\n    order: 1\n  }\n};\nvar enhance = compose(withStyles(styles), withTranslation(), connect(mapStateToProps, mapDispatchToProps), withPlugins('ViewerNavigation') // further HOC go here\n);\nexport default enhance(ViewerNavigation);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { Window } from '../components/Window';\nimport { getManifestStatus, getManifestTitle, getThumbnailNavigationPosition, getWindow, getWorkspaceType, getWindowDraggability, getWindowViewType, getManifestError } from '../state/selectors';\n/**\n * mapStateToProps - used to hook up connect to action creators\n * @memberof Window\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    isFetching: getManifestStatus(state, {\n      windowId: windowId\n    }).isFetching,\n    label: getManifestTitle(state, {\n      windowId: windowId\n    }),\n    manifestError: getManifestError(state, {\n      windowId: windowId\n    }),\n    maximized: (getWindow(state, {\n      windowId: windowId\n    }) || {}).maximized,\n    sideBarOpen: (getWindow(state, {\n      windowId: windowId\n    }) || {}).sideBarOpen,\n    thumbnailNavigationPosition: getThumbnailNavigationPosition(state, {\n      windowId: windowId\n    }),\n    view: getWindowViewType(state, {\n      windowId: windowId\n    }),\n    window: getWindow(state, {\n      windowId: windowId\n    }),\n    windowDraggable: getWindowDraggability(state, {\n      windowId: windowId\n    }),\n    workspaceType: getWorkspaceType(state)\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestListItem\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref2) {\n  var windowId = _ref2.windowId;\n  return {\n    focusWindow: function focusWindow() {\n      return dispatch(actions.focusWindow(windowId));\n    }\n  };\n};\n/**\n * @param theme\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    companionAreaBottom: {\n      display: 'flex',\n      flex: '0',\n      flexBasis: 'auto',\n      minHeight: 0\n    },\n    companionAreaRight: {\n      display: 'flex',\n      flex: '0 1 auto',\n      minHeight: 0\n    },\n    maximized: {},\n    middle: {\n      display: 'flex',\n      flex: '1',\n      flexDirection: 'row',\n      minHeight: 0\n    },\n    middleLeft: {\n      display: 'flex',\n      flex: '1',\n      flexDirection: 'column',\n      minHeight: 0\n    },\n    primaryWindow: {\n      display: 'flex',\n      flex: '1',\n      height: '300px',\n      minHeight: 0,\n      position: 'relative'\n    },\n    thumbnailArea: {\n      backgroundColor: theme.palette.shades.dark\n    },\n    thumbnailAreaBottom: {},\n    thumbnailAreaRight: {\n      minWidth: 100\n    },\n    window: {\n      '&$maximized': {\n        left: 0,\n        position: 'absolute',\n        top: 0,\n        zIndex: theme.zIndex.modal - 1\n      },\n      backgroundColor: theme.palette.shades.dark,\n      borderRadius: 0,\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%',\n      minHeight: 0,\n      overflow: 'hidden',\n      width: '100%'\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('Window'));\nexport default enhance(Window);","import { compose } from 'redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { alpha } from '@material-ui/core/styles/colorManipulator';\nimport { withPlugins } from '../extend/withPlugins';\nimport { WindowAuthenticationBar } from '../components/WindowAuthenticationBar';\n/**\n * @param theme\n * @returns {{typographyBody: {flexGrow: number, fontSize: number|string},\n * windowTopBarStyle: {minHeight: number, paddingLeft: number, backgroundColor: string}}}\n */\n\nvar styles = function styles(theme) {\n  return {\n    buttonInvert: {\n      '&:hover': {\n        backgroundColor: alpha(theme.palette.secondary.contrastText, 1 - theme.palette.action.hoverOpacity)\n      },\n      backgroundColor: theme.palette.secondary.contrastText,\n      marginLeft: theme.spacing(5),\n      paddingBottom: 0,\n      paddingTop: 0\n    },\n    expanded: {\n      paddingLeft: theme.spacing(),\n      paddingRight: theme.spacing()\n    },\n    failure: {\n      backgroundColor: theme.palette.error.dark\n    },\n    fauxButton: {\n      marginLeft: theme.spacing(2.5)\n    },\n    icon: {\n      marginRight: theme.spacing(1.5),\n      verticalAlign: 'text-bottom'\n    },\n    label: {\n      lineHeight: 2.25\n    },\n    paper: {\n      backgroundColor: theme.palette.secondary.main,\n      color: theme.palette.secondary.contrastText,\n      cursor: 'pointer'\n    },\n    topBar: {\n      '&:hover': {\n        backgroundColor: theme.palette.secondary.main\n      },\n      alignItems: 'center',\n      display: 'flex',\n      justifyContent: 'inherit',\n      padding: theme.spacing(1),\n      textTransform: 'none'\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), withPlugins('WindowAuthenticationBar'));\nexport default enhance(WindowAuthenticationBar);","import { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { withSize } from 'react-sizeme';\nimport { withStyles } from '@material-ui/core';\nimport { alpha } from '@material-ui/core/styles/colorManipulator';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getWorkspace, getSequenceViewingDirection, getNextCanvasGrouping, getPreviousCanvasGrouping } from '../state/selectors';\nimport { WindowCanvasNavigationControls } from '../components/WindowCanvasNavigationControls';\nimport * as actions from '../state/actions';\n/** */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    hasNextCanvas: !!getNextCanvasGrouping(state, {\n      windowId: windowId\n    }),\n    hasPreviousCanvas: !!getPreviousCanvasGrouping(state, {\n      windowId: windowId\n    }),\n    viewingDirection: getSequenceViewingDirection(state, {\n      windowId: windowId\n    }),\n    visible: getWorkspace(state).focusedWindowId === windowId\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestForm\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref2) {\n  var windowId = _ref2.windowId;\n  return {\n    setNextCanvas: function setNextCanvas() {\n      return dispatch(actions.setNextCanvas(windowId));\n    },\n    setPreviousCanvas: function setPreviousCanvas() {\n      return dispatch(actions.setPreviousCanvas(windowId));\n    }\n  };\n};\n/**\n *\n * @param theme\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    canvasNav: {\n      display: 'flex',\n      flexDirection: 'row',\n      flexWrap: 'wrap',\n      justifyContent: 'center',\n      textAlign: 'center'\n    },\n    canvasNavStacked: {\n      flexDirection: 'column'\n    },\n    controls: {\n      backgroundColor: alpha(theme.palette.background.paper, 0.5),\n      bottom: 0,\n      position: 'absolute',\n      width: '100%',\n      zIndex: 50\n    }\n  };\n};\n\nvar enhance = compose(connect(mapStateToProps, mapDispatchToProps), withStyles(styles), withSize(), withPlugins('WindowCanvasNavigationControls'));\nexport default enhance(WindowCanvasNavigationControls);","import { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getContainerId, getWindowIds, getWindowTitles } from '../state/selectors';\nimport { WindowList } from '../components/WindowList';\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestListItem\n * @private\n */\n\nvar mapDispatchToProps = {\n  focusWindow: actions.focusWindow\n};\n/**\n * mapStateToProps - to hook up connect\n * @memberof WorkspaceControlPanel\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    containerId: getContainerId(state),\n    titles: getWindowTitles(state),\n    windowIds: getWindowIds(state)\n  };\n};\n\nvar enhance = compose(withTranslation(), connect(mapStateToProps, mapDispatchToProps), withPlugins('WindowList'));\nexport default enhance(WindowList);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getWindowIds, getWorkspace } from '../state/selectors';\nimport { WindowListButton } from '../components/WindowListButton';\n/** */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    disabled: getWorkspace(state).isWorkspaceAddVisible,\n    windowCount: getWindowIds(state).length\n  };\n};\n/**\n *\n * @param theme\n * @returns {{background: {background: string}}}\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    badge: {\n      paddingLeft: 12\n    },\n    ctrlBtn: {\n      margin: theme.spacing(1)\n    },\n    ctrlBtnSelected: {\n      backgroundColor: theme.palette.action.selected\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, null), withPlugins('WindowListButton'));\nexport default enhance(WindowListButton);","import { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { withStyles } from '@material-ui/core';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport { WindowSideBar } from '../components/WindowSideBar';\nimport { getThemeDirection, getWindow } from '../state/selectors';\n/**\n * mapStateToProps - to hook up connect\n * @memberof WindowSideBar\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    direction: getThemeDirection(state),\n    sideBarOpen: (getWindow(state, {\n      windowId: windowId\n    }) || {}).sideBarOpen,\n    sideBarPanel: (getWindow(state, {\n      windowId: windowId\n    }) || {}).sideBarPanel\n  };\n};\n/**\n *\n * @param theme\n * @returns {{toolbar: CSSProperties | toolbar | {minHeight}, grow: {flexGrow: number},\n * drawer: {overflowX: string, left: number, flexShrink: number, width: number, height: string}}}\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    drawer: {\n      flexShrink: 0,\n      height: '100%',\n      order: -1000,\n      zIndex: theme.zIndex.appBar - 1\n    },\n    grow: {\n      flexGrow: 1\n    },\n    paper: {\n      borderInlineEnd: \"1px solid \".concat(theme.palette.divider),\n      overflowX: 'hidden',\n      width: 48\n    },\n    toolbar: theme.mixins.toolbar\n  };\n};\n\nvar enhance = compose(withStyles(styles), withTranslation(), connect(mapStateToProps, null), withPlugins('WindowSideBar'));\nexport default enhance(WindowSideBar);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport MiradorCanvas from '../lib/MiradorCanvas';\nimport { getCanvases, getVisibleCanvases, getCompanionWindowsForPosition, getAnnotationResourcesByMotivation, getManifestSearchService, getSearchQuery, getWindow, getWindowConfig } from '../state/selectors';\nimport { WindowSideBarButtons } from '../components/WindowSideBarButtons';\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof WindowSideButtons\n * @private\n */\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    addCompanionWindow: function addCompanionWindow(content) {\n      return dispatch(actions.addOrUpdateCompanionWindow(windowId, {\n        content: content,\n        position: 'left'\n      }));\n    }\n  };\n};\n/** */\n\n\nfunction hasLayers(canvases) {\n  return canvases && canvases.some(function (c) {\n    return new MiradorCanvas(c).imageResources.length > 1;\n  });\n}\n/** */\n\n\nfunction hasAnnotations(canvases) {\n  return canvases && canvases.some(function (c) {\n    var canvas = new MiradorCanvas(c);\n    return canvas.annotationListUris.length > 0 || canvas.canvasAnnotationPages.length > 0;\n  });\n}\n/**\n * mapStateToProps - used to hook up connect to state\n * @memberof WindowSideButtons\n * @private\n */\n\n\nvar mapStateToProps = function mapStateToProps(state, _ref2) {\n  var windowId = _ref2.windowId;\n  return {\n    hasAnnotations: getAnnotationResourcesByMotivation(state, {\n      windowId: windowId\n    }).length > 0,\n    hasAnyAnnotations: hasAnnotations(getCanvases(state, {\n      windowId: windowId\n    })),\n    hasAnyLayers: hasLayers(getCanvases(state, {\n      windowId: windowId\n    })),\n    hasCurrentLayers: hasLayers(getVisibleCanvases(state, {\n      windowId: windowId\n    })),\n    hasSearchResults: getWindow(state, {\n      windowId: windowId\n    }).suggestedSearches || getSearchQuery(state, {\n      companionWindowId: (getCompanionWindowsForPosition(state, {\n        position: 'left',\n        windowId: windowId\n      })[0] || {}).id,\n      windowId: windowId\n    }),\n    hasSearchService: getManifestSearchService(state, {\n      windowId: windowId\n    }) !== null,\n    panels: getWindowConfig(state, {\n      windowId: windowId\n    }).panels,\n    sideBarPanel: (getCompanionWindowsForPosition(state, {\n      position: 'left',\n      windowId: windowId\n    })[0] || {}).content\n  };\n};\n/** */\n\n\nvar style = function style(theme) {\n  return {\n    badge: {\n      backgroundColor: theme.palette.notification.main\n    },\n    tab: {\n      '&:active': {\n        backgroundColor: theme.palette.action.active\n      },\n      '&:focus': {\n        '@media (hover: none)': {\n          backgroundColor: 'transparent'\n        },\n        backgroundColor: theme.palette.action.hover,\n        textDecoration: 'none' // Reset on touch devices, it doesn't add specificity\n\n      },\n      '&:hover': {\n        '@media (hover: none)': {\n          backgroundColor: 'transparent'\n        },\n        backgroundColor: theme.palette.action.hover,\n        textDecoration: 'none' // Reset on touch devices, it doesn't add specificity\n\n      },\n      borderRight: '2px solid transparent',\n      minWidth: 'auto'\n    },\n    tabSelected: {\n      borderRight: \"2px solid \".concat(theme.palette.primary.main)\n    },\n    tabsFlexContainer: {\n      flexDirection: 'column'\n    },\n    tabsIndicator: {\n      display: 'none'\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(style), connect(mapStateToProps, mapDispatchToProps), withPlugins('WindowSideBarButtons'));\nexport default enhance(WindowSideBarButtons);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getThumbnailNavigationPosition, getThemeDirection } from '../state/selectors';\nimport { WindowThumbnailSettings } from '../components/WindowThumbnailSettings';\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestListItem\n * @private\n */\n\nvar mapDispatchToProps = {\n  setWindowThumbnailPosition: actions.setWindowThumbnailPosition\n};\n/**\n * mapStateToProps - to hook up connect\n * @memberof WindowViewer\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    direction: getThemeDirection(state),\n    thumbnailNavigationPosition: getThumbnailNavigationPosition(state, {\n      windowId: windowId\n    })\n  };\n};\n/** */\n\n\nvar styles = function styles(theme) {\n  return {\n    label: {\n      borderBottom: '2px solid transparent'\n    },\n    MenuItem: {\n      display: 'inline-block'\n    },\n    selectedLabel: {\n      borderBottom: \"2px solid \".concat(theme.palette.secondary.main),\n      color: theme.palette.secondary.main\n    }\n  };\n};\n\nvar enhance = compose(withStyles(styles), withTranslation(null, {\n  withRef: true\n}), connect(mapStateToProps, mapDispatchToProps, null, {\n  forwardRef: true\n}), withPlugins('WindowThumbnailSettings') // further HOC go here\n);\nexport default enhance(WindowThumbnailSettings);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getWindowConfig, isFocused } from '../state/selectors';\nimport { WindowTopBar } from '../components/WindowTopBar';\n/** mapStateToProps */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  var config = getWindowConfig(state, {\n    windowId: windowId\n  });\n  return {\n    allowClose: config.allowClose,\n    allowFullscreen: config.allowFullscreen,\n    allowMaximize: config.allowMaximize,\n    allowTopMenuButton: config.allowTopMenuButton,\n    allowWindowSideBar: config.allowWindowSideBar,\n    focused: isFocused(state, {\n      windowId: windowId\n    }),\n    maximized: config.maximized\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestListItem\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref2) {\n  var windowId = _ref2.windowId;\n  return {\n    focusWindow: function focusWindow() {\n      return dispatch(actions.focusWindow(windowId));\n    },\n    maximizeWindow: function maximizeWindow() {\n      return dispatch(actions.maximizeWindow(windowId));\n    },\n    minimizeWindow: function minimizeWindow() {\n      return dispatch(actions.minimizeWindow(windowId));\n    },\n    removeWindow: function removeWindow() {\n      return dispatch(actions.removeWindow(windowId));\n    },\n    toggleWindowSideBar: function toggleWindowSideBar() {\n      return dispatch(actions.toggleWindowSideBar(windowId));\n    }\n  };\n};\n/**\n * @param theme\n * @returns {{typographyBody: {flexGrow: number, fontSize: number|string},\n * windowTopBarStyle: {minHeight: number, paddingLeft: number, backgroundColor: string}}}\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    focused: {},\n    windowTopBarStyle: {\n      '&$focused': {\n        borderTop: \"2px solid \".concat(theme.palette.primary.main)\n      },\n      backgroundColor: theme.palette.shades.main,\n      borderTop: '2px solid transparent',\n      minHeight: 32,\n      paddingLeft: theme.spacing(0.5),\n      paddingRight: theme.spacing(0.5)\n    },\n    windowTopBarStyleDraggable: {\n      cursor: 'move'\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('WindowTopBar'));\nexport default enhance(WindowTopBar);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport { withPlugins } from '../extend/withPlugins';\nimport { WindowTopBarPluginArea } from '../components/WindowTopBarPluginArea';\n/**\n */\n\nvar styles = {};\nvar enhance = compose(withTranslation(), withStyles(styles), connect(null, null), withPlugins('WindowTopBarPluginArea'));\nexport default enhance(WindowTopBarPluginArea);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport { withPlugins } from '../extend/withPlugins';\nimport { WindowTopBarPluginMenu } from '../components/WindowTopBarPluginMenu';\nimport { getContainerId } from '../state/selectors';\n/**\n * mapStateToProps - to hook up connect\n * @memberof WindowTopBarPluginMenu\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    containerId: getContainerId(state)\n  };\n};\n/**\n *\n * @param theme\n * @returns {{ctrlBtn: {margin: (number|string)}}}\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    ctrlBtnSelected: {\n      backgroundColor: theme.palette.action.selected\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, null), withPlugins('WindowTopBarPluginMenu'));\nexport default enhance(WindowTopBarPluginMenu);","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getManifestStatus, getManifestTitle, getWindowConfig } from '../state/selectors';\nimport { WindowTopBarTitle } from '../components/WindowTopBarTitle';\n/** mapStateToProps */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    error: getManifestStatus(state, {\n      windowId: windowId\n    }).error,\n    hideWindowTitle: getWindowConfig(state, {\n      windowId: windowId\n    }).hideWindowTitle,\n    isFetching: getManifestStatus(state, {\n      windowId: windowId\n    }).isFetching,\n    manifestTitle: getManifestTitle(state, {\n      windowId: windowId\n    })\n  };\n};\n/**\n * @param theme\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    title: _objectSpread(_objectSpread({}, theme.typography.h6), {}, {\n      flexGrow: 1,\n      paddingLeft: theme.spacing(0.5)\n    })\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, null), withPlugins('WindowTopBarTitle'));\nexport default enhance(WindowTopBarTitle);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { WindowTopMenu } from '../components/WindowTopMenu';\nimport { getConfig, getContainerId } from '../state/selectors';\n/**\n * mapStateToProps - to hook up connect\n * @memberof WindowTopMenu\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    containerId: getContainerId(state),\n    showThumbnailNavigationSettings: getConfig(state).thumbnailNavigation.displaySettings\n  };\n};\n/**\n * mapStateToProps - used to hook up connect to state\n * @memberof WindowTopMenu\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    toggleDraggingEnabled: function toggleDraggingEnabled() {\n      return dispatch(actions.toggleDraggingEnabled());\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), connect(mapStateToProps, mapDispatchToProps), withPlugins('WindowTopMenu'));\nexport default enhance(WindowTopMenu);","import { compose } from 'redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport { withPlugins } from '../extend/withPlugins';\nimport { WindowTopMenuButton } from '../components/WindowTopMenuButton';\n/**\n *\n * @param theme\n * @returns {{ctrlBtn: {margin: (number|string)}}}\n */\n\nvar styles = function styles(theme) {\n  return {\n    ctrlBtnSelected: {\n      backgroundColor: theme.palette.action.selected\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), withPlugins('WindowTopMenuButton'));\nexport default enhance(WindowTopMenuButton);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getAllowedWindowViewTypes, getWindowViewType } from '../state/selectors';\nimport { WindowViewSettings } from '../components/WindowViewSettings';\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestListItem\n * @private\n */\n\nvar mapDispatchToProps = {\n  setWindowViewType: actions.setWindowViewType\n};\n/**\n * mapStateToProps - to hook up connect\n * @memberof WindowViewer\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    viewTypes: getAllowedWindowViewTypes(state, {\n      windowId: windowId\n    }),\n    windowViewType: getWindowViewType(state, {\n      windowId: windowId\n    })\n  };\n};\n/** */\n\n\nvar styles = function styles(theme) {\n  return {\n    label: {\n      borderBottom: '2px solid transparent'\n    },\n    MenuItem: {\n      display: 'inline-block'\n    },\n    selectedLabel: {\n      borderBottom: \"2px solid \".concat(theme.palette.secondary.main),\n      color: theme.palette.secondary.main\n    }\n  };\n};\n\nvar enhance = compose(withStyles(styles), withTranslation(null, {\n  withRef: true\n}), connect(mapStateToProps, mapDispatchToProps, null, {\n  forwardRef: true\n}), withPlugins('WindowViewSettings'));\nexport default enhance(WindowViewSettings);","import { compose } from 'redux';\nimport { withPlugins } from '../extend/withPlugins';\nimport { WindowViewer } from '../components/WindowViewer';\nvar enhance = compose(withPlugins('WindowViewer') // further HOC go here\n);\nexport default enhance(WindowViewer);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { Workspace } from '../components/Workspace';\nimport { getMaximizedWindowsIds, getWindowIds, getWorkspaceType, getConfig, getWorkspace } from '../state/selectors';\nimport * as actions from '../state/actions';\n/**\n * mapStateToProps - to hook up connect\n * @memberof Workspace\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    allowNewWindows: getConfig(state).workspace.allowNewWindows,\n    isWorkspaceControlPanelVisible: getConfig(state).workspaceControlPanel.enabled,\n    maximizedWindowIds: getMaximizedWindowsIds(state),\n    windowIds: getWindowIds(state),\n    workspaceId: getWorkspace(state).id,\n    workspaceType: getWorkspaceType(state)\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof Workspace\n * @private\n */\n\n\nvar mapDispatchToProps = {\n  addWindow: actions.addWindow\n};\n/**\n * @param theme\n */\n\nvar styles = function styles(theme) {\n  return {\n    workspaceViewport: {\n      bottom: 0,\n      left: 0,\n      margin: 0,\n      overflow: 'hidden',\n      position: 'absolute',\n      right: 0,\n      top: 0\n    },\n    workspaceWithControlPanel: {\n      paddingTop: 74\n    },\n    // injection order matters here\n    // eslint-disable-next-line sort-keys\n    '@media (min-width: 600px)': {\n      workspaceWithControlPanel: {\n        paddingLeft: 68,\n        paddingTop: 0\n      }\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('Workspace') // further HOC go here\n);\nexport default enhance(Workspace);","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { WorkspaceAdd } from '../components/WorkspaceAdd';\nimport { getCatalog } from '../state/selectors';\n/**\n * mapStateToProps - to hook up connect\n * @memberof Workspace\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    catalog: getCatalog(state)\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof Workspace\n * @private\n */\n\n\nvar mapDispatchToProps = {\n  addResource: actions.addResource,\n  setWorkspaceAddVisibility: actions.setWorkspaceAddVisibility\n};\n/**\n *\n * @param theme\n * @returns {{typographyBody: {flexGrow: number, fontSize: string},\n * form: {paddingBottom: number, paddingTop: number, marginTop: number},\n * fab: {bottom: number, position: string, right: number},\n * menuButton: {marginRight: number, marginLeft: number}}}\n */\n\nvar styles = function styles(theme) {\n  return {\n    displayNone: {\n      display: 'none'\n    },\n    fab: {\n      bottom: theme.spacing(2),\n      position: 'absolute',\n      right: theme.spacing(2)\n    },\n    form: _objectSpread(_objectSpread({}, theme.mixins.gutters()), {}, {\n      left: '0',\n      marginTop: 48,\n      paddingBottom: theme.spacing(2),\n      paddingTop: theme.spacing(2),\n      right: '0'\n    }),\n    list: {\n      margin: '16px'\n    },\n    menuButton: {\n      marginLeft: -12,\n      marginRight: 20\n    },\n    paper: _defineProperty({\n      borderTop: '0',\n      left: '0'\n    }, theme.breakpoints.up('sm'), {\n      left: '65px'\n    }),\n    typographyBody: {\n      flexGrow: 1\n    },\n    workspaceAdd: {\n      boxSizing: 'border-box',\n      height: '100%',\n      overflowX: 'hidden',\n      overflowY: 'auto',\n      paddingTop: 68\n    },\n    // injection order matters\n    // eslint-disable-next-line sort-keys\n    '@media (min-width: 600px)': {\n      workspaceAdd: {\n        paddingLeft: 68,\n        paddingTop: 0\n      }\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('WorkspaceAdd'));\nexport default enhance(WorkspaceAdd);","import { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport withWidth from '@material-ui/core/withWidth';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getWindowIds, getWorkspace } from '../state/selectors';\nimport { WorkspaceAddButton } from '../components/WorkspaceAddButton';\n/**\n * mapStateToProps - to hook up connect\n * @memberof WorkspaceControlPanel\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var width = _ref.width;\n\n  var _getWorkspace = getWorkspace(state),\n      isWorkspaceAddVisible = _getWorkspace.isWorkspaceAddVisible;\n\n  return {\n    isWorkspaceAddVisible: isWorkspaceAddVisible,\n    useExtendedFab: width !== 'xs' && !isWorkspaceAddVisible && getWindowIds(state).length === 0\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof Workspace\n * @private\n */\n\n\nvar mapDispatchToProps = {\n  setWorkspaceAddVisibility: actions.setWorkspaceAddVisibility\n};\n/**\n *\n * @param theme\n * @returns {{ctrlBtn: {margin: (number|string)}}}\n */\n\nvar styles = function styles(theme) {\n  return {\n    fab: {\n      margin: theme.spacing(1)\n    },\n    fabPrimary: {\n      '&:focus': {\n        backgroundColor: theme.palette.primary.dark\n      }\n    },\n    fabSecondary: {\n      '&:focus': {\n        backgroundColor: theme.palette.secondary.dark\n      }\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), withWidth(), connect(mapStateToProps, mapDispatchToProps), withPlugins('WorkspaceAddButton'));\nexport default enhance(WorkspaceAddButton);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles, lighten, darken } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { WorkspaceArea } from '../components/WorkspaceArea';\nimport { getConfig, getWindowIds, getWorkspace } from '../state/selectors';\n/**\n * mapStateToProps - to hook up connect\n * @memberof App\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    controlPanelVariant: getWorkspace(state).isWorkspaceAddVisible || getWindowIds(state).length > 0 ? undefined : 'wide',\n    isWorkspaceAddVisible: getWorkspace(state).isWorkspaceAddVisible,\n    isWorkspaceControlPanelVisible: getConfig(state).workspaceControlPanel.enabled,\n    lang: getConfig(state).language\n  };\n};\n/**\n *\n * @param theme\n * @returns {{background: {background: string}}}\n */\n\n\nvar styles = function styles(theme) {\n  var getBackgroundColor = theme.palette.type === 'light' ? darken : lighten;\n  return {\n    viewer: {\n      background: getBackgroundColor(theme.palette.shades.light, 0.1),\n      bottom: 0,\n      left: 0,\n      overflow: 'hidden',\n      position: 'absolute',\n      right: 0,\n      top: 0\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps), withPlugins('WorkspaceArea'));\nexport default enhance(WorkspaceArea);","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { compose } from 'redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { WorkspaceControlPanel } from '../components/WorkspaceControlPanel';\n/**\n *\n * @param theme\n * @returns {{ctrlBtn: {margin: (number|string)},\n * drawer: {overflowX: string, height: string}}}\n */\n\nvar styles = function styles(theme) {\n  var _branding;\n\n  return {\n    branding: (_branding = {\n      display: 'flex',\n      position: 'absolute'\n    }, _defineProperty(_branding, theme.breakpoints.up('xs'), {\n      display: 'none'\n    }), _defineProperty(_branding, theme.breakpoints.up('sm'), {\n      bottom: 0,\n      display: 'block',\n      \"float\": 'none',\n      right: 'auto',\n      width: '100%'\n    }), _defineProperty(_branding, \"right\", 0), _branding),\n    ctrlBtn: {\n      margin: theme.spacing(1)\n    },\n    drawer: {\n      overflowX: 'hidden'\n    },\n    root: _defineProperty({\n      height: 64\n    }, theme.breakpoints.up('sm'), {\n      height: '100%',\n      left: 0,\n      right: 'auto',\n      width: 64\n    }),\n    toolbar: _defineProperty({\n      display: 'flex',\n      justifyContent: 'space-between'\n    }, theme.breakpoints.up('sm'), {\n      flexDirection: 'column',\n      justifyContent: 'flex-start',\n      minHeight: 0\n    }),\n    wide: {\n      width: 'auto'\n    },\n    workspaceButtons: _defineProperty({}, theme.breakpoints.up('sm'), {\n      display: 'flex',\n      flexDirection: 'column'\n    })\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), withPlugins('WorkspaceControlPanel') // further HOC go here\n);\nexport default enhance(WorkspaceControlPanel);","import { compose } from 'redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { WorkspaceControlPanelButtons } from '../components/WorkspaceControlPanelButtons';\n/**\n *\n * @param theme\n * @returns {{ctrlBtn: {margin: (number|string)}}}\n */\n\nvar styles = function styles(theme) {\n  return {\n    ctrlBtn: {\n      margin: theme.spacing(1)\n    }\n  };\n};\n\nvar enhance = compose(withStyles(styles), withPlugins('WorkspaceControlPanelButtons'));\nexport default enhance(WorkspaceControlPanelButtons);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport WorkspaceElastic from '../components/WorkspaceElastic';\nimport { getElasticLayout, getWorkspace } from '../state/selectors';\n/**\n * mapStateToProps - to hook up connect\n * @memberof Workspace\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    elasticLayout: getElasticLayout(state),\n    workspace: getWorkspace(state)\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof Workspace\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, props) {\n  return {\n    setWorkspaceViewportDimensions: function setWorkspaceViewportDimensions(position) {\n      dispatch(actions.setWorkspaceViewportDimensions(position));\n    },\n    setWorkspaceViewportPosition: function setWorkspaceViewportPosition(position) {\n      dispatch(actions.setWorkspaceViewportPosition(position));\n    },\n    updateElasticWindowLayout: function updateElasticWindowLayout(windowId, position) {\n      dispatch(actions.updateElasticWindowLayout(windowId, position));\n    }\n  };\n};\n\nvar styles = {\n  workspace: {\n    boxSizing: 'border-box',\n    margin: 0,\n    position: 'absolute',\n    transitionDuration: '.7s',\n    // order matters\n    // eslint-disable-next-line sort-keys\n    '& .react-draggable-dragging': {\n      transitionDuration: 'unset'\n    }\n  }\n};\nvar enhance = compose(withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('WorkspaceElastic') // further HOC go here\n);\nexport default enhance(WorkspaceElastic);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core';\nimport * as actions from '../state/actions';\nimport WorkspaceElasticWindow from '../components/WorkspaceElasticWindow';\nimport { selectCompanionWindowDimensions, getWorkspace, isFocused, getElasticLayout } from '../state/selectors';\n/**\n * mapStateToProps - to hook up connect\n * @memberof Workspace\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    companionWindowDimensions: selectCompanionWindowDimensions(state, {\n      windowId: windowId\n    }),\n    focused: isFocused(state, {\n      windowId: windowId\n    }),\n    layout: getElasticLayout(state)[windowId],\n    workspace: getWorkspace(state)\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof Workspace\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, props) {\n  return {\n    updateElasticWindowLayout: function updateElasticWindowLayout(windowId, position) {\n      dispatch(actions.updateElasticWindowLayout(windowId, position));\n    }\n  };\n};\n/**\n * @param theme\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    focused: {\n      zIndex: theme.zIndex.modal - 1\n    }\n  };\n};\n\nvar enhance = compose(withStyles(styles), connect(mapStateToProps, mapDispatchToProps) // further HOC go here\n);\nexport default enhance(WorkspaceElasticWindow);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport { WorkspaceExport } from '../components/WorkspaceExport';\nimport { getExportableState } from '../state/selectors';\n/**\n * mapStateToProps - to hook up connect\n * @memberof Workspace\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    exportableState: getExportableState(state)\n  };\n};\n/**\n * Styles for the withStyles HOC\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    accordionTitle: {\n      padding: 0\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, {}), withPlugins('WorkspaceExport'));\nexport default enhance(WorkspaceExport);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport { withPlugins } from '../extend/withPlugins';\nimport { WorkspaceImport } from '../components/WorkspaceImport';\nimport * as actions from '../state/actions';\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof App\n * @private\n */\n\nvar mapDispatchToProps = {\n  addError: actions.addError,\n  importConfig: actions.importMiradorState\n};\n/** */\n\nvar styles = function styles(theme) {\n  return {\n    cancelBtn: {\n      color: theme.palette.text.primary\n    },\n    textField: {\n      width: '100%'\n    },\n    textInput: {\n      fontFamily: 'monospace'\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(null, mapDispatchToProps), withPlugins('WorkspaceImport'));\nexport default enhance(WorkspaceImport);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getContainerId, getShowZoomControlsConfig, getThemeIds, getWorkspace } from '../state/selectors';\nimport { WorkspaceMenu } from '../components/WorkspaceMenu';\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof WorkspaceMenu\n * @private\n */\n\nvar mapDispatchToProps = {\n  toggleZoomControls: actions.toggleZoomControls\n};\n/**\n * mapStateToProps - to hook up connect\n * @memberof WindowViewer\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    containerId: getContainerId(state),\n    isWorkspaceAddVisible: getWorkspace(state).isWorkspaceAddVisible,\n    showThemePicker: getThemeIds(state).length > 0,\n    showZoomControls: getShowZoomControlsConfig(state)\n  };\n};\n\nvar enhance = compose(withTranslation(), connect(mapStateToProps, mapDispatchToProps), withPlugins('WorkspaceMenu'));\nexport default enhance(WorkspaceMenu);","import { compose } from 'redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport { withPlugins } from '../extend/withPlugins';\nimport { WorkspaceMenuButton } from '../components/WorkspaceMenuButton';\n/**\n *\n * @param theme\n * @returns {{ctrlBtn: {margin: (number|string)}}}\n */\n\nvar styles = function styles(theme) {\n  return {\n    ctrlBtn: {\n      margin: theme.spacing(1)\n    },\n    ctrlBtnSelected: {\n      backgroundColor: theme.palette.action.selected\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), withPlugins('WorkspaceMenuButton') // further HOC\n);\nexport default enhance(WorkspaceMenuButton);","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getWorkspace } from '../state/selectors';\nimport * as actions from '../state/actions';\nimport { WorkspaceMosaic } from '../components/WorkspaceMosaic';\nimport globalReactMosaicStyles from '../styles/react-mosaic-component';\n/**\n * mapStateToProps - to hook up connect\n * @memberof Workspace\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    layout: getWorkspace(state).layout,\n    windowIds: getWorkspace(state).windowIds,\n    workspaceId: getWorkspace(state).id\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof Workspace\n * @private\n */\n\n\nvar mapDispatchToProps = {\n  updateWorkspaceMosaicLayout: actions.updateWorkspaceMosaicLayout\n};\n\nvar styles = _objectSpread({\n  root: {\n    '& .mosaic-preview': {\n      boxShadow: 'none'\n    },\n    '& .mosaic-tile': {\n      boxShadow: '0 1px 3px 0 rgba(0, 0, 0, .2), 0 1px 1px 0 rgba(0, 0, 0, .2), 0 2px 1px -1px rgba(0, 0, 0, .2)'\n    },\n    '& .mosaic-window': {\n      boxShadow: 'none'\n    },\n    '& .mosaic-window-toolbar': {\n      display: 'none !important'\n    }\n  }\n}, globalReactMosaicStyles);\n\nvar enhance = compose(withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('WorkspaceMosaic') // further HOC go here\n);\nexport default enhance(WorkspaceMosaic);","// Generated using jss convert node_modules/react-mosaic-component/react-mosaic-component.css > src/styles/react-mosaic-component.js\n// .mosaic-blueprint-theme styles have also been removed\nvar globalReactMosaicStyles = {\n  '@global': {\n    '.mosaic': {\n      height: '100%',\n      width: '100%'\n    },\n    '.mosaic, .mosaic > *': {\n      boxSizing: 'border-box'\n    },\n    '.mosaic .mosaic-zero-state': {\n      position: 'absolute',\n      top: 6,\n      right: 6,\n      bottom: 6,\n      left: 6,\n      width: 'auto',\n      height: 'auto',\n      zIndex: '1'\n    },\n    '.mosaic-root': {\n      position: 'absolute',\n      top: 3,\n      right: 3,\n      bottom: 3,\n      left: 3\n    },\n    '.mosaic-split': {\n      position: 'absolute',\n      zIndex: '1',\n      touchAction: 'none'\n    },\n    '.mosaic-split:hover': {\n      background: 'black'\n    },\n    '.mosaic-split .mosaic-split-line': {\n      position: 'absolute'\n    },\n    '.mosaic-split.-row': {\n      marginLeft: -3,\n      width: 6,\n      cursor: 'ew-resize'\n    },\n    '.mosaic-split.-row .mosaic-split-line': {\n      top: '0',\n      bottom: '0',\n      left: 3,\n      right: 3\n    },\n    '.mosaic-split.-column': {\n      marginTop: -3,\n      height: 6,\n      cursor: 'ns-resize'\n    },\n    '.mosaic-split.-column .mosaic-split-line': {\n      top: 3,\n      bottom: 3,\n      left: '0',\n      right: '0'\n    },\n    '.mosaic-tile': {\n      position: 'absolute',\n      margin: 3\n    },\n    '.mosaic-tile > *': {\n      height: '100%',\n      width: '100%'\n    },\n    '.mosaic-drop-target': {\n      position: 'relative'\n    },\n    '.mosaic-drop-target.drop-target-hover .drop-target-container': {\n      display: 'block'\n    },\n    '.mosaic-drop-target.mosaic > .drop-target-container .drop-target.left': {\n      right: 'calc(100% -  10px )'\n    },\n    '.mosaic-drop-target.mosaic > .drop-target-container .drop-target.right': {\n      left: 'calc(100% -  10px )'\n    },\n    '.mosaic-drop-target.mosaic > .drop-target-container .drop-target.bottom': {\n      top: 'calc(100% -  10px )'\n    },\n    '.mosaic-drop-target.mosaic > .drop-target-container .drop-target.top': {\n      bottom: 'calc(100% -  10px )'\n    },\n    '.mosaic-drop-target .drop-target-container': {\n      position: 'absolute',\n      top: '0',\n      right: '0',\n      bottom: '0',\n      left: '0',\n      display: 'none'\n    },\n    '.mosaic-drop-target .drop-target-container.-dragging': {\n      display: 'block'\n    },\n    '.mosaic-drop-target .drop-target-container .drop-target': {\n      position: 'absolute',\n      top: '0',\n      right: '0',\n      bottom: '0',\n      left: '0',\n      background: 'rgba(0, 0, 0, 0.2)',\n      border: '2px solid black',\n      opacity: '0',\n      zIndex: '5'\n    },\n    '.mosaic-drop-target .drop-target-container .drop-target.left': {\n      right: 'calc(100% -  30% )'\n    },\n    '.mosaic-drop-target .drop-target-container .drop-target.right': {\n      left: 'calc(100% -  30% )'\n    },\n    '.mosaic-drop-target .drop-target-container .drop-target.bottom': {\n      top: 'calc(100% -  30% )'\n    },\n    '.mosaic-drop-target .drop-target-container .drop-target.top': {\n      bottom: 'calc(100% -  30% )'\n    },\n    '.mosaic-drop-target .drop-target-container .drop-target.drop-target-hover': {\n      opacity: '1'\n    },\n    '.mosaic-drop-target .drop-target-container .drop-target.drop-target-hover.left': {\n      right: 'calc(100% -  50% )'\n    },\n    '.mosaic-drop-target .drop-target-container .drop-target.drop-target-hover.right': {\n      left: 'calc(100% -  50% )'\n    },\n    '.mosaic-drop-target .drop-target-container .drop-target.drop-target-hover.bottom': {\n      top: 'calc(100% -  50% )'\n    },\n    '.mosaic-drop-target .drop-target-container .drop-target.drop-target-hover.top': {\n      bottom: 'calc(100% -  50% )'\n    },\n    '.mosaic-window, .mosaic-preview': {\n      position: 'relative',\n      display: 'flex',\n      fallbacks: [{\n        display: '-webkit-box'\n      }],\n      webkitBoxOrient: 'vertical',\n      webkitBoxDirection: 'normal',\n      flexDirection: 'column',\n      overflow: 'hidden',\n      boxShadow: '0 0 1px rgba(0, 0, 0, 0.2)'\n    },\n    '.mosaic-window .mosaic-window-toolbar, .mosaic-preview .mosaic-window-toolbar': {\n      zIndex: '4',\n      display: 'flex',\n      fallbacks: [{\n        display: '-webkit-box'\n      }],\n      webkitBoxPack: 'justify',\n      justifyContent: 'space-between',\n      webkitBoxAlign: 'center',\n      alignItems: 'center',\n      flexShrink: '0',\n      height: 30,\n      background: 'white',\n      boxShadow: '0 1px 1px rgba(0, 0, 0, 0.2)'\n    },\n    '.mosaic-window .mosaic-window-toolbar.draggable, .mosaic-preview .mosaic-window-toolbar.draggable': {\n      cursor: 'move'\n    },\n    '.mosaic-window .mosaic-window-title, .mosaic-preview .mosaic-window-title': {\n      paddingLeft: 15,\n      webkitBoxFlex: '1',\n      flex: '1',\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      overflow: 'hidden',\n      minHeight: 18\n    },\n    '.mosaic-window .mosaic-window-controls, .mosaic-preview .mosaic-window-controls': {\n      display: 'flex',\n      fallbacks: [{\n        display: '-webkit-box'\n      }],\n      height: '100%'\n    },\n    '.mosaic-window .mosaic-window-controls .separator, .mosaic-preview .mosaic-window-controls .separator': {\n      height: 20,\n      borderLeft: '1px solid black',\n      margin: '5px 4px'\n    },\n    '.mosaic-window .mosaic-window-body, .mosaic-preview .mosaic-window-body': {\n      position: 'relative',\n      webkitBoxFlex: '1',\n      flex: '1',\n      height: '0',\n      background: 'white',\n      zIndex: '1',\n      overflow: 'hidden'\n    },\n    '.mosaic-window .mosaic-window-additional-actions-bar, .mosaic-preview .mosaic-window-additional-actions-bar': {\n      position: 'absolute',\n      top: 30,\n      right: '0',\n      bottom: 'initial',\n      left: '0',\n      height: '0',\n      overflow: 'hidden',\n      background: 'white',\n      webkitBoxPack: 'end',\n      justifyContent: 'flex-end',\n      display: 'flex',\n      fallbacks: [{\n        display: '-webkit-box'\n      }],\n      zIndex: '3'\n    },\n    '.mosaic-window .mosaic-window-additional-actions-bar .bp3-button, .mosaic-preview .mosaic-window-additional-actions-bar .bp3-button': {\n      margin: '0'\n    },\n    '.mosaic-window .mosaic-window-additional-actions-bar .bp3-button:after, .mosaic-preview .mosaic-window-additional-actions-bar .bp3-button:after': {\n      display: 'none'\n    },\n    '.mosaic-window .mosaic-window-body-overlay, .mosaic-preview .mosaic-window-body-overlay': {\n      position: 'absolute',\n      top: '0',\n      right: '0',\n      bottom: '0',\n      left: '0',\n      opacity: '0',\n      background: 'white',\n      display: 'none',\n      zIndex: '2'\n    },\n    '.mosaic-window.additional-controls-open .mosaic-window-additional-actions-bar, .mosaic-preview.additional-controls-open .mosaic-window-additional-actions-bar': {\n      height: 30\n    },\n    '.mosaic-window.additional-controls-open .mosaic-window-body-overlay, .mosaic-preview.additional-controls-open .mosaic-window-body-overlay': {\n      display: 'block'\n    },\n    '.mosaic-window .mosaic-preview, .mosaic-preview .mosaic-preview': {\n      height: '100%',\n      width: '100%',\n      position: 'absolute',\n      zIndex: '0',\n      border: '1px solid black',\n      maxHeight: 400\n    },\n    '.mosaic-window .mosaic-preview .mosaic-window-body, .mosaic-preview .mosaic-preview .mosaic-window-body': {\n      display: 'flex',\n      fallbacks: [{\n        display: '-webkit-box'\n      }],\n      webkitBoxOrient: 'vertical',\n      webkitBoxDirection: 'normal',\n      flexDirection: 'column',\n      webkitBoxAlign: 'center',\n      alignItems: 'center',\n      webkitBoxPack: 'center',\n      justifyContent: 'center'\n    },\n    '.mosaic-window .mosaic-preview h4, .mosaic-preview .mosaic-preview h4': {\n      marginBottom: 10\n    },\n    '.mosaic:not(.mosaic-blueprint-theme) .mosaic-default-control.close-button:before': {\n      content: '\\'Close\\''\n    },\n    '.mosaic:not(.mosaic-blueprint-theme) .mosaic-default-control.split-button:before': {\n      content: '\\'Split\\''\n    },\n    '.mosaic:not(.mosaic-blueprint-theme) .mosaic-default-control.replace-button:before': {\n      content: '\\'Replace\\''\n    },\n    '.mosaic:not(.mosaic-blueprint-theme) .mosaic-default-control.expand-button:before': {\n      content: '\\'Expand\\''\n    }\n  }\n};\nexport default globalReactMosaicStyles;","import { compose } from 'redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { WorkspaceOptionsButton } from '../components/WorkspaceOptionsButton';\n/**\n *\n * @param theme\n */\n\nvar styles = function styles(theme) {\n  return {\n    ctrlBtn: {\n      margin: theme.spacing(1)\n    },\n    ctrlBtnSelected: {\n      backgroundColor: theme.palette.action.selected\n    }\n  };\n};\n\nvar enhance = compose(withStyles(styles), withTranslation(), withPlugins('WorkspaceOptionsButton'));\nexport default enhance(WorkspaceOptionsButton);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { getContainerId } from '../state/selectors';\nimport { WorkspaceOptionsMenu } from '../components/WorkspaceOptionsMenu';\n/** Used for connect */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    containerId: getContainerId(state)\n  };\n}; // containerId: getContainerId(state),/\n\n\nvar enhance = compose(withTranslation(), connect(mapStateToProps, null));\nexport default enhance(WorkspaceOptionsMenu);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport { withPlugins } from '../extend/withPlugins';\nimport { WorkspaceSelectionDialog } from '../components/WorkspaceSelectionDialog';\nimport * as actions from '../state/actions';\nimport { getWorkspaceType } from '../state/selectors';\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestListItem\n * @private\n */\n\nvar mapDispatchToProps = {\n  updateWorkspace: actions.updateWorkspace\n};\n/**\n * mapStateToProps - to hook up connect\n * @memberof Workspace\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    workspaceType: getWorkspaceType(state)\n  };\n};\n/** */\n\n\nvar styles = function styles(theme) {\n  return {\n    card: {\n      backgroundColor: 'transparent',\n      borderRadius: '0',\n      boxShadow: '0 0 transparent',\n      display: 'flex'\n    },\n    content: {\n      flex: '1 0 auto'\n    },\n    details: {\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    headline: {\n      paddingBottom: '6px'\n    },\n    list: {\n      '&active': {\n        outline: 'none'\n      },\n      '&focus': {\n        outline: 'none'\n      },\n      outline: 'none'\n    },\n    media: {\n      flex: '0 0 120px',\n      height: '90px'\n    },\n    menuItem: {\n      height: 'auto',\n      overflow: 'auto',\n      whiteSpace: 'inherit'\n    },\n    root: {\n      '&:last-child': {\n        paddingBottom: '12px'\n      },\n      paddingBottom: 0,\n      paddingTop: 0,\n      textAlign: 'left'\n    },\n    svgIcon: {\n      flexShrink: 0,\n      height: '90px',\n      width: '120px'\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('WorkspaceSelectionDialog'));\nexport default enhance(WorkspaceSelectionDialog);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getShowZoomControlsConfig, getViewer } from '../state/selectors';\nimport { ZoomControls } from '../components/ZoomControls';\n/**\n * mapStateToProps - to hook up connect\n * @memberof Workspace\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    showZoomControls: getShowZoomControlsConfig(state),\n    viewer: getViewer(state, {\n      windowId: windowId\n    })\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof Workspace\n * @private\n */\n\n\nvar mapDispatchToProps = {\n  updateViewport: actions.updateViewport\n};\n/**\n *\n * @param theme\n * @returns {{zoom_controls: {position: string, right: number},\n * ListItem: {paddingBottom: number, paddingTop: number}}}\n */\n\nvar styles = function styles(theme) {\n  return {\n    divider: {\n      borderRight: '1px solid #808080',\n      display: 'inline-block',\n      height: '24px',\n      margin: '12px 6px'\n    },\n    ListItem: {\n      paddingBottom: 0,\n      paddingTop: 0\n    },\n    zoom_controls: {\n      display: 'flex',\n      flexDirection: 'row',\n      justifyContent: 'center'\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('ZoomControls'));\nexport default enhance(ZoomControls);","import React from 'react';\nvar PluginContext = /*#__PURE__*/React.createContext();\nexport default PluginContext;","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport update from 'lodash/update';\nimport { connect } from 'react-redux';\nimport CompanionWindowRegistry from '../lib/CompanionWindowRegistry';\n/**\n * Returns a mapping from targets to plugins and modes\n *\n * @param {Array} plugins\n * @return {Object} - looks like:\n *\n *  {\n *    'WorkspacePanel': {\n *      wrap:     [plugin3, ...],\n *      add:      [plugin4, ...],\n *    },\n *    ...\n *  }\n */\n\nexport function createTargetToPluginMapping(plugins) {\n  return plugins.reduce(function (map, plugin) {\n    return update(map, [plugin.target, plugin.mode], function (x) {\n      return [].concat(_toConsumableArray(x || []), [plugin]);\n    });\n  }, {});\n}\n/** */\n\nexport function connectPluginsToStore(plugins) {\n  return plugins.map(function (plugin) {\n    return _objectSpread(_objectSpread({}, plugin), {}, {\n      component: connectPluginComponent(plugin)\n    });\n  });\n}\n/** */\n\nexport function addPluginsToCompanionWindowsRegistry(plugins) {\n  plugins.filter(function (p) {\n    return p.companionWindowKey;\n  }).forEach(function (plugin) {\n    CompanionWindowRegistry[plugin.companionWindowKey] = plugin.component;\n  });\n  return CompanionWindowRegistry;\n}\n/** Connect plugin component to state */\n\nfunction connectPluginComponent(plugin) {\n  if (!plugin.mapStateToProps && !plugin.mapDispatchToProps) return plugin.component;\n  return connect.apply(void 0, [plugin.mapStateToProps, plugin.mapDispatchToProps].concat(_toConsumableArray(plugin.connectOptions || [])))(plugin.component);\n}","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useEffect, useState } from 'react';\nimport PluginContext from './PluginContext';\nimport { connectPluginsToStore, createTargetToPluginMapping, addPluginsToCompanionWindowsRegistry } from './pluginMapping';\n/**  */\n\nexport default function PluginProvider(props) {\n  var plugins = props.plugins,\n      children = props.children;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      pluginMap = _useState2[0],\n      setPluginMap = _useState2[1];\n\n  useEffect(function () {\n    var connectedPlugins = connectPluginsToStore(plugins);\n    addPluginsToCompanionWindowsRegistry(connectedPlugins);\n    setPluginMap(createTargetToPluginMapping(connectedPlugins));\n  }, [plugins]);\n  return /*#__PURE__*/React.createElement(PluginContext.Provider, {\n    value: pluginMap\n  }, children);\n}\nPluginProvider.defaultProps = {\n  children: null,\n  plugins: []\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useContext } from 'react';\nimport curry from 'lodash/curry';\nimport isEmpty from 'lodash/isEmpty';\nimport PluginContext from './PluginContext';\n/** withPlugins should be the innermost HOC */\n\nfunction _withPlugins(targetName, TargetComponent) {\n  // eslint-disable-line no-underscore-dangle\n\n  /** */\n  function PluginHoc(props, ref) {\n    var pluginMap = useContext(PluginContext);\n\n    var passDownProps = _objectSpread(_objectSpread({}, props), ref ? {\n      ref: ref\n    } : {});\n\n    var plugins = (pluginMap || {})[targetName];\n\n    if (isEmpty(plugins) || isEmpty(plugins.wrap) && isEmpty(plugins.add)) {\n      return /*#__PURE__*/React.createElement(TargetComponent, passDownProps);\n    }\n\n    var PluginComponents = (plugins.add || []).map(function (plugin) {\n      return plugin.component;\n    });\n    var targetComponent = /*#__PURE__*/React.createElement(TargetComponent, Object.assign({}, passDownProps, {\n      PluginComponents: PluginComponents\n    }));\n    if (isEmpty(plugins.wrap)) return targetComponent;\n    /** */\n\n    var pluginWrapper = function pluginWrapper(children, plugin) {\n      var WrapPluginComponent = plugin.component;\n      return /*#__PURE__*/React.createElement(WrapPluginComponent, Object.assign({\n        targetProps: passDownProps\n      }, passDownProps, {\n        PluginComponents: PluginComponents,\n        TargetComponent: TargetComponent\n      }), children);\n    };\n\n    return plugins.wrap.slice().reverse().reduce(pluginWrapper, /*#__PURE__*/React.createElement(TargetComponent, passDownProps));\n  }\n\n  var whatever = /*#__PURE__*/React.forwardRef(PluginHoc);\n  whatever.displayName = \"WithPlugins(\".concat(targetName, \")\");\n  return whatever;\n}\n/** withPlugins('MyComponent')(MyComponent) */\n\n\nexport var withPlugins = curry(_withPlugins);","import i18n from 'i18next';\nimport { initReactI18next } from 'react-i18next';\nimport ar from './locales/ar/translation.json';\nimport de from './locales/de/translation.json';\nimport en from './locales/en/translation.json';\nimport zhCn from './locales/zhCn/translation.json';\nimport zhTw from './locales/zhTw/translation.json';\nimport fr from './locales/fr/translation.json';\nimport ja from './locales/ja/translation.json';\nimport kr from './locales/kr/translation.json';\nimport nl from './locales/nl/translation.json';\nimport pl from './locales/pl/translation.json';\nimport ptBr from './locales/ptBr/translation.json';\nimport it from './locales/it/translation.json';\nimport sr from './locales/sr/translation.json';\nimport sv from './locales/sv/translation.json';\nimport lt from './locales/lt/translation.json';\nimport vi from './locales/vi/translation.json';\nimport nbNo from './locales/nbNo/translation.json';\n/**\n * Load translations for each language\n */\n\nfunction createI18nInstance() {\n  var resources = {\n    ar: ar,\n    de: de,\n    en: en,\n    fr: fr,\n    it: it,\n    ja: ja,\n    kr: kr,\n    lt: lt,\n    'nb-NO': nbNo,\n    nl: nl,\n    pl: pl,\n    'pt-BR': ptBr,\n    sr: sr,\n    sv: sv,\n    vi: vi,\n    'zh-CN': zhCn,\n    'zh-TW': zhTw\n  };\n  var instance = i18n.createInstance();\n  instance.use(initReactI18next).init({\n    fallbackLng: 'en',\n    interpolation: {\n      escapeValue: false // react is already safe from xss\n\n    },\n    lng: 'en',\n    resources: resources\n  });\n  return instance;\n}\n\nexport default createI18nInstance;","import isString from 'lodash/isString';\nimport isUndefined from 'lodash/isUndefined';\nimport isFunction from 'lodash/isFunction';\nimport isObject from 'lodash/isObject';\nimport isNull from 'lodash/isNull';\nimport values from 'lodash/values';\n/** */\n\nexport var validatePlugin = function validatePlugin(plugin) {\n  return [checkPlugin, checkName, checkTarget, checkMode, checkMapStateToProps, checkMapDispatchToProps, checkReducers].every(function (check) {\n    return check(plugin);\n  });\n};\n/** */\n\nvar checkPlugin = function checkPlugin(plugin) {\n  return isObject(plugin);\n};\n/** */\n\n\nvar checkName = function checkName(plugin) {\n  var name = plugin.name;\n  return isUndefined(name) || isString(name);\n};\n/** */\n\n\nvar checkTarget = function checkTarget(plugin) {\n  var mode = plugin.mode,\n      target = plugin.target;\n  if (isUndefined(mode)) return isUndefined(target);\n  return isString(target);\n};\n/** */\n\n\nvar checkMode = function checkMode(plugin) {\n  var mode = plugin.mode;\n  return isUndefined(mode) || ['add', 'wrap'].some(function (s) {\n    return s === mode;\n  });\n};\n/** */\n\n\nvar checkMapStateToProps = function checkMapStateToProps(plugin) {\n  var mapStateToProps = plugin.mapStateToProps;\n  return isUndefined(mapStateToProps) || isNull(mapStateToProps) || isFunction(mapStateToProps);\n};\n/** */\n\n\nvar checkMapDispatchToProps = function checkMapDispatchToProps(plugin) {\n  var mapDispatchToProps = plugin.mapDispatchToProps;\n  return isUndefined(mapDispatchToProps) || isNull(mapDispatchToProps) || isFunction(mapDispatchToProps) || isObject(mapDispatchToProps);\n};\n/** */\n\n\nvar checkReducers = function checkReducers(plugin) {\n  var reducers = plugin.reducers;\n  return isUndefined(reducers) || isObject(reducers) && values(reducers).every(isFunction);\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport deepmerge from 'deepmerge';\nimport { validatePlugin } from './pluginValidation';\n/** */\n\nexport function filterValidPlugins(plugins) {\n  var _splitPluginsByValida = splitPluginsByValidation(plugins),\n      validPlugins = _splitPluginsByValida.validPlugins,\n      invalidPlugins = _splitPluginsByValida.invalidPlugins;\n\n  logInvalidPlugins(invalidPlugins);\n  return validPlugins;\n}\n/** */\n\nfunction splitPluginsByValidation(plugins) {\n  var invalidPlugins = [];\n  var validPlugins = [];\n  plugins.forEach(function (plugin) {\n    if (Array.isArray(plugin)) {\n      var allValid = plugin.every(function (p) {\n        return validatePlugin(p);\n      });\n      allValid ? validPlugins.push.apply(validPlugins, _toConsumableArray(plugin)) : invalidPlugins.push.apply(invalidPlugins, _toConsumableArray(plugin));\n    } else {\n      validatePlugin(plugin) ? validPlugins.push(plugin) : invalidPlugins.push(plugin);\n    }\n  });\n  return {\n    invalidPlugins: invalidPlugins,\n    validPlugins: validPlugins\n  };\n}\n/** */\n\n\nfunction logInvalidPlugins(plugins) {\n  plugins.forEach(function (plugin) {\n    return console.log(\"Mirador: Plugin \".concat(plugin.name, \" is not valid and was rejected.\"));\n  });\n}\n/**  */\n\n\nexport function getReducersFromPlugins(plugins) {\n  return plugins && plugins.reduce(function (acc, plugin) {\n    return _objectSpread(_objectSpread({}, acc), plugin.reducers);\n  }, {});\n}\n/**  */\n\nexport function getConfigFromPlugins(plugins) {\n  return plugins && plugins.reduce(function (acc, plugin) {\n    return deepmerge(acc, plugin.config || {});\n  }, {});\n}\n/**  */\n\nexport function getSagasFromPlugins(plugins) {\n  return plugins && plugins.filter(function (plugin) {\n    return plugin.saga;\n  }).map(function (plugin) {\n    return plugin.saga;\n  });\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport omit from 'lodash/omit';\nimport ActionTypes from '../actions/action-types';\n/** */\n\nexport function accessTokensReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ActionTypes.RESOLVE_AUTHENTICATION_REQUEST:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.tokenServiceId, {\n        authId: action.id,\n        id: action.tokenServiceId,\n        isFetching: true\n      }));\n\n    case ActionTypes.REQUEST_ACCESS_TOKEN:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.serviceId, {\n        authId: action.authId,\n        id: action.serviceId,\n        isFetching: true\n      }));\n\n    case ActionTypes.RECEIVE_ACCESS_TOKEN:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.serviceId, _objectSpread(_objectSpread({}, state[action.serviceId]), {}, {\n        isFetching: false,\n        json: action.json\n      })));\n\n    case ActionTypes.RECEIVE_ACCESS_TOKEN_FAILURE:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.serviceId, _objectSpread(_objectSpread({}, state[action.serviceId]), {}, {\n        error: action.error,\n        isFetching: false\n      })));\n\n    case ActionTypes.RESET_AUTHENTICATION_STATE:\n      return omit(state, action.tokenServiceId);\n\n    case ActionTypes.RECEIVE_INFO_RESPONSE:\n      if (!action.tokenServiceId) return state;\n      if (state[action.tokenServiceId].success) return state;\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.tokenServiceId, _objectSpread(_objectSpread({}, state[action.tokenServiceId]), {}, {\n        success: true\n      })));\n\n    default:\n      return state;\n  }\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport ActionTypes from '../actions/action-types';\n/**\n * annotationReducer\n */\n\nexport var annotationsReducer = function annotationsReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ActionTypes.REQUEST_ANNOTATION:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.targetId, _objectSpread(_objectSpread({}, state[action.targetId]), {}, _defineProperty({}, action.annotationId, {\n        id: action.annotationId,\n        isFetching: true\n      }))));\n\n    case ActionTypes.RECEIVE_ANNOTATION:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.targetId, _objectSpread(_objectSpread({}, state[action.targetId]), {}, _defineProperty({}, action.annotationId, {\n        id: action.annotationId,\n        isFetching: false,\n        json: action.annotationJson\n      }))));\n\n    case ActionTypes.RECEIVE_ANNOTATION_FAILURE:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.targetId, _objectSpread(_objectSpread({}, state[action.targetId]), {}, _defineProperty({}, action.annotationId, {\n        error: action.error,\n        id: action.annotationId,\n        isFetching: false\n      }))));\n\n    case ActionTypes.IMPORT_MIRADOR_STATE:\n      return {};\n\n    default:\n      return state;\n  }\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport omit from 'lodash/omit';\nimport ActionTypes from '../actions/action-types';\n/**\n * authReducer\n */\n\nexport var authReducer = function authReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ActionTypes.ADD_AUTHENTICATION_REQUEST:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.id, {\n        id: action.id,\n        isFetching: true,\n        profile: action.profile,\n        windowId: action.windowId\n      }));\n\n    case ActionTypes.RESOLVE_AUTHENTICATION_REQUEST:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.id, _objectSpread(_objectSpread({}, state[action.id]), {}, {\n        isFetching: false,\n        ok: action.ok\n      })));\n\n    case ActionTypes.RECEIVE_ACCESS_TOKEN:\n      if (!action.authId) return state;\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.authId, _objectSpread(_objectSpread({}, state[action.authId]), {}, {\n        ok: true\n      })));\n\n    case ActionTypes.RESET_AUTHENTICATION_STATE:\n      return omit(state, action.id);\n\n    default:\n      return state;\n  }\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport ActionTypes from '../actions/action-types';\n/**\n * catalogReducer\n */\n\nexport var catalogReducer = function catalogReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ActionTypes.ADD_RESOURCE:\n      if (state.some(function (m) {\n        return m.manifestId === action.manifestId;\n      })) return state;\n      return [_objectSpread({\n        manifestId: action.manifestId\n      }, action.payload)].concat(_toConsumableArray(state));\n\n    case ActionTypes.ADD_WINDOW:\n      if (state.some(function (m) {\n        return m.manifestId === action.window.manifestId;\n      })) return state;\n      return [{\n        manifestId: action.window.manifestId\n      }].concat(_toConsumableArray(state));\n\n    case ActionTypes.UPDATE_WINDOW:\n      if (!action.payload.manifestId) return state;\n      if (state.some(function (m) {\n        return m.manifestId === action.payload.manifestId;\n      })) return state;\n      return [{\n        manifestId: action.payload.manifestId\n      }].concat(_toConsumableArray(state));\n\n    case ActionTypes.REMOVE_RESOURCE:\n      return state.filter(function (r) {\n        return r.manifestId !== action.manifestId;\n      });\n\n    case ActionTypes.IMPORT_CONFIG:\n      return action.config.catalog || [];\n\n    case ActionTypes.IMPORT_MIRADOR_STATE:\n      return action.state.catalog || [];\n\n    default:\n      return state;\n  }\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport omit from 'lodash/omit';\nimport set from 'lodash/fp/set';\nimport update from 'lodash/fp/update';\nimport ActionTypes from '../actions/action-types';\n/** */\n\nexport function companionWindowsReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ActionTypes.ADD_COMPANION_WINDOW:\n      return set([action.id], action.payload, state);\n\n    case ActionTypes.ADD_WINDOW:\n      return _objectSpread(_objectSpread({}, state), (action.companionWindows || []).reduce(function (newState, cw) {\n        newState[cw.id] = _objectSpread(_objectSpread(_objectSpread({}, state[cw.id]), cw), {}, {\n          windowId: action.id\n        });\n        return newState;\n      }, {}));\n\n    case ActionTypes.REMOVE_WINDOW:\n      return Object.keys(state).reduce(function (object, key) {\n        if (state[key].windowId !== action.windowId) {\n          object[key] = state[key]; // eslint-disable-line no-param-reassign\n        }\n\n        return object;\n      }, {});\n\n    case ActionTypes.UPDATE_COMPANION_WINDOW:\n      return update([action.id], function (orig) {\n        return _objectSpread(_objectSpread({}, orig || {}), action.payload);\n      }, state);\n\n    case ActionTypes.REMOVE_COMPANION_WINDOW:\n      return omit(state, action.id);\n\n    case ActionTypes.IMPORT_MIRADOR_STATE:\n      return action.state.companionWindows || [];\n\n    case ActionTypes.TOGGLE_TOC_NODE:\n      return update([action.id, 'tocNodes'], function (orig) {\n        return _objectSpread(_objectSpread({}, orig || {}), action.payload);\n      }, state);\n\n    default:\n      return state;\n  }\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport deepmerge from 'deepmerge';\nimport settings from '../../config/settings';\nimport ActionTypes from '../actions/action-types';\n\nvar initialState = _objectSpread({}, settings);\n/** Overwrite arrays when deep merging */\n\n\nvar overwriteMerge = function overwriteMerge(destinationArray, sourceArray, options) {\n  return sourceArray;\n};\n/**\n * configReducer - does a deep merge of the config\n */\n\n\nexport var configReducer = function configReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ActionTypes.UPDATE_CONFIG:\n    case ActionTypes.IMPORT_CONFIG:\n      return deepmerge(state, action.config, {\n        arrayMerge: overwriteMerge\n      });\n\n    case ActionTypes.SET_CONFIG:\n      return action.config;\n\n    case ActionTypes.IMPORT_MIRADOR_STATE:\n      return action.state.config || {};\n\n    default:\n      return state;\n  }\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport update from 'lodash/fp/update';\nimport omit from 'lodash/omit';\nimport ActionTypes from '../actions/action-types';\n/**\n * elasticLayoutReducer\n */\n\nexport var elasticLayoutReducer = function elasticLayoutReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ActionTypes.ADD_WINDOW:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.window.id, _objectSpread({\n        windowId: action.window.id\n      }, action.elasticLayout)));\n\n    case ActionTypes.UPDATE_ELASTIC_WINDOW_LAYOUT:\n      return update([action.windowId], function (orig) {\n        return _objectSpread(_objectSpread({}, orig || {}), action.payload);\n      }, state);\n\n    case ActionTypes.REMOVE_WINDOW:\n      return omit(state, action.windowId);\n\n    case ActionTypes.IMPORT_MIRADOR_STATE:\n      return action.state.elasticLayout || {};\n\n    default:\n      return state;\n  }\n};","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport without from 'lodash/without';\nimport ActionTypes from '../actions/action-types';\nvar defaultState = {\n  items: []\n};\n/**\n * errorsReducer\n */\n\nexport var errorsReducer = function errorsReducer() {\n  var _objectSpread2, _objectSpread3, _objectSpread4;\n\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var ret;\n\n  switch (action.type) {\n    case ActionTypes.ADD_ERROR:\n      return _objectSpread(_objectSpread({}, state), {}, (_objectSpread2 = {}, _defineProperty(_objectSpread2, action.id, {\n        id: action.id,\n        message: action.message\n      }), _defineProperty(_objectSpread2, \"items\", [].concat(_toConsumableArray(state.items), [action.id])), _objectSpread2));\n    // eslint-disable-line max-len\n\n    case ActionTypes.RECEIVE_INFO_RESPONSE_FAILURE:\n      return _objectSpread(_objectSpread({}, state), {}, (_objectSpread3 = {}, _defineProperty(_objectSpread3, action.infoId, {\n        id: action.infoId,\n        message: action.error\n      }), _defineProperty(_objectSpread3, \"items\", [].concat(_toConsumableArray(state.items), [action.infoId])), _objectSpread3));\n\n    case ActionTypes.RECEIVE_SEARCH_FAILURE:\n      return _objectSpread(_objectSpread({}, state), {}, (_objectSpread4 = {}, _defineProperty(_objectSpread4, action.searchId, {\n        id: action.searchId,\n        message: action.error\n      }), _defineProperty(_objectSpread4, \"items\", [].concat(_toConsumableArray(state.items), [action.searchId])), _objectSpread4));\n\n    case ActionTypes.REMOVE_ERROR:\n      ret = Object.keys(state).reduce(function (object, key) {\n        if (key !== action.id) {\n          object[key] = state[key]; // eslint-disable-line no-param-reassign\n        }\n\n        return object;\n      }, {});\n      ret.items = without(ret.items, action.id);\n      return ret;\n\n    case ActionTypes.IMPORT_MIRADOR_STATE:\n      return defaultState;\n\n    default:\n      return state;\n  }\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport ActionTypes from '../actions/action-types';\n/**\n * infoResponsesReducer\n */\n\nexport var infoResponsesReducer = function infoResponsesReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ActionTypes.REQUEST_INFO_RESPONSE:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.infoId, {\n        id: action.infoId,\n        isFetching: true\n      }));\n\n    case ActionTypes.RECEIVE_INFO_RESPONSE:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.infoId, {\n        degraded: false,\n        id: action.infoId,\n        isFetching: false,\n        json: action.infoJson,\n        tokenServiceId: action.tokenServiceId\n      }));\n\n    case ActionTypes.RECEIVE_DEGRADED_INFO_RESPONSE:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.infoId, {\n        degraded: true,\n        id: action.infoId,\n        isFetching: false,\n        json: action.infoJson,\n        tokenServiceId: action.tokenServiceId\n      }));\n\n    case ActionTypes.RECEIVE_INFO_RESPONSE_FAILURE:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.infoId, {\n        error: action.error,\n        id: action.infoId,\n        isFetching: false,\n        tokenServiceId: action.tokenServiceId\n      }));\n\n    case ActionTypes.REMOVE_INFO_RESPONSE:\n      return Object.keys(state).reduce(function (object, key) {\n        if (key !== action.infoId) {\n          object[key] = state[key]; // eslint-disable-line no-param-reassign\n        }\n\n        return object;\n      }, {});\n\n    case ActionTypes.IMPORT_MIRADOR_STATE:\n      return {};\n\n    default:\n      return state;\n  }\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport omit from 'lodash/omit';\nimport deepmerge from 'deepmerge';\nimport ActionTypes from '../actions/action-types';\n/**\n * configReducer - does a deep merge of the config\n */\n\nexport var layersReducer = function layersReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ActionTypes.UPDATE_LAYERS:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, _defineProperty({}, action.canvasId, deepmerge((state[action.windowId] || {})[action.canvasId] || {}, action.payload)))));\n\n    case ActionTypes.REMOVE_WINDOW:\n      return omit(state, [action.windowId]);\n\n    default:\n      return state;\n  }\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport omit from 'lodash/omit';\nimport ActionTypes from '../actions/action-types';\n/**\n * manifestsReducer\n */\n\nexport var manifestsReducer = function manifestsReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ActionTypes.REQUEST_MANIFEST:\n      return _objectSpread(_defineProperty({}, action.manifestId, _objectSpread(_objectSpread(_objectSpread({}, state[action.manifestId]), action.properties), {}, {\n        id: action.manifestId\n      })), omit(state, action.manifestId));\n\n    case ActionTypes.RECEIVE_MANIFEST:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.manifestId, _objectSpread(_objectSpread({}, state[action.manifestId]), {}, {\n        error: null,\n        // Explicitly set the error to null in case this is a re-fetch\n        id: action.manifestId,\n        isFetching: false,\n        json: action.manifestJson\n      })));\n\n    case ActionTypes.RECEIVE_MANIFEST_FAILURE:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.manifestId, _objectSpread(_objectSpread({}, state[action.manifestId]), {}, {\n        error: action.error,\n        id: action.manifestId,\n        isFetching: false\n      })));\n\n    case ActionTypes.REMOVE_MANIFEST:\n      return Object.keys(state).reduce(function (object, key) {\n        if (key !== action.manifestId) {\n          object[key] = state[key]; // eslint-disable-line no-param-reassign\n        }\n\n        return object;\n      }, {});\n\n    case ActionTypes.IMPORT_MIRADOR_STATE:\n      return action.state.manifests || {};\n\n    default:\n      return state;\n  }\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport omit from 'lodash/omit';\nimport flatten from 'lodash/flatten';\nimport ActionTypes from '../actions/action-types';\n/**\n * searchReducer\n */\n\nexport var searchesReducer = function searchesReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var searchStruct = (state[action.windowId] || {})[action.companionWindowId] || {};\n\n  switch (action.type) {\n    case ActionTypes.REQUEST_SEARCH:\n      if (searchStruct.query !== action.query) {\n        // new query\n        return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, _defineProperty({}, action.companionWindowId, _objectSpread(_objectSpread({}, searchStruct), {}, {\n          data: _defineProperty({}, action.searchId, {\n            isFetching: true\n          }),\n          query: action.query,\n          selectedContentSearchAnnotation: []\n        })))));\n      } // paginating through a query\n\n\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, _defineProperty({}, action.companionWindowId, _objectSpread(_objectSpread({}, searchStruct), {}, {\n        data: _objectSpread(_objectSpread({}, searchStruct.data), {}, _defineProperty({}, action.searchId, {\n          isFetching: true\n        }))\n      })))));\n\n    case ActionTypes.RECEIVE_SEARCH:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, _defineProperty({}, action.companionWindowId, _objectSpread(_objectSpread({}, searchStruct), {}, {\n        data: _objectSpread(_objectSpread({}, searchStruct.data), {}, _defineProperty({}, action.searchId, {\n          isFetching: false,\n          json: action.searchJson\n        }))\n      })))));\n\n    case ActionTypes.RECEIVE_SEARCH_FAILURE:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, _defineProperty({}, action.companionWindowId, _objectSpread(_objectSpread({}, searchStruct), {}, {\n        data: _objectSpread(_objectSpread({}, searchStruct.data), {}, _defineProperty({}, action.searchId, {\n          error: action.error,\n          isFetching: false\n        }))\n      })))));\n\n    case ActionTypes.REMOVE_SEARCH:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, Object.keys(state[action.windowId]).reduce(function (object, key) {\n        if (key !== action.companionWindowId) {\n          object[key] = state[action.windowId][key]; // eslint-disable-line no-param-reassign\n        }\n\n        return object;\n      }, {})));\n\n    case ActionTypes.SET_CONTENT_SEARCH_CURRENT_ANNOTATIONS:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, _defineProperty({}, action.companionWindowId, _objectSpread(_objectSpread({}, searchStruct), {}, {\n        selectedContentSearchAnnotationIds: action.annotationIds\n      })))));\n\n    case ActionTypes.SELECT_ANNOTATION:\n      if (!state[action.windowId]) return state;\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, Object.keys(state[action.windowId]).reduce(function (object, key) {\n        var search = state[action.windowId][key];\n        var searchHasAnnotation = search.data && Object.values(search.data).filter(function (resp) {\n          return resp.json && resp.json.resources;\n        }).some(function (resp) {\n          return flatten([resp.json.resources]).some(function (r) {\n            return r['@id'] === action.annotationId;\n          });\n        });\n\n        if (searchHasAnnotation) {\n          object[key] = _objectSpread(_objectSpread({}, search), {}, {\n            selectedContentSearchAnnotationIds: [action.annotationId]\n          });\n        } else {\n          object[key] = search; // eslint-disable-line no-param-reassign\n        }\n\n        return object;\n      }, {})));\n\n    case ActionTypes.IMPORT_MIRADOR_STATE:\n      return {};\n\n    case ActionTypes.REMOVE_WINDOW:\n      return omit(state, action.windowId);\n\n    case ActionTypes.REMOVE_COMPANION_WINDOW:\n      if (!state[action.windowId]) return state;\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread({}, omit(state[action.windowId], action.id))));\n\n    default:\n      return state;\n  }\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport set from 'lodash/fp/set';\nimport omit from 'lodash/omit';\nimport ActionTypes from '../actions/action-types';\n/**\n * viewersReducer\n */\n\nexport var viewersReducer = function viewersReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ActionTypes.UPDATE_VIEWPORT:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), action.payload)));\n\n    case ActionTypes.REMOVE_WINDOW:\n      return omit(state, action.windowId);\n\n    case ActionTypes.SET_WINDOW_VIEW_TYPE:\n      return set([action.windowId], null, state);\n\n    case ActionTypes.SET_CANVAS:\n      if (!action.preserveViewport) {\n        return set([action.windowId], null, state);\n      }\n\n      return state;\n\n    case ActionTypes.IMPORT_MIRADOR_STATE:\n      return action.state.viewers || {};\n\n    default:\n      return state;\n  }\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport update from 'lodash/fp/update';\nimport omit from 'lodash/omit';\nimport ActionTypes from '../actions/action-types';\n/**\n * windowsReducer\n */\n\nexport var windowsReducer = function windowsReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ActionTypes.ADD_WINDOW:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.window.id, action.window));\n\n    case ActionTypes.MAXIMIZE_WINDOW:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, {\n        maximized: true\n      })));\n\n    case ActionTypes.MINIMIZE_WINDOW:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, {\n        maximized: false\n      })));\n\n    case ActionTypes.UPDATE_WINDOW:\n      return update([action.id], function (orig) {\n        return _objectSpread(_objectSpread({}, orig || {}), action.payload);\n      }, state);\n\n    case ActionTypes.REMOVE_WINDOW:\n      return omit(state, [action.windowId]);\n\n    case ActionTypes.TOGGLE_WINDOW_SIDE_BAR:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, {\n        sideBarOpen: !state[action.windowId].sideBarOpen\n      })));\n\n    case ActionTypes.SET_WINDOW_VIEW_TYPE:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, {\n        view: action.viewType\n      })));\n\n    case ActionTypes.UPDATE_WINDOW_POSITION:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.payload.windowId, _objectSpread(_objectSpread({}, state[action.payload.windowId]), {}, {\n        x: action.payload.position.x,\n        y: action.payload.position.y\n      })));\n\n    case ActionTypes.SET_WINDOW_SIZE:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.payload.windowId, _objectSpread(_objectSpread({}, state[action.payload.windowId]), {}, {\n        height: action.payload.size.height,\n        width: action.payload.size.width,\n        x: action.payload.size.x,\n        y: action.payload.size.y\n      })));\n\n    case ActionTypes.SET_CANVAS:\n      if (!state[action.windowId]) return state;\n      return update([action.windowId], function (orig) {\n        return _objectSpread(_objectSpread({}, orig || {}), {}, {\n          canvasId: action.canvasId,\n          visibleCanvases: action.visibleCanvases || []\n        });\n      }, state);\n\n    case ActionTypes.ADD_COMPANION_WINDOW:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, {\n        companionWindowIds: state[action.windowId].companionWindowIds.concat([action.id])\n      }, action.payload.position === 'left' ? {\n        companionAreaOpen: true,\n        sideBarPanel: action.payload.content\n      } : {})));\n\n    case ActionTypes.UPDATE_COMPANION_WINDOW:\n      if (action.payload.position !== 'left') return state;\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, {\n        companionAreaOpen: true\n      })));\n\n    case ActionTypes.REMOVE_COMPANION_WINDOW:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, {\n        companionWindowIds: state[action.windowId].companionWindowIds.filter(function (id) {\n          return id !== action.id;\n        })\n      })));\n\n    case ActionTypes.SELECT_ANNOTATION:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, {\n        selectedAnnotationId: action.annotationId\n      })));\n\n    case ActionTypes.DESELECT_ANNOTATION:\n      {\n        return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, {\n          selectedAnnotationId: undefined\n        })));\n      }\n\n    case ActionTypes.HOVER_ANNOTATION:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, {\n        hoveredAnnotationIds: action.annotationIds\n      })));\n\n    case ActionTypes.TOGGLE_ANNOTATION_DISPLAY:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, {\n        highlightAllAnnotations: !state[action.windowId].highlightAllAnnotations\n      })));\n\n    case ActionTypes.IMPORT_MIRADOR_STATE:\n      return action.state.windows || [];\n\n    case ActionTypes.REQUEST_SEARCH:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, {\n        suggestedSearches: undefined\n      })));\n\n    case ActionTypes.SHOW_COLLECTION_DIALOG:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, {\n        collectionDialogOn: true,\n        collectionManifestId: action.manifestId,\n        collectionPath: action.collectionPath\n      })));\n\n    case ActionTypes.HIDE_COLLECTION_DIALOG:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, {\n        collectionDialogOn: false\n      })));\n\n    default:\n      return state;\n  }\n};","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport settings from '../../config/settings';\nimport ActionTypes from '../actions/action-types';\n/** Check if the viewport dimensions are fully specified */\n\nfunction hasViewportPosition(viewportPosition) {\n  return viewportPosition.x !== undefined && viewportPosition.y !== undefined && viewportPosition.width !== undefined && viewportPosition.height !== undefined;\n}\n/** Check if the containee is fully within the bounds on the container */\n\n\nfunction contains(container, containee) {\n  return containee.x - containee.width / 2 > container.x - container.width / 2 && containee.y - containee.height / 2 > container.y - container.height / 2 && containee.x + containee.width / 2 < container.x + container.width / 2 && containee.y + containee.height / 2 < container.y + container.height / 2;\n}\n/**\n * workspaceReducer\n */\n\n\nexport var workspaceReducer = function workspaceReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _objectSpread(_objectSpread({}, settings.workspace), {}, {\n    windowIds: []\n  });\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var newWorkspaceDimensions;\n  var viewportPosition;\n  var newWindowIds;\n\n  switch (action.type) {\n    case ActionTypes.UPDATE_WORKSPACE:\n      return _objectSpread(_objectSpread({}, state), action.config);\n\n    case ActionTypes.FOCUS_WINDOW:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        focusedWindowId: action.windowId,\n        viewportPosition: _objectSpread(_objectSpread({}, state.viewportPosition), action.position)\n      });\n\n    case ActionTypes.ADD_WINDOW:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        focusedWindowId: action.window.id,\n        windowIds: [].concat(_toConsumableArray(state.windowIds || []), [action.window.id])\n      });\n\n    case ActionTypes.REMOVE_WINDOW:\n      newWindowIds = (state.windowIds || []).filter(function (v) {\n        return v !== action.windowId;\n      });\n      return _objectSpread(_objectSpread({}, state), {}, {\n        focusedWindowId: action.windowId === state.focusedWindowId ? newWindowIds[newWindowIds.length - 1] : state.focusedWindowId,\n        windowIds: newWindowIds\n      });\n\n    case ActionTypes.SET_WORKSPACE_FULLSCREEN:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isFullscreenEnabled: action.isFullscreenEnabled\n      });\n\n    case ActionTypes.TOGGLE_ZOOM_CONTROLS:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        showZoomControls: action.showZoomControls\n      });\n\n    case ActionTypes.UPDATE_WORKSPACE_MOSAIC_LAYOUT:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        layout: action.layout\n      });\n\n    case ActionTypes.SET_WORKSPACE_ADD_VISIBILITY:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isWorkspaceAddVisible: action.isWorkspaceAddVisible\n      });\n\n    case ActionTypes.SET_WORKSPACE_VIEWPORT_POSITION:\n      newWorkspaceDimensions = {};\n      viewportPosition = _objectSpread(_objectSpread({}, state.viewportPosition), action.payload.position);\n\n      if (hasViewportPosition(viewportPosition) && !contains({\n        height: state.height,\n        width: state.width,\n        x: 0,\n        y: 0\n      }, viewportPosition)) {\n        newWorkspaceDimensions = {\n          height: state.height * 2,\n          width: state.width * 2\n        };\n      }\n\n      return _objectSpread(_objectSpread(_objectSpread({}, state), newWorkspaceDimensions), {}, {\n        viewportPosition: viewportPosition\n      });\n\n    case ActionTypes.SET_CONFIG:\n    case ActionTypes.IMPORT_CONFIG:\n    case ActionTypes.UPDATE_CONFIG:\n      return _objectSpread(_objectSpread({}, state), action.config.workspace);\n\n    case ActionTypes.IMPORT_MIRADOR_STATE:\n      return action.state.workspace || {};\n\n    case ActionTypes.TOGGLE_DRAGGING:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        draggingEnabled: !state.draggingEnabled\n      });\n\n    default:\n      return state;\n  }\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { combineReducers } from 'redux';\nimport { accessTokensReducer, authReducer, companionWindowsReducer, configReducer, elasticLayoutReducer, errorsReducer, infoResponsesReducer, manifestsReducer, viewersReducer, windowsReducer, workspaceReducer, annotationsReducer, searchesReducer, layersReducer, catalogReducer } from '.';\n/**\n * Function to create root reducer\n * from plugin reducers.\n * @namespace CreateRootReducer\n */\n\nexport default function createRootReducer(pluginReducers) {\n  return combineReducers(_objectSpread({\n    accessTokens: accessTokensReducer,\n    annotations: annotationsReducer,\n    auth: authReducer,\n    catalog: catalogReducer,\n    companionWindows: companionWindowsReducer,\n    config: configReducer,\n    elasticLayout: elasticLayoutReducer,\n    errors: errorsReducer,\n    infoResponses: infoResponsesReducer,\n    layers: layersReducer,\n    manifests: manifestsReducer,\n    searches: searchesReducer,\n    viewers: viewersReducer,\n    windows: windowsReducer,\n    workspace: workspaceReducer\n  }, pluginReducers));\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return generator._invoke = function (innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; }(innerFn, self, context), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == typeof value && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; this._invoke = function (method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); }; } function maybeInvokeDelegate(delegate, context) { var method = delegate.iterator[context.method]; if (undefined === method) { if (context.delegate = null, \"throw\" === context.method) { if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel; context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\"); } return ContinueSentinel; } var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) { if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; } return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (object) { var keys = []; for (var key in object) { keys.push(key); } return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) { \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); } }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, \"catch\": function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime().mark(fetchIiifResource),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime().mark(fetchIiifResourceWithAuth),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime().mark(fetchManifest),\n    _marked4 = /*#__PURE__*/_regeneratorRuntime().mark(getAccessTokenService),\n    _marked5 = /*#__PURE__*/_regeneratorRuntime().mark(fetchInfoResponse),\n    _marked6 = /*#__PURE__*/_regeneratorRuntime().mark(fetchSearchResponse),\n    _marked7 = /*#__PURE__*/_regeneratorRuntime().mark(fetchAnnotation),\n    _marked8 = /*#__PURE__*/_regeneratorRuntime().mark(fetchResourceManifest),\n    _marked9 = /*#__PURE__*/_regeneratorRuntime().mark(fetchManifests),\n    _marked10 = /*#__PURE__*/_regeneratorRuntime().mark(iiifSaga);\n\nimport { all, call, put, select, takeEvery } from 'redux-saga/effects';\nimport fetch from 'isomorphic-unfetch';\nimport { Utils } from 'manifesto.js';\nimport normalizeUrl from 'normalize-url';\nimport ActionTypes from '../actions/action-types';\nimport { receiveManifest, receiveManifestFailure, receiveInfoResponse, receiveInfoResponseFailure, receiveDegradedInfoResponse, receiveSearch, receiveSearchFailure, receiveAnnotation, receiveAnnotationFailure } from '../actions';\nimport { getManifests, getRequestsConfig, getAccessTokens, selectInfoResponse } from '../selectors';\n/** */\n\nfunction fetchWrapper(url, options, _ref) {\n  var success = _ref.success,\n      degraded = _ref.degraded,\n      failure = _ref.failure;\n  return fetch(url, options).then(function (response) {\n    return response.json().then(function (json) {\n      if (response.status === 401) return (degraded || success)({\n        json: json,\n        response: response\n      });\n      if (response.ok) return success({\n        json: json,\n        response: response\n      });\n      return failure({\n        error: response.statusText,\n        json: json,\n        response: response\n      });\n    })[\"catch\"](function (error) {\n      return failure({\n        error: error,\n        response: response\n      });\n    });\n  })[\"catch\"](function (error) {\n    return failure({\n      error: error\n    });\n  });\n}\n/** */\n\n\nfunction fetchIiifResource(url, options, _ref2) {\n  var success, degraded, failure, _yield$select, _yield$select$preproc, preprocessors, _yield$select$postpro, postprocessors, reqOptions, action;\n\n  return _regeneratorRuntime().wrap(function fetchIiifResource$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          success = _ref2.success, degraded = _ref2.degraded, failure = _ref2.failure;\n          _context.next = 3;\n          return select(getRequestsConfig);\n\n        case 3:\n          _yield$select = _context.sent;\n          _yield$select$preproc = _yield$select.preprocessors;\n          preprocessors = _yield$select$preproc === void 0 ? [] : _yield$select$preproc;\n          _yield$select$postpro = _yield$select.postprocessors;\n          postprocessors = _yield$select$postpro === void 0 ? [] : _yield$select$postpro;\n          _context.prev = 8;\n          reqOptions = preprocessors.reduce(function (acc, f) {\n            return f(url, acc) || acc;\n          }, options);\n          _context.next = 12;\n          return call(fetchWrapper, url, reqOptions, {\n            degraded: degraded,\n            failure: failure,\n            success: success\n          });\n\n        case 12:\n          action = _context.sent;\n          action = postprocessors.reduce(function (acc, f) {\n            return f(url, acc) || acc;\n          }, action);\n          return _context.abrupt(\"return\", action);\n\n        case 17:\n          _context.prev = 17;\n          _context.t0 = _context[\"catch\"](8);\n          return _context.abrupt(\"return\", failure({\n            error: _context.t0\n          }));\n\n        case 20:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[8, 17]]);\n}\n/** */\n\n\nfunction fetchIiifResourceWithAuth(url, iiifResource, options, _ref3) {\n  var degraded, failure, success, urlOptions, tokenServiceId, tokenService, _yield$call, error, json, response, id, authoritativeTokenService;\n\n  return _regeneratorRuntime().wrap(function fetchIiifResourceWithAuth$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          degraded = _ref3.degraded, failure = _ref3.failure, success = _ref3.success;\n          urlOptions = _objectSpread({}, options);\n\n          if (!iiifResource) {\n            _context2.next = 8;\n            break;\n          }\n\n          _context2.next = 5;\n          return call(getAccessTokenService, iiifResource);\n\n        case 5:\n          tokenService = _context2.sent;\n          tokenServiceId = tokenService && tokenService.id;\n\n          if (tokenService && tokenService.json) {\n            urlOptions.headers = _objectSpread({\n              Authorization: \"Bearer \".concat(tokenService.json.accessToken)\n            }, options.headers);\n          }\n\n        case 8:\n          _context2.next = 10;\n          return call(fetchIiifResource, url, urlOptions, {\n            failure: function failure(arg) {\n              return arg;\n            },\n            success: function success(arg) {\n              return arg;\n            }\n          });\n\n        case 10:\n          _yield$call = _context2.sent;\n          error = _yield$call.error;\n          json = _yield$call.json;\n          response = _yield$call.response;\n\n          if (!error) {\n            _context2.next = 18;\n            break;\n          }\n\n          _context2.next = 17;\n          return put(failure({\n            error: error,\n            json: json,\n            response: response,\n            tokenServiceId: tokenServiceId\n          }));\n\n        case 17:\n          return _context2.abrupt(\"return\");\n\n        case 18:\n          id = json['@id'] || json.id;\n\n          if (!response.ok) {\n            _context2.next = 26;\n            break;\n          }\n\n          if (!(normalizeUrl(id, {\n            stripAuthentication: false\n          }) === normalizeUrl(url.replace(/info\\.json$/, ''), {\n            stripAuthentication: false\n          }))) {\n            _context2.next = 24;\n            break;\n          }\n\n          _context2.next = 23;\n          return put(success({\n            json: json,\n            response: response,\n            tokenServiceId: tokenServiceId\n          }));\n\n        case 23:\n          return _context2.abrupt(\"return\");\n\n        case 24:\n          _context2.next = 30;\n          break;\n\n        case 26:\n          if (!(response.status !== 401)) {\n            _context2.next = 30;\n            break;\n          }\n\n          _context2.next = 29;\n          return put(failure({\n            error: error,\n            json: json,\n            response: response,\n            tokenServiceId: tokenServiceId\n          }));\n\n        case 29:\n          return _context2.abrupt(\"return\");\n\n        case 30:\n          _context2.next = 32;\n          return call(getAccessTokenService, json);\n\n        case 32:\n          authoritativeTokenService = _context2.sent;\n\n          if (!(authoritativeTokenService && authoritativeTokenService.id !== tokenServiceId)) {\n            _context2.next = 37;\n            break;\n          }\n\n          _context2.next = 36;\n          return call(fetchIiifResourceWithAuth, url, json, options, {\n            degraded: degraded,\n            failure: failure,\n            success: success\n          });\n\n        case 36:\n          return _context2.abrupt(\"return\");\n\n        case 37:\n          _context2.next = 39;\n          return put((degraded || success)({\n            json: json,\n            response: response,\n            tokenServiceId: tokenServiceId\n          }));\n\n        case 39:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2);\n}\n/** */\n\n\nexport function fetchManifest(_ref4) {\n  var manifestId, callbacks, dispatch;\n  return _regeneratorRuntime().wrap(function fetchManifest$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          manifestId = _ref4.manifestId;\n          callbacks = {\n            failure: function failure(_ref5) {\n              var error = _ref5.error,\n                  json = _ref5.json,\n                  response = _ref5.response;\n              return receiveManifestFailure(manifestId, typeof error === 'object' ? String(error) : error);\n            },\n            success: function success(_ref6) {\n              var json = _ref6.json,\n                  response = _ref6.response;\n              return receiveManifest(manifestId, json);\n            }\n          };\n          _context3.next = 4;\n          return call(fetchIiifResource, manifestId, {}, callbacks);\n\n        case 4:\n          dispatch = _context3.sent;\n          _context3.next = 7;\n          return put(dispatch);\n\n        case 7:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3);\n}\n/** @private */\n\nfunction getAccessTokenService(resource) {\n  var manifestoCompatibleResource, services, accessTokens, i, authService, accessTokenService, token;\n  return _regeneratorRuntime().wrap(function getAccessTokenService$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          manifestoCompatibleResource = resource && resource.__jsonld ? resource : _objectSpread(_objectSpread({}, resource), {}, {\n            options: {}\n          });\n          services = Utils.getServices(manifestoCompatibleResource).filter(function (s) {\n            return s.getProfile().match(/http:\\/\\/iiif.io\\/api\\/auth\\//);\n          });\n\n          if (!(services.length === 0)) {\n            _context4.next = 4;\n            break;\n          }\n\n          return _context4.abrupt(\"return\", undefined);\n\n        case 4:\n          _context4.next = 6;\n          return select(getAccessTokens);\n\n        case 6:\n          accessTokens = _context4.sent;\n\n          if (accessTokens) {\n            _context4.next = 9;\n            break;\n          }\n\n          return _context4.abrupt(\"return\", undefined);\n\n        case 9:\n          i = 0;\n\n        case 10:\n          if (!(i < services.length)) {\n            _context4.next = 19;\n            break;\n          }\n\n          authService = services[i];\n          accessTokenService = Utils.getService(authService, 'http://iiif.io/api/auth/1/token') || Utils.getService(authService, 'http://iiif.io/api/auth/0/token');\n          token = accessTokenService && accessTokens[accessTokenService.id];\n\n          if (!(token && token.json)) {\n            _context4.next = 16;\n            break;\n          }\n\n          return _context4.abrupt(\"return\", token);\n\n        case 16:\n          i += 1;\n          _context4.next = 10;\n          break;\n\n        case 19:\n          return _context4.abrupt(\"return\", undefined);\n\n        case 20:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4);\n}\n/** @private */\n\n\nexport function fetchInfoResponse(_ref7) {\n  var imageResource, infoId, windowId, iiifResource, callbacks;\n  return _regeneratorRuntime().wrap(function fetchInfoResponse$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          imageResource = _ref7.imageResource, infoId = _ref7.infoId, windowId = _ref7.windowId;\n          iiifResource = imageResource;\n\n          if (iiifResource) {\n            _context5.next = 6;\n            break;\n          }\n\n          _context5.next = 5;\n          return select(selectInfoResponse, {\n            infoId: infoId\n          });\n\n        case 5:\n          iiifResource = _context5.sent;\n\n        case 6:\n          callbacks = {\n            degraded: function degraded(_ref8) {\n              var json = _ref8.json,\n                  response = _ref8.response,\n                  tokenServiceId = _ref8.tokenServiceId;\n              return receiveDegradedInfoResponse(infoId, json, response.ok, tokenServiceId, windowId);\n            },\n            failure: function failure(_ref9) {\n              var error = _ref9.error,\n                  json = _ref9.json,\n                  response = _ref9.response,\n                  tokenServiceId = _ref9.tokenServiceId;\n              return receiveInfoResponseFailure(infoId, error, tokenServiceId);\n            },\n            success: function success(_ref10) {\n              var json = _ref10.json,\n                  response = _ref10.response,\n                  tokenServiceId = _ref10.tokenServiceId;\n              return receiveInfoResponse(infoId, json, response.ok, tokenServiceId);\n            }\n          };\n          _context5.next = 9;\n          return call(fetchIiifResourceWithAuth, \"\".concat(infoId.replace(/\\/$/, ''), \"/info.json\"), iiifResource, {}, callbacks);\n\n        case 9:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5);\n}\n/** @private */\n\nexport function fetchSearchResponse(_ref11) {\n  var windowId, companionWindowId, query, searchId, callbacks, dispatch;\n  return _regeneratorRuntime().wrap(function fetchSearchResponse$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          windowId = _ref11.windowId, companionWindowId = _ref11.companionWindowId, query = _ref11.query, searchId = _ref11.searchId;\n          callbacks = {\n            failure: function failure(_ref12) {\n              var error = _ref12.error,\n                  json = _ref12.json,\n                  response = _ref12.response;\n              return receiveSearchFailure(windowId, companionWindowId, searchId, error);\n            },\n            success: function success(_ref13) {\n              var json = _ref13.json,\n                  response = _ref13.response;\n              return receiveSearch(windowId, companionWindowId, searchId, json);\n            }\n          };\n          _context6.next = 4;\n          return call(fetchIiifResource, searchId, {}, callbacks);\n\n        case 4:\n          dispatch = _context6.sent;\n          _context6.next = 7;\n          return put(dispatch);\n\n        case 7:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, _marked6);\n}\n/** @private */\n\nexport function fetchAnnotation(_ref14) {\n  var targetId, annotationId, callbacks, dispatch;\n  return _regeneratorRuntime().wrap(function fetchAnnotation$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          targetId = _ref14.targetId, annotationId = _ref14.annotationId;\n          callbacks = {\n            failure: function failure(_ref15) {\n              var error = _ref15.error,\n                  json = _ref15.json,\n                  response = _ref15.response;\n              return receiveAnnotationFailure(targetId, annotationId, error);\n            },\n            success: function success(_ref16) {\n              var json = _ref16.json,\n                  response = _ref16.response;\n              return receiveAnnotation(targetId, annotationId, json);\n            }\n          };\n          _context7.next = 4;\n          return call(fetchIiifResource, annotationId, {}, callbacks);\n\n        case 4:\n          dispatch = _context7.sent;\n          _context7.next = 7;\n          return put(dispatch);\n\n        case 7:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  }, _marked7);\n}\n/** */\n\nexport function fetchResourceManifest(_ref17) {\n  var manifestId, manifestJson, manifests;\n  return _regeneratorRuntime().wrap(function fetchResourceManifest$(_context8) {\n    while (1) {\n      switch (_context8.prev = _context8.next) {\n        case 0:\n          manifestId = _ref17.manifestId, manifestJson = _ref17.manifestJson;\n\n          if (!manifestJson) {\n            _context8.next = 5;\n            break;\n          }\n\n          _context8.next = 4;\n          return put(receiveManifest(manifestId, manifestJson));\n\n        case 4:\n          return _context8.abrupt(\"return\");\n\n        case 5:\n          if (manifestId) {\n            _context8.next = 7;\n            break;\n          }\n\n          return _context8.abrupt(\"return\");\n\n        case 7:\n          _context8.next = 9;\n          return select(getManifests) || {};\n\n        case 9:\n          manifests = _context8.sent;\n\n          if (manifests[manifestId]) {\n            _context8.next = 12;\n            break;\n          }\n\n          return _context8.delegateYield(fetchManifest({\n            manifestId: manifestId\n          }), \"t0\", 12);\n\n        case 12:\n        case \"end\":\n          return _context8.stop();\n      }\n    }\n  }, _marked8);\n}\n/** */\n\nexport function fetchManifests() {\n  var manifests,\n      i,\n      manifestId,\n      _args9 = arguments;\n  return _regeneratorRuntime().wrap(function fetchManifests$(_context9) {\n    while (1) {\n      switch (_context9.prev = _context9.next) {\n        case 0:\n          _context9.next = 2;\n          return select(getManifests);\n\n        case 2:\n          manifests = _context9.sent;\n          i = 0;\n\n        case 4:\n          if (!(i < _args9.length)) {\n            _context9.next = 12;\n            break;\n          }\n\n          manifestId = i < 0 || _args9.length <= i ? undefined : _args9[i];\n\n          if (manifests[manifestId]) {\n            _context9.next = 9;\n            break;\n          }\n\n          _context9.next = 9;\n          return call(fetchManifest, {\n            manifestId: manifestId\n          });\n\n        case 9:\n          i += 1;\n          _context9.next = 4;\n          break;\n\n        case 12:\n        case \"end\":\n          return _context9.stop();\n      }\n    }\n  }, _marked9);\n}\n/** */\n\nexport default function iiifSaga() {\n  return _regeneratorRuntime().wrap(function iiifSaga$(_context10) {\n    while (1) {\n      switch (_context10.prev = _context10.next) {\n        case 0:\n          _context10.next = 2;\n          return all([takeEvery(ActionTypes.REQUEST_MANIFEST, fetchManifest), takeEvery(ActionTypes.REQUEST_INFO_RESPONSE, fetchInfoResponse), takeEvery(ActionTypes.REQUEST_SEARCH, fetchSearchResponse), takeEvery(ActionTypes.REQUEST_ANNOTATION, fetchAnnotation), takeEvery(ActionTypes.ADD_RESOURCE, fetchResourceManifest)]);\n\n        case 2:\n        case \"end\":\n          return _context10.stop();\n      }\n    }\n  }, _marked10);\n}","function _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return generator._invoke = function (innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; }(innerFn, self, context), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == typeof value && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; this._invoke = function (method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); }; } function maybeInvokeDelegate(delegate, context) { var method = delegate.iterator[context.method]; if (undefined === method) { if (context.delegate = null, \"throw\" === context.method) { if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel; context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\"); } return ContinueSentinel; } var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) { if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; } return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (object) { var keys = []; for (var key in object) { keys.push(key); } return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) { \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); } }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, \"catch\": function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime().mark(fetchWindowManifest),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime().mark(setCanvasOnNewSequence),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime().mark(setCollectionPath),\n    _marked4 = /*#__PURE__*/_regeneratorRuntime().mark(fetchCollectionManifests),\n    _marked5 = /*#__PURE__*/_regeneratorRuntime().mark(setWindowStartingCanvas),\n    _marked6 = /*#__PURE__*/_regeneratorRuntime().mark(setWindowDefaultSearchQuery),\n    _marked7 = /*#__PURE__*/_regeneratorRuntime().mark(setCurrentAnnotationsOnCurrentCanvas),\n    _marked8 = /*#__PURE__*/_regeneratorRuntime().mark(panToFocusedWindow),\n    _marked9 = /*#__PURE__*/_regeneratorRuntime().mark(updateVisibleCanvases),\n    _marked10 = /*#__PURE__*/_regeneratorRuntime().mark(setCanvasOfFirstSearchResult),\n    _marked11 = /*#__PURE__*/_regeneratorRuntime().mark(setCanvasforSelectedAnnotation),\n    _marked12 = /*#__PURE__*/_regeneratorRuntime().mark(fetchInfoResponses),\n    _marked13 = /*#__PURE__*/_regeneratorRuntime().mark(determineAndShowCollectionDialog),\n    _marked14 = /*#__PURE__*/_regeneratorRuntime().mark(windowsSaga);\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { all, call, put, select, takeEvery } from 'redux-saga/effects';\nimport ActionTypes from '../actions/action-types';\nimport MiradorManifest from '../../lib/MiradorManifest';\nimport MiradorCanvas from '../../lib/MiradorCanvas';\nimport { setContentSearchCurrentAnnotation, selectAnnotation, setWorkspaceViewportPosition, updateWindow, setCanvas, fetchSearch, receiveManifest, fetchInfoResponse, showCollectionDialog } from '../actions';\nimport { getSearchForWindow, getSearchAnnotationsForCompanionWindow, getCanvasGrouping, getWindow, getManifestoInstance, getCompanionWindowIdsForPosition, getManifestSearchService, getCanvasForAnnotation, getSelectedContentSearchAnnotationIds, getSortedSearchAnnotationsForCompanionWindow, getVisibleCanvasIds, getWorkspace, getElasticLayout, getCanvases, selectInfoResponses, getWindowConfig } from '../selectors';\nimport { fetchManifests } from './iiif';\n/** */\n\nexport function fetchWindowManifest(action) {\n  var _ref, collectionPath, id, manifestId;\n\n  return _regeneratorRuntime().wrap(function fetchWindowManifest$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _ref = action.payload || action.window, collectionPath = _ref.collectionPath, id = _ref.id, manifestId = _ref.manifestId;\n\n          if (manifestId) {\n            _context.next = 3;\n            break;\n          }\n\n          return _context.abrupt(\"return\");\n\n        case 3:\n          if (!action.manifest) {\n            _context.next = 8;\n            break;\n          }\n\n          _context.next = 6;\n          return put(receiveManifest(manifestId, action.manifest));\n\n        case 6:\n          _context.next = 10;\n          break;\n\n        case 8:\n          _context.next = 10;\n          return call.apply(void 0, [fetchManifests, manifestId].concat(_toConsumableArray(collectionPath || [])));\n\n        case 10:\n          _context.next = 12;\n          return call(setWindowStartingCanvas, action);\n\n        case 12:\n          _context.next = 14;\n          return call(setWindowDefaultSearchQuery, action);\n\n        case 14:\n          if (collectionPath) {\n            _context.next = 17;\n            break;\n          }\n\n          _context.next = 17;\n          return call(setCollectionPath, {\n            manifestId: manifestId,\n            windowId: action.id || action.window.id\n          });\n\n        case 17:\n          _context.next = 19;\n          return call(determineAndShowCollectionDialog, manifestId, id);\n\n        case 19:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}\n/** */\n\nexport function setCanvasOnNewSequence(action) {\n  var windowId, canvases, thunk;\n  return _regeneratorRuntime().wrap(function setCanvasOnNewSequence$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          windowId = action.id;\n\n          if (!(!action || !action.payload || !action.payload.sequenceId)) {\n            _context2.next = 3;\n            break;\n          }\n\n          return _context2.abrupt(\"return\");\n\n        case 3:\n          _context2.next = 5;\n          return select(getCanvases, {\n            windowId: windowId\n          });\n\n        case 5:\n          canvases = _context2.sent;\n\n          if (!(!canvases || !canvases[0] || !canvases[0].id)) {\n            _context2.next = 8;\n            break;\n          }\n\n          return _context2.abrupt(\"return\");\n\n        case 8:\n          _context2.next = 10;\n          return call(setCanvas, windowId, canvases[0].id);\n\n        case 10:\n          thunk = _context2.sent;\n          _context2.next = 13;\n          return put(thunk);\n\n        case 13:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2);\n}\n/** */\n\nexport function setCollectionPath(_ref2) {\n  var manifestId, windowId, manifestoInstance, partOfs, partOf;\n  return _regeneratorRuntime().wrap(function setCollectionPath$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          manifestId = _ref2.manifestId, windowId = _ref2.windowId;\n          _context3.next = 3;\n          return select(getManifestoInstance, {\n            manifestId: manifestId\n          });\n\n        case 3:\n          manifestoInstance = _context3.sent;\n\n          if (!manifestoInstance) {\n            _context3.next = 10;\n            break;\n          }\n\n          partOfs = manifestoInstance.getProperty('partOf');\n          partOf = Array.isArray(partOfs) ? partOfs[0] : partOfs;\n\n          if (!(partOf && partOf.id)) {\n            _context3.next = 10;\n            break;\n          }\n\n          _context3.next = 10;\n          return put(updateWindow(windowId, {\n            collectionPath: [partOf.id]\n          }));\n\n        case 10:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3);\n}\n/** */\n\nexport function fetchCollectionManifests(action) {\n  var collectionPath;\n  return _regeneratorRuntime().wrap(function fetchCollectionManifests$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          collectionPath = action.payload.collectionPath;\n\n          if (collectionPath) {\n            _context4.next = 3;\n            break;\n          }\n\n          return _context4.abrupt(\"return\");\n\n        case 3:\n          _context4.next = 5;\n          return call.apply(void 0, [fetchManifests].concat(_toConsumableArray(collectionPath)));\n\n        case 5:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4);\n}\n/** @private */\n\nexport function setWindowStartingCanvas(action) {\n  var _ref3, canvasId, canvasIndex, manifestId, windowId, thunk, manifestoInstance, miradorManifest, startCanvas, _thunk;\n\n  return _regeneratorRuntime().wrap(function setWindowStartingCanvas$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          _ref3 = action.payload || action.window, canvasId = _ref3.canvasId, canvasIndex = _ref3.canvasIndex, manifestId = _ref3.manifestId;\n          windowId = action.id || action.window.id;\n\n          if (!canvasId) {\n            _context5.next = 10;\n            break;\n          }\n\n          _context5.next = 5;\n          return call(setCanvas, windowId, canvasId, null, {\n            preserveViewport: !!action.payload\n          });\n\n        case 5:\n          thunk = _context5.sent;\n          _context5.next = 8;\n          return put(thunk);\n\n        case 8:\n          _context5.next = 22;\n          break;\n\n        case 10:\n          _context5.next = 12;\n          return select(getManifestoInstance, {\n            manifestId: manifestId\n          });\n\n        case 12:\n          manifestoInstance = _context5.sent;\n\n          if (!manifestoInstance) {\n            _context5.next = 22;\n            break;\n          }\n\n          // set the startCanvas\n          miradorManifest = new MiradorManifest(manifestoInstance);\n          startCanvas = miradorManifest.startCanvas || miradorManifest.canvasAt(canvasIndex || 0) || miradorManifest.canvasAt(0);\n\n          if (!startCanvas) {\n            _context5.next = 22;\n            break;\n          }\n\n          _context5.next = 19;\n          return call(setCanvas, windowId, startCanvas.id);\n\n        case 19:\n          _thunk = _context5.sent;\n          _context5.next = 22;\n          return put(_thunk);\n\n        case 22:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5);\n}\n/** @private */\n\nexport function setWindowDefaultSearchQuery(action) {\n  var _action$window, windowId, defaultSearchQuery, searchService, companionWindowIds, companionWindowId, searchId;\n\n  return _regeneratorRuntime().wrap(function setWindowDefaultSearchQuery$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          if (!(!action.window || !action.window.defaultSearchQuery)) {\n            _context6.next = 2;\n            break;\n          }\n\n          return _context6.abrupt(\"return\");\n\n        case 2:\n          _action$window = action.window, windowId = _action$window.id, defaultSearchQuery = _action$window.defaultSearchQuery;\n          _context6.next = 5;\n          return select(getManifestSearchService, {\n            windowId: windowId\n          });\n\n        case 5:\n          searchService = _context6.sent;\n          _context6.next = 8;\n          return select(getCompanionWindowIdsForPosition, {\n            position: 'left',\n            windowId: windowId\n          });\n\n        case 8:\n          companionWindowIds = _context6.sent;\n          companionWindowId = companionWindowIds[0];\n\n          if (!(searchService && companionWindowId)) {\n            _context6.next = 14;\n            break;\n          }\n\n          searchId = searchService && \"\".concat(searchService.id, \"?q=\").concat(defaultSearchQuery);\n          _context6.next = 14;\n          return put(fetchSearch(windowId, companionWindowId, searchId, defaultSearchQuery));\n\n        case 14:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, _marked6);\n}\n/** @private */\n\nexport function getAnnotationsBySearch(state, _ref4) {\n  var canvasIds = _ref4.canvasIds,\n      companionWindowIds = _ref4.companionWindowIds,\n      windowId = _ref4.windowId;\n  var annotationBySearch = companionWindowIds.reduce(function (accumulator, companionWindowId) {\n    var annotations = getSearchAnnotationsForCompanionWindow(state, {\n      companionWindowId: companionWindowId,\n      windowId: windowId\n    });\n    var resourceAnnotations = annotations.resources;\n    var hitAnnotation = resourceAnnotations.find(function (r) {\n      return canvasIds.includes(r.targetId);\n    });\n    if (hitAnnotation) accumulator[companionWindowId] = [hitAnnotation.id];\n    return accumulator;\n  }, {});\n  return annotationBySearch;\n}\n/** @private */\n\nexport function setCurrentAnnotationsOnCurrentCanvas(_ref5) {\n  var annotationId, windowId, visibleCanvases, searches, companionWindowIds, annotationBySearch;\n  return _regeneratorRuntime().wrap(function setCurrentAnnotationsOnCurrentCanvas$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          annotationId = _ref5.annotationId, windowId = _ref5.windowId, visibleCanvases = _ref5.visibleCanvases;\n          _context7.next = 3;\n          return select(getSearchForWindow, {\n            windowId: windowId\n          });\n\n        case 3:\n          searches = _context7.sent;\n          companionWindowIds = Object.keys(searches || {});\n\n          if (!(companionWindowIds.length === 0)) {\n            _context7.next = 7;\n            break;\n          }\n\n          return _context7.abrupt(\"return\");\n\n        case 7:\n          _context7.next = 9;\n          return select(getAnnotationsBySearch, {\n            canvasIds: visibleCanvases,\n            companionWindowIds: companionWindowIds,\n            windowId: windowId\n          });\n\n        case 9:\n          annotationBySearch = _context7.sent;\n          _context7.next = 12;\n          return all(Object.keys(annotationBySearch).map(function (companionWindowId) {\n            return put(setContentSearchCurrentAnnotation(windowId, companionWindowId, annotationBySearch[companionWindowId]));\n          }));\n\n        case 12:\n          if (!(Object.values(annotationBySearch).length > 0)) {\n            _context7.next = 15;\n            break;\n          }\n\n          _context7.next = 15;\n          return put(selectAnnotation(windowId, Object.values(annotationBySearch)[0][0]));\n\n        case 15:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  }, _marked7);\n}\n/** @private */\n\nexport function panToFocusedWindow(_ref6) {\n  var pan, windowId, elasticLayout, _ref7, x, y, width, height, _yield$select, _yield$select$viewpor, viewWidth, viewHeight;\n\n  return _regeneratorRuntime().wrap(function panToFocusedWindow$(_context8) {\n    while (1) {\n      switch (_context8.prev = _context8.next) {\n        case 0:\n          pan = _ref6.pan, windowId = _ref6.windowId;\n\n          if (pan) {\n            _context8.next = 3;\n            break;\n          }\n\n          return _context8.abrupt(\"return\");\n\n        case 3:\n          _context8.next = 5;\n          return select(getElasticLayout);\n\n        case 5:\n          elasticLayout = _context8.sent;\n          _ref7 = elasticLayout[windowId] || {}, x = _ref7.x, y = _ref7.y, width = _ref7.width, height = _ref7.height;\n          _context8.next = 9;\n          return select(getWorkspace);\n\n        case 9:\n          _yield$select = _context8.sent;\n          _yield$select$viewpor = _yield$select.viewportPosition;\n          viewWidth = _yield$select$viewpor.width;\n          viewHeight = _yield$select$viewpor.height;\n          _context8.next = 15;\n          return put(setWorkspaceViewportPosition({\n            x: x + width / 2 - viewWidth / 2,\n            y: y + height / 2 - viewHeight / 2\n          }));\n\n        case 15:\n        case \"end\":\n          return _context8.stop();\n      }\n    }\n  }, _marked8);\n}\n/** @private */\n\nexport function updateVisibleCanvases(_ref8) {\n  var windowId, _yield$select2, canvasId, visibleCanvases;\n\n  return _regeneratorRuntime().wrap(function updateVisibleCanvases$(_context9) {\n    while (1) {\n      switch (_context9.prev = _context9.next) {\n        case 0:\n          windowId = _ref8.windowId;\n          _context9.next = 3;\n          return select(getWindow, {\n            windowId: windowId\n          });\n\n        case 3:\n          _yield$select2 = _context9.sent;\n          canvasId = _yield$select2.canvasId;\n          _context9.next = 7;\n          return select(getCanvasGrouping, {\n            canvasId: canvasId,\n            windowId: windowId\n          });\n\n        case 7:\n          visibleCanvases = _context9.sent;\n          _context9.next = 10;\n          return put(updateWindow(windowId, {\n            visibleCanvases: (visibleCanvases || []).map(function (c) {\n              return c.id;\n            })\n          }));\n\n        case 10:\n        case \"end\":\n          return _context9.stop();\n      }\n    }\n  }, _marked9);\n}\n/** @private */\n\nexport function setCanvasOfFirstSearchResult(_ref9) {\n  var companionWindowId, windowId, _yield$select3, switchCanvasOnSearch, selectedIds, annotations;\n\n  return _regeneratorRuntime().wrap(function setCanvasOfFirstSearchResult$(_context10) {\n    while (1) {\n      switch (_context10.prev = _context10.next) {\n        case 0:\n          companionWindowId = _ref9.companionWindowId, windowId = _ref9.windowId;\n          _context10.next = 3;\n          return select(getWindowConfig, {\n            windowId: windowId\n          });\n\n        case 3:\n          _yield$select3 = _context10.sent;\n          switchCanvasOnSearch = _yield$select3.switchCanvasOnSearch;\n\n          if (switchCanvasOnSearch) {\n            _context10.next = 7;\n            break;\n          }\n\n          return _context10.abrupt(\"return\");\n\n        case 7:\n          _context10.next = 9;\n          return select(getSelectedContentSearchAnnotationIds, {\n            companionWindowId: companionWindowId,\n            windowId: windowId\n          });\n\n        case 9:\n          selectedIds = _context10.sent;\n\n          if (!(selectedIds.length !== 0)) {\n            _context10.next = 12;\n            break;\n          }\n\n          return _context10.abrupt(\"return\");\n\n        case 12:\n          _context10.next = 14;\n          return select(getSortedSearchAnnotationsForCompanionWindow, {\n            companionWindowId: companionWindowId,\n            windowId: windowId\n          });\n\n        case 14:\n          annotations = _context10.sent;\n\n          if (!(!annotations || annotations.length === 0)) {\n            _context10.next = 17;\n            break;\n          }\n\n          return _context10.abrupt(\"return\");\n\n        case 17:\n          _context10.next = 19;\n          return put(selectAnnotation(windowId, annotations[0].id));\n\n        case 19:\n        case \"end\":\n          return _context10.stop();\n      }\n    }\n  }, _marked10);\n}\n/** @private */\n\nexport function setCanvasforSelectedAnnotation(_ref10) {\n  var annotationId, windowId, canvasIds, canvas, thunk;\n  return _regeneratorRuntime().wrap(function setCanvasforSelectedAnnotation$(_context11) {\n    while (1) {\n      switch (_context11.prev = _context11.next) {\n        case 0:\n          annotationId = _ref10.annotationId, windowId = _ref10.windowId;\n          _context11.next = 3;\n          return select(getVisibleCanvasIds, {\n            windowId: windowId\n          });\n\n        case 3:\n          canvasIds = _context11.sent;\n          _context11.next = 6;\n          return select(getCanvasForAnnotation, {\n            annotationId: annotationId,\n            windowId: windowId\n          });\n\n        case 6:\n          canvas = _context11.sent;\n\n          if (!(!canvas || canvasIds.includes(canvas.id))) {\n            _context11.next = 9;\n            break;\n          }\n\n          return _context11.abrupt(\"return\");\n\n        case 9:\n          _context11.next = 11;\n          return call(setCanvas, windowId, canvas.id);\n\n        case 11:\n          thunk = _context11.sent;\n          _context11.next = 14;\n          return put(thunk);\n\n        case 14:\n        case \"end\":\n          return _context11.stop();\n      }\n    }\n  }, _marked11);\n}\n/** Fetch info responses for the visible canvases */\n\nexport function fetchInfoResponses(_ref11) {\n  var visibleCanvasIds, windowId, canvases, infoResponses, visibleCanvases;\n  return _regeneratorRuntime().wrap(function fetchInfoResponses$(_context12) {\n    while (1) {\n      switch (_context12.prev = _context12.next) {\n        case 0:\n          visibleCanvasIds = _ref11.visibleCanvases, windowId = _ref11.windowId;\n          _context12.next = 3;\n          return select(getCanvases, {\n            windowId: windowId\n          });\n\n        case 3:\n          canvases = _context12.sent;\n          _context12.next = 6;\n          return select(selectInfoResponses);\n\n        case 6:\n          infoResponses = _context12.sent;\n          visibleCanvases = (canvases || []).filter(function (c) {\n            return visibleCanvasIds.includes(c.id);\n          });\n          _context12.next = 10;\n          return all(visibleCanvases.map(function (canvas) {\n            var miradorCanvas = new MiradorCanvas(canvas);\n            return all(miradorCanvas.iiifImageResources.map(function (imageResource) {\n              return !infoResponses[imageResource.getServices()[0].id] && put(fetchInfoResponse({\n                imageResource: imageResource,\n                windowId: windowId\n              }));\n            }).filter(Boolean));\n          }));\n\n        case 10:\n        case \"end\":\n          return _context12.stop();\n      }\n    }\n  }, _marked12);\n}\n/** */\n\nexport function determineAndShowCollectionDialog(manifestId, windowId) {\n  var manifestoInstance;\n  return _regeneratorRuntime().wrap(function determineAndShowCollectionDialog$(_context13) {\n    while (1) {\n      switch (_context13.prev = _context13.next) {\n        case 0:\n          _context13.next = 2;\n          return select(getManifestoInstance, {\n            manifestId: manifestId\n          });\n\n        case 2:\n          manifestoInstance = _context13.sent;\n\n          if (!(manifestoInstance && manifestoInstance.isCollection())) {\n            _context13.next = 6;\n            break;\n          }\n\n          _context13.next = 6;\n          return put(showCollectionDialog(manifestId, [], windowId));\n\n        case 6:\n        case \"end\":\n          return _context13.stop();\n      }\n    }\n  }, _marked13);\n}\n/** */\n\nexport default function windowsSaga() {\n  return _regeneratorRuntime().wrap(function windowsSaga$(_context14) {\n    while (1) {\n      switch (_context14.prev = _context14.next) {\n        case 0:\n          _context14.next = 2;\n          return all([takeEvery(ActionTypes.ADD_WINDOW, fetchWindowManifest), takeEvery(ActionTypes.UPDATE_WINDOW, fetchWindowManifest), takeEvery(ActionTypes.UPDATE_WINDOW, setCanvasOnNewSequence), takeEvery(ActionTypes.SET_CANVAS, setCurrentAnnotationsOnCurrentCanvas), takeEvery(ActionTypes.SET_CANVAS, fetchInfoResponses), takeEvery(ActionTypes.UPDATE_COMPANION_WINDOW, fetchCollectionManifests), takeEvery(ActionTypes.SET_WINDOW_VIEW_TYPE, updateVisibleCanvases), takeEvery(ActionTypes.RECEIVE_SEARCH, setCanvasOfFirstSearchResult), takeEvery(ActionTypes.SELECT_ANNOTATION, setCanvasforSelectedAnnotation), takeEvery(ActionTypes.FOCUS_WINDOW, panToFocusedWindow)]);\n\n        case 2:\n        case \"end\":\n          return _context14.stop();\n      }\n    }\n  }, _marked14);\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return generator._invoke = function (innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; }(innerFn, self, context), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == typeof value && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; this._invoke = function (method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); }; } function maybeInvokeDelegate(delegate, context) { var method = delegate.iterator[context.method]; if (undefined === method) { if (context.delegate = null, \"throw\" === context.method) { if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel; context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\"); } return ContinueSentinel; } var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) { if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; } return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (object) { var keys = []; for (var key in object) { keys.push(key); } return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) { \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); } }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, \"catch\": function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime().mark(importState),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime().mark(importConfig),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime().mark(fetchCollectionManifests),\n    _marked4 = /*#__PURE__*/_regeneratorRuntime().mark(appSaga);\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { all, call, put, takeEvery } from 'redux-saga/effects';\nimport { v4 as uuid } from 'uuid';\nimport { fetchManifests } from './iiif';\nimport { fetchWindowManifest } from './windows';\nimport { addWindow } from '../actions';\nimport ActionTypes from '../actions/action-types';\n/** */\n\nexport function importState(action) {\n  return _regeneratorRuntime().wrap(function importState$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return all([].concat(_toConsumableArray(Object.entries(action.state.windows || {}).map(function (_ref) {\n            var _ref2 = _slicedToArray(_ref, 2),\n                _ = _ref2[0],\n                window = _ref2[1];\n\n            return call(fetchWindowManifest, {\n              id: window.id,\n              payload: window\n            });\n          })), _toConsumableArray(Object.entries(action.state.manifests || {}).filter(function (_ref3) {\n            var _ref4 = _slicedToArray(_ref3, 2),\n                _ = _ref4[0],\n                manifest = _ref4[1];\n\n            return !manifest.json;\n          }).map(function (_ref5) {\n            var _ref6 = _slicedToArray(_ref5, 2),\n                _ = _ref6[0],\n                manifest = _ref6[1];\n\n            return call(fetchManifests, manifest.id);\n          }))));\n\n        case 2:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}\n/** Add windows from the imported config */\n\nexport function importConfig(_ref7) {\n  var _ref7$config, thumbnailNavigation, windows, thunks;\n\n  return _regeneratorRuntime().wrap(function importConfig$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _ref7$config = _ref7.config, thumbnailNavigation = _ref7$config.thumbnailNavigation, windows = _ref7$config.windows;\n\n          if (!(!windows || windows.length === 0)) {\n            _context2.next = 3;\n            break;\n          }\n\n          return _context2.abrupt(\"return\");\n\n        case 3:\n          _context2.next = 5;\n          return all(windows.map(function (miradorWindow) {\n            var windowId = \"window-\".concat(uuid());\n            var manifestId = miradorWindow.manifestId || miradorWindow.loadedManifest;\n            return call(addWindow, _objectSpread({\n              // these are default values ...\n              id: windowId,\n              manifestId: manifestId,\n              thumbnailNavigationPosition: thumbnailNavigation && thumbnailNavigation.defaultPosition\n            }, miradorWindow));\n          }));\n\n        case 5:\n          thunks = _context2.sent;\n          _context2.next = 8;\n          return all(thunks.map(function (thunk) {\n            return put(thunk);\n          }));\n\n        case 8:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2);\n}\n/** */\n\nexport function fetchCollectionManifests(action) {\n  var collectionPath, manifestId;\n  return _regeneratorRuntime().wrap(function fetchCollectionManifests$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          collectionPath = action.collectionPath, manifestId = action.manifestId;\n          _context3.next = 3;\n          return call.apply(void 0, [fetchManifests, manifestId].concat(_toConsumableArray(collectionPath)));\n\n        case 3:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3);\n}\n/** */\n\nexport default function appSaga() {\n  return _regeneratorRuntime().wrap(function appSaga$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.next = 2;\n          return all([takeEvery(ActionTypes.IMPORT_MIRADOR_STATE, importState), takeEvery(ActionTypes.IMPORT_CONFIG, importConfig), takeEvery(ActionTypes.SHOW_COLLECTION_DIALOG, fetchCollectionManifests)]);\n\n        case 2:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4);\n}","function _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return generator._invoke = function (innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; }(innerFn, self, context), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == typeof value && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; this._invoke = function (method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); }; } function maybeInvokeDelegate(delegate, context) { var method = delegate.iterator[context.method]; if (undefined === method) { if (context.delegate = null, \"throw\" === context.method) { if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel; context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\"); } return ContinueSentinel; } var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) { if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; } return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (object) { var keys = []; for (var key in object) { keys.push(key); } return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) { \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); } }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, \"catch\": function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime().mark(fetchCanvasAnnotations),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime().mark(fetchAnnotations),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime().mark(appSaga);\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { all, put, select, takeEvery } from 'redux-saga/effects';\nimport { requestCanvasAnnotations, receiveAnnotation, requestAnnotation } from '../actions';\nimport { getAnnotations, getCanvas } from '../selectors';\nimport ActionTypes from '../actions/action-types';\nimport MiradorCanvas from '../../lib/MiradorCanvas';\n/** Fetch annotations for a given canvas */\n\nexport function fetchCanvasAnnotations(_ref) {\n  var canvasId, windowId, canvas, annotations, miradorCanvas;\n  return _regeneratorRuntime().wrap(function fetchCanvasAnnotations$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          canvasId = _ref.canvasId, windowId = _ref.windowId;\n          _context.next = 3;\n          return select(getCanvas, {\n            canvasId: canvasId,\n            windowId: windowId\n          });\n\n        case 3:\n          canvas = _context.sent;\n          _context.next = 6;\n          return select(getAnnotations);\n\n        case 6:\n          annotations = _context.sent;\n          miradorCanvas = new MiradorCanvas(canvas);\n          _context.next = 10;\n          return all([].concat(_toConsumableArray(miradorCanvas.annotationListUris.filter(function (uri) {\n            return !(annotations[canvas.id] && annotations[canvas.id][uri]);\n          }).map(function (uri) {\n            return put(requestAnnotation(canvas.id, uri));\n          })), _toConsumableArray(miradorCanvas.canvasAnnotationPages.filter(function (annotation) {\n            return !(annotations[canvas.id] && annotations[canvas.id][annotation.id]);\n          }).map(function (annotation) {\n            // If there are no items, try to retrieve the referenced resource.\n            // otherwise the resource should be embedded and just add to the store.\n            if (!annotation.items) {\n              return put(requestAnnotation(canvas.id, annotation.id));\n            }\n\n            return put(receiveAnnotation(canvas.id, annotation.id, annotation));\n          }))));\n\n        case 10:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 11:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}\n/**\n * Fetch annotations for the visible canvases.\n */\n\nexport function fetchAnnotations(_ref2) {\n  var _ref2$visibleCanvases, visibleCanvases, windowId;\n\n  return _regeneratorRuntime().wrap(function fetchAnnotations$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _ref2$visibleCanvases = _ref2.visibleCanvases, visibleCanvases = _ref2$visibleCanvases === void 0 ? [] : _ref2$visibleCanvases, windowId = _ref2.windowId;\n          _context2.next = 3;\n          return all(visibleCanvases.map(function (canvasId) {\n            return put(requestCanvasAnnotations(windowId, canvasId));\n          }));\n\n        case 3:\n          return _context2.abrupt(\"return\", _context2.sent);\n\n        case 4:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2);\n}\n/** */\n\nexport default function appSaga() {\n  return _regeneratorRuntime().wrap(function appSaga$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return all([takeEvery(ActionTypes.REQUEST_CANVAS_ANNOTATIONS, fetchCanvasAnnotations), takeEvery(ActionTypes.SET_CANVAS, fetchAnnotations)]);\n\n        case 2:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3);\n}","function _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return generator._invoke = function (innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; }(innerFn, self, context), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == typeof value && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; this._invoke = function (method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); }; } function maybeInvokeDelegate(delegate, context) { var method = delegate.iterator[context.method]; if (undefined === method) { if (context.delegate = null, \"throw\" === context.method) { if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel; context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\"); } return ContinueSentinel; } var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) { if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; } return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (object) { var keys = []; for (var key in object) { keys.push(key); } return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) { \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); } }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, \"catch\": function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime().mark(refetchInfoResponsesOnLogout),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime().mark(refetchInfoResponses),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime().mark(doAuthWorkflow),\n    _marked4 = /*#__PURE__*/_regeneratorRuntime().mark(rerequestOnAccessTokenFailure),\n    _marked5 = /*#__PURE__*/_regeneratorRuntime().mark(invalidateInvalidAuth),\n    _marked6 = /*#__PURE__*/_regeneratorRuntime().mark(authSaga);\n\nimport { all, call, put, select, takeEvery, delay } from 'redux-saga/effects';\nimport { Utils } from 'manifesto.js';\nimport flatten from 'lodash/flatten';\nimport ActionTypes from '../actions/action-types';\nimport MiradorCanvas from '../../lib/MiradorCanvas';\nimport { addAuthenticationRequest, resolveAuthenticationRequest, requestAccessToken, resetAuthenticationState } from '../actions';\nimport { selectInfoResponses, getVisibleCanvases, getWindows, getConfig, getAuth, getAccessTokens } from '../selectors';\nimport { fetchInfoResponse } from './iiif';\n/** */\n\nexport function refetchInfoResponsesOnLogout(_ref) {\n  var tokenServiceId;\n  return _regeneratorRuntime().wrap(function refetchInfoResponsesOnLogout$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          tokenServiceId = _ref.tokenServiceId;\n          _context.next = 3;\n          return delay(2000);\n\n        case 3:\n          _context.next = 5;\n          return call(refetchInfoResponses, {\n            serviceId: tokenServiceId\n          });\n\n        case 5:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}\n/**\n * Figure out what info responses could have used the access token service and:\n *   - refetch, if they are currently visible\n *   - throw them out (and lazy re-fetch) otherwise\n */\n\nexport function refetchInfoResponses(_ref2) {\n  var serviceId, windows, canvases, visibleImageApiIds, infoResponses, haveThisTokenService, obsoleteInfoResponses;\n  return _regeneratorRuntime().wrap(function refetchInfoResponses$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          serviceId = _ref2.serviceId;\n          _context2.next = 3;\n          return select(getWindows);\n\n        case 3:\n          windows = _context2.sent;\n          _context2.next = 6;\n          return all(Object.keys(windows).map(function (windowId) {\n            return select(getVisibleCanvases, {\n              windowId: windowId\n            });\n          }));\n\n        case 6:\n          canvases = _context2.sent;\n          visibleImageApiIds = flatten(flatten(canvases).map(function (canvas) {\n            var miradorCanvas = new MiradorCanvas(canvas);\n            return miradorCanvas.imageServiceIds;\n          }));\n          _context2.next = 10;\n          return select(selectInfoResponses);\n\n        case 10:\n          infoResponses = _context2.sent;\n\n          /** */\n          haveThisTokenService = function haveThisTokenService(infoResponse) {\n            var services = Utils.getServices(infoResponse);\n            return services.some(function (e) {\n              var infoTokenService = Utils.getService(e, 'http://iiif.io/api/auth/1/token') || Utils.getService(e, 'http://iiif.io/api/auth/0/token');\n              return infoTokenService && infoTokenService.id === serviceId;\n            });\n          };\n\n          obsoleteInfoResponses = Object.values(infoResponses).filter(function (i) {\n            return i.json && haveThisTokenService(i.json);\n          });\n          _context2.next = 15;\n          return all(obsoleteInfoResponses.map(function (_ref3) {\n            var infoId = _ref3.id;\n\n            if (visibleImageApiIds.includes(infoId)) {\n              return call(fetchInfoResponse, {\n                infoId: infoId\n              });\n            }\n\n            return put({\n              infoId: infoId,\n              type: ActionTypes.REMOVE_INFO_RESPONSE\n            });\n          }));\n\n        case 15:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2);\n}\n/** try to start any non-interactive auth flows */\n\nexport function doAuthWorkflow(_ref4) {\n  var infoJson, windowId, auths, _yield$select, _yield$select$auth, _yield$select$auth$se, serviceProfiles, nonInteractiveAuthFlowProfiles, authService, profileConfig, tokenService;\n\n  return _regeneratorRuntime().wrap(function doAuthWorkflow$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          infoJson = _ref4.infoJson, windowId = _ref4.windowId;\n          _context3.next = 3;\n          return select(getAuth);\n\n        case 3:\n          auths = _context3.sent;\n          _context3.next = 6;\n          return select(getConfig);\n\n        case 6:\n          _yield$select = _context3.sent;\n          _yield$select$auth = _yield$select.auth;\n          _yield$select$auth = _yield$select$auth === void 0 ? {} : _yield$select$auth;\n          _yield$select$auth$se = _yield$select$auth.serviceProfiles, serviceProfiles = _yield$select$auth$se === void 0 ? [] : _yield$select$auth$se;\n          nonInteractiveAuthFlowProfiles = serviceProfiles.filter(function (p) {\n            return p.external || p.kiosk;\n          }); // try to get an untried, non-interactive auth service\n\n          authService = Utils.getServices(infoJson).filter(function (s) {\n            return !auths[s.id];\n          }).find(function (e) {\n            return nonInteractiveAuthFlowProfiles.some(function (p) {\n              return p.profile === e.getProfile();\n            });\n          });\n\n          if (authService) {\n            _context3.next = 14;\n            break;\n          }\n\n          return _context3.abrupt(\"return\");\n\n        case 14:\n          profileConfig = nonInteractiveAuthFlowProfiles.find(function (p) {\n            return p.profile === authService.getProfile();\n          });\n\n          if (!profileConfig.kiosk) {\n            _context3.next = 20;\n            break;\n          }\n\n          _context3.next = 18;\n          return put(addAuthenticationRequest(windowId, authService.id, authService.getProfile()));\n\n        case 18:\n          _context3.next = 28;\n          break;\n\n        case 20:\n          if (!profileConfig.external) {\n            _context3.next = 28;\n            break;\n          }\n\n          tokenService = Utils.getService(authService, 'http://iiif.io/api/auth/1/token') || Utils.getService(authService, 'http://iiif.io/api/auth/0/token');\n\n          if (tokenService) {\n            _context3.next = 24;\n            break;\n          }\n\n          return _context3.abrupt(\"return\");\n\n        case 24:\n          _context3.next = 26;\n          return put(resolveAuthenticationRequest(authService.id, tokenService.id));\n\n        case 26:\n          _context3.next = 28;\n          return put(requestAccessToken(tokenService.id, authService.id));\n\n        case 28:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3);\n}\n/** */\n\nexport function rerequestOnAccessTokenFailure(_ref5) {\n  var infoJson, windowId, tokenServiceId, authService, accessTokenServices, service;\n  return _regeneratorRuntime().wrap(function rerequestOnAccessTokenFailure$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          infoJson = _ref5.infoJson, windowId = _ref5.windowId, tokenServiceId = _ref5.tokenServiceId;\n\n          if (tokenServiceId) {\n            _context4.next = 3;\n            break;\n          }\n\n          return _context4.abrupt(\"return\");\n\n        case 3:\n          // make sure we have an auth service to try\n          authService = Utils.getServices(infoJson).find(function (service) {\n            var tokenService = Utils.getService(service, 'http://iiif.io/api/auth/1/token') || Utils.getService(service, 'http://iiif.io/api/auth/0/token');\n            return tokenService && tokenService.id === tokenServiceId;\n          });\n\n          if (authService) {\n            _context4.next = 6;\n            break;\n          }\n\n          return _context4.abrupt(\"return\");\n\n        case 6:\n          _context4.next = 8;\n          return select(getAccessTokens);\n\n        case 8:\n          accessTokenServices = _context4.sent;\n          service = accessTokenServices[tokenServiceId];\n\n          if (service && service.success) {\n            _context4.next = 12;\n            break;\n          }\n\n          return _context4.abrupt(\"return\");\n\n        case 12:\n          _context4.next = 14;\n          return put(requestAccessToken(tokenServiceId, authService.id));\n\n        case 14:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4);\n}\n/** */\n\nexport function invalidateInvalidAuth(_ref6) {\n  var serviceId, accessTokenServices, authServices, accessTokenService, authService;\n  return _regeneratorRuntime().wrap(function invalidateInvalidAuth$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          serviceId = _ref6.serviceId;\n          _context5.next = 3;\n          return select(getAccessTokens);\n\n        case 3:\n          accessTokenServices = _context5.sent;\n          _context5.next = 6;\n          return select(getAuth);\n\n        case 6:\n          authServices = _context5.sent;\n          accessTokenService = accessTokenServices[serviceId];\n\n          if (accessTokenService) {\n            _context5.next = 10;\n            break;\n          }\n\n          return _context5.abrupt(\"return\");\n\n        case 10:\n          authService = authServices[accessTokenService.authId];\n\n          if (authService) {\n            _context5.next = 13;\n            break;\n          }\n\n          return _context5.abrupt(\"return\");\n\n        case 13:\n          if (!accessTokenService.success) {\n            _context5.next = 18;\n            break;\n          }\n\n          _context5.next = 16;\n          return put(resetAuthenticationState({\n            authServiceId: authService.id,\n            tokenServiceId: accessTokenService.id\n          }));\n\n        case 16:\n          _context5.next = 20;\n          break;\n\n        case 18:\n          _context5.next = 20;\n          return put(resolveAuthenticationRequest(authService.id, accessTokenService.id, {\n            ok: false\n          }));\n\n        case 20:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5);\n}\n/** */\n\nexport default function authSaga() {\n  return _regeneratorRuntime().wrap(function authSaga$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.next = 2;\n          return all([takeEvery(ActionTypes.RECEIVE_DEGRADED_INFO_RESPONSE, rerequestOnAccessTokenFailure), takeEvery(ActionTypes.RECEIVE_ACCESS_TOKEN_FAILURE, invalidateInvalidAuth), takeEvery(ActionTypes.RECEIVE_DEGRADED_INFO_RESPONSE, doAuthWorkflow), takeEvery(ActionTypes.RECEIVE_ACCESS_TOKEN, refetchInfoResponses), takeEvery(ActionTypes.RESET_AUTHENTICATION_STATE, refetchInfoResponsesOnLogout)]);\n\n        case 2:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, _marked6);\n}","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return generator._invoke = function (innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; }(innerFn, self, context), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == typeof value && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; this._invoke = function (method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); }; } function maybeInvokeDelegate(delegate, context) { var method = delegate.iterator[context.method]; if (undefined === method) { if (context.delegate = null, \"throw\" === context.method) { if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel; context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\"); } return ContinueSentinel; } var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) { if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; } return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (object) { var keys = []; for (var key in object) { keys.push(key); } return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) { \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); } }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, \"catch\": function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime().mark(launchSaga);\n\nimport { all, call, spawn } from 'redux-saga/effects';\nimport appSaga from './app';\nimport iiifSaga from './iiif';\nimport windowSaga from './windows';\nimport annotationsSaga from './annotations';\nimport authSaga from './auth';\n/** */\n\nfunction launchSaga(saga) {\n  return _regeneratorRuntime().wrap(function launchSaga$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          if (!true) {\n            _context.next = 12;\n            break;\n          }\n\n          _context.prev = 1;\n          _context.next = 4;\n          return call(saga);\n\n        case 4:\n          return _context.abrupt(\"break\", 12);\n\n        case 7:\n          _context.prev = 7;\n          _context.t0 = _context[\"catch\"](1);\n          console.log(_context.t0);\n\n        case 10:\n          _context.next = 0;\n          break;\n\n        case 12:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[1, 7]]);\n}\n/** */\n\n\nfunction getRootSaga() {\n  var pluginSagas = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return /*#__PURE__*/_regeneratorRuntime().mark(function rootSaga() {\n    var sagas;\n    return _regeneratorRuntime().wrap(function rootSaga$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            sagas = [annotationsSaga, appSaga, iiifSaga, windowSaga, authSaga].concat(_toConsumableArray(pluginSagas));\n            _context2.next = 3;\n            return all(sagas.map(function (saga) {\n              return spawn(launchSaga, saga);\n            }));\n\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, rootSaga);\n  });\n}\n\nexport default getRootSaga;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// Topics for understanding\n// redux modules for nested stores\n// state normalisation\n// (normalizer library)\nimport thunkMiddleware from 'redux-thunk';\nimport createSagaMiddleware from 'redux-saga';\nimport { combineReducers, createStore, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport createRootReducer from './reducers/rootReducer';\nimport getRootSaga from './sagas';\nimport settings from '../config/settings';\n/**\n * Configure Store\n */\n\nfunction configureStore(pluginReducers) {\n  var pluginSagas = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var miradorReducer = createRootReducer(pluginReducers);\n  var rootReducer = settings.state.slice ? combineReducers(_defineProperty({}, settings.state.slice, miradorReducer)) : miradorReducer; // create the saga middleware\n\n  var sagaMiddleware = createSagaMiddleware();\n  var store = createStore(rootReducer, composeWithDevTools(applyMiddleware(thunkMiddleware, sagaMiddleware))); // then run the saga\n\n  sagaMiddleware.run(getRootSaga(pluginSagas));\n  return store;\n}\n\nexport default configureStore;","import deepmerge from 'deepmerge';\nimport createStore from './createStore';\nimport { importConfig } from './actions/config';\nimport { filterValidPlugins, getConfigFromPlugins, getReducersFromPlugins, getSagasFromPlugins } from '../extend/pluginPreprocessing';\n/**\n * Configure Store\n */\n\nfunction createPluggableStore(config) {\n  var plugins = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var filteredPlugins = filterValidPlugins(plugins);\n  var store = createStore(getReducersFromPlugins(filteredPlugins), getSagasFromPlugins(filteredPlugins));\n  store.dispatch(importConfig(deepmerge(getConfigFromPlugins(filteredPlugins), config)));\n  return store;\n}\n\nexport default createPluggableStore;","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport HotApp from '../components/App';\nimport { filterValidPlugins } from '../extend/pluginPreprocessing';\nimport createPluggableStore from '../state/createPluggableStore';\n/**\n * Default Mirador instantiation\n */\n\nvar MiradorViewer = /*#__PURE__*/function () {\n  /**\n   */\n  function MiradorViewer(config) {\n    var viewerConfig = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, MiradorViewer);\n\n    this.plugins = filterValidPlugins(viewerConfig.plugins || []);\n    this.config = config;\n    this.store = viewerConfig.store || createPluggableStore(this.config, this.plugins);\n\n    if (config.id) {\n      this.container = document.getElementById(config.id);\n      config.id && ReactDOM.render(this.render(), this.container);\n    }\n  }\n  /**\n   * Render the mirador viewer\n   */\n\n\n  _createClass(MiradorViewer, [{\n    key: \"render\",\n    value: function render() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return /*#__PURE__*/React.createElement(Provider, {\n        store: this.store\n      }, /*#__PURE__*/React.createElement(HotApp, Object.assign({\n        plugins: this.plugins\n      }, props)));\n    }\n    /**\n     * Cleanup method to unmount Mirador from the dom\n     */\n\n  }, {\n    key: \"unmount\",\n    value: function unmount() {\n      this.container && ReactDOM.unmountComponentAtNode(this.container);\n    }\n  }]);\n\n  return MiradorViewer;\n}();\n\nexport default MiradorViewer;","import MiradorViewer from './lib/MiradorViewer';\n/**\n * Default Mirador instantiation\n */\n\nfunction viewer(config, pluginsOrStruct) {\n  var struct;\n\n  if (Array.isArray(pluginsOrStruct)) {\n    struct = {\n      plugins: pluginsOrStruct\n    };\n  } else {\n    struct = pluginsOrStruct;\n  }\n\n  return new MiradorViewer(config, struct);\n}\n\nexport default {\n  viewer: viewer\n};","import * as actions from './actions';\nimport * as reducers from './reducers';\nimport * as sagas from './sagas';\nimport * as selectors from './selectors';\nimport createStore from './createStore';\nexport default {\n  actions: actions,\n  createStore: createStore,\n  reducers: reducers,\n  sagas: sagas,\n  selectors: selectors\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport init from './init';\nimport state from './state';\nexport default _objectSpread(_objectSpread({}, init), state);","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport compact from 'lodash/compact';\nimport flatten from 'lodash/flatten';\nimport { v4 as uuid } from 'uuid';\n/** */\n\nvar AnnotationResource = /*#__PURE__*/function () {\n  /** */\n  function AnnotationResource() {\n    var resource = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, AnnotationResource);\n\n    this.resource = resource;\n  }\n  /** */\n\n\n  _createClass(AnnotationResource, [{\n    key: \"isOnlyTag\",\n    value: function isOnlyTag() {\n      return this.motivations.length === 1 && this.motivations[0] === 'oa:tagging';\n    }\n    /** */\n\n  }, {\n    key: \"id\",\n    get: function get() {\n      this._id = this._id || this.resource['@id'] || this.resources[0] && this.resources[0]['@id'] || uuid();\n      return this._id; // eslint-disable-line no-underscore-dangle\n    }\n    /** */\n\n  }, {\n    key: \"targetId\",\n    get: function get() {\n      var on = this.on[0];\n\n      switch (typeof on) {\n        case 'string':\n          return on.replace(/#?xywh=(.*)$/, '');\n\n        case 'object':\n          return on.full.replace(/#?xywh=(.*)$/, '');\n\n        default:\n          return null;\n      }\n    }\n    /**\n     * @return {[Array]}\n     */\n\n  }, {\n    key: \"motivations\",\n    get: function get() {\n      return flatten(compact(new Array(this.resource.motivation)));\n    }\n    /** */\n\n  }, {\n    key: \"resources\",\n    get: function get() {\n      return flatten(compact(new Array(this.resource.resource)));\n    }\n    /** */\n\n  }, {\n    key: \"on\",\n    get: function get() {\n      return flatten(compact(new Array(this.resource.on)));\n    }\n    /** */\n\n  }, {\n    key: \"tags\",\n    get: function get() {\n      if (this.isOnlyTag()) {\n        return this.resources.map(function (r) {\n          return r.chars;\n        });\n      }\n\n      return this.resources.filter(function (r) {\n        return r['@type'] === 'oa:Tag';\n      }).map(function (r) {\n        return r.chars;\n      });\n    }\n    /** */\n\n  }, {\n    key: \"chars\",\n    get: function get() {\n      return this.resources.filter(function (r) {\n        return r['@type'] !== 'oa:Tag';\n      }).map(function (r) {\n        return r.chars;\n      }).join(' ');\n    }\n    /** */\n\n  }, {\n    key: \"selector\",\n    get: function get() {\n      var on = this.on[0];\n\n      switch (typeof on) {\n        case 'string':\n          return on;\n\n        case 'object':\n          // For choices, just return the default for now. FIXME: enhance for SVG\n          // selectors\n          if (on.selector['@type'] === 'oa:Choice') {\n            return on.selector[\"default\"];\n          }\n\n          return on.selector;\n\n        default:\n          return null;\n      }\n    }\n    /** */\n\n  }, {\n    key: \"svgSelector\",\n    get: function get() {\n      var on = this.on[0];\n\n      switch (typeof on) {\n        case 'string':\n          return null;\n\n        case 'object':\n          if (on.selector && on.selector.item && on.selector.item['@type'] === 'oa:SvgSelector') {\n            return on.selector.item;\n          }\n\n          return null;\n\n        default:\n          return null;\n      }\n    }\n    /** */\n\n  }, {\n    key: \"fragmentSelector\",\n    get: function get() {\n      var selector = this.selector;\n      var match;\n\n      switch (typeof selector) {\n        case 'string':\n          match = selector.match(/xywh=(.*)$/);\n          break;\n\n        case 'object':\n          match = selector.value.match(/xywh=(.*)$/);\n          break;\n\n        default:\n          return null;\n      }\n\n      return match && match[1].split(',').map(function (str) {\n        return parseInt(str, 10);\n      });\n    }\n  }]);\n\n  return AnnotationResource;\n}();\n\nexport { AnnotationResource as default };","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport flatten from 'lodash/flatten';\nimport AnnotationResource from './AnnotationResource';\n/** */\n\nvar AnnotationList = /*#__PURE__*/function () {\n  /** */\n  function AnnotationList(json, target) {\n    _classCallCheck(this, AnnotationList);\n\n    this.json = json;\n    this.target = target;\n  }\n  /** */\n\n\n  _createClass(AnnotationList, [{\n    key: \"id\",\n    get: function get() {\n      return this.json['@id'];\n    }\n    /** */\n\n  }, {\n    key: \"present\",\n    value: function present() {\n      return this.resources && this.resources.length > 0;\n    }\n    /** */\n\n  }, {\n    key: \"resources\",\n    get: function get() {\n      var _this = this;\n\n      this._resources = this._resources || function () {\n        // eslint-disable-line no-underscore-dangle\n        if (!_this.json || !_this.json.resources) return [];\n        return flatten([_this.json.resources]).map(function (resource) {\n          return new AnnotationResource(resource);\n        });\n      }();\n\n      return this._resources; // eslint-disable-line no-underscore-dangle\n    }\n  }]);\n\n  return AnnotationList;\n}();\n\nexport { AnnotationList as default };","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n/**\n * CanvasAnnotationDisplay - class used to display a SVG and fragment based\n * annotations.\n */\nvar CanvasAnnotationDisplay = /*#__PURE__*/function () {\n  /** */\n  function CanvasAnnotationDisplay(_ref) {\n    var resource = _ref.resource,\n        palette = _ref.palette,\n        zoomRatio = _ref.zoomRatio,\n        offset = _ref.offset,\n        selected = _ref.selected,\n        hovered = _ref.hovered;\n\n    _classCallCheck(this, CanvasAnnotationDisplay);\n\n    this.resource = resource;\n    this.palette = palette;\n    this.zoomRatio = zoomRatio;\n    this.offset = offset;\n    this.selected = selected;\n    this.hovered = hovered;\n  }\n  /** */\n\n\n  _createClass(CanvasAnnotationDisplay, [{\n    key: \"toContext\",\n    value: function toContext(context) {\n      this.context = context;\n\n      if (this.resource.svgSelector) {\n        this.svgContext();\n      } else if (this.resource.fragmentSelector) {\n        this.fragmentContext();\n      }\n    }\n    /** */\n\n  }, {\n    key: \"svgString\",\n    get: function get() {\n      return this.resource.svgSelector.value;\n    }\n    /** */\n\n  }, {\n    key: \"svgContext\",\n    value: function svgContext() {\n      var _this = this;\n\n      var currentPalette;\n\n      if (this.hovered) {\n        currentPalette = this.palette.hovered;\n      } else if (this.selected) {\n        currentPalette = this.palette.selected;\n      } else {\n        currentPalette = this.palette[\"default\"];\n      }\n\n      if (currentPalette.globalAlpha === 0) return;\n\n      _toConsumableArray(this.svgPaths).forEach(function (element) {\n        /**\n         *  Note: Path2D is not supported in IE11.\n         *  TODO: Support multi canvas offset\n         *  One example: https://developer.mozilla.org/en-US/docs/Web/API/Path2D/addPath\n         */\n        _this.context.save();\n\n        _this.context.translate(_this.offset.x, _this.offset.y);\n\n        var p = new Path2D(element.attributes.d.nodeValue); // Setup styling from SVG -> Canvas\n\n        _this.context.strokeStyle = _this.color;\n\n        if (element.attributes['stroke-dasharray']) {\n          _this.context.setLineDash(element.attributes['stroke-dasharray'].nodeValue.split(','));\n        }\n\n        var svgToCanvasMap = {\n          fill: 'fillStyle',\n          stroke: 'strokeStyle',\n          'stroke-dashoffset': 'lineDashOffset',\n          'stroke-linecap': 'lineCap',\n          'stroke-linejoin': 'lineJoin',\n          'stroke-miterlimit': 'miterlimit',\n          'stroke-width': 'lineWidth'\n        };\n        Object.keys(svgToCanvasMap).forEach(function (key) {\n          if (element.attributes[key]) {\n            _this.context[svgToCanvasMap[key]] = element.attributes[key].nodeValue;\n          }\n        }); // Resize the stroke based off of the zoomRatio (currentZoom / maxZoom)\n\n        _this.context.lineWidth /= _this.zoomRatio; // Reset the color if it is selected or hovered on\n\n        if (_this.selected || _this.hovered) {\n          _this.context.strokeStyle = currentPalette.strokeStyle || currentPalette.fillStyle;\n        }\n\n        if (element.attributes['stroke-opacity']) {\n          _this.context.globalAlpha = currentPalette.globalAlpha * element.attributes['stroke-opacity'].nodeValue;\n        } else {\n          _this.context.globalAlpha = currentPalette.globalAlpha;\n        }\n\n        _this.context.stroke(p); // Wait to set the fill, so we can adjust the globalAlpha value if we need to\n\n\n        if (element.attributes.fill && element.attributes.fill.nodeValue !== 'none') {\n          if (element.attributes['fill-opacity']) {\n            _this.context.globalAlpha = currentPalette.globalAlpha * element.attributes['fill-opacity'].nodeValue;\n          } else {\n            _this.context.globalAlpha = currentPalette.globalAlpha;\n          }\n\n          _this.context.fill(p);\n        }\n\n        _this.context.restore();\n      });\n    }\n    /** */\n\n  }, {\n    key: \"fragmentContext\",\n    value: function fragmentContext() {\n      var _this2 = this;\n\n      var fragment = this.resource.fragmentSelector;\n      fragment[0] += this.offset.x;\n      fragment[1] += this.offset.y;\n      var currentPalette;\n\n      if (this.selected) {\n        currentPalette = this.palette.selected;\n      } else if (this.hovered) {\n        currentPalette = this.palette.hovered;\n      } else {\n        currentPalette = this.palette[\"default\"];\n      }\n\n      this.context.save();\n      Object.keys(currentPalette).forEach(function (key) {\n        _this2.context[key] = currentPalette[key];\n      });\n      if (currentPalette.globalAlpha === 0) return;\n\n      if (currentPalette.fillStyle) {\n        var _this$context;\n\n        (_this$context = this.context).fillRect.apply(_this$context, _toConsumableArray(fragment));\n      } else {\n        var _this$context2;\n\n        this.context.lineWidth = 1 / this.zoomRatio;\n\n        (_this$context2 = this.context).strokeRect.apply(_this$context2, _toConsumableArray(fragment));\n      }\n\n      this.context.restore();\n    }\n    /** */\n\n  }, {\n    key: \"svgPaths\",\n    get: function get() {\n      var parser = new DOMParser();\n      var xmlDoc = parser.parseFromString(this.svgString, 'text/xml');\n      return xmlDoc.getElementsByTagName('path');\n    }\n  }]);\n\n  return CanvasAnnotationDisplay;\n}();\n\nexport { CanvasAnnotationDisplay as default };","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport normalizeUrl from 'normalize-url';\nimport MiradorCanvas from './MiradorCanvas';\n/**\n * CanvasWorld\n */\n\nvar CanvasWorld = /*#__PURE__*/function () {\n  /**\n   * @param {Array} canvases - Array of Manifesto:Canvas objects to create a\n   * world from.\n   */\n  function CanvasWorld(canvases, layers) {\n    var viewingDirection = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'left-to-right';\n\n    _classCallCheck(this, CanvasWorld);\n\n    this.canvases = canvases.map(function (c) {\n      return new MiradorCanvas(c);\n    });\n    this.layers = layers;\n    this.viewingDirection = viewingDirection;\n    this._canvasDimensions = null; // eslint-disable-line no-underscore-dangle\n  }\n  /** */\n\n\n  _createClass(CanvasWorld, [{\n    key: \"canvasIds\",\n    get: function get() {\n      return this.canvases.map(function (canvas) {\n        return canvas.id;\n      });\n    }\n    /** */\n\n  }, {\n    key: \"canvasDimensions\",\n    get: function get() {\n      if (this._canvasDimensions) {\n        // eslint-disable-line no-underscore-dangle\n        return this._canvasDimensions; // eslint-disable-line no-underscore-dangle\n      }\n\n      var _this$canvasDirection = _slicedToArray(this.canvasDirection, 2),\n          dirX = _this$canvasDirection[0],\n          dirY = _this$canvasDirection[1];\n\n      var scale = dirY === 0 ? Math.min.apply(Math, _toConsumableArray(this.canvases.map(function (c) {\n        return c.getHeight();\n      }))) : Math.min.apply(Math, _toConsumableArray(this.canvases.map(function (c) {\n        return c.getWidth();\n      })));\n      var incX = 0;\n      var incY = 0;\n      var canvasDims = this.canvases.reduce(function (acc, canvas) {\n        var canvasHeight = 0;\n        var canvasWidth = 0;\n\n        if (!isNaN(canvas.aspectRatio)) {\n          if (dirY === 0) {\n            // constant height\n            canvasHeight = scale;\n            canvasWidth = Math.floor(scale * canvas.aspectRatio);\n          } else {\n            // constant width\n            canvasWidth = scale;\n            canvasHeight = Math.floor(scale * (1 / canvas.aspectRatio));\n          }\n        }\n\n        acc.push({\n          canvas: canvas,\n          height: canvasHeight,\n          width: canvasWidth,\n          x: incX,\n          y: incY\n        });\n        incX += dirX * canvasWidth;\n        incY += dirY * canvasHeight;\n        return acc;\n      }, []);\n      var worldHeight = dirY === 0 ? scale : Math.abs(incY);\n      var worldWidth = dirX === 0 ? scale : Math.abs(incX);\n      this._canvasDimensions = canvasDims // eslint-disable-line no-underscore-dangle\n      .reduce(function (acc, dims) {\n        acc.push(_objectSpread(_objectSpread({}, dims), {}, {\n          x: dirX === -1 ? dims.x + worldWidth - dims.width : dims.x,\n          y: dirY === -1 ? dims.y + worldHeight - dims.height : dims.y\n        }));\n        return acc;\n      }, []);\n      return this._canvasDimensions; // eslint-disable-line no-underscore-dangle\n    }\n    /**\n     * contentResourceToWorldCoordinates - calculates the contentResource coordinates\n     * respective to the world.\n     */\n\n  }, {\n    key: \"contentResourceToWorldCoordinates\",\n    value: function contentResourceToWorldCoordinates(contentResource) {\n      var miradorCanvasIndex = this.canvases.findIndex(function (c) {\n        return c.imageResources.find(function (r) {\n          return r.id === contentResource.id;\n        });\n      });\n      var canvas = this.canvases[miradorCanvasIndex];\n      if (!canvas) return [];\n\n      var _this$canvasToWorldCo = this.canvasToWorldCoordinates(canvas.id),\n          _this$canvasToWorldCo2 = _slicedToArray(_this$canvasToWorldCo, 4),\n          x = _this$canvasToWorldCo2[0],\n          y = _this$canvasToWorldCo2[1],\n          w = _this$canvasToWorldCo2[2],\n          h = _this$canvasToWorldCo2[3];\n\n      var fragmentOffset = canvas.onFragment(contentResource.id);\n\n      if (fragmentOffset) {\n        return [x + fragmentOffset[0], y + fragmentOffset[1], fragmentOffset[2], fragmentOffset[3]];\n      }\n\n      return [x, y, w, h];\n    }\n    /** */\n\n  }, {\n    key: \"canvasToWorldCoordinates\",\n    value: function canvasToWorldCoordinates(canvasId) {\n      var canvasDimensions = this.canvasDimensions.find(function (c) {\n        return c.canvas.id === canvasId;\n      });\n      return [canvasDimensions.x, canvasDimensions.y, canvasDimensions.width, canvasDimensions.height];\n    }\n    /** */\n\n  }, {\n    key: \"canvasDirection\",\n    get: function get() {\n      switch (this.viewingDirection) {\n        case 'left-to-right':\n          return [1, 0];\n\n        case 'right-to-left':\n          return [-1, 0];\n\n        case 'top-to-bottom':\n          return [0, 1];\n\n        case 'bottom-to-top':\n          return [0, -1];\n\n        default:\n          return [1, 0];\n      }\n    }\n    /** Get the IIIF content resource for an image */\n\n  }, {\n    key: \"contentResource\",\n    value: function contentResource(infoResponseId) {\n      var miradorCanvas = this.canvases.find(function (c) {\n        return c.imageServiceIds.some(function (id) {\n          return id && infoResponseId && normalizeUrl(id, {\n            stripAuthentication: false\n          }) === normalizeUrl(infoResponseId, {\n            stripAuthentication: false\n          });\n        });\n      });\n      if (!miradorCanvas) return undefined;\n      return miradorCanvas.imageResources.find(function (r) {\n        return normalizeUrl(r.getServices()[0].id, {\n          stripAuthentication: false\n        }) === normalizeUrl(infoResponseId, {\n          stripAuthentication: false\n        });\n      });\n    }\n    /** @private */\n\n  }, {\n    key: \"getLayerMetadata\",\n    value: function getLayerMetadata(contentResource) {\n      if (!this.layers) return undefined;\n      var miradorCanvas = this.canvases.find(function (c) {\n        return c.imageResources.find(function (r) {\n          return r.id === contentResource.id;\n        });\n      });\n      if (!miradorCanvas) return undefined;\n      var resourceIndex = miradorCanvas.imageResources.findIndex(function (r) {\n        return r.id === contentResource.id;\n      });\n      var layer = this.layers[miradorCanvas.canvas.id];\n      var imageResourceLayer = layer && layer[contentResource.id];\n      return _objectSpread({\n        index: resourceIndex,\n        opacity: 1,\n        total: miradorCanvas.imageResources.length,\n        visibility: true\n      }, imageResourceLayer);\n    }\n    /** */\n\n  }, {\n    key: \"layerOpacityOfImageResource\",\n    value: function layerOpacityOfImageResource(contentResource) {\n      var layer = this.getLayerMetadata(contentResource);\n      if (!layer) return 1;\n      if (!layer.visibility) return 0;\n      return layer.opacity;\n    }\n    /** */\n\n  }, {\n    key: \"layerIndexOfImageResource\",\n    value: function layerIndexOfImageResource(contentResource) {\n      var layer = this.getLayerMetadata(contentResource);\n      if (!layer) return undefined;\n      return layer.total - layer.index - 1;\n    }\n    /**\n     * offsetByCanvas - calculates the offset for a given canvas target. Currently\n     * assumes a horrizontal only layout.\n     */\n\n  }, {\n    key: \"offsetByCanvas\",\n    value: function offsetByCanvas(canvasTarget) {\n      var coordinates = this.canvasToWorldCoordinates(canvasTarget);\n      return {\n        x: coordinates[0],\n        y: coordinates[1]\n      };\n    }\n    /**\n     * worldBounds - calculates the \"World\" bounds. World in this case is canvases\n     * lined up horizontally starting from left to right.\n     */\n\n  }, {\n    key: \"worldBounds\",\n    value: function worldBounds() {\n      var worldWidth = Math.max.apply(Math, [0].concat(_toConsumableArray(this.canvasDimensions.map(function (c) {\n        return c.x + c.width;\n      }))));\n      var worldHeight = Math.max.apply(Math, [0].concat(_toConsumableArray(this.canvasDimensions.map(function (c) {\n        return c.y + c.height;\n      }))));\n      return [0, 0, worldWidth, worldHeight];\n    }\n    /** */\n\n  }, {\n    key: \"canvasAtPoint\",\n    value: function canvasAtPoint(point) {\n      var canvasDimensions = this.canvasDimensions.find(function (c) {\n        return c.x <= point.x && point.x <= c.x + c.width && c.y <= point.y && point.y <= c.y + c.height;\n      });\n      return canvasDimensions && canvasDimensions.canvas;\n    }\n  }]);\n\n  return CanvasWorld;\n}();\n\nexport { CanvasWorld as default };","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { ThumbnailNavigation } from '../components/ThumbnailNavigation';\nimport { getCompanionWindow, getWindow, getCanvasGroupings, getCanvasIndex, getWindowViewType, getSequenceViewingDirection, getConfig } from '../state/selectors';\n/**\n * mapStateToProps - used to hook up state to props\n * @memberof ThumbnailNavigation\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    canvasGroupings: getCanvasGroupings(state, {\n      windowId: windowId\n    }),\n    canvasIndex: getCanvasIndex(state, {\n      windowId: windowId\n    }),\n    position: getCompanionWindow(state, {\n      companionWindowId: getWindow(state, {\n        windowId: windowId\n      }).thumbnailNavigationId\n    }).position,\n    thumbnailNavigation: getConfig(state).thumbnailNavigation,\n    view: getWindowViewType(state, {\n      windowId: windowId\n    }),\n    viewingDirection: getSequenceViewingDirection(state, {\n      windowId: windowId\n    })\n  };\n};\n/**\n * Styles for withStyles HOC\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    thumbNavigation: {\n      '&:focus': {\n        boxShadow: 0,\n        outline: 0\n      }\n    }\n  };\n};\n\nvar enhance = compose(withStyles(styles), withTranslation(), connect(mapStateToProps), withPlugins('ThumbnailNavigation'));\nexport default enhance(ThumbnailNavigation);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getVisibleCanvasIds, getAnnotationResourcesByMotivation } from '../state/selectors';\nimport { WindowSideBarAnnotationsPanel } from '../components/WindowSideBarAnnotationsPanel';\n/**\n * mapStateToProps - to hook up connect\n * @memberof WindowSideBarAnnotationsPanel\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    annotationCount: getAnnotationResourcesByMotivation(state, {\n      windowId: windowId\n    }).length,\n    canvasIds: getVisibleCanvasIds(state, {\n      windowId: windowId\n    })\n  };\n};\n/** */\n\n\nvar styles = function styles(theme) {\n  return {\n    section: {\n      borderBottom: \".5px solid \".concat(theme.palette.section_divider),\n      paddingBottom: theme.spacing(1),\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(1),\n      paddingTop: theme.spacing(2)\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, null), withPlugins('WindowSideBarAnnotationsPanel') // further HOC\n);\nexport default enhance(WindowSideBarAnnotationsPanel);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getCompanionWindow, getManifestLocale, getMetadataLocales, getVisibleCanvasIds, getWindowConfig, getWindow } from '../state/selectors';\nimport { WindowSideBarInfoPanel } from '../components/WindowSideBarInfoPanel';\n/**\n * mapStateToProps - to hook up connect\n * @memberof WindowSideBarInfoPanel\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var id = _ref.id,\n      windowId = _ref.windowId;\n  return {\n    availableLocales: getMetadataLocales(state, {\n      companionWindowId: id,\n      windowId: windowId\n    }),\n    canvasIds: getVisibleCanvasIds(state, {\n      windowId: windowId\n    }),\n    collectionPath: (getWindow(state, {\n      windowId: windowId\n    }) || {}).collectionPath,\n    locale: getCompanionWindow(state, {\n      companionWindowId: id\n    }).locale || getManifestLocale(state, {\n      windowId: windowId\n    }),\n    showLocalePicker: getWindowConfig(state, {\n      windowId: windowId\n    }).showLocalePicker\n  };\n};\n/** */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref2) {\n  var windowId = _ref2.windowId,\n      id = _ref2.id;\n  return {\n    setLocale: function setLocale(locale) {\n      return dispatch(actions.updateCompanionWindow(windowId, id, {\n        locale: locale\n      }));\n    }\n  };\n};\n/**\n *\n * @param theme\n * @returns {label: {paddingLeft: number}}}\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    section: {\n      borderBottom: \".5px solid \".concat(theme.palette.section_divider),\n      paddingBottom: theme.spacing(1),\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(1),\n      paddingTop: theme.spacing(2)\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('WindowSideBarInfoPanel'));\nexport default enhance(WindowSideBarInfoPanel);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { WindowSideBarCanvasPanel } from '../components/WindowSideBarCanvasPanel';\nimport { getCompanionWindow, getDefaultSidebarVariant, getSequenceTreeStructure, getWindow, getManifestoInstance, getSequence, getSequences } from '../state/selectors';\n/**\n * mapStateToProps - to hook up connect\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var id = _ref.id,\n      windowId = _ref.windowId;\n  var treeStructure = getSequenceTreeStructure(state, {\n    windowId: windowId\n  });\n  var window = getWindow(state, {\n    windowId: windowId\n  });\n  var config = state.config;\n  var companionWindow = getCompanionWindow(state, {\n    companionWindowId: id\n  });\n  var collectionPath = window.collectionPath || [];\n  var collectionId = collectionPath && collectionPath[collectionPath.length - 1];\n  var sequence = getSequence(state, {\n    windowId: windowId\n  });\n  return {\n    collection: collectionId && getManifestoInstance(state, {\n      manifestId: collectionId\n    }),\n    config: config,\n    sequenceId: sequence && sequence.id,\n    sequences: getSequences(state, {\n      windowId: windowId\n    }),\n    showToc: treeStructure && treeStructure.nodes && treeStructure.nodes.length > 0,\n    variant: companionWindow.variant || getDefaultSidebarVariant(state, {\n      windowId: windowId\n    })\n  };\n};\n/**\n * mapStateToProps - used to hook up connect to state\n * @memberof WindowSideBarCanvasPanel\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref2) {\n  var id = _ref2.id,\n      windowId = _ref2.windowId;\n  return {\n    showMultipart: function showMultipart() {\n      return dispatch(actions.addOrUpdateCompanionWindow(windowId, {\n        content: 'collection',\n        position: 'right'\n      }));\n    },\n    updateSequence: function updateSequence(sequenceId) {\n      return dispatch(actions.updateWindow(windowId, {\n        sequenceId: sequenceId\n      }));\n    },\n    updateVariant: function updateVariant(variant) {\n      return dispatch(actions.updateCompanionWindow(windowId, id, {\n        variant: variant\n      }));\n    }\n  };\n};\n/**\n *\n * @param theme\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    \"break\": {\n      flexBasis: '100%',\n      height: 0\n    },\n    collectionNavigationButton: {\n      textTransform: 'none'\n    },\n    label: {\n      paddingLeft: theme.spacing(1)\n    },\n    select: {\n      '&:focus': {\n        backgroundColor: theme.palette.background.paper\n      }\n    },\n    selectEmpty: {\n      backgroundColor: theme.palette.background.paper\n    },\n    variantTab: {\n      minWidth: 'auto'\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('WindowSideBarCanvasPanel'));\nexport default enhance(WindowSideBarCanvasPanel);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getManifestLogo, getRequiredStatement, getRights } from '../state/selectors';\nimport { AttributionPanel } from '../components/AttributionPanel';\n/**\n * mapStateToProps - to hook up connect\n * @memberof WindowSideBarInfoPanel\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var id = _ref.id,\n      windowId = _ref.windowId;\n  return {\n    manifestLogo: getManifestLogo(state, {\n      windowId: windowId\n    }),\n    requiredStatement: getRequiredStatement(state, {\n      windowId: windowId\n    }),\n    rights: getRights(state, {\n      windowId: windowId\n    })\n  };\n};\n/**\n *\n * @param theme\n * @returns {label: {paddingLeft: number}}}\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    logo: {\n      maxWidth: '100%'\n    },\n    placeholder: {\n      backgroundColor: theme.palette.grey[300]\n    },\n    section: {\n      borderBottom: \".5px solid \".concat(theme.palette.section_divider),\n      paddingBottom: theme.spacing(1),\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(1),\n      paddingTop: theme.spacing(2)\n    }\n  };\n};\n\nvar enhance = compose(withStyles(styles), withTranslation(), connect(mapStateToProps), withPlugins('AttributionPanel'));\nexport default enhance(AttributionPanel);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as actions from '../state/actions';\nimport { withPlugins } from '../extend/withPlugins';\nimport { SearchPanel } from '../components/SearchPanel';\nimport { getManifestSearchService, getSearchQuery, getWindow } from '../state/selectors';\n/** */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var id = _ref.id,\n      windowId = _ref.windowId;\n  return {\n    query: getSearchQuery(state, {\n      companionWindowId: id,\n      windowId: windowId\n    }),\n    searchService: getManifestSearchService(state, {\n      windowId: windowId\n    }),\n    suggestedSearches: getWindow(state, {\n      windowId: windowId\n    }).suggestedSearches\n  };\n};\n/** */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, props) {\n  return {\n    fetchSearch: function fetchSearch(searchId, query) {\n      return dispatch(actions.fetchSearch(props.windowId, props.id, searchId, query));\n    },\n    removeSearch: function removeSearch() {\n      return dispatch(actions.removeSearch(props.windowId, props.id));\n    }\n  };\n};\n/**\n* Styles for withStyles HOC\n*/\n\n\nvar styles = function styles(theme) {\n  return {\n    clearChip: {\n      marginLeft: theme.spacing(1)\n    },\n    inlineButton: {\n      '& span': {\n        lineHeight: '1.5em'\n      },\n      margin: theme.spacing(2),\n      padding: 0,\n      textAlign: 'inherit',\n      textTransform: 'none'\n    }\n  };\n};\n\nvar enhance = compose(connect(mapStateToProps, mapDispatchToProps), withStyles(styles), withTranslation(), withPlugins('SearchPanel'));\nexport default enhance(SearchPanel);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { LayersPanel } from '../components/LayersPanel';\nimport { getVisibleCanvasIds } from '../state/selectors';\n/**\n * mapStateToProps - to hook up connect\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var id = _ref.id,\n      windowId = _ref.windowId;\n  return {\n    canvasIds: getVisibleCanvasIds(state, {\n      windowId: windowId\n    })\n  };\n};\n/**\n *\n * @param theme\n * @returns {label: {paddingLeft: number}}}\n */\n\n\nvar styles = function styles(theme) {\n  return {};\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps), withPlugins('LayersPanel'));\nexport default enhance(LayersPanel);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { CustomPanel } from '../components/CustomPanel';\n/**\n * mapStateToProps - to hook up connect\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var id = _ref.id,\n      windowId = _ref.windowId;\n  return {};\n};\n/**\n *\n * @param theme\n * @returns {label: {paddingLeft: number}}}\n */\n\n\nvar styles = function styles(theme) {\n  return {};\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps), withPlugins('CustomPanel'));\nexport default enhance(CustomPanel);","import ThumbnailNavigation from '../containers/ThumbnailNavigation';\nimport WindowSideBarAnnotationsPanel from '../containers/WindowSideBarAnnotationsPanel';\nimport WindowSideBarInfoPanel from '../containers/WindowSideBarInfoPanel';\nimport WindowSideBarCanvasPanel from '../containers/WindowSideBarCanvasPanel';\nimport AttributionPanel from '../containers/AttributionPanel';\nimport SearchPanel from '../containers/SearchPanel';\nimport LayersPanel from '../containers/LayersPanel';\nimport CustomPanel from '../containers/CustomPanel';\nimport WindowSideBarCollectionPanel from '../containers/WindowSideBarCollectionPanel';\nvar map = {\n  annotations: WindowSideBarAnnotationsPanel,\n  attribution: AttributionPanel,\n  canvas: WindowSideBarCanvasPanel,\n  collection: WindowSideBarCollectionPanel,\n  custom: CustomPanel,\n  info: WindowSideBarInfoPanel,\n  layers: LayersPanel,\n  search: SearchPanel,\n  thumbnailNavigation: ThumbnailNavigation\n};\nexport default map;","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getCompanionWindow, getManifest, getManifestoInstance, getDefaultSidebarVariant, getWindow } from '../state/selectors';\nimport { WindowSideBarCollectionPanel } from '../components/WindowSideBarCollectionPanel';\n/**\n * mapStateToProps - to hook up connect\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var id = _ref.id,\n      windowId = _ref.windowId;\n  var window = getWindow(state, {\n    windowId: windowId\n  });\n  var companionWindow = getCompanionWindow(state, {\n    companionWindowId: id\n  });\n  var localCollectionPath = companionWindow.collectionPath;\n  var collectionPath = localCollectionPath || window.collectionPath;\n  var collectionId = collectionPath && collectionPath[collectionPath.length - 1];\n  var parentCollectionId = collectionPath && collectionPath[collectionPath.length - 2];\n  var collection = collectionId && getManifest(state, {\n    manifestId: collectionId\n  });\n  var parentCollection = parentCollectionId && getManifest(state, {\n    manifestId: parentCollectionId\n  });\n  var manifest = getManifest(state, {\n    windowId: windowId\n  });\n  return {\n    canvasNavigation: state.config.canvasNavigation,\n    collection: collection && getManifestoInstance(state, {\n      manifestId: collection.id\n    }),\n    collectionId: collectionId,\n    collectionPath: collectionPath,\n    error: collection && collection.error,\n    isFetching: collection && collection.isFetching,\n    manifestId: manifest && manifest.id,\n    parentCollection: parentCollection && getManifestoInstance(state, {\n      manifestId: parentCollection.id\n    }),\n    ready: collection && !!collection.json,\n    variant: companionWindow.variant || getDefaultSidebarVariant(state, {\n      windowId: windowId\n    })\n  };\n};\n/**\n * mapStateToProps - used to hook up connect to state\n * @memberof SidebarIndexList\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref2) {\n  var id = _ref2.id,\n      windowId = _ref2.windowId;\n  return {\n    updateCompanionWindow: function updateCompanionWindow() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return dispatch(actions.updateCompanionWindow.apply(actions, [windowId, id].concat(args)));\n    },\n    updateWindow: function updateWindow() {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return dispatch(actions.updateWindow.apply(actions, [windowId].concat(args)));\n    }\n  };\n};\n/**\n * Styles for withStyles HOC\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    label: {\n      paddingLeft: theme.spacing(1)\n    },\n    menuItem: {\n      borderBottom: \"0.5px solid \".concat(theme.palette.divider),\n      paddingRight: theme.spacing(1),\n      whiteSpace: 'normal'\n    }\n  };\n};\n\nvar enhance = compose(withStyles(styles), withTranslation(), connect(mapStateToProps, mapDispatchToProps), withPlugins('WindowSideBarCollectionPanel'));\nexport default enhance(WindowSideBarCollectionPanel);","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport flatten from 'lodash/flatten';\nimport flattenDeep from 'lodash/flattenDeep';\nimport { Canvas } from 'manifesto.js';\n/**\n * MiradorCanvas - adds additional, testable logic around Manifesto's Canvas\n * https://iiif-commons.github.io/manifesto/classes/_canvas_.manifesto.canvas.html\n */\n\nvar MiradorCanvas = /*#__PURE__*/function () {\n  /**\n   * @param {MiradorCanvas} canvas\n   */\n  function MiradorCanvas(canvas) {\n    _classCallCheck(this, MiradorCanvas);\n\n    this.canvas = canvas;\n  }\n  /** */\n\n\n  _createClass(MiradorCanvas, [{\n    key: \"id\",\n    get: function get() {\n      return this.canvas.id;\n    }\n    /** */\n\n  }, {\n    key: \"getWidth\",\n    value: function getWidth() {\n      return this.canvas.getWidth();\n    }\n    /** */\n\n  }, {\n    key: \"getHeight\",\n    value: function getHeight() {\n      return this.canvas.getHeight();\n    }\n    /**\n     */\n\n  }, {\n    key: \"aspectRatio\",\n    get: function get() {\n      return this.canvas.getWidth() / this.canvas.getHeight();\n    }\n    /**\n     * Fetches AnnotationList URIs from canvas's otherContent property\n     *\n     * Supported otherContent types:\n     * - Objects having @type property of \"sc:AnnotationList\" and URI in @id\n     * - Strings being the URIs\n     */\n\n  }, {\n    key: \"annotationListUris\",\n    get: function get() {\n      return flatten(new Array(this.canvas.__jsonld.otherContent) // eslint-disable-line no-underscore-dangle\n      ).filter(function (otherContent) {\n        return otherContent && (typeof otherContent === 'string' || otherContent['@type'] === 'sc:AnnotationList');\n      }).map(function (otherContent) {\n        return typeof otherContent === 'string' ? otherContent : otherContent['@id'];\n      });\n    }\n    /** */\n\n  }, {\n    key: \"canvasAnnotationPages\",\n    get: function get() {\n      return flatten(new Array(this.canvas.__jsonld.annotations) // eslint-disable-line no-underscore-dangle\n      ).filter(function (annotations) {\n        return annotations && annotations.type === 'AnnotationPage';\n      });\n    }\n    /**\n     * Will negotiate a v2 or v3 type of resource\n     */\n\n  }, {\n    key: \"imageResource\",\n    get: function get() {\n      return this.imageResources[0];\n    }\n    /** */\n\n  }, {\n    key: \"imageResources\",\n    get: function get() {\n      var _this = this;\n\n      var resources = flattenDeep([this.canvas.getImages().map(function (i) {\n        return i.getResource();\n      }), this.canvas.getContent().map(function (i) {\n        return i.getBody();\n      })]);\n      return flatten(resources.map(function (resource) {\n        switch (resource.getProperty('type')) {\n          case 'oa:Choice':\n            return new Canvas({\n              images: flatten([resource.getProperty('default'), resource.getProperty('item')]).map(function (r) {\n                return {\n                  resource: r\n                };\n              })\n            }, _this.canvas.options).getImages().map(function (i) {\n              return i.getResource();\n            });\n\n          default:\n            return resource;\n        }\n      }));\n    }\n    /** */\n\n  }, {\n    key: \"videoResources\",\n    get: function get() {\n      var resources = flattenDeep([this.canvas.getContent().map(function (i) {\n        return i.getBody();\n      })]);\n      return flatten(resources.filter(function (resource) {\n        return resource.getProperty('type') === 'Video';\n      }));\n    }\n    /** */\n\n  }, {\n    key: \"audioResources\",\n    get: function get() {\n      var resources = flattenDeep([this.canvas.getContent().map(function (i) {\n        return i.getBody();\n      })]);\n      return flatten(resources.filter(function (resource) {\n        return resource.getProperty('type') === 'Sound';\n      }));\n    }\n    /** */\n\n  }, {\n    key: \"vttContent\",\n    get: function get() {\n      var resources = flattenDeep([this.canvas.getContent().map(function (i) {\n        return i.getBody();\n      })]);\n      return flatten(resources.filter(function (resource) {\n        return resource.getProperty('format') === 'text/vtt';\n      }));\n    }\n    /** */\n\n  }, {\n    key: \"resourceAnnotations\",\n    get: function get() {\n      return flattenDeep([this.canvas.getImages(), this.canvas.getContent()]);\n    }\n    /**\n     * Returns a given resource Annotation, based on a contained resource or body\n     * id\n     */\n\n  }, {\n    key: \"resourceAnnotation\",\n    value: function resourceAnnotation(id) {\n      return this.resourceAnnotations.find(function (anno) {\n        return anno.getResource().id === id || flatten(new Array(anno.getBody())).some(function (body) {\n          return body.id === id;\n        });\n      });\n    }\n    /**\n     * Returns the fragment placement values if a resourceAnnotation is placed on\n     * a canvas somewhere besides the full extent\n     */\n\n  }, {\n    key: \"onFragment\",\n    value: function onFragment(id) {\n      var resourceAnnotation = this.resourceAnnotation(id);\n      if (!resourceAnnotation) return undefined; // IIIF v2\n\n      var on = resourceAnnotation.getProperty('on'); // IIIF v3\n\n      var target = resourceAnnotation.getProperty('target');\n      var fragmentMatch = (on || target).match(/xywh=(.*)$/);\n      if (!fragmentMatch) return undefined;\n      return fragmentMatch[1].split(',').map(function (str) {\n        return parseInt(str, 10);\n      });\n    }\n    /** */\n\n  }, {\n    key: \"iiifImageResources\",\n    get: function get() {\n      return this.imageResources.filter(function (r) {\n        return r && r.getServices()[0] && r.getServices()[0].id;\n      });\n    }\n    /** */\n\n  }, {\n    key: \"imageServiceIds\",\n    get: function get() {\n      return this.iiifImageResources.map(function (r) {\n        return r.getServices()[0].id;\n      });\n    }\n    /**\n     * Get the canvas service\n     */\n\n  }, {\n    key: \"service\",\n    get: function get() {\n      return this.canvas.__jsonld.service; // eslint-disable-line no-underscore-dangle\n    }\n    /**\n     * Get the canvas label\n     */\n\n  }, {\n    key: \"getLabel\",\n    value: function getLabel() {\n      return this.canvas.getLabel().length > 0 ? this.canvas.getLabel().getValue() : String(this.canvas.index + 1);\n    }\n  }]);\n\n  return MiradorCanvas;\n}();\n\nexport { MiradorCanvas as default };","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n/**\n * MiradorManifest - adds additional, testable logic around Manifesto's Manifest\n * https://iiif-commons.github.io/manifesto/classes/_canvas_.manifesto.canvas.html\n */\nvar MiradorManifest = /*#__PURE__*/function () {\n  /** */\n  function MiradorManifest(manifest) {\n    _classCallCheck(this, MiradorManifest);\n\n    this.manifest = manifest;\n  }\n  /**\n   * Returns the starting canvas specified in the manifest\n   * @param {object} manifest manifesto instance\n   * @param {number} canvasIndexFromState\n   * @return {Canvas}\n   */\n\n\n  _createClass(MiradorManifest, [{\n    key: \"startCanvas\",\n    get: function get() {\n      var canvasId;\n      var sequence = this.manifest.getSequences()[0];\n      if (!sequence) return undefined; // IIIF v2\n\n      canvasId = sequence.getProperty('startCanvas');\n\n      if (!canvasId) {\n        // IIIF v3\n        var start = this.manifest.getProperty('start') || sequence.getProperty('start');\n        canvasId = start && (start.id || start.source);\n      }\n\n      return canvasId && sequence.getCanvasById(canvasId) || undefined;\n    }\n    /** */\n\n  }, {\n    key: \"canvasAt\",\n    value: function canvasAt(index) {\n      var sequence = this.manifest.getSequences()[0];\n      var canvases = sequence && sequence.getCanvases();\n      return canvases && canvases[index];\n    }\n  }]);\n\n  return MiradorManifest;\n}();\n\nexport { MiradorManifest as default };","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport { createRemoveUpdate, updateTree } from 'react-mosaic-component/lib/util/mosaicUpdates';\nimport { getNodeAtPath, getOtherDirection, getPathToCorner, Corner } from 'react-mosaic-component/lib/util/mosaicUtilities';\nimport dropRight from 'lodash/dropRight';\n/** */\n\nvar MosaicLayout = /*#__PURE__*/function () {\n  /** */\n  function MosaicLayout(layout) {\n    _classCallCheck(this, MosaicLayout);\n\n    this.layout = layout;\n  }\n  /** */\n\n\n  _createClass(MosaicLayout, [{\n    key: \"pathToCorner\",\n    value: function pathToCorner() {\n      var corner = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Corner.TOP_RIGHT;\n      return getPathToCorner(this.layout, corner);\n    }\n    /** */\n\n  }, {\n    key: \"pathToParent\",\n    value: function pathToParent(path) {\n      return getNodeAtPath(this.layout, dropRight(path));\n    }\n    /** */\n\n  }, {\n    key: \"nodeAtPath\",\n    value: function nodeAtPath(path) {\n      return getNodeAtPath(this.layout, path);\n    }\n    /**\n     * addWindows - updates the layout with new windows using an algorithm ported\n     * from the react-mosaic-components examples. Will always add to the Top Right\n     * https://github.com/nomcopter/react-mosaic/blob/5081df8d1528d4c3b83a72763a46a30b3048fe95/demo/ExampleApp.tsx#L119-L154\n     * @param {Array} addedWindowIds [description]\n     */\n\n  }, {\n    key: \"addWindows\",\n    value: function addWindows(addedWindowIds) {\n      var _this = this;\n\n      addedWindowIds.forEach(function (windowId, i) {\n        var path = _this.pathToCorner();\n\n        var parent = _this.pathToParent(path);\n\n        var destination = _this.nodeAtPath(path);\n\n        var direction = parent ? getOtherDirection(parent.direction) : 'row';\n        var first;\n        var second;\n\n        if (direction === 'row') {\n          first = destination;\n          second = addedWindowIds[i];\n        } else {\n          first = addedWindowIds[i];\n          second = destination;\n        }\n\n        var update = {\n          path: path,\n          spec: {\n            $set: {\n              direction: direction,\n              first: first,\n              second: second\n            }\n          }\n        }; // We cannot batch the updates together because we need to recalculate\n        // the new location for each new window\n\n        _this.layout = updateTree(_this.layout, [update]);\n      });\n    }\n    /**\n     * removeWindows - Generate a set of \"removeUpdates\" to update layout binary\n     * tree. Then update the layout.\n     * @param  {Array} removedWindowIds\n     * @param  {Object} windowPaths - a lookup table for window paths\n     */\n\n  }, {\n    key: \"removeWindows\",\n    value: function removeWindows(removedWindowIds, windowPaths) {\n      var _this2 = this;\n\n      var removeUpdates = removedWindowIds.map(function (windowId) {\n        return createRemoveUpdate(_this2.layout, windowPaths[windowId]);\n      });\n      this.layout = updateTree(this.layout, removeUpdates);\n    }\n  }]);\n\n  return MosaicLayout;\n}();\n\nexport { MosaicLayout as default };","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport OpenSeadragon from 'openseadragon';\n/**\n * OpenSeadragonCanvasOverlay - adapted from https://github.com/altert/OpenSeadragonCanvasOverlay\n * used rather than an \"onRedraw\" function we tap into our own method. Existing\n * repository is not published as an npm package.\n * Code ported from https://github.com/altert/OpenSeadragonCanvasOverlay\n * carries a BSD 3-Clause license originally authored by @altert from\n * https://github.com/altert/OpenseadragonFabricjsOverlay\n */\n\nvar OpenSeadragonCanvasOverlay = /*#__PURE__*/function () {\n  /**\n   * constructor - sets up the Canvas overlay container\n   */\n  function OpenSeadragonCanvasOverlay(viewer, ref) {\n    _classCallCheck(this, OpenSeadragonCanvasOverlay);\n\n    this.viewer = viewer;\n    this.ref = ref;\n    this.containerWidth = 0;\n    this.containerHeight = 0;\n    this.imgAspectRatio = 1;\n  }\n  /** */\n\n\n  _createClass(OpenSeadragonCanvasOverlay, [{\n    key: \"canvas\",\n    get: function get() {\n      return this.canvasDiv.firstElementChild;\n    }\n    /** */\n\n  }, {\n    key: \"canvasDiv\",\n    get: function get() {\n      return this.ref.current;\n    }\n    /** */\n\n  }, {\n    key: \"context2d\",\n    get: function get() {\n      return this.canvas.getContext('2d');\n    }\n    /** */\n\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.context2d.clearRect(0, 0, this.containerWidth, this.containerHeight);\n    }\n    /**\n     * resize - resizes the added Canvas overlay.\n     */\n\n  }, {\n    key: \"resize\",\n    value: function resize() {\n      if (this.containerWidth !== this.viewer.container.clientWidth) {\n        this.containerWidth = this.viewer.container.clientWidth;\n        this.canvasDiv.setAttribute('width', this.containerWidth);\n        this.canvas.setAttribute('width', this.containerWidth);\n      }\n\n      if (this.containerHeight !== this.viewer.container.clientHeight) {\n        this.containerHeight = this.viewer.container.clientHeight;\n        this.canvasDiv.setAttribute('height', this.containerHeight);\n        this.canvas.setAttribute('height', this.containerHeight);\n      }\n\n      this.viewportOrigin = new OpenSeadragon.Point(0, 0);\n      var boundsRect = this.viewer.viewport.getBoundsNoRotateWithMargins(true);\n      this.viewportOrigin.x = boundsRect.x;\n      this.viewportOrigin.y = boundsRect.y * this.imgAspectRatio;\n      this.viewportWidth = boundsRect.width;\n      this.viewportHeight = boundsRect.height * this.imgAspectRatio;\n      var image1 = this.viewer.world.getItemAt(0);\n      if (!image1) return;\n      this.imgWidth = image1.source.dimensions.x;\n      this.imgHeight = image1.source.dimensions.y;\n      this.imgAspectRatio = this.imgWidth / this.imgHeight;\n    }\n    /**\n     * canvasUpdate - sets up the dimensions for the canvas update to mimick image\n     * 0 dimensions. Then call provided update function.\n     * @param {Function} update\n     */\n\n  }, {\n    key: \"canvasUpdate\",\n    value: function canvasUpdate(update) {\n      var viewportZoom = this.viewer.viewport.getZoom(true);\n      var image1 = this.viewer.world.getItemAt(0);\n      if (!image1) return;\n      var zoom = image1.viewportToImageZoom(viewportZoom);\n      var x = (this.viewportOrigin.x / this.imgWidth - this.viewportOrigin.x) / this.viewportWidth * this.containerWidth;\n      var y = (this.viewportOrigin.y / this.imgHeight - this.viewportOrigin.y) / this.viewportHeight * this.containerHeight;\n      if (this.clearBeforeRedraw) this.clear();\n      this.context2d.translate(x, y);\n      this.context2d.scale(zoom, zoom);\n      var center = this.viewer.viewport.getCenter();\n      var flip = this.viewer.viewport.getFlip();\n\n      if (flip) {\n        this.context2d.translate(center.x * 2, 0);\n        this.context2d.scale(-1, 1);\n      }\n\n      var rotation = this.viewer.viewport.getRotation();\n\n      if (rotation !== 0) {\n        this.context2d.translate(center.x, center.y);\n        this.context2d.rotate(rotation * Math.PI / 180);\n        this.context2d.translate(-1 * center.x, -1 * center.y);\n      }\n\n      update();\n      this.context2d.setTransform(1, 0, 0, 1, 0, 0);\n    }\n  }]);\n\n  return OpenSeadragonCanvasOverlay;\n}();\n\nexport { OpenSeadragonCanvasOverlay as default };","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport { Utils } from 'manifesto.js';\nimport MiradorManifest from './MiradorManifest';\nimport MiradorCanvas from './MiradorCanvas';\nimport asArray from './asArray';\n/** */\n\nfunction isLevel0ImageProfile(service) {\n  var profile = service.getProfile(); // work around a bug in manifesto with normalized urls that strip # values.\n\n  if (profile.endsWith('#level1') || profile.endsWith('#level2')) return false; // support IIIF v3-style profiles\n\n  if (profile === 'level0') return true;\n  return Utils.isLevel0ImageProfile(profile);\n}\n/** */\n\n\nfunction isLevel2ImageProfile(service) {\n  var profile = service.getProfile(); // work around a bug in manifesto with normalized urls that strip # values.\n\n  if (profile.endsWith('#level0') || profile.endsWith('#level1')) return false; // support IIIF v3-style profiles\n\n  if (profile === 'level2') return true;\n  return Utils.isLevel2ImageProfile(profile);\n}\n/** */\n\n\nfunction iiifv3ImageServiceType(service) {\n  var type = service.getProperty('type') || [];\n  return asArray(type).some(function (v) {\n    return v.startsWith('ImageService');\n  });\n}\n/** */\n\n\nfunction iiifImageService(resource) {\n  var service = resource && resource.getServices().find(function (s) {\n    return iiifv3ImageServiceType(s) || Utils.isImageProfile(s.getProfile());\n  });\n  if (!service) return undefined;\n  return service;\n}\n/** */\n\n\nvar ThumbnailFactory = /*#__PURE__*/function () {\n  /** */\n  function ThumbnailFactory(resource) {\n    var iiifOpts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, ThumbnailFactory);\n\n    this.resource = resource;\n    this.iiifOpts = iiifOpts;\n  }\n  /** */\n\n\n  _createClass(ThumbnailFactory, [{\n    key: \"iiifThumbnailUrl\",\n    value:\n    /**\n     * Determines the appropriate thumbnail to use to represent an Image Resource.\n     * @param {Object} resource The Image Resource from which to derive a thumbnail\n     * @return {Object} The thumbnail URL and any spatial dimensions that can be determined\n     */\n    function iiifThumbnailUrl(resource) {\n      var size;\n      var width;\n      var height;\n      var minDimension = 120;\n      var maxHeight = minDimension;\n      var maxWidth = minDimension;\n      var _this$iiifOpts = this.iiifOpts,\n          requestedMaxHeight = _this$iiifOpts.maxHeight,\n          requestedMaxWidth = _this$iiifOpts.maxWidth;\n      if (requestedMaxHeight) maxHeight = Math.max(requestedMaxHeight, minDimension);\n      if (requestedMaxWidth) maxWidth = Math.max(requestedMaxWidth, minDimension);\n      var service = iiifImageService(resource);\n      if (!service) return ThumbnailFactory.staticImageUrl(resource);\n      var aspectRatio = resource.getWidth() && resource.getHeight() && resource.getWidth() / resource.getHeight();\n      var target = requestedMaxWidth && requestedMaxHeight ? requestedMaxWidth * requestedMaxHeight : maxHeight * maxWidth;\n      var closestSize = ThumbnailFactory.selectBestImageSize(service, target);\n\n      if (closestSize) {\n        // Embedded service advertises an appropriate size\n        width = closestSize.width;\n        height = closestSize.height;\n        size = \"\".concat(width, \",\").concat(height);\n      } else if (isLevel0ImageProfile(service)) {\n        /** Bail if the best available size is the full size.. maybe we'll get lucky with the @id */\n        if (!service.getProperty('height') && !service.getProperty('width')) {\n          return ThumbnailFactory.staticImageUrl(resource);\n        }\n      } else if (requestedMaxHeight && requestedMaxWidth) {\n        // IIIF level 2, no problem.\n        if (isLevel2ImageProfile(service)) {\n          size = \"!\".concat(maxWidth, \",\").concat(maxHeight);\n          width = maxWidth;\n          height = maxHeight;\n          if (aspectRatio && aspectRatio > 1) height = Math.round(maxWidth / aspectRatio);\n          if (aspectRatio && aspectRatio < 1) width = Math.round(maxHeight * aspectRatio);\n        } else if (maxWidth / maxHeight < aspectRatio) {\n          size = \"\".concat(maxWidth, \",\");\n          width = maxWidth;\n          if (aspectRatio) height = Math.round(maxWidth / aspectRatio);\n        } else {\n          size = \",\".concat(maxHeight);\n          height = maxHeight;\n          if (aspectRatio) width = Math.round(maxHeight * aspectRatio);\n        }\n      } else if (requestedMaxHeight && !requestedMaxWidth) {\n        size = \",\".concat(maxHeight);\n        height = maxHeight;\n        if (aspectRatio) width = Math.round(maxHeight * aspectRatio);\n      } else if (!requestedMaxHeight && requestedMaxWidth) {\n        size = \"\".concat(maxWidth, \",\");\n        width = maxWidth;\n        if (aspectRatio) height = Math.round(maxWidth / aspectRatio);\n      } else {\n        size = \",\".concat(minDimension);\n        height = minDimension;\n        if (aspectRatio) width = Math.round(height * aspectRatio);\n      }\n\n      var region = 'full';\n      var quality = Utils.getImageQuality(service.getProfile());\n      var id = service.id.replace(/\\/+$/, '');\n      var format = this.getFormat(service);\n      return {\n        height: height,\n        url: [id, region, size, 0, \"\".concat(quality, \".\").concat(format)].join('/'),\n        width: width\n      };\n    }\n    /**\n     * Figure out what format thumbnail to use by looking at the preferred formats\n     * on offer, and selecting a format shared in common with the application's\n     * preferred format list.\n     *\n     * Fall back to jpg, which is required to work for all IIIF services.\n     */\n\n  }, {\n    key: \"getFormat\",\n    value: function getFormat(service) {\n      var _this$iiifOpts$prefer = this.iiifOpts.preferredFormats,\n          preferredFormats = _this$iiifOpts$prefer === void 0 ? [] : _this$iiifOpts$prefer;\n      var servicePreferredFormats = service.getProperty('preferredFormats');\n      if (!servicePreferredFormats) return 'jpg';\n      var filteredFormats = servicePreferredFormats.filter(function (value) {\n        return preferredFormats.includes(value);\n      }); // this is a format found in common between the preferred formats of the service\n      // and the application\n\n      if (filteredFormats[0]) return filteredFormats[0]; // IIIF Image API guarantees jpg support; if it wasn't provided by the service\n      // but the application is fine with it, we might as well try it.\n\n      if (!servicePreferredFormats.includes('jpg') && preferredFormats.includes('jpg')) {\n        return 'jpg';\n      } // there were no formats in common, and the application didn't want jpg... so\n      // just trust that the IIIF service is advertising something useful?\n\n\n      if (servicePreferredFormats[0]) return servicePreferredFormats[0]; // JPG support is guaranteed by the spec, so it's a good worst-case fallback\n\n      return 'jpg';\n    }\n    /**\n     * Determines the content resource from which to derive a thumbnail to represent a given resource.\n     * This method is recursive.\n     * @param {Object} resource A IIIF resource to derive a thumbnail from\n     * @return {Object|undefined} The Image Resource to derive a thumbnail from, or undefined\n     * if no appropriate resource exists\n     */\n\n  }, {\n    key: \"getSourceContentResource\",\n    value: function getSourceContentResource(resource) {\n      var thumbnail = resource.getThumbnail(); // Any resource type may have a thumbnail\n\n      if (thumbnail) {\n        if (typeof thumbnail.__jsonld === 'string') return thumbnail.__jsonld; // Prefer an image's ImageService over its image's thumbnail\n        // Note that Collection, Manifest, and Canvas don't have `getType()`\n\n        if (!resource.isCollection() && !resource.isManifest() && !resource.isCanvas()) {\n          if (resource.getType() === 'image' && iiifImageService(resource) && !iiifImageService(thumbnail)) {\n            return resource;\n          }\n        }\n\n        return thumbnail;\n      }\n\n      if (resource.isCollection()) {\n        var firstManifest = resource.getManifests()[0];\n        if (firstManifest) return this.getSourceContentResource(firstManifest);\n        return undefined;\n      }\n\n      if (resource.isManifest()) {\n        var miradorManifest = new MiradorManifest(resource);\n        var canvas = miradorManifest.startCanvas || miradorManifest.canvasAt(0);\n        if (canvas) return this.getSourceContentResource(canvas);\n        return undefined;\n      }\n\n      if (resource.isCanvas()) {\n        var image = ThumbnailFactory.getPreferredImage(resource);\n        if (image) return this.getSourceContentResource(image);\n        return undefined;\n      }\n\n      if (resource.getType() === 'image') {\n        return resource;\n      }\n\n      return undefined;\n    }\n    /**\n     * Gets a thumbnail representing the resource.\n     * @return {Object|undefined} A thumbnail representing the resource, or undefined if none could\n     * be determined\n     */\n\n  }, {\n    key: \"get\",\n    value: function get() {\n      if (!this.resource) return undefined; // Determine which content resource we should use to derive a thumbnail\n\n      var sourceContentResource = this.getSourceContentResource(this.resource);\n      if (!sourceContentResource) return undefined; // Special treatment for external resources\n\n      if (typeof sourceContentResource === 'string') return {\n        url: sourceContentResource\n      };\n      return this.iiifThumbnailUrl(sourceContentResource);\n    }\n  }], [{\n    key: \"staticImageUrl\",\n    value: function staticImageUrl(resource) {\n      return {\n        height: resource.getProperty('height'),\n        url: resource.id,\n        width: resource.getProperty('width')\n      };\n    }\n    /**\n     * Selects the image resource that is representative of the given canvas.\n     * @param {Object} canvas A Manifesto Canvas\n     * @return {Object} A Manifesto Image Resource\n     */\n\n  }, {\n    key: \"getPreferredImage\",\n    value: function getPreferredImage(canvas) {\n      var miradorCanvas = new MiradorCanvas(canvas);\n      return miradorCanvas.iiifImageResources[0] || miradorCanvas.imageResource;\n    }\n    /**\n     * Chooses the best available image size based on a target area (w x h) value.\n     * @param {Object} service A IIIF Image API service that has a `sizes` array\n     * @param {Number} targetArea The target area value to compare potential sizes against\n     * @return {Object|undefined} The best size, or undefined if none are acceptable\n     */\n\n  }, {\n    key: \"selectBestImageSize\",\n    value: function selectBestImageSize(service, targetArea) {\n      var sizes = asArray(service.getProperty('sizes'));\n      var closestSize = {\n        \"default\": true,\n        height: service.getProperty('height') || Number.MAX_SAFE_INTEGER,\n        width: service.getProperty('width') || Number.MAX_SAFE_INTEGER\n      };\n      /** Compare the total image area to our target */\n\n      var imageFitness = function imageFitness(test) {\n        return test.width * test.height - targetArea;\n      };\n      /** Look for the size that's just bigger than we prefer... */\n\n\n      closestSize = sizes.reduce(function (best, test) {\n        var score = imageFitness(test);\n        if (score < 0) return best;\n        return Math.abs(score) < Math.abs(imageFitness(best)) ? test : best;\n      }, closestSize);\n      /** .... but not \"too\" big; we'd rather scale up an image than download too much */\n\n      if (closestSize.width * closestSize.height > targetArea * 6) {\n        closestSize = sizes.reduce(function (best, test) {\n          return Math.abs(imageFitness(test)) < Math.abs(imageFitness(best)) ? test : best;\n        }, closestSize);\n      }\n\n      if (closestSize[\"default\"]) return undefined;\n      return closestSize;\n    }\n  }]);\n\n  return ThumbnailFactory;\n}();\n/** */\n\n\nfunction getBestThumbnail(resource, iiifOpts) {\n  return new ThumbnailFactory(resource, iiifOpts).get();\n}\n\nexport { ThumbnailFactory };\nexport default getBestThumbnail;","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n/** */\nvar TruncatedHit = /*#__PURE__*/function () {\n  /** */\n  function TruncatedHit(hit) {\n    var annotation = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n    var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n        _ref$maxChars = _ref.maxChars,\n        maxChars = _ref$maxChars === void 0 ? 200 : _ref$maxChars,\n        _ref$minimum = _ref.minimum,\n        minimum = _ref$minimum === void 0 ? 20 : _ref$minimum;\n\n    _classCallCheck(this, TruncatedHit);\n\n    this.hit = hit;\n    this.annotation = annotation;\n    this.maxChars = maxChars || 200;\n    this.minimum = minimum || 20;\n  }\n  /** */\n\n\n  _createClass(TruncatedHit, [{\n    key: \"match\",\n    get: function get() {\n      return this.hit.match || this.annotation && this.annotation.resource.resource.chars || '-';\n    }\n    /** */\n\n  }, {\n    key: \"charsOnSide\",\n    get: function get() {\n      var resultingChars = (this.maxChars - this.match.length) / 2;\n      var measured = [(this.hit.before || '').length, (this.hit.after || '').length].filter(function (length) {\n        return length > 0;\n      });\n      return Math.max(Math.min.apply(Math, [resultingChars].concat(_toConsumableArray(measured))), this.minimum);\n    }\n    /** */\n\n  }, {\n    key: \"before\",\n    get: function get() {\n      if (!this.hit.before) return '';\n      return this.hit.before.substring(this.hit.before.length - this.charsOnSide, this.hit.before.length);\n    }\n    /** */\n\n  }, {\n    key: \"after\",\n    get: function get() {\n      if (!this.hit.after) return '';\n      return this.hit.after.substring(0, Math.min(this.hit.after.length, this.charsOnSide));\n    }\n  }]);\n\n  return TruncatedHit;\n}();\n\nexport { TruncatedHit as default };","/**\n */\nexport default function asArray(value) {\n  if (value === undefined) return [];\n\n  if (!Array.isArray(value)) {\n    return [value];\n  }\n\n  return value;\n}","// Only remove security related tags and attributes. Allow each other.\nvar liberal = {}; // No html at all. Only text will remain.\n\nvar noHtml = {\n  ALLOWED_TAGS: []\n}; // Presentation API 2 suggestion.\n\nvar iiif = {\n  ALLOWED_ATTR: ['href', 'src', 'alt'],\n  ALLOWED_TAGS: ['a', 'b', 'br', 'i', 'img', 'p', 'span']\n}; // Rule set that is used in Mirador 2.\n\nvar mirador2 = {\n  ALLOWED_ATTR: ['href', 'target', 'src', 'alt', 'dir'],\n  ALLOWED_TAGS: ['a', 'b', 'br', 'i', 'img', 'p', 'span', 'strong', 'em', 'ul', 'ol', 'li']\n};\nvar htmlRules = {\n  iiif: iiif,\n  liberal: liberal,\n  mirador2: mirador2,\n  noHtml: noHtml\n};\nexport default htmlRules;","/** Extract metadata from an image File */\nexport function readImageMetadata(file) {\n  return new Promise(function (resolve, reject) {\n    var reader = new FileReader();\n    reader.addEventListener('load', function () {\n      var image = new Image();\n      image.addEventListener('load', function () {\n        resolve({\n          height: image.height,\n          name: file.name,\n          type: file.type,\n          url: reader.result,\n          width: image.width\n        });\n      });\n      image.src = reader.result;\n    });\n    reader.readAsDataURL(file);\n  });\n}","export var OSDReferences = {\n  /** */\n  get: function get(windowId) {\n    return this.refs[windowId];\n  },\n  refs: {},\n\n  /** */\n  set: function set(windowId, ref) {\n    this.refs[windowId] = ref;\n  }\n};","/* eslint-disable sort-keys */\nvar ActionTypes = {\n  ADD_COMPANION_WINDOW: 'mirador/ADD_COMPANION_WINDOW',\n  UPDATE_COMPANION_WINDOW: 'mirador/UPDATE_COMPANION_WINDOW',\n  REMOVE_COMPANION_WINDOW: 'mirador/REMOVE_COMPANION_WINDOW',\n  TOGGLE_TOC_NODE: 'mirador/TOGGLE_TOC_NODE',\n  UPDATE_WINDOW: 'mirador/UPDATE_WINDOW',\n  REQUEST_CANVAS_ANNOTATIONS: 'mirador/REQUEST_CANVAS_ANNOTATIONS',\n  HOVER_ANNOTATION: 'mirador/HOVER_ANNOTATION',\n  REQUEST_ANNOTATION: 'mirador/REQUEST_ANNOTATION',\n  RECEIVE_ANNOTATION: 'mirador/RECEIVE_ANNOTATION',\n  RECEIVE_ANNOTATION_FAILURE: 'mirador/RECEIVE_ANNOTATION_FAILURE',\n  DESELECT_ANNOTATION: 'mirador/DESELECT_ANNOTATION',\n  SELECT_ANNOTATION: 'mirador/SELECT_ANNOTATION',\n  TOGGLE_ANNOTATION_DISPLAY: 'mirador/TOGGLE_ANNOTATION_DISPLAY',\n  FOCUS_WINDOW: 'mirador/FOCUS_WINDOW',\n  SET_WORKSPACE_FULLSCREEN: 'mirador/SET_WORKSPACE_FULLSCREEN',\n  SET_WORKSPACE_VIEWPORT_POSITION: 'mirador/SET_WORKSPACE_VIEWPORT_POSITION',\n  ADD_MANIFEST: 'mirador/ADD_MANIFEST',\n  ADD_WINDOW: 'mirador/ADD_WINDOW',\n  ADD_ERROR: 'mirador/ADD_ERROR',\n  IMPORT_CONFIG: 'mirador/IMPORT_CONFIG',\n  IMPORT_MIRADOR_STATE: 'mirador/IMPORT_MIRADOR_STATE',\n  SET_CANVAS: 'mirador/SET_CANVAS',\n  MAXIMIZE_WINDOW: 'mirador/MAXIMIZE_WINDOW',\n  MINIMIZE_WINDOW: 'mirador/MINIMIZE_WINDOW',\n  UPDATE_WINDOW_POSITION: 'mirador/UPDATE_WINDOW_POSITION',\n  SET_WINDOW_SIZE: 'mirador/SET_WINDOW_SIZE',\n  REMOVE_WINDOW: 'mirador/REMOVE_WINDOW',\n  PICK_WINDOWING_SYSTEM: 'mirador/PICK_WINDOWING_SYSTEM',\n  REQUEST_MANIFEST: 'mirador/REQUEST_MANIFEST',\n  RECEIVE_MANIFEST: 'mirador/RECEIVE_MANIFEST',\n  RECEIVE_MANIFEST_FAILURE: 'mirador/RECEIVE_MANIFEST_FAILURE',\n  REMOVE_ERROR: 'mirador/REMOVE_ERROR',\n  SET_CONFIG: 'mirador/SET_CONFIG',\n  UPDATE_WORKSPACE: 'mirador/UPDATE_WORKSPACE',\n  SET_WINDOW_THUMBNAIL_POSITION: 'mirador/SET_WINDOW_THUMBNAIL_POSITION',\n  SET_WINDOW_VIEW_TYPE: 'mirador/SET_WINDOW_VIEW_TYPE',\n  SET_WORKSPACE_ADD_VISIBILITY: 'mirador/SET_WORKSPACE_ADD_VISIBILITY',\n  TOGGLE_WINDOW_SIDE_BAR: 'mirador/TOGGLE_WINDOW_SIDE_BAR',\n  TOGGLE_DRAGGING: 'mirador/TOGGLE_DRAGGING',\n  TOGGLE_ZOOM_CONTROLS: 'mirador/TOGGLE_ZOOM_CONTROLS',\n  UPDATE_CONFIG: 'mirador/UPDATE_CONFIG',\n  REMOVE_MANIFEST: 'mirador/REMOVE_MANIFEST',\n  REQUEST_INFO_RESPONSE: 'mirador/REQUEST_INFO_RESPONSE',\n  RECEIVE_INFO_RESPONSE: 'mirador/RECEIVE_INFO_RESPONSE',\n  RECEIVE_DEGRADED_INFO_RESPONSE: 'mirador/RECEIVE_DEGRADED_INFO_RESPONSE',\n  RECEIVE_INFO_RESPONSE_FAILURE: 'mirador/RECEIVE_INFO_RESPONSE_FAILURE',\n  REMOVE_INFO_RESPONSE: 'mirador/REMOVE_INFO_RESPONSE',\n  UPDATE_WORKSPACE_MOSAIC_LAYOUT: 'mirador/UPDATE_WORKSPACE_MOSAIC_LAYOUT',\n  UPDATE_VIEWPORT: 'mirador/UPDATE_VIEWPORT',\n  UPDATE_ELASTIC_WINDOW_LAYOUT: 'mirador/UPDATE_ELASTIC_WINDOW_LAYOUT',\n  ADD_AUTHENTICATION_REQUEST: 'mirador/ADD_AUTHENTICATION_REQUEST',\n  RESOLVE_AUTHENTICATION_REQUEST: 'mirador/RESOLVE_AUTHENTICATION_REQUEST',\n  REQUEST_ACCESS_TOKEN: 'mirador/REQUEST_ACCESS_TOKEN',\n  RECEIVE_ACCESS_TOKEN: 'mirador/RECEIVE_ACCESS_TOKEN',\n  RECEIVE_ACCESS_TOKEN_FAILURE: 'mirador/RECEIVE_ACCESS_TOKEN_FAILURE',\n  RESET_AUTHENTICATION_STATE: 'mirador/RESET_AUTHENTICATION_STATE',\n  CLEAR_ACCESS_TOKEN_QUEUE: 'mirador/CLEAR_ACCESS_TOKEN_QUEUE',\n  REQUEST_SEARCH: 'mirador/REQUEST_SEARCH',\n  RECEIVE_SEARCH: 'mirador/RECEIVE_SEARCH',\n  RECEIVE_SEARCH_FAILURE: 'mirador/RECEIVE_SEARCH_FAILURE',\n  REMOVE_SEARCH: 'mirador/REMOVE_SEARCH',\n  SET_CONTENT_SEARCH_CURRENT_ANNOTATIONS: 'mirador/SET_CONTENT_SEARCH_CURRENT_ANNOTATIONS',\n  UPDATE_LAYERS: 'mirador/UPDATE_LAYERS',\n  ADD_RESOURCE: 'mirador/ADD_RESOURCE',\n  REMOVE_RESOURCE: 'mirador/REMOVE_RESOURCE',\n  SHOW_COLLECTION_DIALOG: 'mirador/SHOW_COLLECTION_DIALOG',\n  HIDE_COLLECTION_DIALOG: 'mirador/HIDE_COLLECTION_DIALOG'\n};\nexport default ActionTypes;","import ActionTypes from './action-types';\n/**\n * Request annotations on a canvas\n *\n * NOTE: there is no corresponding reducer; the expected API is sagas will\n *  pick this action up and act on it accordingly.\n */\n\nexport function requestCanvasAnnotations(windowId, canvasId) {\n  return {\n    canvasId: canvasId,\n    type: ActionTypes.REQUEST_CANVAS_ANNOTATIONS,\n    windowId: windowId\n  };\n}\n/**\n * requestAnnotation - action creator\n *\n * @param  {String} targetId\n * @param  {String} annotationId\n * @memberof ActionCreators\n */\n\nexport function requestAnnotation(targetId, annotationId) {\n  return {\n    annotationId: annotationId,\n    targetId: targetId,\n    type: ActionTypes.REQUEST_ANNOTATION\n  };\n}\n/**\n * receiveAnnotation - action creator\n *\n * @param  {String} targetId\n * @param  {String} annotationId\n * @param  {Object} annotationJson\n * @memberof ActionCreators\n */\n\nexport function receiveAnnotation(targetId, annotationId, annotationJson) {\n  return {\n    annotationId: annotationId,\n    annotationJson: annotationJson,\n    targetId: targetId,\n    type: ActionTypes.RECEIVE_ANNOTATION\n  };\n}\n/**\n * receiveAnnotationFailure - action creator\n *\n * @param  {String} targetId\n * @param  {String} annotationId\n * @param  {String} error\n * @memberof ActionCreators\n */\n\nexport function receiveAnnotationFailure(targetId, annotationId, error) {\n  return {\n    annotationId: annotationId,\n    error: error,\n    targetId: targetId,\n    type: ActionTypes.RECEIVE_ANNOTATION_FAILURE\n  };\n}\n/**\n * selectAnnotation - action creator\n *\n * @param  {String} windowId\n * @param  {String} targetId\n * @param  {String} annotationId\n * @memberof ActionCreators\n */\n\nexport function selectAnnotation(windowId, annotationId) {\n  return {\n    annotationId: annotationId,\n    type: ActionTypes.SELECT_ANNOTATION,\n    windowId: windowId\n  };\n}\n/**\n * deselectAnnotation - action creator\n *\n * @param  {String} windowId\n * @param  {String} targetId\n * @param  {String} annotationId\n * @memberof ActionCreators\n */\n\nexport function deselectAnnotation(windowId, annotationId) {\n  return {\n    annotationId: annotationId,\n    type: ActionTypes.DESELECT_ANNOTATION,\n    windowId: windowId\n  };\n}\n/**\n * toggleAnnotationDisplay - action creator\n *\n * @param  {String} windowId\n * @memberof ActionCreators\n */\n\nexport function toggleAnnotationDisplay(windowId) {\n  return {\n    type: ActionTypes.TOGGLE_ANNOTATION_DISPLAY,\n    windowId: windowId\n  };\n}\n/**\n * toggleAnnotationDisplay - action creator\n *\n * @param  {String} windowId\n * @memberof ActionCreators\n */\n\nexport function hoverAnnotation(windowId, annotationIds) {\n  return {\n    annotationIds: annotationIds,\n    type: ActionTypes.HOVER_ANNOTATION,\n    windowId: windowId\n  };\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport ActionTypes from './action-types';\n/**\n * addAuthenticationRequest - action creator\n *\n * @param  {String} windowId\n * @param  {String} id\n * @memberof ActionCreators\n */\n\nexport function addAuthenticationRequest(windowId, id) {\n  var profile = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n  return {\n    id: id,\n    profile: profile,\n    type: ActionTypes.ADD_AUTHENTICATION_REQUEST,\n    windowId: windowId\n  };\n}\n/**\n * resolveAuthenticationRequest - action creator\n * Triggered when we might have an IIIF auth cookie available (but we\n *   can't be really sure until try the access token)\n *\n * @param {String} id\n * @memberof ActionCreators\n */\n\nexport function resolveAuthenticationRequest(id, tokenServiceId, props) {\n  return _objectSpread({\n    id: id,\n    tokenServiceId: tokenServiceId,\n    type: ActionTypes.RESOLVE_AUTHENTICATION_REQUEST\n  }, props);\n}\n/**\n * requestAccessToken - action creator\n * @private\n *\n * @param  {String} serviceId\n * @param  {String} authId\n * @memberof ActionCreators\n */\n\nexport function requestAccessToken(serviceId, authId) {\n  return {\n    authId: authId,\n    serviceId: serviceId,\n    type: ActionTypes.REQUEST_ACCESS_TOKEN\n  };\n}\n/**\n * receiveAccessToken - action creator\n * @private\n *\n * @param  {String} serviceId\n * @param  {Object} json\n * @memberof ActionCreators\n */\n\nexport function receiveAccessToken(authId, serviceId, json) {\n  return {\n    authId: authId,\n    json: json,\n    serviceId: serviceId,\n    type: ActionTypes.RECEIVE_ACCESS_TOKEN\n  };\n}\n/**\n * receiveAccessTokenFailure - action creator\n * @private\n *\n * @param  {String} serviceId\n * @param  {Object} error\n * @memberof ActionCreators\n */\n\nexport function receiveAccessTokenFailure(authId, serviceId, error) {\n  return {\n    authId: authId,\n    error: error,\n    serviceId: serviceId,\n    type: ActionTypes.RECEIVE_ACCESS_TOKEN_FAILURE\n  };\n}\n/**\n * resolveAccessTokenRequest - action creator\n *\n * @param {Object} message\n * @memberof ActionCreators\n */\n\nexport function resolveAccessTokenRequest(authServiceId, tokenServiceId, json) {\n  if (!json.accessToken) return receiveAccessTokenFailure(authServiceId, tokenServiceId, json);\n  return receiveAccessToken(authServiceId, tokenServiceId, json);\n}\n/**\n * Resets authentication state for a token service\n */\n\nexport function resetAuthenticationState(_ref) {\n  var authServiceId = _ref.authServiceId,\n      tokenServiceId = _ref.tokenServiceId;\n  return {\n    id: authServiceId,\n    tokenServiceId: tokenServiceId,\n    type: ActionTypes.RESET_AUTHENTICATION_STATE\n  };\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport ActionTypes from './action-types';\nimport { getNextCanvasGrouping, getPreviousCanvasGrouping, getCanvasGrouping } from '../selectors';\n/**\n * setCanvas - action creator\n *\n * @param  {String} windowId\n * @param  {String} canvasId\n * @memberof ActionCreators\n */\n\nexport function setCanvas(windowId, canvasId) {\n  var newGroup = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  return function (dispatch, getState) {\n    var state = getState();\n    var visibleCanvases = newGroup;\n\n    if (!visibleCanvases) {\n      var group = getCanvasGrouping(state, {\n        canvasId: canvasId,\n        windowId: windowId\n      });\n      visibleCanvases = (group || []).map(function (c) {\n        return c.id;\n      });\n    }\n\n    dispatch(_objectSpread(_objectSpread({}, options), {}, {\n      canvasId: canvasId,\n      type: ActionTypes.SET_CANVAS,\n      visibleCanvases: visibleCanvases,\n      windowId: windowId\n    }));\n  };\n}\n/** Set the window's canvas to the next canvas grouping */\n\nexport function setNextCanvas(windowId) {\n  return function (dispatch, getState) {\n    var state = getState();\n    var newGroup = getNextCanvasGrouping(state, {\n      windowId: windowId\n    });\n    var ids = (newGroup || []).map(function (c) {\n      return c.id;\n    });\n    newGroup && dispatch(setCanvas(windowId, ids[0], ids));\n  };\n}\n/** Set the window's canvas to the previous canvas grouping */\n\nexport function setPreviousCanvas(windowId) {\n  return function (dispatch, getState) {\n    var state = getState();\n    var newGroup = getPreviousCanvasGrouping(state, {\n      windowId: windowId\n    });\n    var ids = (newGroup || []).map(function (c) {\n      return c.id;\n    });\n    newGroup && dispatch(setCanvas(windowId, ids[0], ids));\n  };\n}\n/**\n *\n * @param windowId\n * @param payload\n * @returns {{payload: *, type: string, windowId: *}}\n */\n\nexport function updateViewport(windowId, payload) {\n  return {\n    payload: payload,\n    type: ActionTypes.UPDATE_VIEWPORT,\n    windowId: windowId\n  };\n}","import ActionTypes from './action-types';\n/**\n * add a manifest to the resource catalog\n * @param {string} manifestId\n */\n\nexport function addResource(manifestId) {\n  var manifestJson = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n  var payload = arguments.length > 2 ? arguments[2] : undefined;\n  return {\n    manifestId: manifestId,\n    manifestJson: manifestJson,\n    payload: payload,\n    type: ActionTypes.ADD_RESOURCE\n  };\n}\n/** remove a manifest from the resource catalog */\n\nexport function removeResource(manifestId) {\n  return {\n    manifestId: manifestId,\n    type: ActionTypes.REMOVE_RESOURCE\n  };\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { v4 as uuid } from 'uuid';\nimport ActionTypes from './action-types';\nimport { getCompanionWindowIdsForPosition, getManuallyExpandedNodeIds, getVisibleNodeIds } from '../selectors';\nvar defaultProps = {\n  content: null,\n  position: null\n};\n/** */\n\nexport function addCompanionWindow(windowId, payload) {\n  var defaults = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultProps;\n  var id = \"cw-\".concat(uuid());\n  return {\n    id: id,\n    payload: _objectSpread(_objectSpread(_objectSpread({}, defaults), payload), {}, {\n      id: id,\n      windowId: windowId\n    }),\n    type: ActionTypes.ADD_COMPANION_WINDOW,\n    windowId: windowId\n  };\n}\n/** */\n\nexport function addOrUpdateCompanionWindow(windowId, payload) {\n  var defaults = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultProps;\n  return function (dispatch, getState) {\n    var state = getState();\n    var position = payload.position;\n    var updatableWindowId = position === 'left' && getCompanionWindowIdsForPosition(state, {\n      position: position,\n      windowId: windowId\n    })[0];\n\n    if (updatableWindowId) {\n      dispatch(updateCompanionWindow(windowId, updatableWindowId, payload));\n    } else {\n      dispatch(addCompanionWindow(windowId, payload, defaults));\n    }\n  };\n}\n/** */\n\nexport function updateCompanionWindow(windowId, id, payload) {\n  return {\n    id: id,\n    payload: payload,\n    type: ActionTypes.UPDATE_COMPANION_WINDOW,\n    windowId: windowId\n  };\n}\n/** */\n\nexport function removeCompanionWindow(windowId, id) {\n  return {\n    id: id,\n    type: ActionTypes.REMOVE_COMPANION_WINDOW,\n    windowId: windowId\n  };\n}\n/** */\n\nexport function toggleNode(windowId, id, nodeId) {\n  return function (dispatch, getState) {\n    var state = getState();\n    var collapsedNodeIds = getManuallyExpandedNodeIds(state, {\n      companionWindowId: id\n    }, false);\n    var expandedNodeIds = getManuallyExpandedNodeIds(state, {\n      companionWindowId: id\n    }, true);\n    var visibleNodeIds = getVisibleNodeIds(state, {\n      id: id,\n      windowId: windowId\n    });\n    var expand = collapsedNodeIds.indexOf(nodeId) !== -1 || expandedNodeIds.indexOf(nodeId) === -1 && visibleNodeIds.indexOf(nodeId) === -1;\n    return dispatch({\n      id: id,\n      payload: _defineProperty({}, nodeId, {\n        expanded: expand\n      }),\n      type: ActionTypes.TOGGLE_TOC_NODE,\n      windowId: windowId\n    });\n  };\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { v4 as uuid } from 'uuid';\nimport ActionTypes from './action-types';\n/**\n * importConfig - action creator\n *\n * @param  {Object} config\n * @memberof ActionCreators\n */\n\nexport function importConfig(config) {\n  return {\n    config: config,\n    type: ActionTypes.IMPORT_CONFIG\n  };\n}\n/**\n * setConfig - action creator\n *\n * @param  {Object} config\n * @memberof ActionCreators\n */\n\nexport function setConfig(config) {\n  return {\n    config: config,\n    type: ActionTypes.SET_CONFIG\n  };\n}\n/**\n * updateConfig - action creator\n *\n * @param  {Object} config\n * @memberof ActionCreators\n */\n\nexport function updateConfig(config) {\n  return {\n    config: config,\n    type: ActionTypes.UPDATE_CONFIG\n  };\n}\n/**\n * importMiradorState - action creator\n *\n * @param  {Object} config\n * @memberof ActionCreators\n */\n\nexport function importMiradorState(state) {\n  var newState = _objectSpread(_objectSpread({}, state), {}, {\n    workspace: _objectSpread(_objectSpread({}, state.workspace), {}, {\n      id: uuid()\n    })\n  });\n\n  return {\n    state: newState,\n    type: ActionTypes.IMPORT_MIRADOR_STATE\n  };\n}","import ActionTypes from './action-types';\n/** */\n\nexport function updateElasticWindowLayout(windowId, payload) {\n  return {\n    payload: payload,\n    type: ActionTypes.UPDATE_ELASTIC_WINDOW_LAYOUT,\n    windowId: windowId\n  };\n}","import { v4 as uuid } from 'uuid';\nimport ActionTypes from './action-types';\n/**\n * addError - action creator\n * @param {string} error\n */\n\nexport function addError(error) {\n  return {\n    id: \"error-\".concat(uuid()),\n    message: error,\n    type: ActionTypes.ADD_ERROR\n  };\n}\n/**\n * removeError - action creator\n * @param {string} id\n */\n\nexport function removeError(id) {\n  return {\n    id: id,\n    type: ActionTypes.REMOVE_ERROR\n  };\n}","import ActionTypes from './action-types';\n/**\n * requestInfoResponse - action creator\n *\n * @param  {String} infoId\n * @memberof ActionCreators\n */\n\nexport function requestInfoResponse(infoId, imageResource, windowId) {\n  return {\n    imageResource: imageResource,\n    infoId: infoId,\n    type: ActionTypes.REQUEST_INFO_RESPONSE,\n    windowId: windowId\n  };\n}\n/**\n * receiveInfoResponse - action creator\n *\n * @param  {String} infoId\n * @param  {Object} manifestJson\n * @memberof ActionCreators\n */\n\nexport function receiveInfoResponse(infoId, infoJson, ok, tokenServiceId) {\n  return {\n    infoId: infoId,\n    infoJson: infoJson,\n    ok: ok,\n    tokenServiceId: tokenServiceId,\n    type: ActionTypes.RECEIVE_INFO_RESPONSE\n  };\n}\n/**\n * receiveDegradedInfoResponse - action creator\n *\n * @param  {String} infoId\n * @param  {Object} manifestJson\n * @memberof ActionCreators\n */\n\nexport function receiveDegradedInfoResponse(infoId, infoJson, ok, tokenServiceId, windowId) {\n  return {\n    infoId: infoId,\n    infoJson: infoJson,\n    ok: ok,\n    tokenServiceId: tokenServiceId,\n    type: ActionTypes.RECEIVE_DEGRADED_INFO_RESPONSE,\n    windowId: windowId\n  };\n}\n/**\n * receiveInfoResponseFailure - action creator\n *\n * @param  {String} infoId\n * @param  {String} error\n * @memberof ActionCreators\n */\n\nexport function receiveInfoResponseFailure(infoId, error, tokenServiceId) {\n  return {\n    error: error,\n    infoId: infoId,\n    tokenServiceId: tokenServiceId,\n    type: ActionTypes.RECEIVE_INFO_RESPONSE_FAILURE\n  };\n}\n/**\n * fetchInfoResponse - action creator\n *\n * @param  {String} infoId\n * @memberof ActionCreators\n */\n\nexport function fetchInfoResponse(_ref) {\n  var imageId = _ref.imageId,\n      imageResource = _ref.imageResource,\n      windowId = _ref.windowId;\n  var imageService = imageResource && imageResource.getServices()[0];\n  var infoId = imageId || imageService.id;\n  return requestInfoResponse(infoId, imageService, windowId);\n}\n/**\n * removeInfoResponse - action creator\n *\n * @param  {String} infoId\n * @memberof ActionCreators\n */\n\nexport function removeInfoResponse(infoId) {\n  return {\n    infoId: infoId,\n    type: ActionTypes.REMOVE_INFO_RESPONSE\n  };\n}","import ActionTypes from './action-types';\n/**\n * updateLayers - action creator\n * @param {string} id\n */\n\nexport function updateLayers(windowId, canvasId, payload) {\n  return {\n    canvasId: canvasId,\n    payload: payload,\n    type: ActionTypes.UPDATE_LAYERS,\n    windowId: windowId\n  };\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport ActionTypes from './action-types';\n/**\n * requestManifest - action creator\n *\n * @param  {String} manifestId\n * @memberof ActionCreators\n */\n\nexport function requestManifest(manifestId, properties) {\n  return {\n    manifestId: manifestId,\n    properties: properties,\n    type: ActionTypes.REQUEST_MANIFEST\n  };\n}\n/**\n * receiveManifest - action creator\n *\n * @param  {String} manifestId\n * @param  {Object} manifestJson\n * @memberof ActionCreators\n */\n\nexport function receiveManifest(manifestId, manifestJson) {\n  return {\n    manifestId: manifestId,\n    manifestJson: manifestJson,\n    type: ActionTypes.RECEIVE_MANIFEST\n  };\n}\n/**\n * receiveManifestFailure - action creator\n *\n * @param  {String} windowId\n * @param  {String} error\n * @memberof ActionCreators\n */\n\nexport function receiveManifestFailure(manifestId, error) {\n  return {\n    error: error,\n    manifestId: manifestId,\n    type: ActionTypes.RECEIVE_MANIFEST_FAILURE\n  };\n}\n/**\n * fetchManifest - action creator\n *\n * @param  {String} manifestId\n * @memberof ActionCreators\n */\n\nexport function fetchManifest(manifestId, properties) {\n  return requestManifest(manifestId, _objectSpread(_objectSpread({}, properties), {}, {\n    isFetching: true\n  }));\n}\n/**\n * removeManifest - action creator\n *\n * @param  {String} manifestId\n * @memberof ActionCreators\n */\n\nexport function removeManifest(manifestId) {\n  return {\n    manifestId: manifestId,\n    type: ActionTypes.REMOVE_MANIFEST\n  };\n}","import ActionTypes from './action-types';\n/**\n * requestSearch - action creator\n *\n * @param  {String} windowId\n * @param  {String} searchId\n * @param  {String} query\n * @memberof ActionCreators\n */\n\nexport function requestSearch(windowId, companionWindowId, searchId, query) {\n  return {\n    companionWindowId: companionWindowId,\n    query: query,\n    searchId: searchId,\n    type: ActionTypes.REQUEST_SEARCH,\n    windowId: windowId\n  };\n}\n/**\n * receiveSearch - action creator\n *\n * @param  {String} windowId\n * @param  {String} searchId\n * @param  {Object} searchJson\n * @memberof ActionCreators\n */\n\nexport function receiveSearch(windowId, companionWindowId, searchId, searchJson) {\n  return {\n    companionWindowId: companionWindowId,\n    searchId: searchId,\n    searchJson: searchJson,\n    type: ActionTypes.RECEIVE_SEARCH,\n    windowId: windowId\n  };\n}\n/**\n * receiveSearchFailure - action creator\n *\n * @param  {String} windowId\n * @param  {String} searchId\n * @param  {String} error\n * @memberof ActionCreators\n */\n\nexport function receiveSearchFailure(windowId, companionWindowId, searchId, error) {\n  return {\n    companionWindowId: companionWindowId,\n    error: error,\n    searchId: searchId,\n    type: ActionTypes.RECEIVE_SEARCH_FAILURE,\n    windowId: windowId\n  };\n}\n/**\n * removeSearch - action creator\n *\n * @param  {String} windowId\n * @param  {String} companionWindowId\n * @memberof ActionCreators\n */\n\nexport function removeSearch(windowId, companionWindowId) {\n  return {\n    companionWindowId: companionWindowId,\n    type: ActionTypes.REMOVE_SEARCH,\n    windowId: windowId\n  };\n}\n/**\n * fetchSearch - action creator\n *\n * @param  {String} searchId\n * @param  {String} query\n * @memberof ActionCreators\n */\n\nexport function fetchSearch(windowId, companionWindowId, searchId, query) {\n  return requestSearch(windowId, companionWindowId, searchId, query);\n}\n/**\n * setContentSearchCurrentAnnotation - action creator\n *\n * @param  {String} windowId\n * @param  {String} annotationId\n * @memberof ActionCreators\n */\n\nexport function setContentSearchCurrentAnnotation(windowId, companionWindowId, annotationIds) {\n  return {\n    annotationIds: annotationIds,\n    companionWindowId: companionWindowId,\n    type: ActionTypes.SET_CONTENT_SEARCH_CURRENT_ANNOTATIONS,\n    windowId: windowId\n  };\n}","var _excluded = [\"companionWindows\", \"manifest\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { v4 as uuid } from 'uuid';\nimport ActionTypes from './action-types';\nimport { miradorSlice } from '../selectors/utils';\n/**\n * focusWindow - action creator\n *\n * @param  {String} windowId\n * @memberof ActionCreators\n */\n\nexport function focusWindow(windowId) {\n  var pan = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  return {\n    pan: pan,\n    type: ActionTypes.FOCUS_WINDOW,\n    windowId: windowId\n  };\n}\n/**\n * addWindow - action creator\n *\n * @param  {Object} options\n * @memberof ActionCreators\n */\n\nexport function addWindow(_ref) {\n  var companionWindows = _ref.companionWindows,\n      manifest = _ref.manifest,\n      options = _objectWithoutProperties(_ref, _excluded);\n\n  return function (dispatch, getState) {\n    var _miradorSlice = miradorSlice(getState()),\n        config = _miradorSlice.config,\n        _miradorSlice$workspa = _miradorSlice.workspace.windowIds,\n        windowIds = _miradorSlice$workspa === void 0 ? [] : _miradorSlice$workspa;\n\n    var numWindows = windowIds.length;\n    var windowId = options.id || \"window-\".concat(uuid());\n    var cwThumbs = \"cw-\".concat(uuid());\n    var defaultCompanionWindows = [{\n      content: 'thumbnailNavigation',\n      \"default\": true,\n      id: cwThumbs,\n      position: options.thumbnailNavigationPosition || config.thumbnailNavigation.defaultPosition,\n      windowId: windowId\n    }].concat(_toConsumableArray((companionWindows || []).map(function (cw, i) {\n      return _objectSpread(_objectSpread({}, cw), {}, {\n        id: \"cw-\".concat(uuid())\n      });\n    })));\n\n    if (options.sideBarPanel || config.window.defaultSideBarPanel || config.window.sideBarPanel) {\n      defaultCompanionWindows.unshift({\n        content: options.sideBarPanel || options.defaultSearchQuery && 'search' || config.window.defaultSideBarPanel || config.window.sideBarPanel,\n        \"default\": true,\n        id: \"cw-\".concat(uuid()),\n        position: 'left',\n        windowId: windowId\n      });\n    }\n\n    var defaultOptions = {\n      canvasId: undefined,\n      collectionIndex: 0,\n      companionAreaOpen: true,\n      companionWindowIds: defaultCompanionWindows.map(function (cw) {\n        return cw.id;\n      }),\n      draggingEnabled: true,\n      highlightAllAnnotations: config.window.highlightAllAnnotations || false,\n      id: windowId,\n      manifestId: null,\n      maximized: false,\n      rangeId: null,\n      rotation: 0,\n      selectedAnnotations: {},\n      sideBarOpen: config.window.sideBarOpenByDefault !== undefined ? config.window.sideBarOpenByDefault || !!options.defaultSearchQuery : config.window.sideBarOpen || !!options.defaultSearchQuery,\n      sideBarPanel: options.sideBarPanel || config.window.defaultSideBarPanel || config.window.sideBarPanel,\n      thumbnailNavigationId: cwThumbs\n    };\n\n    var elasticLayout = _objectSpread(_objectSpread({}, config.window.elastic || {\n      height: 400,\n      width: 480\n    }), {}, {\n      x: 200 + (Math.floor(numWindows / 10) * 50 + numWindows * 30 % 300),\n      y: 200 + numWindows * 50 % 300\n    });\n\n    dispatch({\n      companionWindows: defaultCompanionWindows,\n      elasticLayout: elasticLayout,\n      manifest: manifest,\n      type: ActionTypes.ADD_WINDOW,\n      window: _objectSpread(_objectSpread({}, defaultOptions), options)\n    });\n  };\n}\n/** */\n\nexport function updateWindow(id, payload) {\n  return {\n    id: id,\n    payload: payload,\n    type: ActionTypes.UPDATE_WINDOW\n  };\n}\n/**\n * maximizeWindow\n * @param  {String} windowId\n * @memberof ActionCreators\n */\n\nexport function maximizeWindow(windowId, layout) {\n  return {\n    type: ActionTypes.MAXIMIZE_WINDOW,\n    windowId: windowId\n  };\n}\n/**\n * minimizeWindow\n * @param  {String} windowId\n * @memberof ActionCreators\n */\n\nexport function minimizeWindow(windowId) {\n  return {\n    type: ActionTypes.MINIMIZE_WINDOW,\n    windowId: windowId\n  };\n}\n/** */\n\nexport function setCompanionAreaOpen(id, companionAreaOpen) {\n  return {\n    id: id,\n    payload: {\n      companionAreaOpen: companionAreaOpen\n    },\n    type: ActionTypes.UPDATE_WINDOW\n  };\n}\n/**\n * removeWindow - action creator\n *\n * @param  {String} windowId\n * @memberof ActionCreators\n */\n\nexport function removeWindow(windowId) {\n  return {\n    type: ActionTypes.REMOVE_WINDOW,\n    windowId: windowId\n  };\n}\n/**\n * toggleWindowSideBar - action creator\n *\n * @param  {String} windowId\n * @memberof ActionCreators\n */\n\nexport function toggleWindowSideBar(windowId) {\n  return {\n    type: ActionTypes.TOGGLE_WINDOW_SIDE_BAR,\n    windowId: windowId\n  };\n}\n/**\n * setWindowThumbnailPosition - action creator\n *\n * @param  {String} windowId\n * @param  {String} position\n * @memberof ActionCreators\n */\n\nexport function setWindowThumbnailPosition(windowId, position) {\n  return function (dispatch, getState) {\n    var _getState = getState(),\n        windows = _getState.windows;\n\n    var thumbnailNavigationId = windows[windowId].thumbnailNavigationId;\n    dispatch({\n      id: thumbnailNavigationId,\n      payload: {\n        position: position\n      },\n      type: ActionTypes.UPDATE_COMPANION_WINDOW\n    });\n  };\n}\n/**\n * setWindowViewType - action creator\n *\n * @param  {String} windowId\n * @param  {String} viewType\n * @memberof ActionCreators\n */\n\nexport function setWindowViewType(windowId, viewType) {\n  return {\n    type: ActionTypes.SET_WINDOW_VIEW_TYPE,\n    viewType: viewType,\n    windowId: windowId\n  };\n}\n/** */\n\nexport function showCollectionDialog(manifestId) {\n  var collectionPath = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var windowId = arguments.length > 2 ? arguments[2] : undefined;\n  return {\n    collectionPath: collectionPath,\n    manifestId: manifestId,\n    type: ActionTypes.SHOW_COLLECTION_DIALOG,\n    windowId: windowId\n  };\n}\n/** */\n\nexport function hideCollectionDialog(windowId) {\n  return {\n    type: ActionTypes.HIDE_COLLECTION_DIALOG,\n    windowId: windowId\n  };\n}","import ActionTypes from './action-types';\n/**\n * updateWorkspace - action creator\n *\n * @param {Object} config\n */\n\nexport function updateWorkspace(config) {\n  return {\n    config: config,\n    type: ActionTypes.UPDATE_WORKSPACE\n  };\n}\n/**\n * setWorkspaceFullscreen - action creator\n *\n * @param  {Boolean} isFullscreenEnabled\n * @memberof ActionCreators\n */\n\nexport function setWorkspaceFullscreen(isFullscreenEnabled) {\n  return {\n    isFullscreenEnabled: isFullscreenEnabled,\n    type: ActionTypes.SET_WORKSPACE_FULLSCREEN\n  };\n}\n/**\n * toggleZoomControls - action creator\n * @param {Boolean} showZoomControls\n * @memberof ActionCreators\n*/\n\nexport function toggleZoomControls(showZoomControls) {\n  return {\n    showZoomControls: showZoomControls,\n    type: ActionTypes.TOGGLE_ZOOM_CONTROLS\n  };\n}\n/**\n * updateWorkspaceMosaicLayout - action creator\n *\n * @param  {Object} layout\n * @memberof ActionCreators\n */\n\nexport function updateWorkspaceMosaicLayout(layout) {\n  return {\n    layout: layout,\n    type: ActionTypes.UPDATE_WORKSPACE_MOSAIC_LAYOUT\n  };\n}\n/**\n * updateWorkspaceMosaicLayout - action creator\n *\n * @param  {Object} isWorkspaceAddVisible\n * @memberof ActionCreators\n */\n\nexport function setWorkspaceAddVisibility(isWorkspaceAddVisible) {\n  return {\n    isWorkspaceAddVisible: isWorkspaceAddVisible,\n    type: ActionTypes.SET_WORKSPACE_ADD_VISIBILITY\n  };\n}\n/**\n * setWorkspaceViewportPosition - action creator\n *\n * @param  {Object} position\n * @memberof ActionCreators\n */\n\nexport function setWorkspaceViewportPosition(_ref) {\n  var x = _ref.x,\n      y = _ref.y;\n  return {\n    payload: {\n      position: {\n        x: x,\n        y: y\n      }\n    },\n    type: ActionTypes.SET_WORKSPACE_VIEWPORT_POSITION\n  };\n}\n/**\n * setWorkspaceViewportDimensions - action creator\n *\n * @param  {Object} position\n * @memberof ActionCreators\n */\n\nexport function setWorkspaceViewportDimensions(_ref2) {\n  var width = _ref2.width,\n      height = _ref2.height;\n  return {\n    payload: {\n      position: {\n        height: height,\n        width: width\n      }\n    },\n    type: ActionTypes.SET_WORKSPACE_VIEWPORT_POSITION\n  };\n}\n/**\n * toggleDraggingEnabled - action creator\n */\n\nexport function toggleDraggingEnabled() {\n  return {\n    type: ActionTypes.TOGGLE_DRAGGING\n  };\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport compact from 'lodash/compact';\nimport flatten from 'lodash/flatten';\nimport { v4 as uuid } from 'uuid';\n/**\n * A modeled WebAnnotation item\n */\n\nvar AnnotationItem = /*#__PURE__*/function () {\n  /** */\n  function AnnotationItem() {\n    var resource = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, AnnotationItem);\n\n    this.resource = resource;\n  }\n  /** */\n\n\n  _createClass(AnnotationItem, [{\n    key: \"isOnlyTag\",\n    value: function isOnlyTag() {\n      return this.motivations.length === 1 && this.motivations[0] === 'tagging';\n    }\n    /** */\n\n  }, {\n    key: \"id\",\n    get: function get() {\n      this._id = this._id || this.resource.id || uuid(); // eslint-disable-line no-underscore-dangle\n\n      return this._id; // eslint-disable-line no-underscore-dangle\n    }\n    /** */\n\n  }, {\n    key: \"targetId\",\n    get: function get() {\n      var target = this.target[0];\n\n      switch (typeof target) {\n        case 'string':\n          return target.replace(/#?xywh=(.*)$/, '');\n\n        case 'object':\n          return target.source && target.source.id || target.source || target.id;\n\n        default:\n          return null;\n      }\n    }\n    /**\n     * @return {[Array]}\n     */\n\n  }, {\n    key: \"motivations\",\n    get: function get() {\n      return flatten(compact(new Array(this.resource.motivation)));\n    }\n    /** */\n\n  }, {\n    key: \"body\",\n    get: function get() {\n      return flatten(compact(new Array(this.resource.body)));\n    }\n    /** */\n\n  }, {\n    key: \"resources\",\n    get: function get() {\n      return this.body;\n    }\n    /** */\n\n  }, {\n    key: \"tags\",\n    get: function get() {\n      if (this.isOnlyTag()) {\n        return this.body.map(function (r) {\n          return r.value;\n        });\n      }\n\n      return this.body.filter(function (r) {\n        return r.purpose === 'tagging';\n      }).map(function (r) {\n        return r.value;\n      });\n    }\n    /** */\n\n  }, {\n    key: \"target\",\n    get: function get() {\n      return flatten(compact(new Array(this.resource.target)));\n    }\n    /** */\n\n  }, {\n    key: \"chars\",\n    get: function get() {\n      if (this.isOnlyTag()) return null;\n      return this.body.filter(function (r) {\n        return r.purpose !== 'tagging';\n      }).map(function (r) {\n        return r.value;\n      }).join(' ');\n    }\n    /** */\n\n  }, {\n    key: \"selector\",\n    get: function get() {\n      var target = this.target[0];\n\n      switch (typeof target) {\n        case 'string':\n          return target;\n\n        case 'object':\n          return flatten(compact(new Array(target.selector)));\n\n        default:\n          return null;\n      }\n    }\n    /** */\n\n  }, {\n    key: \"svgSelector\",\n    get: function get() {\n      var selector = this.selector;\n\n      switch (typeof selector) {\n        case 'string':\n          return null;\n\n        case 'object':\n          return selector.find(function (s) {\n            return s.type && s.type === 'SvgSelector';\n          });\n\n        default:\n          return null;\n      }\n    }\n    /** */\n\n  }, {\n    key: \"fragmentSelector\",\n    get: function get() {\n      var selector = this.selector;\n      var match;\n      var fragmentSelector;\n\n      switch (typeof selector) {\n        case 'string':\n          match = selector.match(/xywh=(.*)$/);\n          break;\n\n        case 'object':\n          fragmentSelector = selector.find(function (s) {\n            return s.type && s.type === 'FragmentSelector';\n          });\n          match = fragmentSelector && fragmentSelector.value.match(/xywh=(.*)$/);\n          break;\n\n        default:\n          return null;\n      }\n\n      return match && match[1].split(',').map(function (str) {\n        return parseInt(str, 10);\n      });\n    }\n  }]);\n\n  return AnnotationItem;\n}();\n\nexport { AnnotationItem as default };","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport flatten from 'lodash/flatten';\nimport AnnotationItem from './AnnotationItem';\n/**\n * Annotation representation for IIIF Presentation v3\n * https://iiif.io/api/presentation/3.0/#55-annotation-page\n */\n\nvar AnnotationPage = /*#__PURE__*/function () {\n  /** */\n  function AnnotationPage(json, target) {\n    _classCallCheck(this, AnnotationPage);\n\n    this.json = json;\n    this.target = target;\n  }\n  /** */\n\n\n  _createClass(AnnotationPage, [{\n    key: \"id\",\n    get: function get() {\n      return this.json.id;\n    }\n    /** */\n\n  }, {\n    key: \"present\",\n    value: function present() {\n      return this.items && this.items.length > 0;\n    }\n    /** */\n\n  }, {\n    key: \"items\",\n    get: function get() {\n      var _this = this;\n\n      this._items = this._items || function () {\n        // eslint-disable-line no-underscore-dangle\n        if (!_this.json || !_this.json.items) return [];\n        return flatten([_this.json.items]).map(function (resource) {\n          return new AnnotationItem(resource);\n        });\n      }();\n\n      return this._items; // eslint-disable-line no-underscore-dangle\n    }\n    /**\n     * Alias to items for compatibility for right now.\n     */\n\n  }, {\n    key: \"resources\",\n    get: function get() {\n      return this.items;\n    }\n  }]);\n\n  return AnnotationPage;\n}();\n\nexport { AnnotationPage as default };","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport AnnotationList from './AnnotationList';\nimport AnnotationPage from './AnnotationPage';\n/**\n * Used to determine the type of Annotation supported by a version of the IIIF\n * Presentation API.\n */\n\nvar AnnotationFactory = /*#__PURE__*/function () {\n  function AnnotationFactory() {\n    _classCallCheck(this, AnnotationFactory);\n  }\n\n  _createClass(AnnotationFactory, null, [{\n    key: \"determineAnnotation\",\n    value:\n    /** */\n    function determineAnnotation(json, target) {\n      if (!json) {\n        return null;\n      } // IIIF Presentation API v3. AnnotationPage\n\n\n      if (json.type === 'AnnotationPage') {\n        return new AnnotationPage(json, target);\n      } // IIIF Presentation API v2. OpenAnnotation and SharedCanvas models\n\n\n      return new AnnotationList(json, target);\n    }\n  }]);\n\n  return AnnotationFactory;\n}();\n\nexport { AnnotationFactory as default };","var _excluded = [\"canvasId\"];\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { createSelector } from 'reselect';\nimport filter from 'lodash/filter';\nimport flatten from 'lodash/flatten';\nimport AnnotationFactory from '../../lib/AnnotationFactory';\nimport { miradorSlice } from './utils';\nimport { getCanvas, getVisibleCanvasIds } from './canvases';\nimport { getConfig } from './config';\nimport { getWindow } from './getters';\n/** */\n\nexport var getAnnotations = function getAnnotations(state) {\n  return miradorSlice(state).annotations;\n};\nvar getMotivation = createSelector([getConfig, function (state, _ref) {\n  var motivations = _ref.motivations;\n  return motivations;\n}], function (config, motivations) {\n  return motivations || config.annotations.filteredMotivations;\n});\nvar getAnnotationsOnCanvas = createSelector([getCanvas, getAnnotations], function (canvas, annotations) {\n  if (!annotations || !canvas) return [];\n  if (!annotations[canvas.id]) return [];\n  return flatten(Object.values(annotations[canvas.id]));\n});\nvar getPresentAnnotationsCanvas = createSelector([getAnnotationsOnCanvas], function (annotations) {\n  return filter(Object.values(annotations).map(function (annotation) {\n    return annotation && AnnotationFactory.determineAnnotation(annotation.json);\n  }), function (annotation) {\n    return annotation && annotation.present();\n  });\n});\nvar getAnnotationsOnSelectedCanvases = createSelector([function (state, _ref2) {\n  var canvasId = _ref2.canvasId,\n      otherProps = _objectWithoutProperties(_ref2, _excluded);\n\n  return canvasId ? [canvasId] : getVisibleCanvasIds(state, otherProps);\n}, getAnnotations], function (canvasIds, annotations) {\n  if (!annotations || canvasIds.length === 0) return [];\n  return flatten(canvasIds.map(function (targetId) {\n    return annotations[targetId] && Object.values(annotations[targetId]);\n  }));\n});\nexport var getPresentAnnotationsOnSelectedCanvases = createSelector([getAnnotationsOnSelectedCanvases], function (annotations) {\n  return filter(Object.values(annotations).map(function (annotation) {\n    return annotation && AnnotationFactory.determineAnnotation(annotation.json);\n  }), function (annotation) {\n    return annotation && annotation.present();\n  });\n});\n/**\n* Return an array of annotation resources filtered by the given motivation for a particular canvas\n* @param {Array} annotations\n* @param {Array} motivations\n* @return {Array}\n*/\n\nexport var getAnnotationResourcesByMotivationForCanvas = createSelector([getPresentAnnotationsCanvas, getMotivation], function (annotations, motivations) {\n  return filter(flatten(annotations.map(function (annotation) {\n    return annotation.resources;\n  })), function (resource) {\n    return resource.motivations.some(function (motivation) {\n      return motivations.includes(motivation);\n    });\n  });\n});\n/**\n* Return an array of annotation resources filtered by the given motivation\n* @param {Array} annotations\n* @param {Array} motivations\n* @return {Array}\n*/\n\nexport var getAnnotationResourcesByMotivation = createSelector([getPresentAnnotationsOnSelectedCanvases, getMotivation], function (annotations, motivations) {\n  return filter(flatten(annotations.map(function (annotation) {\n    return annotation.resources;\n  })), function (resource) {\n    return resource.motivations.some(function (motivation) {\n      return motivations.includes(motivation);\n    });\n  });\n});\n/**\n * Return the selected annotations IDs of a given CanvasId\n * @param {Object} state\n * @param {String} windowId\n * @param {Array} targetIds\n * @return {Array}\n */\n\nexport var getSelectedAnnotationId = createSelector([getWindow], function (_ref3) {\n  var selectedAnnotationId = _ref3.selectedAnnotationId;\n  return selectedAnnotationId;\n});\nexport var getSelectedAnnotationsOnCanvases = createSelector([getPresentAnnotationsOnSelectedCanvases, getSelectedAnnotationId], function (canvasAnnotations, selectedAnnotationId) {\n  return canvasAnnotations.map(function (annotation) {\n    return {\n      id: annotation['@id'] || annotation.id,\n      resources: annotation.resources.filter(function (r) {\n        return selectedAnnotationId === r.id;\n      })\n    };\n  }).filter(function (val) {\n    return val.resources.length > 0;\n  });\n});","function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { createSelector } from 'reselect';\nimport { Utils } from 'manifesto.js';\nimport flatten from 'lodash/flatten';\nimport MiradorCanvas from '../../lib/MiradorCanvas';\nimport { miradorSlice } from './utils';\nimport { getConfig } from './config';\nimport { getVisibleCanvases, selectInfoResponses } from './canvases';\nexport var getAuthProfiles = createSelector([getConfig], function (_ref) {\n  var _ref$auth = _ref.auth;\n  _ref$auth = _ref$auth === void 0 ? {} : _ref$auth;\n  var _ref$auth$serviceProf = _ref$auth.serviceProfiles,\n      serviceProfiles = _ref$auth$serviceProf === void 0 ? [] : _ref$auth$serviceProf;\n  return serviceProfiles;\n});\n/** */\n\nexport var getAccessTokens = function getAccessTokens(state) {\n  return miradorSlice(state).accessTokens || {};\n};\n/** */\n\nexport var getAuth = function getAuth(state) {\n  return miradorSlice(state).auth || {};\n};\nexport var selectCurrentAuthServices = createSelector([getVisibleCanvases, selectInfoResponses, getAuthProfiles, getAuth, function (state, _ref2) {\n  var iiifResources = _ref2.iiifResources;\n  return iiifResources;\n}], function (canvases) {\n  var infoResponses = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var serviceProfiles = arguments.length > 2 ? arguments[2] : undefined;\n  var auth = arguments.length > 3 ? arguments[3] : undefined;\n  var iiifResources = arguments.length > 4 ? arguments[4] : undefined;\n  var currentAuthResources = iiifResources;\n\n  if (!currentAuthResources && canvases) {\n    currentAuthResources = flatten(canvases.map(function (c) {\n      var miradorCanvas = new MiradorCanvas(c);\n      var images = miradorCanvas.iiifImageResources;\n      return images.map(function (i) {\n        var iiifImageService = i.getServices()[0];\n        var infoResponse = infoResponses[iiifImageService.id];\n\n        if (infoResponse && infoResponse.json) {\n          return _objectSpread(_objectSpread({}, infoResponse.json), {}, {\n            options: {}\n          });\n        }\n\n        return iiifImageService;\n      });\n    }));\n  }\n\n  if (!currentAuthResources) return [];\n  if (currentAuthResources.length === 0) return [];\n  var currentAuthServices = currentAuthResources.map(function (resource) {\n    var lastAttemptedService;\n    var services = Utils.getServices(resource);\n\n    var _iterator = _createForOfIteratorHelper(serviceProfiles),\n        _step;\n\n    try {\n      var _loop = function _loop() {\n        var authProfile = _step.value;\n        var profiledAuthServices = services.filter(function (p) {\n          return authProfile.profile === p.getProfile();\n        });\n\n        var _iterator2 = _createForOfIteratorHelper(profiledAuthServices),\n            _step2;\n\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var service = _step2.value;\n            lastAttemptedService = service;\n\n            if (!auth[service.id] || auth[service.id].isFetching || auth[service.id].ok) {\n              return {\n                v: service\n              };\n            }\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n      };\n\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var _ret = _loop();\n\n        if (typeof _ret === \"object\") return _ret.v;\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    return lastAttemptedService;\n  });\n  return Object.values(currentAuthServices.reduce(function (h, service) {\n    if (service && !h[service.id]) {\n      h[service.id] = service; // eslint-disable-line no-param-reassign\n    }\n\n    return h;\n  }, {}));\n});","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n/**\n *\n */\nvar CanvasGroupings = /*#__PURE__*/function () {\n  /**\n   */\n  function CanvasGroupings(canvases) {\n    var viewType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'single';\n\n    _classCallCheck(this, CanvasGroupings);\n\n    this.canvases = canvases;\n    this.viewType = viewType;\n    this._groupings = null; // eslint-disable-line no-underscore-dangle\n  }\n  /**\n   */\n\n\n  _createClass(CanvasGroupings, [{\n    key: \"getCanvases\",\n    value: function getCanvases(index) {\n      switch (this.viewType) {\n        case 'book':\n          return this.groupings()[Math.ceil(index / 2)];\n\n        default:\n          return this.groupings()[index];\n      }\n    }\n    /**\n     * Groups a set of canvases based on the view type. Single, is just an array\n     * of canvases, while book view creates pairs.\n     */\n\n  }, {\n    key: \"groupings\",\n    value: function groupings() {\n      if (this._groupings) {\n        // eslint-disable-line no-underscore-dangle\n        return this._groupings; // eslint-disable-line no-underscore-dangle\n      }\n\n      if (this.viewType === 'scroll') {\n        return [this.canvases];\n      }\n\n      if (this.viewType !== 'book') {\n        return this.canvases.map(function (canvas) {\n          return [canvas];\n        });\n      }\n\n      var groupings = [];\n      this.canvases.forEach(function (canvas, i) {\n        if (i === 0) {\n          groupings.push([canvas]);\n          return;\n        } // Odd page\n\n\n        if (i % 2 !== 0) {\n          groupings.push([canvas]);\n        } else {\n          // Even page\n          groupings[Math.ceil(i / 2)].push(canvas);\n        }\n      });\n      this._groupings = groupings; // eslint-disable-line no-underscore-dangle\n\n      return groupings;\n    }\n  }]);\n\n  return CanvasGroupings;\n}();\n\nexport { CanvasGroupings as default };","import { createSelector } from 'reselect';\nimport flatten from 'lodash/flatten';\nimport CanvasGroupings from '../../lib/CanvasGroupings';\nimport MiradorCanvas from '../../lib/MiradorCanvas';\nimport { miradorSlice } from './utils';\nimport { getWindow } from './getters';\nimport { getSequence } from './sequences';\nimport { getWindowViewType } from './windows';\n/** */\n\nexport var selectInfoResponses = function selectInfoResponses(state) {\n  return miradorSlice(state).infoResponses;\n};\nexport var getCanvases = createSelector([getSequence], function (sequence) {\n  return sequence && sequence.getCanvases() || [];\n});\n/**\n* Return the canvas selected by an id\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {Object}\n*/\n\nexport var getCanvas = createSelector([getSequence, function (state, _ref) {\n  var canvasId = _ref.canvasId;\n  return canvasId;\n}], function (sequence, canvasId) {\n  if (!sequence || !canvasId) return undefined;\n  return sequence.getCanvasById(canvasId);\n});\nexport var getCurrentCanvas = createSelector([getSequence, getWindow], function (sequence, window) {\n  if (!sequence || !window) return undefined;\n  if (!window.canvasId) return sequence.getCanvasByIndex(0);\n  return sequence.getCanvasById(window.canvasId);\n});\n/** */\n\nexport var getVisibleCanvasIds = createSelector([getWindow], function (window) {\n  return window && (window.visibleCanvases || window.canvasId && [window.canvasId]) || [];\n});\n/** */\n\nexport var getVisibleCanvases = createSelector([getVisibleCanvasIds, getCanvases], function (canvasIds, canvases) {\n  return (canvases || []).filter(function (c) {\n    return canvasIds.includes(c.id);\n  });\n});\n/**\n* Return the current canvases grouped by how they'll appear in the viewer\n* For book view returns groups of 2, for single returns 1\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {Array}\n*/\n\nexport var getCanvasGroupings = createSelector([getCanvases, getWindowViewType], function (canvases, view) {\n  return canvases && new CanvasGroupings(canvases, view).groupings();\n});\n/**\n* Return the current canvases selected in a window\n* For book view returns 2, for single returns 1\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {Array}\n*/\n\nexport var getCanvasGrouping = createSelector([getCanvasGroupings, function (state, _ref2) {\n  var canvasId = _ref2.canvasId;\n  return canvasId;\n}], function (groupings, canvasId) {\n  return groupings && groupings.find(function (group) {\n    return group.some(function (c) {\n      return c.id === canvasId;\n    });\n  }) || [];\n});\n/**\n* Return the next canvas(es) for a window\n* For book view returns 2, for single returns 1\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {Array}\n*/\n\nexport var getNextCanvasGrouping = createSelector([getCanvasGroupings, getCurrentCanvas], function (groupings, canvas, view) {\n  if (!groupings || !canvas) return undefined;\n  var currentGroupIndex = groupings.findIndex(function (group) {\n    return group.some(function (c) {\n      return c.id === canvas.id;\n    });\n  });\n  if (currentGroupIndex < 0 || currentGroupIndex + 1 >= groupings.length) return undefined;\n  var newGroup = groupings[currentGroupIndex + 1];\n  return newGroup;\n});\n/**\n* Return the previous canvas(es) for a window\n* For book view returns 2, for single returns 1\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {Array}\n*/\n\nexport var getPreviousCanvasGrouping = createSelector([getCanvasGroupings, getCurrentCanvas], function (groupings, canvas, view) {\n  if (!groupings || !canvas) return undefined;\n  var currentGroupIndex = groupings.findIndex(function (group) {\n    return group.some(function (c) {\n      return c.id === canvas.id;\n    });\n  });\n  if (currentGroupIndex < 1) return undefined;\n  var newGroup = groupings[currentGroupIndex - 1];\n  return newGroup;\n});\n/**\n* Return canvas label, or alternatively return the given index + 1 to be displayed\n* @param {object} canvas\n* @return {String|Integer}\n*/\n\nexport var getCanvasLabel = createSelector([getCanvas], function (canvas) {\n  return canvas && (canvas.getLabel().length > 0 ? canvas.getLabel().getValue() : String(canvas.index + 1));\n});\n/**\n* Return canvas description\n* @param {object} canvas\n* @param {String}\n*/\n\nexport var getCanvasDescription = createSelector([getCanvas], function (canvas) {\n  return canvas && canvas.getProperty('description');\n});\nexport var getVisibleCanvasNonTiledResources = createSelector([getVisibleCanvases], function (canvases) {\n  return flatten(canvases.map(function (canvas) {\n    return new MiradorCanvas(canvas).imageResources;\n  })).filter(function (resource) {\n    return resource.getServices().length < 1;\n  });\n});\nexport var getVisibleCanvasVideoResources = createSelector([getVisibleCanvases], function (canvases) {\n  return flatten(canvases.map(function (canvas) {\n    return new MiradorCanvas(canvas).videoResources;\n  }));\n});\nexport var getVisibleCanvasCaptions = createSelector([getVisibleCanvases], function (canvases) {\n  return flatten(canvases.map(function (canvas) {\n    return new MiradorCanvas(canvas).vttContent;\n  }));\n});\nexport var getVisibleCanvasAudioResources = createSelector([getVisibleCanvases], function (canvases) {\n  return flatten(canvases.map(function (canvas) {\n    return new MiradorCanvas(canvas).audioResources;\n  }));\n});\nexport var selectInfoResponse = createSelector([function (state, _ref3) {\n  var infoId = _ref3.infoId;\n  return infoId;\n}, getCanvas, selectInfoResponses], function (infoId, canvas, infoResponses) {\n  var iiifServiceId = infoId;\n\n  if (!infoId) {\n    if (!canvas) return undefined;\n    var miradorCanvas = new MiradorCanvas(canvas);\n    var image = miradorCanvas.iiifImageResources[0];\n    iiifServiceId = image && image.getServices()[0].id;\n  }\n\n  return iiifServiceId && infoResponses[iiifServiceId] && !infoResponses[iiifServiceId].isFetching && infoResponses[iiifServiceId];\n});","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { createSelector } from 'reselect';\nimport groupBy from 'lodash/groupBy';\nimport { miradorSlice } from './utils';\nimport { getWindow, getWindows } from './getters';\n/** */\n\nexport function getCompanionWindows(state) {\n  return miradorSlice(state).companionWindows || {};\n}\nexport var getCompanionWindow = createSelector([getCompanionWindows, function (state, _ref) {\n  var companionWindowId = _ref.companionWindowId;\n  return companionWindowId;\n}], function (companionWindows, companionWindowId) {\n  return companionWindowId && companionWindows[companionWindowId];\n});\n/** Return position of thumbnail navigation in a certain window.\n* @param {object} state\n* @param {String} windowId\n* @param {String}\n*/\n\nexport var getThumbnailNavigationPosition = createSelector([getWindow, getCompanionWindows], function (window, companionWindows) {\n  return window && companionWindows[window.thumbnailNavigationId] && companionWindows[window.thumbnailNavigationId].position;\n});\n/**\n* Return compantion window ids from a window\n* @param {String} windowId\n* @return {Array}\n*/\n\nvar getCompanionWindowIndexByWindowAndPosition = createSelector([getWindows, getCompanionWindows], function (windows, companionWindows) {\n  return (Object.keys(windows) || []).reduce(function (obj, id) {\n    return _objectSpread(_objectSpread({}, obj), {}, _defineProperty({}, id, groupBy(windows[id].companionWindowIds, function (cwid) {\n      return companionWindows[cwid] && companionWindows[cwid].position;\n    })));\n  }, {});\n});\n/**\n* Return compantion window ids from a window\n* @param {String} windowId\n* @return {Array}\n*/\n\nvar getCompanionWindowsByWindowAndPosition = createSelector([getWindows, getCompanionWindows], function (windows, companionWindows) {\n  return (Object.keys(windows) || []).reduce(function (obj, id) {\n    return _objectSpread(_objectSpread({}, obj), {}, _defineProperty({}, id, groupBy(windows[id].companionWindowIds.map(function (cwid) {\n      return companionWindows[cwid];\n    }), function (cw) {\n      return cw.position;\n    })));\n  }, {});\n});\n/**\n * Return companion windows of a window\n * @param {String} windowId\n * @return {Array}\n */\n\nvar getCompanionWindowsOfWindow = createSelector([function (state, _ref2) {\n  var windowId = _ref2.windowId;\n  return windowId;\n}, getCompanionWindowsByWindowAndPosition], function (windowId, companionWindows) {\n  return companionWindows[windowId] || {};\n});\n/**\n * Return companion windows of a window\n * @param {String} windowId\n * @return {Array}\n */\n\nvar getCompanionWindowIdsOfWindow = createSelector([function (state, _ref3) {\n  var windowId = _ref3.windowId;\n  return windowId;\n}, getCompanionWindowIndexByWindowAndPosition], function (windowId, companionWindowIds) {\n  return companionWindowIds[windowId] || {};\n});\n/**\n* Return the companion window string from state in a given windowId and position\n* @param {object} state\n* @param {String} windowId\n* @param {String} position\n* @return {String}\n*/\n\nexport var getCompanionWindowsForPosition = createSelector([getCompanionWindowsOfWindow, function (state, _ref4) {\n  var position = _ref4.position;\n  return {\n    position: position\n  };\n}], function (companionWindows, _ref5) {\n  var position = _ref5.position;\n  return companionWindows[position] || EMPTY_ARRAY;\n});\n/**\n* Return the companion window string from state in a given windowId and content type\n* @param {object} state\n* @param {String} windowId\n* @param {String} position\n* @return {String}\n*/\n\nexport var getCompanionWindowsForContent = createSelector([getCompanionWindowsOfWindow, function (state, _ref6) {\n  var content = _ref6.content;\n  return {\n    content: content\n  };\n}], function (companionWindows, _ref7) {\n  var _ref8;\n\n  var content = _ref7.content;\n  return (_ref8 = []).concat.apply(_ref8, _toConsumableArray(Object.values(companionWindows))).filter(function (w) {\n    return w.content === content;\n  });\n});\nvar EMPTY_ARRAY = [];\n/** */\n\nexport var getCompanionWindowIdsForPosition = createSelector([getCompanionWindowIdsOfWindow, function (state, _ref9) {\n  var position = _ref9.position;\n  return {\n    position: position\n  };\n}], function (companionWindowIds, _ref10) {\n  var position = _ref10.position;\n  return companionWindowIds[position] || EMPTY_ARRAY;\n});\n/**\n * Returns the visibility of the companion area\n * @param {object} state\n * @param {object} props\n * @return {Boolean}\n */\n\nexport var getCompanionAreaVisibility = createSelector([function (state, _ref11) {\n  var position = _ref11.position;\n  return position;\n}, getWindow], function (position, window) {\n  if (!window) return false;\n  var companionAreaOpen = window.companionAreaOpen,\n      sideBarOpen = window.sideBarOpen;\n  if (position !== 'left') return true;\n  return !!(companionAreaOpen && sideBarOpen);\n});\nexport var selectCompanionWindowDimensions = createSelector([getCompanionWindowsOfWindow], function (companionWindows) {\n  var _ref12;\n\n  var width = 0;\n  var height = 0;\n\n  (_ref12 = []).concat.apply(_ref12, _toConsumableArray(Object.values(companionWindows))).forEach(function (cw) {\n    if (cw.position.match(/right/)) {\n      width += 235;\n    }\n\n    if (cw.position.match(/bottom/)) {\n      height += 201;\n    }\n  });\n\n  return {\n    height: height,\n    width: width\n  };\n});","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { createSelector } from 'reselect';\nimport deepmerge from 'deepmerge';\nimport { miradorSlice } from './utils';\nimport { getWorkspace } from './getters';\n/** */\n\nexport function getConfig(state) {\n  var slice = miradorSlice(state || {});\n  return slice.config || {};\n}\n/**\n * Extract an exportable version of state using the configuration from the config.\n */\n\nexport function getExportableState(state) {\n  var exportConfig = getConfig(state)[\"export\"];\n  return Object.entries(exportConfig).reduce(function (acc, _ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        stem = _ref2[0],\n        value = _ref2[1];\n\n    if (value === true) {\n      acc[stem] = state[stem];\n    } else if (value.filter) {\n      acc[stem] = Object.entries(state[stem]).filter(value.filter).reduce(function (stemAcc, _ref3) {\n        var _ref4 = _slicedToArray(_ref3, 2),\n            k = _ref4[0],\n            v = _ref4[1];\n\n        stemAcc[k] = v; // eslint-disable-line no-param-reassign\n\n        return stemAcc;\n      }, {});\n    }\n\n    return acc;\n  }, {});\n}\n/**\n* Return languages from config (in state) and indicate which is currently set\n* @param {object} state\n* @return {Array} [ {locale: 'de', label: 'Deutsch', current: true}, ... ]\n*/\n\nexport var getLanguagesFromConfigWithCurrent = createSelector([getConfig], function (_ref5) {\n  var availableLanguages = _ref5.availableLanguages,\n      language = _ref5.language;\n  return Object.keys(availableLanguages).map(function (key) {\n    return {\n      current: key === language,\n      label: availableLanguages[key],\n      locale: key\n    };\n  });\n});\nexport var getShowZoomControlsConfig = createSelector([getWorkspace, getConfig], function (workspace, config) {\n  return workspace.showZoomControls === undefined ? config.workspace.showZoomControls : workspace.showZoomControls;\n});\nexport var getTheme = createSelector([getConfig], function (_ref6) {\n  var theme = _ref6.theme,\n      themes = _ref6.themes,\n      selectedTheme = _ref6.selectedTheme;\n  return deepmerge(theme, themes[selectedTheme] || {});\n});\nexport var getThemeIds = createSelector([getConfig], function (_ref7) {\n  var themes = _ref7.themes;\n  return Object.keys(themes);\n});\nexport var getContainerId = createSelector([getConfig], function (_ref8) {\n  var id = _ref8.id;\n  return id;\n});\nexport var getThemeDirection = createSelector([getConfig], function (_ref9) {\n  var theme = _ref9.theme;\n  return theme.direction || 'ltr';\n});\nexport var getRequestsConfig = createSelector([getConfig], function (_ref10) {\n  var requests = _ref10.requests;\n  return requests || {};\n});","import { createSelector } from 'reselect';\nimport { miradorSlice } from './utils';\n/**\n * Return the manifest titles for all open windows\n * @param {object} state\n * @return {object}\n */\n\nexport function getWindowManifests(state) {\n  return Object.values(miradorSlice(state).windows).map(function (window) {\n    return window.manifestId;\n  });\n}\n/** */\n\nexport function getWindows(state) {\n  return miradorSlice(state).windows || {};\n}\n/** */\n\nexport function getWindow(state, _ref) {\n  var windowId = _ref.windowId;\n  return getWindows(state)[windowId];\n}\nexport var getViewer = createSelector([function (state) {\n  return miradorSlice(state).viewers;\n}, function (state, _ref2) {\n  var windowId = _ref2.windowId;\n  return windowId;\n}], function (viewers, windowId) {\n  return viewers[windowId];\n});\n/** */\n\nexport function getWorkspace(state) {\n  return miradorSlice(state).workspace;\n}\n/** */\n\nexport var getWindowIds = createSelector([getWorkspace], function (_ref3) {\n  var windowIds = _ref3.windowIds;\n  return windowIds || [];\n});\n/** */\n\nexport function getManifests(state) {\n  return miradorSlice(state).manifests || {};\n}\n/** Get the relevant manifest information */\n\nexport function getManifest(state, _ref4) {\n  var manifestId = _ref4.manifestId,\n      windowId = _ref4.windowId;\n  var manifests = getManifests(state);\n  return manifests && manifests[manifestId || windowId && (getWindow(state, {\n    windowId: windowId\n  }) || {}).manifestId];\n}\n/** */\n\nexport function getCatalog(state) {\n  return miradorSlice(state).catalog || {};\n}","import { createSelector } from 'reselect';\nimport MiradorCanvas from '../../lib/MiradorCanvas';\nimport { getCanvas, getVisibleCanvasIds } from './canvases';\nimport { miradorSlice } from './utils';\n/**\n * Get the image layers from a canvas\n */\n\nexport var getCanvasLayers = createSelector([getCanvas], function (canvas) {\n  if (!canvas) return [];\n  var miradorCanvas = new MiradorCanvas(canvas);\n  return miradorCanvas.imageResources;\n});\n/**\n * Get the layer state for a particular canvas\n */\n\nexport var getLayers = createSelector([function (state) {\n  return miradorSlice(state).layers || {};\n}, function (state, _ref) {\n  var windowId = _ref.windowId;\n  return windowId;\n}, function (state, _ref2) {\n  var canvasId = _ref2.canvasId;\n  return canvasId;\n}], function (layers, windowId, canvasId) {\n  return (layers[windowId] || {})[canvasId];\n});\n/**\n * Returns a list of canvas layers, sorted by the layer state configuration\n */\n\nexport var getSortedLayers = createSelector([getCanvasLayers, getLayers], function (canvasLayers, layerConfig) {\n  if (!layerConfig) return canvasLayers;\n  var sorted = canvasLayers.sort(function (a, b) {\n    if (layerConfig[a.id] && layerConfig[a.id].index !== undefined && layerConfig[b.id] && layerConfig[b.id].index !== undefined) {\n      return layerConfig[a.id].index - layerConfig[b.id].index;\n    } // sort a layer with index data above layers without\n\n\n    if (layerConfig[a.id] && layerConfig[a.id].index !== undefined) return -1;\n    if (layerConfig[b.id] && layerConfig[b.id].index !== undefined) return 1;\n    return 0;\n  });\n  return sorted;\n});\n/**\n * Get all the layer configuration for visible canvases\n */\n\nexport var getLayersForVisibleCanvases = createSelector([getVisibleCanvasIds, function (state, _ref3) {\n  var windowId = _ref3.windowId;\n  return function (canvasId) {\n    return getLayers(state, {\n      canvasId: canvasId,\n      windowId: windowId\n    });\n  };\n}], function (canvasIds, getLayersForCanvas) {\n  return canvasIds.reduce(function (acc, canvasId) {\n    acc[canvasId] = getLayersForCanvas(canvasId);\n    return acc;\n  }, {});\n});","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { createSelector } from 'reselect';\nimport createCachedSelector from 're-reselect';\nimport { PropertyValue, Utils } from 'manifesto.js';\nimport getThumbnail from '../../lib/ThumbnailFactory';\nimport asArray from '../../lib/asArray';\nimport { getCompanionWindow } from './companionWindows';\nimport { getManifest } from './getters';\nimport { getConfig } from './config';\n/** */\n\nfunction createManifestoInstance(json, locale) {\n  if (!json) return undefined;\n  var manifestoObject = Utils.parseManifest(json, locale ? {\n    locale: locale\n  } : undefined); // Local patching of Manifesto so that when its a Collection, it behaves similarly\n\n  if (typeof manifestoObject.getSequences != 'function') {\n    manifestoObject.getSequences = function () {\n      return [];\n    };\n  }\n\n  return manifestoObject;\n}\n/** */\n\n\nvar getLocale = createSelector([getCompanionWindow, getConfig], function () {\n  var companionWindow = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return companionWindow.locale || config.language;\n});\n/** Convenience selector to get a manifest (or placeholder) */\n\nexport var getManifestStatus = createSelector([getManifest], function (manifest) {\n  return manifest || {\n    missing: true\n  };\n});\n/** Convenience selector to get a manifest loading error */\n\nexport var getManifestError = createSelector([getManifest], function (manifest) {\n  return manifest && manifest.error;\n});\n/** Instantiate a manifesto instance */\n\nvar getContextualManifestoInstance = createCachedSelector(getManifest, getLocale, function (manifest, locale) {\n  return manifest && createManifestoInstance(manifest.json, locale);\n})(function (state, _ref) {\n  var companionWindowId = _ref.companionWindowId,\n      manifestId = _ref.manifestId,\n      windowId = _ref.windowId;\n  return [manifestId, windowId, getLocale(state, {\n    companionWindowId: companionWindowId\n  })].join(' - ');\n} // Cache key consisting of manifestId, windowId, and locale\n);\n/** Instantiate a manifesto instance */\n\nexport var getManifestoInstance = createSelector(getContextualManifestoInstance, function (state, _ref2) {\n  var json = _ref2.json;\n  return json;\n}, getLocale, function (manifesto, manifestJson, locale) {\n  return manifestJson && createManifestoInstance(manifestJson, locale) || manifesto;\n});\nexport var getManifestLocale = createSelector([getManifestoInstance], function (manifest) {\n  return manifest && manifest.options && manifest.options.locale && manifest.options.locale.replace(/-.*$/, '');\n});\n/** */\n\nfunction getProperty(property) {\n  return createSelector([getManifestoInstance], function (manifest) {\n    return manifest && manifest.getProperty(property);\n  });\n}\n/**\n * Get the logo for a manifest\n * @param {object} state\n * @param {object} props\n * @param {string} props.manifestId\n * @param {string} props.windowId\n * @return {String|null}\n */\n\n\nexport var getManifestLogo = createSelector([getManifestoInstance], function (manifest) {\n  return manifest && manifest.getLogo();\n});\n/**\n* Return the IIIF v3 provider of a manifest or null\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {String|null}\n*/\n\nexport var getManifestProvider = createSelector([getProperty('provider'), getManifestLocale], function (provider, locale) {\n  return provider && provider[0].label && PropertyValue.parse(provider[0].label, locale).getValue();\n});\n/**\n* Return the IIIF v3 homepage of a manifest or null\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {String|null}\n*/\n\nexport var getManifestHomepage = createSelector([getProperty('homepage'), getManifestLocale], function (homepages, locale) {\n  return homepages && asArray(homepages).map(function (homepage) {\n    return {\n      label: PropertyValue.parse(homepage.label, locale).getValue(),\n      value: homepage.id || homepage['@id']\n    };\n  });\n});\n/**\n* Return the IIIF v3 renderings of a manifest or null\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {String|null}\n*/\n\nexport var getManifestRenderings = createSelector([getManifestoInstance], function (manifest) {\n  return manifest && manifest.getRenderings().map(function (rendering) {\n    return {\n      label: rendering.getLabel().getValue(),\n      value: rendering.id\n    };\n  });\n});\n/**\n* Return the IIIF v2/v3 seeAlso data from a manifest or null\n*\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {String|null}\n*/\n\nexport var getManifestSeeAlso = createSelector([getProperty('seeAlso'), getManifestLocale], function (seeAlso, locale) {\n  return seeAlso && asArray(seeAlso).map(function (related) {\n    return {\n      format: related.format,\n      label: PropertyValue.parse(related.label, locale).getValue(),\n      value: related.id || related['@id']\n    };\n  });\n});\n/**\n* Return the IIIF v2/v3 seeAlso data from a manifest or null\n*\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {String|null}\n* @deprecated This does not actually return the content of \"related\" and\n* might be removed in a future version.\n* @see getManifestSeeAlso\n*/\n\nexport var getManifestRelatedContent = getManifestSeeAlso;\n/**\n* Return the IIIF v2 realated links manifest or null\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {String|null}\n*/\n\nexport var getManifestRelated = createSelector([getProperty('related'), getManifestLocale], function (relatedLinks, locale) {\n  return relatedLinks && asArray(relatedLinks).map(function (related) {\n    return typeof related === 'string' ? {\n      value: related\n    } : {\n      format: related.format,\n      label: PropertyValue.parse(related.label, locale).getValue(),\n      value: related.id || related['@id']\n    };\n  });\n});\n/**\n* Return the IIIF requiredStatement (v3) or attribution (v2) data from a manifest or null\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {String|null}\n*/\n\nexport var getRequiredStatement = createSelector([getManifestoInstance], function (manifest) {\n  return manifest && asArray(manifest.getRequiredStatement()).filter(function (l) {\n    return l.getValues().some(function (v) {\n      return v;\n    });\n  }).map(function (labelValuePair) {\n    return {\n      label: labelValuePair.label && labelValuePair.label.getValue() || null,\n      values: labelValuePair.getValues()\n    };\n  });\n});\n/**\n* Return the IIIF v2 rights (v3) or license (v2) data from a manifest or null\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {String|null}\n*/\n\nexport var getRights = createSelector([getProperty('rights'), getProperty('license'), getManifestLocale], function (rights, license, locale) {\n  var data = rights || license;\n  return asArray(PropertyValue.parse(data, locale).getValues());\n});\n/**\n* Return the supplied thumbnail for a manifest or null\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {String|null}\n*/\n\nexport function getManifestThumbnail(state, props) {\n  var manifest = getManifestoInstance(state, props);\n\n  var _getConfig = getConfig(state),\n      _getConfig$thumbnails = _getConfig.thumbnails,\n      thumbnails = _getConfig$thumbnails === void 0 ? {} : _getConfig$thumbnails;\n\n  if (!manifest) return undefined;\n  var thumbnail = getThumbnail(manifest, {\n    maxHeight: 80,\n    maxWidth: 120,\n    preferredFormats: thumbnails.preferredFormats\n  });\n  return thumbnail && thumbnail.url;\n}\n/**\n* Return manifest title\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {String}\n*/\n\nexport var getManifestTitle = createSelector([getManifestoInstance], function (manifest) {\n  return manifest && manifest.getLabel().getValue();\n});\n/**\n* Return manifest description\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {String}\n*/\n\nexport var getManifestDescription = createSelector([getManifestoInstance], function (manifest) {\n  return manifest && manifest.getDescription().getValue();\n});\n/**\n* Return manifest title\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {String}\n*/\n\nexport var getManifestUrl = createSelector([getManifestoInstance], function (manifest) {\n  return manifest && manifest.id;\n});\n/**\n* Return metadata in a label / value structure\n* This is a potential seam for pulling the i18n locale from\n* state and plucking out the appropriate language.\n* For now we're just getting the first.\n* @param {object} Manifesto IIIF Resource (e.g. canvas, manifest)\n* @return {Array[Object]}\n*/\n\nexport function getDestructuredMetadata(iiifResource) {\n  return iiifResource && iiifResource.getMetadata().map(function (labelValuePair) {\n    return {\n      label: labelValuePair.getLabel(),\n      values: labelValuePair.getValues()\n    };\n  });\n}\n/**\n * Return manifest metadata in a label / value structure\n * @param {object} state\n * @param {object} props\n * @param {string} props.manifestId\n * @param {string} props.windowId\n * @return {Array[Object]}\n */\n\nexport var getManifestMetadata = createSelector([getManifestoInstance], function (manifest) {\n  return manifest && getDestructuredMetadata(manifest);\n});\n/** */\n\nfunction getLocalesForStructure(item) {\n  var languages = [];\n\n  if (Array.isArray(item)) {\n    languages.push.apply(languages, _toConsumableArray(item.filter(function (i) {\n      return typeof i === 'object' && i['@language'];\n    }).map(function (i) {\n      return i['@language'];\n    })));\n  } else if (item && typeof item === 'object') {\n    if (item['@language']) languages.push(item['@language']);\n  }\n\n  return languages;\n}\n/** */\n\n\nfunction getLocales(resource) {\n  if (!resource) return [];\n  var metadata = resource.getProperty('metadata') || [];\n  var languages = {};\n\n  for (var i = 0; i < metadata.length; i += 1) {\n    var item = metadata[i];\n    getLocalesForStructure(item.label).forEach(function (l) {\n      languages[l] = true;\n    });\n    getLocalesForStructure(item.value).forEach(function (l) {\n      languages[l] = true;\n    });\n  }\n\n  return Object.keys(languages);\n}\n\nexport var getMetadataLocales = createSelector([getManifestoInstance], function (manifest) {\n  return getLocales(manifest);\n});\n/** */\n\nexport var getManifestSearchService = createSelector([getManifestoInstance], function (manifest) {\n  if (!manifest) return null;\n  var searchService = manifest.getService('http://iiif.io/api/search/0/search') || manifest.getService('http://iiif.io/api/search/1/search');\n  if (searchService) return searchService;\n  return null;\n});\n/** */\n\nexport var getManifestAutocompleteService = createSelector([getManifestSearchService], function (searchService) {\n  var autocompleteService = searchService && (searchService.getService('http://iiif.io/api/search/0/autocomplete') || searchService.getService('http://iiif.io/api/search/1/autocomplete'));\n  return autocompleteService && autocompleteService;\n});","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { createSelector } from 'reselect';\nimport union from 'lodash/union';\nimport without from 'lodash/without';\nimport { Utils } from 'manifesto.js';\nimport { getVisibleCanvasIds } from './canvases';\nimport { getCompanionWindow } from './companionWindows';\nimport { getSequenceTreeStructure } from './sequences';\n/** */\n\nfunction rangeContainsCanvasId(range, canvasId) {\n  var canvasIds = range.getCanvasIds();\n\n  for (var i = 0; i < canvasIds.length; i += 1) {\n    if (Utils.normalisedUrlsMatch(canvasIds[i], canvasId)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n/** */\n\n\nfunction getAllParentIds(node) {\n  if (node.parentNode === undefined) {\n    return [];\n  }\n\n  if (node.parentNode.parentNode === undefined) {\n    return [node.parentNode.id];\n  }\n\n  return [].concat(_toConsumableArray(getAllParentIds(node.parentNode)), [node.parentNode.id]);\n}\n/** */\n\n\nfunction getVisibleNodeIdsInSubTree(nodes, canvasIds) {\n  return nodes.reduce(function (nodeIdAcc, node) {\n    var result = [];\n    result.push.apply(result, _toConsumableArray(nodeIdAcc));\n    var nodeContainsVisibleCanvas = canvasIds.reduce(function (acc, canvasId) {\n      return acc || rangeContainsCanvasId(node.data, canvasId);\n    }, false);\n    var subTreeVisibleNodeIds = node.nodes.length > 0 ? getVisibleNodeIdsInSubTree(node.nodes, canvasIds) : [];\n    result.push.apply(result, _toConsumableArray(subTreeVisibleNodeIds));\n\n    if (nodeContainsVisibleCanvas || subTreeVisibleNodeIds.length > 0) {\n      result.push({\n        containsVisibleCanvas: nodeContainsVisibleCanvas,\n        descendantsContainVisibleCanvas: subTreeVisibleNodeIds.length > 0,\n        id: node.id,\n        leaf: node.nodes.length === 0,\n        parentIds: getAllParentIds(node)\n      });\n    }\n\n    return result;\n  }, []);\n}\n/** */\n\n\nvar getVisibleLeafAndBranchNodeIds = createSelector([getSequenceTreeStructure, getVisibleCanvasIds], function (tree, canvasIds) {\n  if (canvasIds.length === 0 || !tree) return [];\n  return getVisibleNodeIdsInSubTree(tree.nodes, canvasIds);\n});\n/** */\n\nexport var getVisibleNodeIds = createSelector([getVisibleLeafAndBranchNodeIds], function (visibleLeafAndBranchNodeIds) {\n  return visibleLeafAndBranchNodeIds.map(function (item) {\n    return item.id;\n  });\n});\nvar getVisibleBranchNodeIds = createSelector([getVisibleLeafAndBranchNodeIds], function (visibleLeafAndBranchNodeIds) {\n  return visibleLeafAndBranchNodeIds.reduce(function (acc, item) {\n    return item.leaf || !item.descendantsContainVisibleCanvas ? acc : [].concat(_toConsumableArray(acc), [item.id]);\n  }, []);\n});\nvar getCanvasContainingNodeIds = createSelector([getVisibleLeafAndBranchNodeIds], function (visibleLeafAndBranchNodeIds) {\n  return visibleLeafAndBranchNodeIds.reduce(function (acc, item) {\n    return item.containsVisibleCanvas ? [].concat(_toConsumableArray(acc), [item]) : acc;\n  }, []);\n});\n/** */\n\nexport function getManuallyExpandedNodeIds(state, _ref, expanded) {\n  var companionWindowId = _ref.companionWindowId;\n  var companionWindow = getCompanionWindow(state, {\n    companionWindowId: companionWindowId\n  });\n  return companionWindow.tocNodes ? Object.keys(companionWindow.tocNodes).reduce(function (acc, nodeId) {\n    return companionWindow.tocNodes[nodeId].expanded === expanded ? [].concat(_toConsumableArray(acc), [nodeId]) : acc;\n  }, []) : [];\n}\n/** */\n\nexport function getExpandedNodeIds(state, _ref2) {\n  var companionWindowId = _ref2.companionWindowId,\n      windowId = _ref2.windowId;\n  var visibleBranchNodeIds = getVisibleBranchNodeIds(state, {\n    companionWindowId: companionWindowId,\n    windowId: windowId\n  });\n  var manuallyExpandedNodeIds = getManuallyExpandedNodeIds(state, {\n    companionWindowId: companionWindowId\n  }, true);\n  var manuallyClosedNodeIds = getManuallyExpandedNodeIds(state, {\n    companionWindowId: companionWindowId\n  }, false);\n  return without.apply(void 0, [union(manuallyExpandedNodeIds, visibleBranchNodeIds)].concat(_toConsumableArray(manuallyClosedNodeIds)));\n}\n/** */\n\nexport function getNodeIdToScrollTo(state, _ref3) {\n  var args = _extends({}, _ref3);\n\n  var canvasContainingNodeIds = getCanvasContainingNodeIds(state, _objectSpread({}, args));\n  var collapsedNodeIds = getManuallyExpandedNodeIds(state, args, false);\n\n  if (canvasContainingNodeIds && canvasContainingNodeIds.length > 0) {\n    for (var i = 0; i < canvasContainingNodeIds[0].parentIds.length; i += 1) {\n      if (collapsedNodeIds.indexOf(canvasContainingNodeIds[0].parentIds[i]) !== -1) {\n        return canvasContainingNodeIds[0].parentIds[i];\n      }\n    }\n\n    return canvasContainingNodeIds[0].id;\n  }\n\n  return null;\n}\n/**\n * Returns the default sidebar variant depending on whether or not ranges exist\n */\n\nexport var getDefaultSidebarVariant = createSelector([getSequenceTreeStructure], function (tree) {\n  return tree && tree.nodes && tree.nodes.length > 0 ? 'tableOfContents' : 'item';\n});","import { createSelector } from 'reselect';\nimport { PropertyValue } from 'manifesto.js';\nimport flatten from 'lodash/flatten';\nimport AnnotationList from '../../lib/AnnotationList';\nimport { getCanvas, getCanvases } from './canvases';\nimport { getWindow } from './getters';\nimport { getManifestLocale } from './manifests';\nimport { miradorSlice } from './utils';\n/** Get searches from state */\n\nvar getSearches = function getSearches(state) {\n  return miradorSlice(state).searches;\n};\n\nexport var getSearchForWindow = createSelector([function (state, _ref) {\n  var windowId = _ref.windowId;\n  return windowId;\n}, getSearches], function (windowId, searches) {\n  if (!windowId || !searches) return {};\n  return searches[windowId];\n});\nvar getSearchForCompanionWindow = createSelector([getSearchForWindow, function (state, _ref2) {\n  var companionWindowId = _ref2.companionWindowId;\n  return companionWindowId;\n}], function (results, companionWindowId) {\n  if (!results || !companionWindowId) return undefined;\n  return results[companionWindowId];\n});\nvar getSearchResponsesForCompanionWindow = createSelector([getSearchForCompanionWindow], function (results) {\n  if (!results) return [];\n  return Object.values(results.data);\n});\nexport var getSearchQuery = createSelector([getSearchForCompanionWindow], function (results) {\n  return results && results.query;\n});\nexport var getSearchIsFetching = createSelector([getSearchResponsesForCompanionWindow], function (results) {\n  return results.some(function (result) {\n    return result.isFetching;\n  });\n});\nexport var getSearchNumTotal = createSelector([getSearchForCompanionWindow], function (results) {\n  var _resultWithWithin$jso, _resultWithWithin$jso2;\n\n  if (!results || !results.data) return undefined;\n  var resultWithWithin = Object.values(results.data).find(function (result) {\n    return !result.isFetching && result.json && result.json.within;\n  });\n  return resultWithWithin === null || resultWithWithin === void 0 ? void 0 : (_resultWithWithin$jso = resultWithWithin.json) === null || _resultWithWithin$jso === void 0 ? void 0 : (_resultWithWithin$jso2 = _resultWithWithin$jso.within) === null || _resultWithWithin$jso2 === void 0 ? void 0 : _resultWithWithin$jso2.total;\n});\nexport var getNextSearchId = createSelector([getSearchForCompanionWindow], function (results) {\n  if (!results || !results.data) return undefined;\n  var resultWithAnUnresolvedNext = Object.values(results.data).find(function (result) {\n    return !result.isFetching && result.json && result.json.next && !results.data[result.json.next];\n  });\n  return resultWithAnUnresolvedNext && resultWithAnUnresolvedNext.json && resultWithAnUnresolvedNext.json.next;\n});\nvar getSearchHitsForCompanionWindow = createSelector([getSearchResponsesForCompanionWindow], function (results) {\n  return flatten(results.map(function (result) {\n    if (!result || !result.json || result.isFetching || !result.json.hits) return [];\n    return result.json.hits;\n  }));\n});\nexport var getSortedSearchHitsForCompanionWindow = createSelector([getSearchHitsForCompanionWindow, getCanvases, function (state, _ref3) {\n  var companionWindowId = _ref3.companionWindowId,\n      windowId = _ref3.windowId;\n  return function (annotationUri) {\n    return getResourceAnnotationForSearchHit(state, {\n      annotationUri: annotationUri,\n      companionWindowId: companionWindowId,\n      windowId: windowId\n    });\n  };\n}], function (searchHits, canvases, annotationForSearchHit) {\n  if (!canvases || canvases.length === 0) return [];\n  if (!searchHits || searchHits.length === 0) return [];\n  var canvasIds = canvases.map(function (canvas) {\n    return canvas.id;\n  });\n  return [].concat(searchHits).sort(function (a, b) {\n    var hitA = annotationForSearchHit(a.annotations[0]);\n    var hitB = annotationForSearchHit(b.annotations[0]);\n    return canvasIds.indexOf(hitA.targetId) - canvasIds.indexOf(hitB.targetId);\n  });\n});\n/** convert search results to an annotation */\n\nvar searchResultsToAnnotation = function searchResultsToAnnotation(results) {\n  var annotations = results.map(function (result) {\n    if (!result || !result.json || result.isFetching || !result.json.resources) return undefined;\n    var anno = new AnnotationList(result.json);\n    return {\n      id: anno.id,\n      resources: anno.resources\n    };\n  }).filter(Boolean);\n  return {\n    id: (annotations.find(function (a) {\n      return a.id;\n    }) || {}).id,\n    resources: flatten(annotations.map(function (a) {\n      return a.resources;\n    }))\n  };\n};\n\nexport var getSearchAnnotationsForCompanionWindow = createSelector([getSearchResponsesForCompanionWindow], function (results) {\n  return results && searchResultsToAnnotation(results);\n});\n/** */\n\nexport function sortSearchAnnotationsByCanvasOrder(searchAnnotations, canvases) {\n  if (!searchAnnotations || !searchAnnotations.resources || searchAnnotations.length === 0) return [];\n  if (!canvases || canvases.length === 0) return [];\n  var canvasIds = canvases.map(function (canvas) {\n    return canvas.id;\n  });\n  return [].concat(searchAnnotations.resources).sort(function (annoA, annoB) {\n    return canvasIds.indexOf(annoA.targetId) - canvasIds.indexOf(annoB.targetId);\n  });\n}\nexport var getSortedSearchAnnotationsForCompanionWindow = createSelector([getSearchAnnotationsForCompanionWindow, getCanvases], function (searchAnnotations, canvases) {\n  return sortSearchAnnotationsByCanvasOrder(searchAnnotations, canvases);\n});\nexport var getSearchAnnotationsForWindow = createSelector([getSearchForWindow], function (results) {\n  if (!results) return [];\n  var data = Object.values(results).map(function (r) {\n    return Object.values(r.data);\n  });\n  return data.map(function (d) {\n    return searchResultsToAnnotation(d);\n  }).filter(function (a) {\n    return a.resources.length > 0;\n  });\n});\nexport var getSelectedContentSearchAnnotationIds = createSelector([getWindow, getSearchForCompanionWindow], function (window, search) {\n  return search && search.selectedContentSearchAnnotationIds || [];\n});\nexport var getResourceAnnotationForSearchHit = createSelector([getSearchAnnotationsForCompanionWindow, function (state, _ref4) {\n  var annotationUri = _ref4.annotationUri;\n  return annotationUri;\n}], function (annotation, annotationUri) {\n  return annotation.resources.find(function (r) {\n    return r.id === annotationUri;\n  });\n});\nexport var getResourceAnnotationLabel = createSelector([getResourceAnnotationForSearchHit, getManifestLocale], function (resourceAnnotation, locale) {\n  if (!(resourceAnnotation && resourceAnnotation.resource && resourceAnnotation.resource.label)) return [];\n  return PropertyValue.parse(resourceAnnotation.resource.label, locale).getValues();\n});\nvar getAnnotationById = createSelector([getSearchAnnotationsForWindow, function (state, _ref5) {\n  var annotationId = _ref5.annotationId;\n  return annotationId;\n}], function (annotations, annotationId) {\n  var resourceAnnotations = flatten(annotations.map(function (a) {\n    return a.resources;\n  }));\n  return resourceAnnotations.find(function (r) {\n    return r.id === annotationId;\n  });\n});\nexport var getCanvasForAnnotation = createSelector([getAnnotationById, function (state, _ref6) {\n  var windowId = _ref6.windowId;\n  return function (canvasId) {\n    return getCanvas(state, {\n      canvasId: canvasId,\n      windowId: windowId\n    });\n  };\n}], function (annotation, getCanvasById) {\n  var canvasId = annotation && annotation.targetId;\n  return canvasId && getCanvasById(canvasId);\n});","import { createSelector } from 'reselect';\nimport { TreeNode } from 'manifesto.js';\nimport { getManifestoInstance } from './manifests';\nimport { getWindow } from './getters';\nexport var getSequences = createSelector([getManifestoInstance], function (manifest) {\n  if (!manifest || !manifest.getTopRanges) return null;\n  var topRangesOrRoot = manifest.getTopRanges();\n  var v2TopRanges = topRangesOrRoot.filter(function (r) {\n    return r.getProperty('viewingHint') === 'top';\n  });\n  var v3RangeSequences = [];\n\n  if (v2TopRanges.length === 0 && topRangesOrRoot.length === 1) {\n    v3RangeSequences = topRangesOrRoot[0].getRanges().filter(function (r) {\n      return r.getBehavior() === 'sequence';\n    });\n  }\n\n  var sequences = [].concat( // v2: multi-sequence manifests, or v3: items\n  manifest.getSequences(), // v3: all top-level ranges with behavior=sequence\n  v3RangeSequences);\n  return sequences;\n});\nexport var getSequence = createSelector([getSequences, getWindow, function (state, _ref) {\n  var sequenceId = _ref.sequenceId;\n  return sequenceId;\n}], function (sequences, window, sequenceId) {\n  if (!sequences) return null;\n\n  if (sequenceId || window && window.sequenceId) {\n    var currentSequence = sequences.find(function (s) {\n      return s.id === (sequenceId || window.sequenceId);\n    });\n    if (currentSequence) return currentSequence;\n  }\n\n  return sequences[0];\n});\n/** Return the canvas index for a certain window.\n* @param {object} state\n* @param {String} windowId\n* @param {Number}\n*/\n\nexport var getCanvasIndex = createSelector([getWindow, getSequence], function (window, sequence) {\n  return (sequence && window && window.canvasId && sequence.getCanvasById(window.canvasId) || {}).index || 0;\n});\n/**\n * Returns the viewing hint for the first sequence in the manifest or the manifest\n * @param {object} state\n * @param {object} props\n * @param {string} props.manifestId\n * @param {string} props.windowId\n * @return {Number}\n */\n\nexport var getSequenceViewingHint = createSelector([getSequence, getManifestoInstance], function (sequence, manifest) {\n  if (!manifest) return null;\n  var viewingHint = sequence && sequence.getViewingHint() || manifest.getViewingHint();\n  if (viewingHint) return viewingHint;\n  return null;\n});\n/** */\n\nexport var getSequenceViewingDirection = createSelector([getWindow, getSequence, getManifestoInstance], function (window, sequence, manifest) {\n  var viewingDirection = window && window.viewingDirection || sequence && sequence.getViewingDirection() || manifest && manifest.getViewingDirection();\n  if (viewingDirection) return viewingDirection;\n  return null;\n});\n/**\n * Returns the behaviors viewing hint for the manifest\n * @param {object} state\n * @param {object} props\n * @param {string} props.manifestId\n * @param {string} props.windowId\n * @return {Number}\n */\n\nexport var getSequenceBehaviors = createSelector([getSequence, getManifestoInstance], function (sequence, manifest) {\n  if (!manifest || !sequence) return [];\n  var sequenceBehaviors = sequence && sequence.getProperty('behavior');\n\n  if (sequenceBehaviors) {\n    if (Array.isArray(sequenceBehaviors)) return sequenceBehaviors;\n    return [sequenceBehaviors];\n  }\n\n  var behaviors = manifest.getProperty('behavior');\n  if (!behaviors) return [];\n  if (Array.isArray(behaviors)) return behaviors;\n  return [behaviors];\n});\n/** */\n\nexport var getSequenceTreeStructure = createSelector([getSequence, getManifestoInstance], function (sequence, manifest) {\n  if (sequence && sequence.getProperty('type') && sequence.isRange()) return sequence.getTree(new TreeNode('root'));\n  return manifest && manifest.getDefaultTree();\n});","import settings from '../../config/settings';\n/** */\n\nexport function miradorSlice(state) {\n  if (settings.state.slice) return state[settings.state.slice];\n  return state;\n}","import { createSelector } from 'reselect';\nimport CanvasWorld from '../../lib/CanvasWorld';\nimport { getVisibleCanvases } from './canvases';\nimport { getLayersForVisibleCanvases } from './layers';\nimport { getSequenceViewingDirection } from './sequences';\n/** Instantiate a manifesto instance */\n\nexport var getCurrentCanvasWorld = createSelector(getVisibleCanvases, getLayersForVisibleCanvases, getSequenceViewingDirection, function (canvases, layers, viewingDirection) {\n  return new CanvasWorld(canvases, layers, viewingDirection);\n});","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { createSelector } from 'reselect';\nimport { getManifestTitle } from './manifests';\nimport { getConfig } from './config';\nimport { getWindows, getWindow, getWindowIds } from './getters';\nimport { getWorkspaceType } from './workspace';\nimport { getSequenceViewingHint, getSequenceBehaviors } from './sequences';\n/** */\n\nexport var getWindowConfig = createSelector([getConfig, getWindow], function (_ref) {\n  var defaultConfig = _ref.window;\n  var windowConfig = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return _objectSpread(_objectSpread({}, defaultConfig), windowConfig);\n});\n/**\n * Return the manifest titles for all open windows\n * @param {object} state\n * @return {object}\n */\n\nexport function getWindowTitles(state) {\n  var result = {};\n  Object.keys(getWindows(state)).forEach(function (windowId) {\n    result[windowId] = getManifestTitle(state, {\n      windowId: windowId\n    });\n  });\n  return result;\n}\n/** */\n\nexport var getMaximizedWindowsIds = createSelector([getWindows], function (windows) {\n  return Object.values(windows).filter(function (window) {\n    return window.maximized === true;\n  }).map(function (window) {\n    return window.id;\n  });\n});\n/** Return type of view in a certain window.\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @param {String}\n*/\n\nexport var getWindowViewType = createSelector([getWindow, getWindowConfig, getSequenceViewingHint, getSequenceBehaviors], function (window, _ref2, manifestViewingHint, manifestBehaviors) {\n  var _ref2$views = _ref2.views,\n      views = _ref2$views === void 0 ? [] : _ref2$views,\n      defaultView = _ref2.defaultView;\n  if (window && window.view) return window.view;\n  var config = (views || []).find(function (view) {\n    return view.behaviors && view.behaviors.some(function (b) {\n      return manifestViewingHint === b || manifestBehaviors.includes(b);\n    });\n  });\n  return config && config.key || defaultView;\n});\n/** */\n\nexport var getAllowedWindowViewTypes = createSelector([getSequenceViewingHint, getSequenceBehaviors, getWindowConfig], function (manifestViewingHint, manifestBehaviors, _ref3) {\n  var _ref3$views = _ref3.views,\n      views = _ref3$views === void 0 ? [] : _ref3$views,\n      defaultView = _ref3.defaultView;\n  return (views || []).reduce(function (allowedViews, view) {\n    if (view.key === defaultView || !view.behaviors || view.behaviors.some(function (b) {\n      return manifestViewingHint === b || manifestBehaviors.includes(b);\n    })) allowedViews.push(view.key);\n    return allowedViews;\n  }, []);\n});\n/**\n * Returns the draggability of a window\n * @param {object} state\n * @param {object} props\n * @return {Boolean}\n */\n\nexport var getWindowDraggability = createSelector([getWorkspaceType, getWindow, function (state) {\n  return getWindowIds(state).length > 1;\n}], function (workspaceType, window, manyWindows) {\n  if (workspaceType === 'elastic') return true;\n  return manyWindows && window && window.maximized === false;\n});","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { createSelector } from 'reselect';\nimport { getWorkspace } from './getters';\nimport { miradorSlice } from './utils';\n/** */\n\nexport function getElasticLayout(state) {\n  return miradorSlice(state).elasticLayout;\n}\nexport var getFullScreenEnabled = createSelector([getWorkspace], function (workspace) {\n  return workspace.isFullscreenEnabled;\n});\n/** Returns the latest error from the state\n * @param {object} state\n */\n\nexport function getLatestError(state) {\n  var _miradorSlice$errors$ = _slicedToArray(miradorSlice(state).errors.items, 1),\n      errorId = _miradorSlice$errors$[0];\n\n  return miradorSlice(state).errors[errorId];\n}\nexport var getWorkspaceType = createSelector([getWorkspace], function (_ref) {\n  var type = _ref.type;\n  return type;\n});\nvar getFocusedWindowId = createSelector([getWorkspace], function (_ref2) {\n  var focusedWindowId = _ref2.focusedWindowId;\n  return focusedWindowId;\n});\n/** Check if the current window is focused */\n\nexport var isFocused = function isFocused(state, _ref3) {\n  var windowId = _ref3.windowId;\n  return getFocusedWindowId(state) === windowId;\n};"],"names":["state","_ref","windowId","displayAll","highlightAllAnnotations","displayAllDisabled","length","dispatch","_ref2","toggleAnnotationDisplay","mapDispatchToProps","deselectAnnotation","hoverAnnotation","selectAnnotation","annotations","canvasWorld","drawAnnotations","window","forceDrawAnnotations","content","drawSearchAnnotations","hoveredAnnotationIds","palette","searchAnnotations","selectedAnnotationId","setWorkspaceFullscreen","createGenerateClassNameOptions","isFullscreenEnabled","language","theme","translations","audio","width","container","alignItems","display","audioOptions","audioResources","captions","annotationListItem","backgroundColor","action","hover","borderBottom","concat","divider","cursor","whiteSpace","chip","background","paper","marginRight","spacing","marginTop","hovered","sectionHeading","paddingLeft","paddingRight","paddingTop","resources","canvasId","map","resource","i","chars","id","tags","targetId","htmlSanitizationRuleSet","label","canvasDescription","companionWindowId","canvasLabel","canvasMetadata","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","arguments","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","updateLayers","dragging","dragHandle","borderRight","flex","flexDirection","marginBottom","maxWidth","image","list","listItem","shades","light","selected","paddingBottom","opacityIcon","opacityInput","typography","caption","margin","textAlign","slider","marginLeft","thumbnail","minWidth","layerMetadata","layers","dark","color","dialogContent","padding","listitem","focus","selectedTheme","themeIds","setSelectedTheme","button","justifyContent","heading","addWindow","hideCollectionDialog","setWorkspaceAddVisibility","showCollectionDialog","updateWindow","collectionFilter","collectionItem","collectionMetadata","dialog","position","grey","_getWindow","collectionPath","manifestId","collectionManifestId","manifest","collectionId","collection","containerId","error","isMultipart","includes","open","workspace","collectionDialogOn","ready","json","collectionLabel","setCompanionAreaOpen","horizontal","left","root","minHeight","zIndex","appBar","toggle","border","borderRadius","height","drawer","toggleButton","companionAreaOpen","companionWindowIds","direction","sideBarOpen","Component","forwardRef","props","ref","assign","innerRef","withTranslation","withStyles","closeButton","order","borderTop","borderLeft","companionWindowHeader","flexWrap","companionWindowTitleControls","flexGrow","companionWindowTitleControlsBottom","overflowY","wordBreak","positionButton","rnd","boxShadow","boxSizing","small","titleControls","flexFlow","toolbar","vertical","windowSideBarTitle","subtitle1","alignSelf","withSize","companionWindow","_getWindowConfig","defaultSidebarPanelHeight","defaultSidebarPanelWidth","isDisplayed","onCloseClick","updateCompanionWindow","_len","args","Array","_key","actions","withPlugins","CompanionWindow","alert","main","fontWeight","fontWeightMedium","details","metadata","viewer","showJsError","removeError","galleryContainer","overflowX","canvases","viewingDirection","canvas","currentCanvas","canvasAnnotations","a","hasOpenAnnotationsWindow","annotationsCount","reduce","v","r","config","galleryView","searchAnnotationsCount","focusOnCanvas","requestCanvasAnnotations","setCanvas","annotationIcon","annotationsChip","avatar","chips","opacity","right","top","galleryViewItem","primary","outline","maxHeight","overflow","hasAnnotations","searchChip","highlights","handleAuthInteraction","resetAuthenticationState","resolveAccessTokenRequest","resolveAuthenticationRequest","service","accessTokenService","Utils","logoutService","authStatuses","authStatus","accessTokens","accessTokenStatus","status","isFetching","ok","authProfiles","profile","getProfile","isInteractive","some","external","kiosk","accessTokenServiceId","authServiceId","confirm","getConfirmLabel","description","getDescription","failureDescription","getFailureDescription","failureHeader","getFailureHeader","header","getHeader","getLabel","logoutConfirm","logoutServiceId","lineHeight","insideCaption","lineClamp","insideLabel","bottom","insideRoot","textOverflow","outsideCaption","boxOrient","outsideLabel","outsideRoot","thumbnailsConfig","thumbnails","languages","afterSelect","handleClick","select","selectEmpty","addResource","buttons","breakpoints","up","input","body1","manifestDescription","manifestLabel","manifestMetadata","fetchManifest","active","buttonGrid","textTransform","logo","objectFit","placeholder","mixins","gutters","provider","manifesto","isCollection","size","getTotalItems","manifestLogo","title","onDismissClick","onTryAgainClick","errorIcon","manifestIdText","labelValueMetadata","homepage","manifestUrl","related","renderings","seeAlso","h6","windowTopBarStyle","allowClose","allowWindowSideBar","removeWindow","preview","h4","updateViewport","osdContainer","infoResponses","imageServiceIds","c","infoResponse","undefined","nonTiledImages","osdConfig","viewerConfig","primaryWindow","manifestoInstance","isCollectionDialogVisible","videoResources","textDecoration","_shadowScrollDialog","shadowScrollDialog","_arrayLikeToArray","arr","len","arr2","annotationId","_ref$hit","hit","realAnnoId","hitAnnotation","annotationUri","annotationLabel","selectedCanvasIds","selectedContentSearchAnnotationsIds","windowSelectedAnnotationId","allAnnoIds","isArray","_arrayWithoutHoles","iter","Symbol","iterator","from","_iterableToArray","o","minLen","n","prototype","toString","call","slice","constructor","name","test","_unsupportedIterableToArray","TypeError","_nonIterableSpread","adjacent","annotation","windowSelected","focused","hitCounter","subtitle2","verticalAlign","inlineButton","secondary","subtitle","fetchSearch","autocompleteService","query","searchIsFetching","searchService","endAdornment","form","searchProgress","numTotal","searchHits","selectedContentSearchAnnotation","body2","nextSearch","searchNumTotal","moreButton","navigation","noResults","toggleFocus","variant","group","treeItemRoot","visibleNode","alpha","expandedNodeIds","nodeIdToScrollTo","treeStructure","visibleNodeIds","toggleNode","nodeId","data","canvasNavigation","outlineOffset","common","white","currentCanvasId","video","videoOptions","osdInfo","unicodeBidi","canvasIndex","canvasCount","osdNavigation","hasNextCanvas","hasPreviousCanvas","setNextCanvas","setPreviousCanvas","companionAreaBottom","flexBasis","companionAreaRight","maximized","middle","middleLeft","thumbnailArea","thumbnailAreaBottom","thumbnailAreaRight","modal","manifestError","thumbnailNavigationPosition","view","windowDraggable","workspaceType","focusWindow","buttonInvert","contrastText","hoverOpacity","expanded","failure","fauxButton","icon","topBar","visible","focusedWindowId","canvasNav","canvasNavStacked","controls","titles","windowIds","badge","ctrlBtn","ctrlBtnSelected","disabled","isWorkspaceAddVisible","windowCount","flexShrink","grow","borderInlineEnd","sideBarPanel","hasLayers","imageResources","notification","tab","tabSelected","tabsFlexContainer","tabsIndicator","hasAnyAnnotations","annotationListUris","canvasAnnotationPages","hasAnyLayers","hasCurrentLayers","hasSearchResults","suggestedSearches","hasSearchService","panels","addCompanionWindow","setWindowThumbnailPosition","MenuItem","selectedLabel","withRef","windowTopBarStyleDraggable","allowFullscreen","allowMaximize","allowTopMenuButton","maximizeWindow","minimizeWindow","toggleWindowSideBar","hideWindowTitle","manifestTitle","showThumbnailNavigationSettings","thumbnailNavigation","displaySettings","toggleDraggingEnabled","setWindowViewType","viewTypes","windowViewType","workspaceViewport","workspaceWithControlPanel","allowNewWindows","isWorkspaceControlPanelVisible","workspaceControlPanel","enabled","maximizedWindowIds","workspaceId","displayNone","fab","menuButton","typographyBody","workspaceAdd","catalog","fabPrimary","fabSecondary","useExtendedFab","type","controlPanelVariant","lang","_branding","branding","wide","workspaceButtons","transitionDuration","elasticLayout","setWorkspaceViewportDimensions","setWorkspaceViewportPosition","updateElasticWindowLayout","companionWindowDimensions","layout","accordionTitle","exportableState","addError","importConfig","cancelBtn","text","textField","textInput","fontFamily","toggleZoomControls","showThemePicker","showZoomControls","updateWorkspaceMosaicLayout","styles","touchAction","fallbacks","webkitBoxOrient","webkitBoxDirection","webkitBoxPack","webkitBoxAlign","webkitBoxFlex","WorkspaceMosaic","updateWorkspace","card","headline","media","menuItem","svgIcon","ListItem","zoom_controls","_toConsumableArray","connectPluginComponent","plugin","mapStateToProps","connectOptions","component","PluginProvider","plugins","children","_useState2","useState","_arrayWithHoles","_i","_s","_e","_arr","_n","_d","next","done","err","_iterableToArrayLimit","_nonIterableRest","pluginMap","setPluginMap","useEffect","connectedPlugins","connectPluginsToStore","p","companionWindowKey","CompanionWindowRegistry","addPluginsToCompanionWindowsRegistry","mode","x","createTargetToPluginMapping","PluginContext","defaultProps","targetName","TargetComponent","PluginHoc","useContext","passDownProps","wrap","add","PluginComponents","targetComponent","reverse","WrapPluginComponent","targetProps","whatever","displayName","ar","de","en","fr","it","ja","kr","lt","nl","pl","sr","sv","vi","instance","use","init","fallbackLng","interpolation","escapeValue","lng","validatePlugin","checkPlugin","checkName","checkTarget","checkMode","checkMapStateToProps","checkMapDispatchToProps","checkReducers","every","check","s","reducers","filterValidPlugins","_splitPluginsByValida","invalidPlugins","validPlugins","splitPluginsByValidation","console","log","logInvalidPlugins","getReducersFromPlugins","acc","getConfigFromPlugins","getSagasFromPlugins","saga","accessTokensReducer","tokenServiceId","authId","serviceId","success","annotationsReducer","annotationJson","authReducer","catalogReducer","m","payload","companionWindowsReducer","companionWindows","newState","cw","orig","initialState","settings","overwriteMerge","destinationArray","sourceArray","options","configReducer","arrayMerge","elasticLayoutReducer","defaultState","items","errorsReducer","_objectSpread2","_objectSpread3","_objectSpread4","ret","message","infoId","searchId","infoResponsesReducer","degraded","infoJson","layersReducer","manifestsReducer","properties","manifestJson","manifests","searchesReducer","searchStruct","searchJson","selectedContentSearchAnnotationIds","annotationIds","search","searchHasAnnotation","values","resp","viewersReducer","preserveViewport","viewers","windowsReducer","viewType","y","visibleCanvases","windows","hasViewportPosition","viewportPosition","contains","containee","workspaceReducer","newWorkspaceDimensions","newWindowIds","draggingEnabled","createRootReducer","pluginReducers","auth","errors","searches","_regeneratorRuntime","exports","Op","hasOwn","hasOwnProperty","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","method","arg","Error","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","fn","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","invoke","resolve","reject","result","__await","then","unwrapped","previousPromise","callInvokeWithMethodAndArg","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","doneResult","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","Promise","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","_marked","fetchIiifResource","_marked2","fetchIiifResourceWithAuth","_marked3","_marked4","getAccessTokenService","_marked5","fetchInfoResponse","_marked6","fetchSearchResponse","_marked7","fetchAnnotation","_marked8","fetchResourceManifest","_marked9","fetchManifests","_marked10","iiifSaga","fetchWrapper","url","response","statusText","_yield$select","_yield$select$preproc","preprocessors","_yield$select$postpro","postprocessors","reqOptions","_context","f","t0","iiifResource","_ref3","urlOptions","tokenService","_yield$call","authoritativeTokenService","_context2","headers","Authorization","accessToken","stripAuthentication","replace","_ref4","callbacks","_context3","_ref5","String","_ref6","manifestoCompatibleResource","services","authService","token","_context4","__jsonld","match","_ref7","imageResource","_context5","_ref8","_ref9","_ref10","_ref11","_context6","_ref12","_ref13","_ref14","_context7","_ref15","_ref16","_ref17","_context8","_args9","_context9","_context10","fetchWindowManifest","setCanvasOnNewSequence","setCollectionPath","fetchCollectionManifests","setWindowStartingCanvas","setWindowDefaultSearchQuery","setCurrentAnnotationsOnCurrentCanvas","panToFocusedWindow","updateVisibleCanvases","setCanvasOfFirstSearchResult","_marked11","setCanvasforSelectedAnnotation","_marked12","fetchInfoResponses","_marked13","determineAndShowCollectionDialog","_marked14","windowsSaga","thunk","sequenceId","partOfs","partOf","getProperty","miradorManifest","startCanvas","_thunk","MiradorManifest","canvasAt","_action$window","defaultSearchQuery","getAnnotationsBySearch","canvasIds","accumulator","find","annotationBySearch","pan","_yield$select$viewpor","viewWidth","viewHeight","_yield$select2","switchCanvasOnSearch","_context11","visibleCanvasIds","_context12","miradorCanvas","MiradorCanvas","iiifImageResources","getServices","Boolean","_context13","_context14","importState","appSaga","_slicedToArray","entries","_ref7$config","thunks","miradorWindow","loadedManifest","defaultPosition","fetchCanvasAnnotations","fetchAnnotations","uri","_ref2$visibleCanvases","refetchInfoResponsesOnLogout","refetchInfoResponses","doAuthWorkflow","rerequestOnAccessTokenFailure","invalidateInvalidAuth","authSaga","visibleImageApiIds","haveThisTokenService","obsoleteInfoResponses","e","infoTokenService","auths","_yield$select$auth","_yield$select$auth$se","nonInteractiveAuthFlowProfiles","profileConfig","serviceProfiles","accessTokenServices","authServices","launchSaga","pluginSagas","rootSaga","sagas","miradorReducer","rootReducer","sagaMiddleware","store","run","filteredPlugins","createStore","_classCallCheck","Constructor","_defineProperties","descriptor","MiradorViewer","document","getElementById","render","protoProps","pluginsOrStruct","struct","selectors","AnnotationResource","motivations","get","_id","on","full","motivation","isOnlyTag","join","selector","item","split","str","parseInt","AnnotationList","_this","_resources","CanvasAnnotationDisplay","zoomRatio","offset","svgSelector","svgContext","fragmentSelector","fragmentContext","currentPalette","globalAlpha","svgPaths","element","save","translate","Path2D","attributes","d","nodeValue","strokeStyle","setLineDash","svgToCanvasMap","fill","stroke","lineWidth","fillStyle","restore","_this$context","_this$context2","_this2","fragment","fillRect","strokeRect","DOMParser","parseFromString","svgString","getElementsByTagName","CanvasWorld","_canvasDimensions","_this$canvasDirection","canvasDirection","dirX","dirY","scale","Math","min","getHeight","getWidth","incX","incY","canvasDims","canvasHeight","canvasWidth","aspectRatio","floor","worldHeight","abs","worldWidth","dims","contentResource","miradorCanvasIndex","findIndex","_this$canvasToWorldCo2","canvasToWorldCoordinates","w","h","fragmentOffset","onFragment","canvasDimensions","infoResponseId","resourceIndex","layer","imageResourceLayer","index","total","visibility","getLayerMetadata","canvasTarget","coordinates","max","point","thumbNavigation","canvasGroupings","thumbnailNavigationId","ThumbnailNavigation","section","section_divider","annotationCount","WindowSideBarAnnotationsPanel","availableLocales","locale","showLocalePicker","setLocale","WindowSideBarInfoPanel","collectionNavigationButton","variantTab","sequence","sequences","showToc","nodes","showMultipart","updateSequence","updateVariant","WindowSideBarCanvasPanel","requiredStatement","rights","AttributionPanel","A","removeSearch","clearChip","SearchPanel","LayersPanel","CustomPanel","attribution","parentCollectionId","parentCollection","_len2","_key2","WindowSideBarCollectionPanel","custom","otherContent","getImages","getResource","getContent","getBody","Canvas","images","resourceAnnotations","anno","body","resourceAnnotation","fragmentMatch","getValue","getSequences","start","getCanvasById","getCanvases","MosaicLayout","corner","Corner","getPathToCorner","path","getNodeAtPath","addedWindowIds","first","second","pathToCorner","parent","pathToParent","destination","nodeAtPath","getOtherDirection","update","spec","$set","updateTree","removedWindowIds","windowPaths","removeUpdates","createRemoveUpdate","OpenSeadragonCanvasOverlay","containerWidth","containerHeight","imgAspectRatio","canvasDiv","firstElementChild","current","getContext","context2d","clearRect","clientWidth","setAttribute","clientHeight","viewportOrigin","boundsRect","viewport","getBoundsNoRotateWithMargins","viewportWidth","viewportHeight","image1","world","getItemAt","imgWidth","dimensions","imgHeight","viewportZoom","getZoom","zoom","viewportToImageZoom","clearBeforeRedraw","clear","center","getCenter","getFlip","rotation","getRotation","rotate","PI","setTransform","iiifImageService","startsWith","iiifv3ImageServiceType","ThumbnailFactory","iiifOpts","staticProps","targetArea","sizes","closestSize","Number","MAX_SAFE_INTEGER","imageFitness","best","score","minDimension","_this$iiifOpts","requestedMaxHeight","requestedMaxWidth","staticImageUrl","selectBestImageSize","endsWith","isLevel0ImageProfile","isLevel2ImageProfile","round","quality","format","getFormat","_this$iiifOpts$prefer","preferredFormats","servicePreferredFormats","filteredFormats","getThumbnail","isManifest","isCanvas","getType","firstManifest","getManifests","getSourceContentResource","getPreferredImage","sourceContentResource","iiifThumbnailUrl","TruncatedHit","_ref$maxChars","maxChars","_ref$minimum","minimum","resultingChars","measured","before","after","substring","charsOnSide","asArray","iiif","ALLOWED_ATTR","ALLOWED_TAGS","liberal","mirador2","noHtml","readImageMetadata","file","reader","FileReader","addEventListener","Image","src","readAsDataURL","OSDReferences","refs","set","ADD_COMPANION_WINDOW","UPDATE_COMPANION_WINDOW","REMOVE_COMPANION_WINDOW","TOGGLE_TOC_NODE","UPDATE_WINDOW","REQUEST_CANVAS_ANNOTATIONS","HOVER_ANNOTATION","REQUEST_ANNOTATION","RECEIVE_ANNOTATION","RECEIVE_ANNOTATION_FAILURE","DESELECT_ANNOTATION","SELECT_ANNOTATION","TOGGLE_ANNOTATION_DISPLAY","FOCUS_WINDOW","SET_WORKSPACE_FULLSCREEN","SET_WORKSPACE_VIEWPORT_POSITION","ADD_MANIFEST","ADD_WINDOW","ADD_ERROR","IMPORT_CONFIG","IMPORT_MIRADOR_STATE","SET_CANVAS","MAXIMIZE_WINDOW","MINIMIZE_WINDOW","UPDATE_WINDOW_POSITION","SET_WINDOW_SIZE","REMOVE_WINDOW","PICK_WINDOWING_SYSTEM","REQUEST_MANIFEST","RECEIVE_MANIFEST","RECEIVE_MANIFEST_FAILURE","REMOVE_ERROR","SET_CONFIG","UPDATE_WORKSPACE","SET_WINDOW_THUMBNAIL_POSITION","SET_WINDOW_VIEW_TYPE","SET_WORKSPACE_ADD_VISIBILITY","TOGGLE_WINDOW_SIDE_BAR","TOGGLE_DRAGGING","TOGGLE_ZOOM_CONTROLS","UPDATE_CONFIG","REMOVE_MANIFEST","REQUEST_INFO_RESPONSE","RECEIVE_INFO_RESPONSE","RECEIVE_DEGRADED_INFO_RESPONSE","RECEIVE_INFO_RESPONSE_FAILURE","REMOVE_INFO_RESPONSE","UPDATE_WORKSPACE_MOSAIC_LAYOUT","UPDATE_VIEWPORT","UPDATE_ELASTIC_WINDOW_LAYOUT","ADD_AUTHENTICATION_REQUEST","RESOLVE_AUTHENTICATION_REQUEST","REQUEST_ACCESS_TOKEN","RECEIVE_ACCESS_TOKEN","RECEIVE_ACCESS_TOKEN_FAILURE","RESET_AUTHENTICATION_STATE","CLEAR_ACCESS_TOKEN_QUEUE","REQUEST_SEARCH","RECEIVE_SEARCH","RECEIVE_SEARCH_FAILURE","REMOVE_SEARCH","SET_CONTENT_SEARCH_CURRENT_ANNOTATIONS","UPDATE_LAYERS","ADD_RESOURCE","REMOVE_RESOURCE","SHOW_COLLECTION_DIALOG","HIDE_COLLECTION_DIALOG","requestAnnotation","receiveAnnotation","receiveAnnotationFailure","addAuthenticationRequest","requestAccessToken","receiveAccessToken","receiveAccessTokenFailure","newGroup","getState","ids","removeResource","defaults","addOrUpdateCompanionWindow","updatableWindowId","removeCompanionWindow","collapsedNodeIds","expand","indexOf","setConfig","updateConfig","importMiradorState","requestInfoResponse","receiveInfoResponse","receiveDegradedInfoResponse","receiveInfoResponseFailure","imageId","imageService","removeInfoResponse","requestManifest","receiveManifest","receiveManifestFailure","removeManifest","requestSearch","receiveSearch","receiveSearchFailure","setContentSearchCurrentAnnotation","_excluded","excluded","sourceKeys","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","_objectWithoutProperties","_miradorSlice","_miradorSlice$workspa","numWindows","cwThumbs","defaultCompanionWindows","defaultSideBarPanel","unshift","defaultOptions","collectionIndex","rangeId","selectedAnnotations","sideBarOpenByDefault","elastic","AnnotationItem","purpose","AnnotationPage","_items","AnnotationFactory","getAnnotations","getMotivation","createSelector","filteredMotivations","getAnnotationsOnCanvas","getPresentAnnotationsCanvas","determineAnnotation","present","getAnnotationsOnSelectedCanvases","otherProps","getPresentAnnotationsOnSelectedCanvases","getAnnotationResourcesByMotivationForCanvas","getAnnotationResourcesByMotivation","getSelectedAnnotationId","getSelectedAnnotationsOnCanvases","val","_createForOfIteratorHelper","allowArrayLike","F","normalCompletion","didErr","step","_e2","getAuthProfiles","_ref$auth","_ref$auth$serviceProf","getAccessTokens","getAuth","selectCurrentAuthServices","iiifResources","currentAuthResources","currentAuthServices","lastAttemptedService","_step","_iterator","_loop","_step2","authProfile","_iterator2","_ret","CanvasGroupings","_groupings","groupings","ceil","selectInfoResponses","getCanvas","getCurrentCanvas","getCanvasByIndex","getVisibleCanvasIds","getVisibleCanvases","getCanvasGroupings","getCanvasGrouping","getNextCanvasGrouping","currentGroupIndex","getPreviousCanvasGrouping","getCanvasLabel","getCanvasDescription","getVisibleCanvasNonTiledResources","getVisibleCanvasVideoResources","getVisibleCanvasCaptions","vttContent","getVisibleCanvasAudioResources","selectInfoResponse","iiifServiceId","getCompanionWindows","getCompanionWindow","getThumbnailNavigationPosition","getCompanionWindowIndexByWindowAndPosition","cwid","getCompanionWindowsByWindowAndPosition","getCompanionWindowsOfWindow","getCompanionWindowIdsOfWindow","getCompanionWindowsForPosition","EMPTY_ARRAY","getCompanionWindowsForContent","getCompanionWindowIdsForPosition","getCompanionAreaVisibility","selectCompanionWindowDimensions","getConfig","getExportableState","exportConfig","stem","stemAcc","k","getLanguagesFromConfigWithCurrent","availableLanguages","getShowZoomControlsConfig","getTheme","themes","getThemeIds","getContainerId","getThemeDirection","getRequestsConfig","requests","getWindowManifests","getWindows","getWindow","getViewer","getWorkspace","getWindowIds","getManifest","getCatalog","getCanvasLayers","getLayers","getSortedLayers","canvasLayers","layerConfig","sort","b","getLayersForVisibleCanvases","getLayersForCanvas","createManifestoInstance","manifestoObject","getLocale","getManifestStatus","missing","getManifestError","getContextualManifestoInstance","getManifestoInstance","getManifestLocale","property","getManifestLogo","getLogo","getManifestProvider","PropertyValue","getManifestHomepage","homepages","getManifestRenderings","getRenderings","rendering","getManifestSeeAlso","getManifestRelatedContent","getManifestRelated","relatedLinks","getRequiredStatement","l","getValues","labelValuePair","getRights","license","getManifestThumbnail","_getConfig$thumbnails","getManifestTitle","getManifestDescription","getManifestUrl","getDestructuredMetadata","getMetadata","getManifestMetadata","getLocalesForStructure","getMetadataLocales","getLocales","getManifestSearchService","getService","getManifestAutocompleteService","_extends","bind","getAllParentIds","node","parentNode","getVisibleNodeIdsInSubTree","nodeIdAcc","nodeContainsVisibleCanvas","range","getCanvasIds","rangeContainsCanvasId","subTreeVisibleNodeIds","containsVisibleCanvas","descendantsContainVisibleCanvas","leaf","parentIds","getVisibleLeafAndBranchNodeIds","tree","getVisibleNodeIds","visibleLeafAndBranchNodeIds","getVisibleBranchNodeIds","getCanvasContainingNodeIds","getManuallyExpandedNodeIds","tocNodes","getExpandedNodeIds","visibleBranchNodeIds","manuallyExpandedNodeIds","manuallyClosedNodeIds","getNodeIdToScrollTo","canvasContainingNodeIds","getDefaultSidebarVariant","getSearchForWindow","getSearchForCompanionWindow","results","getSearchResponsesForCompanionWindow","getSearchQuery","getSearchIsFetching","getSearchNumTotal","_resultWithWithin$jso","_resultWithWithin$jso2","resultWithWithin","within","getNextSearchId","resultWithAnUnresolvedNext","getSearchHitsForCompanionWindow","hits","getSortedSearchHitsForCompanionWindow","getResourceAnnotationForSearchHit","annotationForSearchHit","hitA","hitB","searchResultsToAnnotation","getSearchAnnotationsForCompanionWindow","sortSearchAnnotationsByCanvasOrder","annoA","annoB","getSortedSearchAnnotationsForCompanionWindow","getSearchAnnotationsForWindow","getSelectedContentSearchAnnotationIds","getResourceAnnotationLabel","getAnnotationById","getCanvasForAnnotation","getTopRanges","topRangesOrRoot","v3RangeSequences","getRanges","getBehavior","getSequence","currentSequence","getCanvasIndex","getSequenceViewingHint","getViewingHint","getSequenceViewingDirection","getViewingDirection","getSequenceBehaviors","sequenceBehaviors","behaviors","getSequenceTreeStructure","isRange","getTree","TreeNode","getDefaultTree","miradorSlice","getCurrentCanvasWorld","getWindowConfig","defaultConfig","windowConfig","getWindowTitles","getMaximizedWindowsIds","getWindowViewType","manifestViewingHint","manifestBehaviors","_ref2$views","views","defaultView","getAllowedWindowViewTypes","_ref3$views","allowedViews","getWindowDraggability","manyWindows","getElasticLayout","getFullScreenEnabled","getLatestError","errorId","getWorkspaceType","getFocusedWindowId","isFocused"],"sourceRoot":""}