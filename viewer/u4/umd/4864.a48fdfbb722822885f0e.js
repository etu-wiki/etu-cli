/*! For license information please see 4864.a48fdfbb722822885f0e.js.LICENSE.txt */
(self.webpackChunkUV=self.webpackChunkUV||[]).push([[4864],{2084:e=>{window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONTINUE=100,t.SWITCHING_PROTOCOLS=101,t.PROCESSING=102,t.OK=200,t.CREATED=201,t.ACCEPTED=202,t.NON_AUTHORITATIVE_INFORMATION=203,t.NO_CONTENT=204,t.RESET_CONTENT=205,t.PARTIAL_CONTENT=206,t.MULTI_STATUS=207,t.MULTIPLE_CHOICES=300,t.MOVED_PERMANENTLY=301,t.MOVED_TEMPORARILY=302,t.SEE_OTHER=303,t.NOT_MODIFIED=304,t.USE_PROXY=305,t.TEMPORARY_REDIRECT=307,t.BAD_REQUEST=400,t.UNAUTHORIZED=401,t.PAYMENT_REQUIRED=402,t.FORBIDDEN=403,t.NOT_FOUND=404,t.METHOD_NOT_ALLOWED=405,t.NOT_ACCEPTABLE=406,t.PROXY_AUTHENTICATION_REQUIRED=407,t.REQUEST_TIME_OUT=408,t.CONFLICT=409,t.GONE=410,t.LENGTH_REQUIRED=411,t.PRECONDITION_FAILED=412,t.REQUEST_ENTITY_TOO_LARGE=413,t.REQUEST_URI_TOO_LARGE=414,t.UNSUPPORTED_MEDIA_TYPE=415,t.REQUESTED_RANGE_NOT_SATISFIABLE=416,t.EXPECTATION_FAILED=417,t.IM_A_TEAPOT=418,t.UNPROCESSABLE_ENTITY=422,t.LOCKED=423,t.FAILED_DEPENDENCY=424,t.UNORDERED_COLLECTION=425,t.UPGRADE_REQUIRED=426,t.PRECONDITION_REQUIRED=428,t.TOO_MANY_REQUESTS=429,t.REQUEST_HEADER_FIELDS_TOO_LARGE=431,t.INTERNAL_SERVER_ERROR=500,t.NOT_IMPLEMENTED=501,t.BAD_GATEWAY=502,t.SERVICE_UNAVAILABLE=503,t.GATEWAY_TIME_OUT=504,t.HTTP_VERSION_NOT_SUPPORTED=505,t.VARIANT_ALSO_NEGOTIATES=506,t.INSUFFICIENT_STORAGE=507,t.BANDWIDTH_LIMIT_EXCEEDED=509,t.NOT_EXTENDED=510,t.NETWORK_AUTHENTICATION_REQUIRED=511}])},8939:(e,t,n)=>{"use strict";n.d(t,{ll:()=>a,LH:()=>v,pF:()=>r,x0:()=>_,UG:()=>y});var r,i=function(e){this.isVisible=!0;var t=e.target.match(/.*[^n]xyz=(-?\d+(?:\.\d+)?),(-?\d+(?:\.\d+)?),(-?\d+(?:\.\d+)?)/),n=e.target.match(/.*nxyz=(-?\d+(?:\.\d+)?),(-?\d+(?:\.\d+)?),(-?\d+(?:\.\d+)?)/);this.bodyValue=e.bodyValue,this.x=Number(t[1]),this.y=Number(t[2]),this.z=Number(t[3]),this.nx=Number(n[1]),this.ny=Number(n[2]),this.nz=Number(n[3])},o=function(e){var t;this.isVisible=!0,e.on?(t=e.on.match(/.*xywh=(\d*),(\d*),(\d*),(\d*)/),this.chars=e.resource.chars):(t=e.target.match(/.*xywh=(\d*),(\d*),(\d*),(\d*)/),this.chars=e.bodyValue),this.x=Number(t[1]),this.y=Number(t[2]),this.width=Number(t[3]),this.height=Number(t[4])},a=function(){function e(e){this.rects=[],this.points3D=[],this.canvasId=e}return e.prototype.addRect=function(e){var t=new o(e);t.canvasId=this.canvasId,t.canvasIndex=this.canvasIndex,t.index=this.rects.length,this.rects.push(t),this.rects.sort((function(e,t){return e.index-t.index}))},e.prototype.addPoint3D=function(e){var t=new i(e);t.canvasId=this.canvasId,t.canvasIndex=this.canvasIndex,t.index=this.points3D.length,this.points3D.push(t),this.points3D.sort((function(e,t){return e.index-t.index}))},e}(),s=n(6947),l=function(){function e(){this.isEnabled=!1,this.ranges=[],this.canvases=[]}return e.prototype.allCanvasesSelected=function(){return this.canvases.length>0&&this.getAllSelectedCanvases().length===this.canvases.length},e.prototype.allRangesSelected=function(){return this.ranges.length>0&&this.getAllSelectedRanges().length===this.ranges.length},e.prototype.allSelected=function(){return this.allRangesSelected()&&this.allCanvasesSelected()},e.prototype.getAll=function(){return this.canvases.concat(this.ranges)},e.prototype.getAllSelectedCanvases=function(){return this.canvases.filter((function(e){return e.multiSelected}))},e.prototype.getAllSelectedRanges=function(){return this.ranges.filter((function(e){return e.multiSelected}))},e.prototype.getCanvasById=function(e){return this.canvases.filter((function(t){return s.Utils.normaliseUrl(t.id)===s.Utils.normaliseUrl(e)}))[0]},e.prototype.getCanvasesByIds=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(this.getCanvasById(r))}return t},e.prototype.getRangeCanvases=function(e){var t=e.getCanvasIds();return this.getCanvasesByIds(t)},e.prototype.selectAll=function(e){this.selectRanges(this.ranges,e),this.selectCanvases(this.canvases,e)},e.prototype.selectCanvas=function(e,t){this.canvases.filter((function(t){return t.id===e.id}))[0].multiSelected=t},e.prototype.selectAllCanvases=function(e){this.selectCanvases(this.canvases,e)},e.prototype.selectCanvases=function(e,t){for(var n=0;n<e.length;n++)e[n].multiSelected=t},e.prototype.selectRange=function(e,t){var n=this.ranges.filter((function(t){return t.id===e.id}))[0];n.multiSelected=t;var r=this.getRangeCanvases(n);this.selectCanvases(r,t)},e.prototype.selectAllRanges=function(e){this.selectRanges(this.ranges,e)},e.prototype.selectRanges=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];r.multiSelected=t;var i=this.getCanvasesByIds(r.getCanvasIds());this.selectCanvases(i,t)}},e.prototype.setEnabled=function(e){this.isEnabled=e;for(var t=this.getAll(),n=0;n<t.length;n++){var r=t[n];r.multiSelectEnabled=this.isEnabled,e||(r.multiSelected=!1)}},e}(),u=function(){function e(e,t){this.items=[],this.resource=e,this.label=t}return e.prototype.addItem=function(e){this.items.push(e)},e.prototype.addMetadata=function(e,t){void 0===t&&(t=!1);for(var n=0;n<e.length;n++){var r=e[n];r.isRootLevel=t,this.addItem(r)}},e}();!function(e){e.DATE="date",e.NONE="none"}(r||(r={}));var c=n(3911),p=function(){function e(){}return e.manifestNotLoaded="Manifest has not loaded yet",e}(),f=function(){return f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},f.apply(this,arguments)},h=function(){function e(e){if(this.options=e,this.iiifResource=this.options.iiifResource,this.manifestUri=this.options.manifestUri,this.manifest=this.options.manifest,this.collectionIndex=this.options.collectionIndex||0,this.manifestIndex=this.options.manifestIndex||0,this.sequenceIndex=this.options.sequenceIndex||0,this.canvasIndex=this.options.canvasIndex||0,this.options.canvasId){var t=this.getCanvasIndexById(this.options.canvasId);null!==t&&(this.canvasIndex=t)}}return e.prototype.getAutoCompleteService=function(){var e=this.getSearchService(),t=null;return e&&((t=e.getService(c.vl.SEARCH_0_AUTO_COMPLETE))||(t=e.getService(c.vl.SEARCH_1_AUTO_COMPLETE))),t},e.prototype.getAttribution=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);var e=this.manifest.getAttribution();return e?e.getValue(this.options.locale):null},e.prototype.getCanvases=function(){return this.getCurrentSequence().getCanvases()},e.prototype.getCanvasById=function(e){return this.getCurrentSequence().getCanvasById(e)},e.prototype.getCanvasesById=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=this.getCanvasById(r);i&&t.push(i)}return t},e.prototype.getCanvasByIndex=function(e){return this.getCurrentSequence().getCanvasByIndex(e)},e.prototype.getCanvasIndexById=function(e){return this.getCurrentSequence().getCanvasIndexById(e)},e.prototype.getCanvasIndexByLabel=function(e){var t=this.getManifestType()===s.ManifestType.MANUSCRIPT;return this.getCurrentSequence().getCanvasIndexByLabel(e,t)},e.prototype.getCanvasRange=function(e,t){var n=this.getCanvasRanges(e);if(t){for(var r=0;r<n.length;r++){var i=n[r];if(i.path===t)return i}return null}return n[0]},e.prototype.getCanvasRanges=function(e){if(!this.manifest)throw new Error(p.manifestNotLoaded);return e.ranges||(e.ranges=this.manifest.getAllRanges().filter((function(t){return t.getCanvasIds().some((function(t){return s.Utils.normaliseUrl(t)===s.Utils.normaliseUrl(e.id)}))}))),e.ranges},e.prototype.getCollectionIndex=function(e){if(!e.parentCollection||e.parentCollection.parentCollection)return e.parentCollection?e.parentCollection.index:void 0},e.prototype.getCurrentCanvas=function(){return this.getCurrentSequence().getCanvasByIndex(this.canvasIndex)},e.prototype.getCurrentSequence=function(){return this.getSequenceByIndex(this.sequenceIndex)},e.prototype.getDescription=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);var e=this.manifest.getDescription();return e?e.getValue(this.options.locale):null},e.prototype.getLabel=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);var e=this.manifest.getLabel();return e?e.getValue(this.options.locale):null},e.prototype.getLastCanvasLabel=function(e){return this.getCurrentSequence().getLastCanvasLabel(e)},e.prototype.getFirstPageIndex=function(){return 0},e.prototype.getLastPageIndex=function(){return this.getTotalCanvases()-1},e.prototype.getLicense=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getLicense()},e.prototype.getLogo=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getLogo()},e.prototype.getManifestType=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);var e=this.manifest.getManifestType();return e===s.ManifestType.EMPTY&&(e=s.ManifestType.MONOGRAPH),e},e.prototype.getMetadata=function(e){if(!this.manifest)throw new Error(p.manifestNotLoaded);var t=[],n=this.manifest.getMetadata(),r=new u(this.manifest),i=this.options.locale;n&&n.length&&r.addMetadata(n,!0),this.manifest.getDescription().length&&((o=new s.LabelValuePair(i)).label=new s.PropertyValue([new s.LocalizedValue("description",i)]),o.value=this.manifest.getDescription(),o.isRootLevel=!0,r.addItem(o)),this.manifest.getAttribution().length&&((o=new s.LabelValuePair(i)).label=new s.PropertyValue([new s.LocalizedValue("attribution",i)]),o.value=this.manifest.getAttribution(),o.isRootLevel=!0,r.addItem(o));var o,a=this.manifest.getLicense();if(a){var l={label:"license",value:e&&e.licenseFormatter?e.licenseFormatter.format(a):a};(o=new s.LabelValuePair(i)).parse(l),o.isRootLevel=!0,r.addItem(o)}this.manifest.getLogo()&&(l={label:"logo",value:'<img alt="logo" src="'+this.manifest.getLogo()+'"/>'},(o=new s.LabelValuePair(i)).parse(l),o.isRootLevel=!0,r.addItem(o));return t.push(r),e?this._parseMetadataOptions(e,t):t},e.prototype.getAllRequiredStatements=function(){var e=[],t=this.getCurrentRange();if(t){var n=t.getRequiredStatement?t.getRequiredStatement():null;n&&e.push(f(f({},this.parseStatement(n)),{source:"Range"}))}var r=this.getCurrentCanvas();if(r){var i=r.getRequiredStatement?r.getRequiredStatement():null;i&&e.push(f(f({},this.parseStatement(i)),{source:"Canvas"}))}if(this.manifest){var o=this.manifest.getRequiredStatement();o&&o&&e.push(f(f({},this.parseStatement(o)),{source:"Manifest"}))}return e},e.prototype.getMostSpecificRequiredStatement=function(){var e=this.getAllRequiredStatements(),t=e.find((function(e){return"Range"===e.source}));if(t)return t;var n=e.find((function(e){return"Canvas"===e.source}));return n||(e.find((function(e){return"Manifest"===e.source}))||null)},e.prototype.getRequiredStatement=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);var e=this.manifest.getRequiredStatement();return e?this.parseStatement(e):null},e.prototype.parseStatement=function(e){return{label:e.label?e.getLabel():"",value:e.value&&e.value.length?e.getValue():""}},e.prototype._parseMetadataOptions=function(e,t){var n=this.getCurrentSequence(),r=n.getMetadata();if(r&&r.length){var i=new u(n);i.addMetadata(r),t.push(i)}if(e.range){var o=this._getRangeMetadata([],e.range);o=o.reverse(),t=t.concat(o)}if(e.canvases&&e.canvases.length)for(var a=0;a<e.canvases.length;a++){var s=e.canvases[a],l=s.getMetadata();if(l&&l.length){var c=new u(s);c.addMetadata(s.getMetadata()),t.push(c)}for(var p=s.getImages(),f=0;f<p.length;f++){var h=p[f],d=h.getMetadata();if(d&&d.length){var g=new u(h);g.addMetadata(d),t.push(g)}}}return t},e.prototype._getRangeMetadata=function(e,t){var n=t.getMetadata();if(n&&n.length){var r=new u(t);r.addMetadata(n),e.push(r)}else if(t.parentRange)return this._getRangeMetadata(e,t.parentRange);return e},e.prototype.getMultiSelectState=function(){return this._multiSelectState||(this._multiSelectState=new l,this._multiSelectState.ranges=this.getRanges().slice(0),this._multiSelectState.canvases=this.getCurrentSequence().getCanvases().slice(0)),this._multiSelectState},e.prototype.getCurrentRange=function(){return this.rangeId?this.getRangeById(this.rangeId):null},e.prototype.getPosterCanvas=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getPosterCanvas()},e.prototype.getAccompanyingCanvas=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getAccompanyingCanvas()},e.prototype.getPosterImage=function(){var e=this.getPosterCanvas();if(e){var t=e.getContent();if(t&&t.length)return t[0].getBody()[0].id}return null},e.prototype.getAccompanyingCanvasImage=function(){var e=this.getAccompanyingCanvas();if(e){var t=e.getContent();if(t&&t.length)return t[0].getBody()[0].id}return null},e.prototype.getPreviousRange=function(e){var t;if(t=e||this.getCurrentRange()){var n=this.getFlattenedTree();if(n)for(var r=0;r<n.length;r++){var i=n[r];if(i&&i.data.id===t.id){for(;r>0;)return n[--r].data;break}}}return null},e.prototype.getNextRange=function(e){var t;if(t=e||this.getCurrentRange()){var n=this.getFlattenedTree();if(n)for(var r=0;r<n.length;r++){var i=n[r];if(i&&i.data.id===t.id){for(;r<n.length-1;){var o=n[++r];if(o.data.canvases&&o.data.canvases.length)return o.data}break}}}return null},e.prototype.getFlattenedTree=function(e){var t;return(t=e||this.getTree())?this._flattenTree(t,"nodes"):null},e.prototype._flattenTree=function(e,t){var n=this,r=[e];return e[t]&&e[t].length>0?r.concat(e[t].map((function(e){return n._flattenTree(e,t)})).reduce((function(e,t){return e.concat(t)}),[])):r},e.prototype.getRanges=function(){return this.manifest.getAllRanges()},e.prototype.getRangeByPath=function(e){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getRangeByPath(e)},e.prototype.getRangeById=function(e){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getRangeById(e)},e.prototype.getRangeCanvases=function(e){var t=e.getCanvasIds();return this.getCanvasesById(t)},e.prototype.getRelated=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getRelated()},e.prototype.getSearchService=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);var e=this.manifest.getService(c.vl.SEARCH_0);return e||(e=this.manifest.getService(c.vl.SEARCH_1)),e},e.prototype.getSeeAlso=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getSeeAlso()},e.prototype.getSequenceByIndex=function(e){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getSequenceByIndex(e)},e.prototype.getShareServiceUrl=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);var e=null,t=this.manifest.getService(c.vl.SHARE_EXTENSIONS);return t&&(t.length&&(t=t[0]),e=t.__jsonld.shareUrl),e},e.prototype._getSortedTreeNodesByDate=function(e,t){var n=this.getFlattenedTree(t);if(n){var r=n.filter((function(e){return e.data.type===s.TreeNodeType.MANIFEST}));this.createDecadeNodes(e,n),this.sortDecadeNodes(e),this.createYearNodes(e,n),this.sortYearNodes(e),this.createMonthNodes(e,r),this.sortMonthNodes(e),this.createDateNodes(e,r),this.pruneDecadeNodes(e)}},e.prototype.getStartCanvasIndex=function(){return this.getCurrentSequence().getStartCanvasIndex()},e.prototype.getThumbs=function(e,t){return this.getCurrentSequence().getThumbs(e,t)},e.prototype.getTopRanges=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getTopRanges()},e.prototype.getTotalCanvases=function(){return this.getCurrentSequence().getTotalCanvases()},e.prototype.getTrackingLabel=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getTrackingLabel()},e.prototype._getTopRanges=function(){return this.iiifResource.getTopRanges()},e.prototype.getTree=function(e,t){if(void 0===e&&(e=0),void 0===t&&(t=r.NONE),!this.iiifResource)return null;var n;if(this.iiifResource.isCollection())n=this.iiifResource.getDefaultTree();else{var i=this._getTopRanges(),o=new s.TreeNode;if(o.label="root",o.data=this.iiifResource,!i.length)return o;n=i[e].getTree(o)}var a=new s.TreeNode;return t.toString()===r.DATE.toString()&&this.treeHasNavDates(n)?(this._getSortedTreeNodesByDate(a,n),a):n},e.prototype.treeHasNavDates=function(e){var t=this.getFlattenedTree(e);return!!t&&t.some((function(e){return!isNaN(e.navDate)}))},e.prototype.getViewingDirection=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);var e=this.getCurrentSequence().getViewingDirection();return e||(e=this.manifest.getViewingDirection()),e},e.prototype.getViewingHint=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);var e=this.getCurrentSequence().getViewingHint();return e||(e=this.manifest.getViewingHint()),e},e.prototype.hasParentCollection=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return!!this.manifest.parentCollection},e.prototype.hasRelatedPage=function(){var e=this.getRelated();return!!e&&(e.length&&(e=e[0]),"text/html"===e.format)},e.prototype.hasResources=function(){return this.getCurrentCanvas().getResources().length>0},e.prototype.isBottomToTop=function(){var e=this.getViewingDirection();return!!e&&e===c.Pr.BOTTOM_TO_TOP},e.prototype.isCanvasIndexOutOfRange=function(e){return this.getCurrentSequence().isCanvasIndexOutOfRange(e)},e.prototype.isContinuous=function(){var e=this.getViewingHint();return!!e&&e===c.qQ.CONTINUOUS},e.prototype.isFirstCanvas=function(e){return void 0!==e?this.getCurrentSequence().isFirstCanvas(e):this.getCurrentSequence().isFirstCanvas(this.canvasIndex)},e.prototype.isHorizontallyAligned=function(){return this.isLeftToRight()||this.isRightToLeft()},e.prototype.isLastCanvas=function(e){return void 0!==e?this.getCurrentSequence().isLastCanvas(e):this.getCurrentSequence().isLastCanvas(this.canvasIndex)},e.prototype.isLeftToRight=function(){var e=this.getViewingDirection();return!!e&&e===c.Pr.LEFT_TO_RIGHT},e.prototype.isMultiCanvas=function(){return this.getCurrentSequence().isMultiCanvas()},e.prototype.isMultiSequence=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.isMultiSequence()},e.prototype.isPaged=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);var e=this.getViewingHint();return e?e===c.qQ.PAGED:this.manifest.isPagingEnabled()},e.prototype.isPagingAvailable=function(){return this.isPagingEnabled()&&this.getTotalCanvases()>2},e.prototype.isPagingEnabled=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.isPagingEnabled()||this.getCurrentSequence().isPagingEnabled()},e.prototype.isRightToLeft=function(){var e=this.getViewingDirection();return!!e&&e===c.Pr.RIGHT_TO_LEFT},e.prototype.isTopToBottom=function(){var e=this.getViewingDirection();return!!e&&e===c.Pr.TOP_TO_BOTTOM},e.prototype.isTotalCanvasesEven=function(){return this.getCurrentSequence().isTotalCanvasesEven()},e.prototype.isUIEnabled=function(e){if(!this.manifest)throw new Error(p.manifestNotLoaded);var t=this.manifest.getService(c.vl.UI_EXTENSIONS);if(t){var n=t.getProperty("disableUI");if(n&&(-1!==n.indexOf(e)||-1!==n.indexOf(e.toLowerCase())))return!1}return!0},e.prototype.isVerticallyAligned=function(){return this.isTopToBottom()||this.isBottomToTop()},e.prototype.createDateNodes=function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=this.getNodeYear(r),o=this.getNodeMonth(r),a=new s.TreeNode;a.id=r.id,a.label=this.getNodeDisplayDate(r),a.data=r.data,a.data.type=s.TreeNodeType.MANIFEST,a.data.year=i,a.data.month=o;var l=this.getDecadeNode(e,i);if(l){var u=this.getYearNode(l,i);if(u){var c=this.getMonthNode(u,o);c&&c.addNode(a)}}}},e.prototype.createDecadeNodes=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(r.navDate){var i=this.getNodeYear(r),o=Number(i.toString().substr(0,3)+"9");if(!this.getDecadeNode(e,i)){var a=new s.TreeNode;a.label=i+" - "+o,a.navDate=r.navDate,a.data.startYear=i,a.data.endYear=o,e.addNode(a)}}}},e.prototype.createMonthNodes=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(r.navDate){var i=this.getNodeYear(r),o=this.getNodeMonth(r),a=this.getDecadeNode(e,i),l=null;if(a&&(l=this.getYearNode(a,i)),a&&l&&!this.getMonthNode(l,o)){var u=new s.TreeNode;u.label=this.getNodeDisplayMonth(r),u.navDate=r.navDate,u.data.year=i,u.data.month=o,l.addNode(u)}}}},e.prototype.createYearNodes=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(r.navDate){var i=this.getNodeYear(r),o=this.getDecadeNode(e,i);if(o&&!this.getYearNode(o,i)){var a=new s.TreeNode;a.label=i.toString(),a.navDate=r.navDate,a.data.year=i,o.addNode(a)}}}},e.prototype.getDecadeNode=function(e,t){for(var n=0;n<e.nodes.length;n++){var r=e.nodes[n];if(t>=r.data.startYear&&t<=r.data.endYear)return r}return null},e.prototype.getMonthNode=function(e,t){for(var n=0;n<e.nodes.length;n++){var r=e.nodes[n];if(t===this.getNodeMonth(r))return r}return null},e.prototype.getNodeDisplayDate=function(e){return e.navDate.toDateString()},e.prototype.getNodeDisplayMonth=function(e){return["January","February","March","April","May","June","July","August","September","October","November","December"][e.navDate.getMonth()]},e.prototype.getNodeMonth=function(e){return e.navDate.getMonth()},e.prototype.getNodeYear=function(e){return e.navDate.getFullYear()},e.prototype.getYearNode=function(e,t){for(var n=0;n<e.nodes.length;n++){var r=e.nodes[n];if(t===this.getNodeYear(r))return r}return null},e.prototype.pruneDecadeNodes=function(e){for(var t=[],n=0;n<e.nodes.length;n++){var r=e.nodes[n];r.nodes.length||t.push(r)}for(var i=0;i<t.length;i++){var o=t[i],a=e.nodes.indexOf(o);a>-1&&e.nodes.splice(a,1)}},e.prototype.sortDecadeNodes=function(e){e.nodes=e.nodes.sort((function(e,t){return e.data.startYear-t.data.startYear}))},e.prototype.sortMonthNodes=function(e){for(var t=this,n=0;n<e.nodes.length;n++)for(var r=e.nodes[n],i=0;i<r.nodes.length;i++){var o=r.nodes[i];o.nodes=o.nodes.sort((function(e,n){return t.getNodeMonth(e)-t.getNodeMonth(n)}))}},e.prototype.sortYearNodes=function(e){for(var t=this,n=0;n<e.nodes.length;n++){var r=e.nodes[n];r.nodes=r.nodes.sort((function(e,n){return t.getNodeYear(e)-t.getNodeYear(n)}))}},e}(),d=function(){function e(e){this._options=e,this._options.locale=this._options.locale||"en-GB"}return e.prototype.bootstrap=function(e,t){var n=this;return new Promise((function(r,i){e&&t&&(r=e,i=t),s.Utils.loadManifest(n._options.manifestUri).then((function(e){n._loaded(n,e,r,i)})).catch((function(e){i(e)}))}))},e.prototype._loaded=function(e,t,n,r){var i=s.Utils.parseManifest(t,{locale:e._options.locale});if(i){e._options.iiifResource||(e._options.iiifResource=i);var o=e._options.collectionIndex,a=e._options.manifestIndex;if(i.getIIIFResourceType()===c.mU.COLLECTION){var l=i.getManifests(),u=i.getCollections();l.length||void 0!==o||(o=0),void 0!==o&&u&&u.length?i.getCollectionByIndex(o).then((function(t){t||r("Collection index not found"),0===t.getTotalManifests()&&0===a&&t.getTotalCollections()>0?(e._options.collectionIndex=0,e._options.manifestUri=t.id,e.bootstrap(n,r)):void 0!==a&&t.getManifestByIndex(a).then((function(t){e._options.manifest=t;var r=new h(e._options);n(r)}))})):i.getManifestByIndex(e._options.manifestIndex).then((function(t){e._options.manifest=t;var r=new h(e._options);n(r)}))}else{e._options.manifest=i;var p=new h(e._options);n(p)}}else console.error("Unable to load IIIF resource")},e}(),g=n(2084),v=function(){function e(e,t){this.authHoldingPage=null,this.clickThroughService=null,this.externalService=null,this.isProbed=!1,this.isResponseHandled=!1,this.kioskService=null,this.loginService=null,this.logoutService=null,this.probeService=null,this.restrictedService=null,this.tokenService=null,e.externalResource=this,this.dataUri=this._getDataUri(e),this.index=e.index,this.authAPIVersion=t.authApiVersion,this._parseAuthServices(e),this._parseCanvasDimensions(e)}return e.prototype._getImageServiceDescriptor=function(e){for(var t=null,n=0;n<e.length;n++){var r=e[n],i=r.id;i.endsWith("/")||(i+="/"),r.getProfile()&&s.Utils.isImageProfile(r.getProfile())&&(t=i+"info.json")}return t},e.prototype._getDataUri=function(e){var t=e.getContent(),n=e.getImages(),r=null;if(t&&t.length){var i=t[0].getBody();return i.length?(o=i[0].getServices()).length&&(r=this._getImageServiceDescriptor(o))?r:i[0].id:null}if(n&&n.length){var o,a=n[0].getResource();return(o=a.getServices()).length&&(r=this._getImageServiceDescriptor(o))?r:a.id}var s=e.getService(c.vl.IXIF);return s?s.getInfoUri():e.id},e.prototype._parseAuthServices=function(e){if(.9===this.authAPIVersion)this.clickThroughService=s.Utils.getService(e,c.vl.AUTH_0_CLICK_THROUGH),this.loginService=s.Utils.getService(e,c.vl.AUTH_0_LOGIN),this.restrictedService=s.Utils.getService(e,c.vl.AUTH_0_RESTRICTED),this.clickThroughService?(this.logoutService=this.clickThroughService.getService(c.vl.AUTH_0_LOGOUT),this.tokenService=this.clickThroughService.getService(c.vl.AUTH_0_TOKEN)):this.loginService?(this.logoutService=this.loginService.getService(c.vl.AUTH_0_LOGOUT),this.tokenService=this.loginService.getService(c.vl.AUTH_0_TOKEN)):this.restrictedService&&(this.logoutService=this.restrictedService.getService(c.vl.AUTH_0_LOGOUT),this.tokenService=this.restrictedService.getService(c.vl.AUTH_0_TOKEN));else{if(void 0!==e.isCanvas&&e.isCanvas()){var t=e.getContent();if(t&&t.length){var n=t[0].getBody();n&&n.length&&(e=n[0])}}this.clickThroughService=s.Utils.getService(e,c.vl.AUTH_1_CLICK_THROUGH),this.loginService=s.Utils.getService(e,c.vl.AUTH_1_LOGIN),this.externalService=s.Utils.getService(e,c.vl.AUTH_1_EXTERNAL),this.kioskService=s.Utils.getService(e,c.vl.AUTH_1_KIOSK),this.clickThroughService?(this.logoutService=this.clickThroughService.getService(c.vl.AUTH_1_LOGOUT),this.tokenService=this.clickThroughService.getService(c.vl.AUTH_1_TOKEN),this.probeService=this.clickThroughService.getService(c.vl.AUTH_1_PROBE)):this.loginService?(this.logoutService=this.loginService.getService(c.vl.AUTH_1_LOGOUT),this.tokenService=this.loginService.getService(c.vl.AUTH_1_TOKEN),this.probeService=s.Utils.getService(e,c.vl.AUTH_1_PROBE),this.probeService||(this.probeService=this.loginService.getService(c.vl.AUTH_1_PROBE))):this.externalService?(this.logoutService=this.externalService.getService(c.vl.AUTH_1_LOGOUT),this.tokenService=this.externalService.getService(c.vl.AUTH_1_TOKEN),this.probeService=s.Utils.getService(e,c.vl.AUTH_1_PROBE),this.probeService||(this.probeService=this.externalService.getService(c.vl.AUTH_1_PROBE))):this.kioskService&&(this.logoutService=this.kioskService.getService(c.vl.AUTH_1_LOGOUT),this.tokenService=this.kioskService.getService(c.vl.AUTH_1_TOKEN),this.probeService=s.Utils.getService(e,c.vl.AUTH_1_PROBE),this.probeService||(this.probeService=this.kioskService.getService(c.vl.AUTH_1_PROBE)))}},e.prototype._parseCanvasDimensions=function(e){var t=e.getImages();if(t&&t.length){var n=t[0].getResource();this.width=n.getWidth(),this.height=n.getHeight()}else if((t=e.getContent()).length){var r=t[0].getBody();r.length&&(this.width=r[0].getWidth(),this.height=r[0].getHeight())}},e.prototype._parseDescriptorDimensions=function(e){void 0!==e.width&&(this.width=e.width),void 0!==e.height&&(this.height=e.height)},e.prototype.isAccessControlled=function(){return!!(this.clickThroughService||this.loginService||this.externalService||this.kioskService||this.probeService)},e.prototype.hasServiceDescriptor=function(){return!!this.dataUri&&this.dataUri.endsWith("info.json")},e.prototype.getData=function(e){var t=this;return t.data={},new Promise((function(n,r){if(t.dataUri)if(t.probeService){t.isProbed=!0;var i=new XMLHttpRequest;i.open("GET",t.probeService.id,!0),i.withCredentials=!1,e&&i.setRequestHeader("Authorization","Bearer "+e.accessToken),i.onload=function(){var e=JSON.parse(i.responseText),r=unescape(e.contentLocation);t.status=i.status,r!==t.dataUri&&(t.status=g.MOVED_TEMPORARILY),n(t)},i.onerror=function(){t.status=i.status,n(t)},i.send()}else{var o="GET";if(!t.hasServiceDescriptor()){if(!t.isAccessControlled())return t.status=g.OK,void n(t);o="HEAD"}var a=new XMLHttpRequest;a.open(o,t.dataUri,!0),a.withCredentials=!1,e&&a.setRequestHeader("Authorization","Bearer "+e.accessToken),a.onload=function(){if(a.responseText){var e=JSON.parse(a.responseText),r=a.status,i=unescape(e["@id"]||e.id);t.data=e,t._parseAuthServices(t.data),t._parseDescriptorDimensions(t.data),i.endsWith("/info.json")&&(i=i.substr(0,i.lastIndexOf("/")));var o=t.dataUri;o&&o.endsWith("/info.json")&&(o=o.substr(0,o.lastIndexOf("/"))),r===g.OK&&i!==o&&t.loginService?t.status=g.MOVED_TEMPORARILY:t.status=r,n(t)}else t.status=a.status||g.OK,n(t)},a.onerror=function(){t.status=a.status,a.responseText&&t._parseAuthServices(JSON.parse(a.responseText)),n(t)},a.send()}else r("There is no dataUri to fetch")}))},e}(),_=function(){function e(e){this.labels=e}return e.prototype.format=function(e){return-1!=e.indexOf("<a")?e:'<a href="'+e+'">'+(this.labels[e]?this.labels[e]:e)+"</a>"},e}(),y=function(e){return new d(e).bootstrap()}},3911:(e,t)=>{"use strict";var n,r,i,o,a,s,l,u,c;(c=t.rj||(t.rj={})).BOOKMARKING="oa:bookmarking",c.CLASSIFYING="oa:classifying",c.COMMENTING="oa:commenting",c.DESCRIBING="oa:describing",c.EDITING="oa:editing",c.HIGHLIGHTING="oa:highlighting",c.IDENTIFYING="oa:identifying",c.LINKING="oa:linking",c.MODERATING="oa:moderating",c.PAINTING="sc:painting",c.QUESTIONING="oa:questioning",c.REPLYING="oa:replying",c.TAGGING="oa:tagging",c.TRANSCRIBING="oad:transcribing",(u=t.cg||(t.cg={})).AUTO_ADVANCE="auto-advance",u.CONTINUOUS="continuous",u.FACING_PAGES="facing-pages",u.HIDDEN="hidden",u.INDIVIDUALS="individuals",u.MULTI_PART="multi-part",u.NO_NAV="no-nav",u.NON_PAGED="non-paged",u.PAGED="paged",u.REPEAT="repeat",u.SEQUENCE="sequence",u.THUMBNAIL_NAV="thumbnail-nav",u.TOGETHER="together",u.UNORDERED="unordered",(l=t.Hd||(t.Hd={})).CANVAS="canvas",l.CHOICE="choice",l.OA_CHOICE="oa:choice",l.CONTENT_AS_TEXT="contentastext",l.DATASET="dataset",l.DOCUMENT="document",l.IMAGE="image",l.MODEL="model",l.MOVING_IMAGE="movingimage",l.PDF="pdf",l.PHYSICAL_OBJECT="physicalobject",l.SOUND="sound",l.TEXT="text",l.TEXTUALBODY="textualbody",l.VIDEO="video",(s=t.mU||(t.mU={})).ANNOTATION="annotation",s.CANVAS="canvas",s.COLLECTION="collection",s.MANIFEST="manifest",s.RANGE="range",s.SEQUENCE="sequence",(a=t.DD||(t.DD={})).AUDIO_MP4="audio/mp4",a.CORTO="application/corto",a.DICOM="application/dicom",a.DRACO="application/draco",a.EPUB="application/epub+zip",a.GIRDER="image/vnd.kitware.girder",a.GLB="model/gltf-binary",a.GLTF="model/gltf+json",a.IIIF_PRESENTATION_2='application/ld+json;profile="http://iiif.io/api/presentation/2/context.json"',a.IIIF_PRESENTATION_3='application/ld+json;profile="http://iiif.io/api/presentation/3/context.json"',a.JPG="image/jpeg",a.M3U8="application/vnd.apple.mpegurl",a.MP3="audio/mp3",a.MPEG_DASH="application/dash+xml",a.OBJ="text/plain",a.OPF="application/oebps-package+xml",a.PDF="application/pdf",a.PLY="application/ply",a.THREEJS="application/vnd.threejs+json",a.USDZ="model/vnd.usd+zip",a.VIDEO_MP4="video/mp4",a.WAV="audio/wav",a.WEBM="video/webm",(o=t.F4||(t.F4={})).DOC="application/msword",o.DOCX="application/vnd.openxmlformats-officedocument.wordprocessingml.document",o.PDF="application/pdf",(i=t.vl||(t.vl={})).IMAGE_0_COMPLIANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/compliance.html#level0",i.IMAGE_0_COMPLIANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/compliance.html#level1",i.IMAGE_0_COMPLIANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/compliance.html#level2",i.IMAGE_0_CONFORMANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/conformance.html#level0",i.IMAGE_0_CONFORMANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/conformance.html#level1",i.IMAGE_0_CONFORMANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/conformance.html#level2",i.IMAGE_1_COMPLIANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",i.IMAGE_1_COMPLIANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",i.IMAGE_1_COMPLIANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",i.IMAGE_1_CONFORMANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",i.IMAGE_1_CONFORMANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",i.IMAGE_1_CONFORMANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",i.IMAGE_1_LEVEL_0="http://iiif.io/api/image/1/level0.json",i.IMAGE_1_PROFILE_LEVEL_0="http://iiif.io/api/image/1/profiles/level0.json",i.IMAGE_1_LEVEL_1="http://iiif.io/api/image/1/level1.json",i.IMAGE_1_PROFILE_LEVEL_1="http://iiif.io/api/image/1/profiles/level1.json",i.IMAGE_1_LEVEL_2="http://iiif.io/api/image/1/level2.json",i.IMAGE_1_PROFILE_LEVEL_2="http://iiif.io/api/image/1/profiles/level2.json",i.IMAGE_2_LEVEL_0="http://iiif.io/api/image/2/level0.json",i.IMAGE_2_PROFILE_LEVEL_0="http://iiif.io/api/image/2/profiles/level0.json",i.IMAGE_2_LEVEL_1="http://iiif.io/api/image/2/level1.json",i.IMAGE_2_PROFILE_LEVEL_1="http://iiif.io/api/image/2/profiles/level1.json",i.IMAGE_2_LEVEL_2="http://iiif.io/api/image/2/level2.json",i.IMAGE_2_PROFILE_LEVEL_2="http://iiif.io/api/image/2/profiles/level2.json",i.AUTH_0_CLICK_THROUGH="http://iiif.io/api/auth/0/login/clickthrough",i.AUTH_0_LOGIN="http://iiif.io/api/auth/0/login",i.AUTH_0_LOGOUT="http://iiif.io/api/auth/0/logout",i.AUTH_0_RESTRICTED="http://iiif.io/api/auth/0/login/restricted",i.AUTH_0_TOKEN="http://iiif.io/api/auth/0/token",i.AUTH_1_CLICK_THROUGH="http://iiif.io/api/auth/1/clickthrough",i.AUTH_1_EXTERNAL="http://iiif.io/api/auth/1/external",i.AUTH_1_KIOSK="http://iiif.io/api/auth/1/kiosk",i.AUTH_1_LOGIN="http://iiif.io/api/auth/1/login",i.AUTH_1_LOGOUT="http://iiif.io/api/auth/1/logout",i.AUTH_1_PROBE="http://iiif.io/api/auth/1/probe",i.AUTH_1_TOKEN="http://iiif.io/api/auth/1/token",i.SEARCH_0="http://iiif.io/api/search/0/search",i.SEARCH_0_AUTO_COMPLETE="http://iiif.io/api/search/0/autocomplete",i.SEARCH_1="http://iiif.io/api/search/1/search",i.SEARCH_1_AUTO_COMPLETE="http://iiif.io/api/search/1/autocomplete",i.TRACKING_EXTENSIONS="http://universalviewer.io/tracking-extensions-profile",i.UI_EXTENSIONS="http://universalviewer.io/ui-extensions-profile",i.PRINT_EXTENSIONS="http://universalviewer.io/print-extensions-profile",i.SHARE_EXTENSIONS="http://universalviewer.io/share-extensions-profile",i.DOWNLOAD_EXTENSIONS="http://universalviewer.io/download-extensions-profile",i.OTHER_MANIFESTATIONS="http://iiif.io/api/otherManifestations.json",i.IXIF="http://wellcomelibrary.org/ld/ixif/0/alpha.json",(r=t.Pr||(t.Pr={})).BOTTOM_TO_TOP="bottom-to-top",r.LEFT_TO_RIGHT="left-to-right",r.RIGHT_TO_LEFT="right-to-left",r.TOP_TO_BOTTOM="top-to-bottom",(n=t.qQ||(t.qQ={})).CONTINUOUS="continuous",n.INDIVIDUALS="individuals",n.NON_PAGED="non-paged",n.PAGED="paged",n.TOP="top"},3645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);r&&i[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},4015:e=>{"use strict";function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e.exports=function(e){var n,r,i=(r=4,function(e){if(Array.isArray(e))return e}(n=e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(n,r)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[1],a=i[3];if(!a)return o;if("function"==typeof btoa){var s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),u="/*# ".concat(l," */"),c=a.sources.map((function(e){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(e," */")}));return[o].concat(c).concat([u]).join("\n")}return[o].join("\n")}},3386:(e,t,n)=>{var r,i,o,a=n(9755);r=function(e,t){"use strict";var n=!1===t;if(!(t=t||e.jQuery)||!t.fn)throw"JsViews requires jQuery";var r,i,o,a,s,l,u,c,p,f,h,d,g,v,_,y,m,E,I,T,A,b,O,C,N="v0.9.83",L=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,S=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*[.^]|\s*$|[^([])|[)\]])([([]?))|(\s+)/g,R=/[ \t]*(\r\n|\n|\r)/g,w=/\\(['"])/g,P=/['"\\]/g,x=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$_\.]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,M=/^if\s/,U=/<(\w+)[>\s]/,D=/[\x00`><\"'&=]/,j=/^on[A-Z]|^convert(Back)?$/,V=/^\#\d+_`[\s\S]*\/\d+_`$/,k=/[\x00`><"'&=]/g,G=0,F={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;","=":"&#61;"},H="html",B="object",q="data-jsv-tmpl",Y="jsvTmpl",K="For #index in nested block use #getIndex().",Q={},W=e.jsrender,X=W&&t&&!t.render,z={template:{compile:function e(n,r,i,o){function s(r){var a,s;if(""+r===r||r.nodeType>0&&(l=r)){if(!l)if(/^\.\/[^\\:*?"<>]*$/.test(r))(s=f[n=n||r])?r=s:l=document.getElementById(r);else if(t.fn&&!v.rTmpl.test(r))try{l=t(document).find(r)[0]}catch(e){}l&&(o?r=l.innerHTML:((a=l.getAttribute(q))?a!==Y?(r=f[a],delete f[a]):t.fn&&(r=t.data(l).jsvTmpl):(n=n||(t.fn?Y:r),r=e(n,l.innerHTML,i,o)),r.tmplName=n=n||a,n!==Y&&(f[n]=r),l.setAttribute(q,n),t.fn&&t.data(l,Y,r))),l=void 0}else r.fn||(r=void 0);return r}var l,u,c=r=r||"";if(0===o&&(o=void 0,c=s(c)),(o=o||(r.markup?r:{})).tmplName=n,i&&(o._parentTmpl=i),!c&&r.markup&&(c=s(r.markup))&&c.fn&&(c=c.markup),void 0!==c)return c.fn||r.fn?c.fn&&(u=c):(r=ce(c,o),me(c.replace(P,"\\$&"),r)),u||(u=re((function(){return u.render.apply(u,arguments)}),r),function(e){var t,n,r;for(t in z)e[n=t+"s"]&&(r=e[n],e[n]={},a[n](r,e))}(u)),n&&!i&&n!==Y&&(Q[n]=u),u}},tag:{compile:function(e,t,n){var r,i,o,a=new v._tg;function s(){this._={inline:!0,unlinked:!0},this.tagName=e}if(c(t)?t={depends:t.depends,render:t}:""+t===t&&(t={template:t}),i=t.baseTag)for(o in t.flow=!!t.flow,t.baseTag=i=""+i===i?n&&n.tags[i]||g[i]:i,a=re(a,i),t)a[o]=J(i[o],t[o]);else a=re(a,t);return void 0!==(r=a.template)&&(a.template=""+r===r?f[r]||f(r):r),!1!==a.init&&((s.prototype=a).constructor=a._ctr=s),n&&(a._parentTmpl=n),a}},viewModel:{compile:function(e,n){var r,i,o=this,a=n.getters,s=n.extend,l=n.id,c=t.extend({_is:e||"unnamed",unmap:I,merge:E},s),f="",h="",d=a?a.length:0,g=t.observable,v={};function _(e){i.apply(this,e)}function y(){return new _(arguments)}function m(e,t){var n,r,i,s,l,u=a.length;for(n=0;n<u;n++)r=void 0,(s=a[n])+""!==s&&(s=(r=s).getter),void 0===(l=e[s])&&r&&void 0!==(i=r.defaultVal)&&(l=le(i,e)),t(l,r&&o[r.type],s)}function E(e){e=e+""===e?JSON.parse(e):e;var t,n,r,i,o,a,s,c,f,h,d=this;if(p(d)){for(c={},h=[],r=e.length,i=d.length,t=0;t<r;t++){for(f=e[t],s=!1,n=0;n<i&&!s;n++)c[n]||(a=d[n],l&&(c[n]=s=l+""===l?f[l]&&(v[l]?a[l]():a[l])===f[l]:l(a,f)));s?(a.merge(f),h.push(a)):h.push(y.map(f))}g?g(d).refresh(h,!0):d.splice.apply(d,[0,d.length].concat(h))}else for(o in m(e,(function(e,t,n){t?d[n]().merge(e):d[n](e)})),e)o===u||v[o]||(d[o]=e[o])}function I(){var e,n,r,i,s,l,c=this;if(p(c))return ue(c);for(e={},i=a.length,r=0;r<i;r++)s=void 0,(n=a[r])+""!==n&&(n=(s=n).getter),l=c[n](),e[n]=s&&l&&o[s.type]?p(l)?ue(l):l.unmap():l;for(n in c)"_is"===n||v[n]||n===u||"_"===n.charAt(0)&&v[n.slice(1)]||t.isFunction(c[n])||(e[n]=c[n]);return e}for(_.prototype=c,r=0;r<d;r++)!function(e){e=e.getter||e,v[e]=r+1;var t="_"+e;f+=(f?",":"")+e,h+="this."+t+" = "+e+";\n",c[e]=c[e]||function(n){if(!arguments.length)return this[t];g?g(this).setProperty(e,n):this[t]=n},g&&(c[e].set=c[e].set||function(e){this[t]=e})}(a[r]);return(i=new Function(f,h.slice(0,-1))).prototype=c,c.constructor=i,y.map=function(t){var n,r,i,o=t=t+""===t?JSON.parse(t):t,a=[];if(p(t)){for(r=(t=t||[]).length,n=0;n<r;n++)a.push(this.map(t[n]));return a._is=e,a.unmap=I,a.merge=E,a}if(t)for(i in m(t,(function(e,t){t&&(e=t.map(e)),a.push(e)})),o=this.apply(this,a),t)i===u||v[i]||(o[i]=t[i]);return o},y.getters=a,y.extend=s,y.id=l,y}},helper:{},converter:{}};function $(e,t){return function(){var n,r=this,i=r.base;return r.base=e,n=t.apply(r,arguments),r.base=i,n}}function J(e,t){return c(t)&&((t=$(e?e._d?e:$(te,e):te,t))._d=1),t}function Z(e,t){for(var n in t.props)j.test(n)&&(e[n]=J(e[n],t.props[n]))}function ee(e){return e}function te(){return""}function ne(e){this.name=(t.link?"JsViews":"JsRender")+" Error",this.message=e||this.name}function re(e,t){for(var n in t)e[n]=t[n];return e}function ie(e,t,n){return e?p(e)?ie.apply(a,e):(_.delimiters=[e,t,b=n?n.charAt(0):b],E=e.charAt(0),I=e.charAt(1),T=t.charAt(0),A=t.charAt(1),e="\\"+E+"(\\"+b+")?\\"+I,t="\\"+T+"\\"+A,i="(?:(\\w+(?=[\\/\\s\\"+T+"]))|(\\w+)?(:)|(>)|(\\*))\\s*((?:[^\\"+T+"]|\\"+T+"(?!\\"+A+"))*?)",v.rTag="(?:"+i+")",i=new RegExp("(?:"+e+i+"(\\/)?|\\"+E+"(\\"+b+")?\\"+I+"(?:(?:\\/(\\w+))\\s*|!--[\\s\\S]*?--))"+t,"g"),v.rTmpl=new RegExp("<.*>|([^\\\\]|^)[{}]|"+e+".*"+t),m):_.delimiters}function oe(){var e=this.get("item");return e?e.index:void 0}function ae(){return this.index}function se(e,t,n,r,i,o,a,s){var l,u,c,p=this,f="array"===t;p.content=s,p.views=f?[]:{},p.parent=n,p.type=t||"top",p.data=r,p.tmpl=i,c=p._={key:0,useKey:f?0:1,id:""+G++,onRender:a,bnds:{}},p.linked=!!a,n?(l=n.views,(u=n._).useKey?(l[c.key="_"+u.useKey++]=p,p.index=K,p.getIndex=oe):l.length===(c.key=p.index=o)?l.push(p):l.splice(o,0,p),p.ctx=e||n.ctx):p.ctx=e}function le(e,n){return t.isFunction(e)?e.call(n):e}function ue(e){var t,n=[],r=e.length;for(t=0;t<r;t++)n.push(e[t].unmap());return n}function ce(e,n){var r,i=y._wm||{},o=re({tmpls:[],links:{},bnds:[],_is:"template",render:de},n);return o.markup=e,n.htmlTag||(r=U.exec(e),o.htmlTag=r?r[1].toLowerCase():""),(r=i[o.htmlTag])&&r!==i.div&&(o.markup=t.trim(o.markup)),o}function pe(e,t){var n=e+"s";a[n]=function r(i,o,s){var l,u,c,p;if(i&&typeof i===B&&!i.nodeType&&!i.markup&&!i.getTgt&&!("viewModel"===e&&i.getters||i.extend)){for(c in i)r(c,i[c],o);return o||a}return void 0===o&&(o=i,i=void 0),i&&""+i!==i&&(s=o,o=i,i=void 0),p=s?"viewModel"===e?s:s[n]=s[n]||{}:r,u=t.compile,null===o?i&&delete p[i]:(o=u?u.call(p,i,o,s,0):o,i&&(p[i]=o)),u&&o&&(o._is=e),o&&(l=v.onStore[e])&&l(i,o,u),o}}function fe(e){m[e]=function(t){return arguments.length?(_[e]=t,m):_[e]}}function he(e){function t(t,n){this.tgt=e.getTgt(t,n)}return c(e)&&(e={getTgt:e}),e.baseMap&&(e=re(re({},e.baseMap),e)),e.map=function(e,n){return new t(e,n)},e}function de(e,t,n,r,i,a){var s,l,u,c,f,h,d,g,_=r,m="";if(!0===t?(n=t,t=void 0):typeof t!==B&&(t=void 0),(u=this.tag)?(f=this,c=(_=_||f.view).getTmpl(u.template||f.tmpl),arguments.length||(e=_)):c=this,c){if(!r&&e&&"view"===e._is&&(_=e),_&&e===_&&(e=_.data),h=!_,C=C||h,_||((t=t||{}).root=e),!C||y.useViews||c.useViews||_&&_!==o)m=ge(c,e,t,n,_,i,a,u);else{if(_?(d=_.data,g=_.index,_.index=K):((_=o).data=e,_.ctx=t),p(e)&&!n)for(s=0,l=e.length;s<l;s++)_.index=s,_.data=e[s],m+=c.fn(e[s],_,v);else _.data=e,m+=c.fn(e,_,v);_.data=d,_.index=g}h&&(C=void 0)}return m}function ge(e,t,n,r,i,o,a,s){function l(e){(I=re({},n))[E]=e}var u,c,f,h,d,g,_,y,m,E,I,T,A="";if(s&&(m=s.tagName,T=s.tagCtx,n=n?Oe(n,s.ctx):s.ctx,e===i.content?_=e!==i.ctx._wrp?i.ctx._wrp:void 0:e!==T.content?e===s.template?(_=T.tmpl,n._wrp=T.content):_=T.content||i.content:_=i.content,!1===T.props.link&&((n=n||{}).link=!1),(E=T.props.itemVar)&&("~"!==E.charAt(0)&&ye("Use itemVar='~myItem'"),E=E.slice(1))),i&&(a=a||i._.onRender,n=Oe(n,i.ctx)),!0===o&&(g=!0,o=0),a&&(n&&!1===n.link||s&&s._.noVws)&&(a=void 0),y=a,!0===a&&(y=void 0,a=i._.onRender),n=e.helpers?Oe(e.helpers,n):n,I=n,p(t)&&!r)for(f=g?i:void 0!==o&&i||new se(n,"array",i,t,e,o,a,_),i&&i._.useKey&&(f._.bnd=!s||s._.bnd&&s),E&&(f.it=E),E=f.it,u=0,c=t.length;u<c;u++)E&&l(t[u]),h=new se(I,"item",f,t[u],e,(o||0)+u,a,f.content),d=e.fn(t[u],h,v),A+=f._.onRender?f._.onRender(d,h):d;else E&&l(t),f=g?i:new se(I,m||"data",i,t,e,o,a,_),s&&!s.flow&&(f.tag=s,s.view=f),A+=e.fn(t,f,v);return y?y(A,f):A}function ve(e,t,n){var r=void 0!==n?c(n)?n.call(t.data,e,t):n||"":"{Error: "+e.message+"}";return _.onError&&void 0!==(n=_.onError.call(t.data,e,n&&r,t))&&(r=n),t&&!t.linkCtx?h.html(r):r}function _e(e){throw new v.Err(e)}function ye(e){_e("Syntax error\n"+e)}function me(e,t,n,r,o){function a(t){(t-=g)&&y.push(e.substr(g,t).replace(R,"\\n"))}function s(t,n){t&&(t+="}}",ye((n?"{{"+n+"}} block has {{/"+t+" without {{"+t:"Unmatched or missing {{/"+t)+", in template:\n"+e))}var l,u,c,p,f,h=_.allowCode||t&&t.allowCode||!0===m.allowCode,d=[],g=0,v=[],y=d,I=[,,d];if(h&&t._is&&(t.allowCode=h),n&&(void 0!==r&&(e=e.slice(0,-r.length-2)+T),e=E+e+A),s(v[0]&&v[0][2].pop()[0]),e.replace(i,(function(i,l,u,f,d,_,m,E,T,A,b,O){(m&&l||T&&!u||E&&":"===E.slice(-1)||A)&&ye(i),_&&(d=":",f=H);var C=(l||n)&&[[]],N="",L="",S="",P="",U="",D="",V="",k="",G=!(T=T||n&&!o)&&!d;u=u||(E=E||"#data",d),a(O),g=O+i.length,m?h&&y.push(["*","\n"+E.replace(/^:/,"ret+= ").replace(w,"$1")+";\n"]):u?("else"===u&&(M.test(E)&&ye('for "{{else if expr}}" use "{{else expr}}"'),C=I[7]&&[[]],I[8]=e.substring(I[8],O),I=v.pop(),y=I[2],G=!0),E&&Ae(E.replace(R," "),C,t).replace(x,(function(e,t,n,r,i,o,a,s){return r="'"+i+"':",a?(L+=o+",",P+="'"+s+"',"):n?(S+=r+"j._cp("+o+',"'+s+'",view),',D+=r+"'"+s+"',"):t?V+=o:("trigger"===i&&(k+=o),N+=r+o+",",U+=r+"'"+s+"',",p=p||j.test(i)),""})).slice(0,-1),C&&C[0]&&C.pop(),c=[u,f||!!r||p||"",G&&[],Ie(P||(":"===u?"'#data',":""),U,D),Ie(L||(":"===u?"data,":""),N,S),V,k,C||0],y.push(c),G&&(v.push(I),(I=c)[8]=g)):b&&(s(b!==I[0]&&"else"!==I[0]&&b,I[0]),I[8]=e.substring(I[8],O),I=v.pop()),s(!I&&b),y=I[2]})),a(e.length),(g=d[d.length-1])&&s(""+g!==g&&+g[8]===g[8]&&g[0]),n){for(u=be(d,e,n),f=[],l=d.length;l--;)f.unshift(d[l][7]);Ee(u,f)}else u=be(d,t);return u}function Ee(e,t){var n,r,i=0,o=t.length;for(e.deps=[],e.paths=[];i<o;i++)for(n in e.paths.push(r=t[i]),r)"_jsvto"!==n&&r.hasOwnProperty(n)&&r[n].length&&!r[n].skp&&(e.deps=e.deps.concat(r[n]))}function Ie(e,t,n){return[e.slice(0,-1),t.slice(0,-1),n.slice(0,-1)]}function Te(e,t){return"\n\t"+(t?t+":{":"")+"args:["+e[0]+"]"+(e[1]||!t?",\n\tprops:{"+e[1]+"}":"")+(e[2]?",\n\tctx:{"+e[2]+"}":"")}function Ae(e,t,n){var r,i,a,s,l,u=t&&t[0],c={bd:u},p={0:c},f=0,h=(n?n.links:u&&(u.links=u.links||{}))||o.tmpl.links,d=0,g={},v={},_=(e+(n?" ":"")).replace(S,(function(o,_,y,m,E,A,b,O,C,N,S,R,w,P,x,M,U,D,j,V){m&&!O&&(E=m+E),A=A||"",y=y||_||R,E=E||C;var k,G,F,H,B,q=")";if("["===(N=N||U||"")&&(N="[j._sq(",q=")]"),!b||l||s){if(u&&M&&!l&&!s&&(!r||a||i)&&(k=v[d-1],V.length-1>j-(k||0))){if(k=V.slice(k,j+o.length),!0!==G)if(F=i||p[d-1].bd,(H=F[F.length-1])&&H.prm){for(;H.sb&&H.sb.prm;)H=H.sb;B=H.sb={path:H.sb,bnd:H.bnd}}else F.push(B={path:F.pop()});(G=h[M=I+":"+k+" onerror=''"+T])||(h[M]=!0,h[M]=G=me(M,n,!0)),!0!==G&&B&&(B._jsv=G,B.prm=c.bd,B.bnd=B.bnd||B.path&&B.path.indexOf("^")>=0)}return l?(l=!w)?o:R+'"':s?(s=!P)?o:R+'"':(y?(v[d]=j++,c=p[++d]={bd:[]},y):"")+(D?d?"":(f=V.slice(f,j),(r?(r=a=i=!1,"\b"):"\b,")+f+(f=j+o.length,u&&t.push(c.bd=[]),"\b")):O?(d&&ye(e),u&&t.pop(),r=E,a=m,f=j+o.length,u&&((u=c.bd=t[r]=[]).skp=!m),E+":"):E?E.split("^").join(".").replace(L,(function(e,n,o,a,s,l,p,f){var h="."===o;if(o&&(E=E.slice(n.length),/^\.?constructor$/.test(f||E)&&ye(e),h||(e=(a?'view.hlp("'+a+'")':s?"view":"data")+(f?(l?"."+l:a||s?"":"."+o)+(p||""):(f=a?"":s?l||"":o,"")),e=n+("view.data"===(e+=f?"."+f:"").slice(0,9)?e.slice(5):e)),u)){if(F="linkTo"===r?i=t._jsvto=t._jsvto||[]:c.bd,H=h&&F[F.length-1]){if(H._jsv){for(;H.sb;)H=H.sb;H.bnd&&(E="^"+E.slice(1)),H.sb=E,H.bnd=H.bnd||"^"===E.charAt(0)}}else F.push(E);v[d]=j+(h?1:0)}return e}))+(N?(c=p[++d]={bd:[]},g[d]=q,N):A):A||(x?(x=g[d]||x,g[d]=!1,c=p[--d],x+(N?(c=p[++d],g[d]=q,N):"")):S?(g[d]||ye(e),","):_?"":(l=w,s=P,'"')))}ye(e)}));return!d&&_||ye(e)}function be(e,t,n){var r,i,o,a,s,l,u,c,p,f,h,d,v,m,E,I,T,A,b,O,C,N,L,S,P,x,M,U,D,j=0,V=y.useViews||t.useViews||t.tags||t.templates||t.helpers||t.converters,k="",G={},F=e.length;for(""+t===t?(T=n?'data-link="'+t.replace(R," ").slice(1,-1)+'"':t,t=0):(T=t.tmplName||"unnamed",t.allowCode&&(G.allowCode=!0),t.debug&&(G.debug=!0),f=t.bnds,I=t.tmpls),r=0;r<F;r++)if(""+(i=e[r])===i)k+='\n+"'+i+'"';else if("*"===(o=i[0]))k+=";\n"+i[1]+"\nret=ret";else{if(a=i[1],O=!n&&i[2],s=Te(i[3],"params")+"},"+Te(d=i[4]),M=i[5],D=i[6],C=i[8]&&i[8].replace(w,"$1"),(S="else"===o)?h&&h.push(i[7]):(j=0,f&&(h=i[7])&&(h=[h],j=f.push(1))),V=V||d[1]||d[2]||h||/view.(?!index)/.test(d[0]),(P=":"===o)?a&&(o=a===H?">":a+o):(O&&((A=ce(C,G)).tmplName=T+"/"+o,A.useViews=A.useViews||V,be(O,A),V=A.useViews,I.push(A)),S||(b=o,V=V||o&&(!g[o]||!g[o].flow),L=k,k=""),N=(N=e[r+1])&&"else"===N[0]),U=M?";\ntry{\nret+=":"\n+",v="",m="",P&&(h||D||a&&a!==H)){if((x=new Function("data,view,j,u"," // "+T+" "+j+" "+o+"\nreturn {"+s+"};"))._er=M,x._tag=o,n)return x;Ee(x,h),p=!0,v=(E='c("'+a+'",view,')+j+",",m=")"}if(k+=P?(n?(M?"try{\n":"")+"return ":U)+(p?(p=void 0,V=c=!0,E+(h?(f[j-1]=x,j):"{"+s+"}")+")"):">"===o?(u=!0,"h("+d[0]+")"):"((v="+d[0]+")!=null?v:"+(n?"null)":'"")')):(l=!0,"\n{view:view,tmpl:"+(O?I.length:"0")+","+s+"},"),b&&!N){if(k="["+k.slice(0,-1)+"]",E='t("'+b+'",view,this,',n||h){if((k=new Function("data,view,j,u"," // "+T+" "+j+" "+b+"\nreturn "+k+";"))._er=M,k._tag=b,h&&Ee(f[j-1]=k,h),n)return k;v=E+j+",undefined,",m=")"}k=L+U+E+(j||k)+")",h=0,b=0}M&&(V=!0,k+=";\n}catch(e){ret"+(n?"urn ":"+=")+v+"j._err(e,view,"+M+")"+m+";}"+(n?"":"ret=ret"))}k="// "+T+"\nvar v"+(l?",t=j._tag":"")+(c?",c=j._cnvt":"")+(u?",h=j._html":"")+(n?";\n":',ret=""\n')+(G.debug?"debugger;":"")+k+(n?"\n":";\nreturn ret;"),!1!==_.debugMode&&(k="try {\n"+k+"\n}catch(e){\nreturn j._err(e, view);\n}");try{k=new Function("data,view,j,u",k)}catch(e){ye("Compiled template code:\n\n"+k+'\n: "'+e.message+'"')}return t&&(t.fn=k,t.useViews=!!V),k}function Oe(e,t){return e&&e!==t?t?re(re({},t),e):e:t&&re({},t)}function Ce(e){return F[e]||(F[e]="&#"+e.charCodeAt(0)+";")}function Ne(e,n,r){var i=this.jquery&&(this[0]||_e("Unknown template")),o=i.getAttribute(q);return de.call(o?t.data(i).jsvTmpl:f(i),e,n,r)}function Le(e){return null!=e?D.test(e)&&(""+e).replace(k,Ce)||e:""}if(a={jsviews:N,sub:{View:se,Err:ne,tmplFn:me,parse:Ae,extend:re,extendCtx:Oe,syntaxErr:ye,onStore:{},addSetting:fe,settings:{allowCode:!1},advSet:te,_ths:Z,_tg:function(){},_cnvt:function(e,t,n,r){var i,o,a="number"==typeof n&&t.tmpl.bnds[n-1],s=t.linkCtx;return void 0!==r?n=r={props:{},args:[r]}:a&&(n=a(t.data,t,v)),o=n.args[0],(e||a)&&((i=s&&s.tag)||(i=re(new v._tg,{_:{inline:!s,bnd:a,unlinked:!0},tagName:":",cvt:e,flow:!0,tagCtx:n}),s&&(s.tag=i,i.linkCtx=s),n.ctx=Oe(n.ctx,(s?s.view:t).ctx)),i._er=r&&o,Z(i,n),n.view=t,i.ctx=n.ctx||i.ctx||{},n.ctx=void 0,o=i.cvtArgs("true"!==e&&e)[0],o=a&&t._.onRender?t._.onRender(o,t,i):o),null!=o?o:""},_tag:function(e,n,r,i,a,s){var l,u,c,p,f,d,g,_,y,m,E,I,T,A,b,O,C,N,L="",S=(n=n||o).linkCtx||0,R=n.ctx,w=r||n.tmpl,P="number"==typeof i&&n.tmpl.bnds[i-1];for("tag"===e._is?(e=(l=e).tagName,i=l.tagCtxs,l.template):(u=n.getRsc("tags",e)||_e("Unknown tag: {{"+e+"}} ")).template,void 0!==s?(L+=s,i=s=[{props:{},args:[]}]):P&&(i=P(n.data,n,v)),g=i.length,d=0;d<g;d++)y=i[d],(!S||!S.tag||d&&!S.tag._.inline||l._er)&&((E=w.tmpls&&y.tmpl)&&(E=y.content=w.tmpls[E-1]),y.index=d,y.tmpl=E,y.render=de,y.view=n,y.ctx=Oe(y.ctx,R)),(r=y.props.tmpl)&&(y.tmpl=n.getTmpl(r)),l||(I=!!(l=new u._ctr).init,l.parent=f=R&&R.tag,l.tagCtxs=i,C=l.dataMap,S&&(l._.inline=!1,S.tag=l,l.linkCtx=S),(l._.bnd=P||S.fn)?l._.arrVws={}:l.dataBoundOnly&&_e("{^{"+e+"}} tag must be data-bound")),i=l.tagCtxs,C=l.dataMap,y.tag=l,C&&i&&(y.map=i[d].map),l.flow||(m=y.ctx=y.ctx||{},c=l.parents=m.parentTags=R&&Oe(m.parentTags,R.parentTags)||{},f&&(c[f.tagName]=f),c[l.tagName]=m.tag=l);if(!(l._er=s)){for(Z(l,i[0]),l.rendering={},d=0;d<g;d++)O=(y=l.tagCtx=i[d]).props,b=l.cvtArgs(),(T=O.dataMap||C)&&(b.length||O.dataMap)&&((A=y.map)&&A.src===b[0]&&!a||(A&&A.src&&A.unmap(),A=y.map=T.map(b[0],O,void 0,!l._.bnd)),b=[A.tgt]),l.ctx=y.ctx,d||(I&&(l.template,l.init(y,S,l.ctx),I=void 0),S&&(S.attr=l.attr=S.attr||l.attr),p=l.attr,l._.noVws=p&&p!==H),_=void 0,l.render&&(_=l.render.apply(l,b),n.linked&&_&&l.linkedElem&&!V.test(_)&&(_=ge(t.templates(_),b[0],void 0,void 0,n,void 0,void 0,l))),b.length||(b=[n]),void 0===_&&(N=b[0],l.contentCtx&&(N=l.contentCtx(N)),_=y.render(N,!0)||(a?void 0:"")),L=L?L+(_||""):_;l.rendering=void 0}return l.tagCtx=i[0],l.ctx=l.tagCtx.ctx,l._.noVws&&l._.inline&&(L="text"===p?h.html(L):""),P&&n._.onRender?n._.onRender(L,n,l):L},_er:_e,_err:ve,_html:Le,_cp:ee,_sq:function(e){return"constructor"===e&&ye(""),e}},settings:{delimiters:ie,advanced:function(e){return e?(re(y,e),v.advSet(),m):y}},getCtx:ee,map:he},(ne.prototype=new Error).constructor=ne,oe.depends=function(){return[this.get("item"),"index"]},ae.depends="index",se.prototype={get:function(e,t){t||!0===e||(t=e,e=void 0);var n,r,i,o,a=this,s=!t||"root"===t;if(e){if(!(o=t&&a.type===t&&a))if(n=a.views,a._.useKey){for(r in n)if(o=t?n[r].get(e,t):n[r])break}else for(r=0,i=n.length;!o&&r<i;r++)o=t?n[r].get(e,t):n[r]}else if(s)for(;a.parent;)o=a,a=a.parent;else for(;a&&!o;)o=a.type===t?a:void 0,a=a.parent;return o},getIndex:ae,getRsc:function(e,t){for(var n,r,i=this;void 0===n&&i;)n=(r=i.tmpl&&i.tmpl[e])&&r[t],i=i.parent;return n||a[e][t]},getTmpl:function(e){return e&&(e.fn?e:this.getRsc("templates",e)||f(e))},hlp:function(t,n){var r,i,o=this,s=o.ctx;if(s&&(s=s[t]),void 0===s&&(s=d[t]),s&&s._cp){if(n)return(i=v._ceo(s[1].deps)).unshift(s[0]),i._cp=!0,i;s=a.getCtx(s)}return s&&c(s)&&!s._wrp&&(r=function(){return s.apply(this&&this!==e?this:o,arguments)},r._wrp=o,re(r,s)),r||s},_is:"view"},v=a.sub,m=a.settings,!(W||t&&t.render)){for(r in z)pe(r,z[r]);for(O in h=a.converters,d=a.helpers,g=a.tags,v._tg.prototype={baseApply:function(e){return this.base.apply(this,e)},cvtArgs:function(e){var t=this,n=t.tagCtx,r=n.view,i=n.args;return e=(e=e||t.convert)&&(""+e===e?r.getRsc("converters",e)||_e("Unknown converter: '"+e+"'"):e),i=i.length||n.index?e?i.slice():i:[r.data],e&&(e.depends&&(t.depends=v.getDeps(t.depends,t,e.depends,e)),i[0]=e.apply(t,i)),i}},o=v.topView=new se,t?(t.fn.render=Ne,u=t.expando,t.observable&&(re(v,t.views.sub),a.map=t.views.map)):(t={},n&&(e.jsrender=t),t.renderFile=t.__express=t.compile=function(){throw"Node.js: use npm jsrender, or jsrender-node.js"},t.isFunction=function(e){return"function"==typeof e},t.isArray=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},v._jq=function(e){e!==t&&(re(e,t),(t=e).fn.render=Ne,delete t.jsrender,u=t.expando)},t.jsrender=N),(_=v.settings).allowCode=!1,c=t.isFunction,t.render=Q,t.views=a,t.templates=f=a.templates,_)fe(O);(m.debugMode=function(e){return void 0===e?_.debugMode:(_.debugMode=e,_.onError=e+""===e?new Function("","return '"+e+"';"):c(e)?e:void 0,m)})(!1),y=_.advanced={useViews:!1,_jsv:!1},g({if:{render:function(e){var t=this,n=t.tagCtx,r=t.rendering.done||!e&&(arguments.length||!n.index)?"":(t.rendering.done=!0,t.selected=n.index,n.render(n.view,!0));return r},flow:!0},for:{render:function(e){var t,n=!arguments.length,r=this,i=r.tagCtx,o="",a=0;return r.rendering.done||(void 0!==(t=n?i.view.data:e)&&(o+=i.render(t,n),a+=p(t)?t.length:1),(r.rendering.done=a)&&(r.selected=i.index)),o},flow:!0},props:{baseTag:"for",dataMap:he((function(e){var t,n,r=[];if(typeof e===B)for(t in e)n=e[t],t!==u&&e.hasOwnProperty(t)&&!c(n)&&r.push({key:t,prop:n});return r})),flow:!0},include:{flow:!0},"*":{render:ee,flow:!0},":*":{render:ee,flow:!0},dbg:d.dbg=h.dbg=function(e){try{throw console.log("JsRender dbg breakpoint: "+e),"dbg breakpoint"}catch(e){}return this.base?this.baseApply(arguments):e}}),h({html:Le,attr:Le,url:function(e){return null!=e?encodeURI(""+e):null===e?e:""}})}if(_=v.settings,p=(t||W).isArray,m.delimiters("{{","}}","^"),X&&W.views.sub._jq(t),a=t.views,v=a.sub,c=t.isFunction,p=t.isArray,u=t.expando,!t.observe){var Se=t.event.special,Re=[].slice,we=[].splice,Pe=[].concat,xe=parseInt,Me=/\S+/g,Ue=v.propChng=v.propChng||"propertyChange",De=v.arrChng=v.arrChng||"arrayChange",je={},Ve=Ue+".observe",ke=1,Ge=1,Fe=1,He=t.hasData,Be=t.data,qe={},Ye=function(e){return e._cId=e._cId||".obs"+Ge++},Ke=function(e,t){return this._data=t,this._ns=e,this},Qe=function(e,t){return this._data=t,this._ns=e,this},We=function(e){return p(e)?[e]:e},Xe=function(e,t,n){var r,i,o=t,a=o,s=(e=e?p(e)?e:[e]:[])&&e.length,l=[];for(r=0;r<s;r++)i=e[r],c(i)?l=l.concat(Xe(i.call(t,t,n),t)):""+i===i?(a!==o&&l.push(o=a),l.push(i)):(t=a=i,a!==o&&l.push(o=a));return l},ze=function(e,t){for(var n in e)return;delete je[t]},$e=function(e,t){function n(e){return typeof e===B&&(h[0]||f&&p(e))}if(!e.data||!e.data.off){var r,i,o,a=t.oldValue,s=t.value,l=e.data,u=l.observeAll,c=l.cb,f=!c.noArray,h=l.paths,d=l.ns;e.type===De?(c.array||c).call(l,e,t):l.prop!==t.path&&"*"!==l.prop||(u?(r=u._path+"."+t.path,i=u.filter,o=[e.target].concat(u.parents()),n(a)&&Je(f,d,[a],h,c,!0,i,[o],r),n(s)&&Je(f,d,[s],h,c,void 0,i,[o],r)):(n(a)&&Je(f,d,[a],h,c,!0),n(s)&&Je(f,d,[s],h,c)),l.cb(e,t))}},Je=function(){var e=Pe.apply([],arguments);return s.apply(e.shift(),e)},Ze=function(e,t,n){tt(this._ns,this._data,e,t,[],"root",n)},et=function(e,t){Ze.call(this,e,t,!0)},tt=function(e,t,n,r,i,o,a,c){function f(e,t){for(g=e.length,_=o+"[]";g--;)h(e,g,t,1)}function h(t,i,o,a){var s,p;i!==u&&(s=l._fltr(_,t[i],y,r))&&(p=y.slice(),a&&m&&p[0]!==m&&p.unshift(m),tt(e,s,n,r||(a?void 0:0),p,_,o,c))}function d(e,t){switch(o=e.data.observeAll._path,m=e.target,t.change){case"insert":f(t.items);break;case"remove":f(t.items,!0);break;case"set":_=o+"."+t.path,h(t,"oldValue",!0),h(t,"value")}m=void 0,n.apply(this,arguments)}var g,v,_,y,m,E,I=!c||c.un||!a;if(t&&typeof t===B){if(y=[t].concat(i),v=p(t)?"":"*",c&&I&&He(t)&&c[E=Be(t).obId])return void c[E]++;if(c||(c={un:a}),n){if(v||0!==r)if(d._cId=Ye(n),I)s(e,t,v,d,a,r,y,o),E=Be(t).obId,c[E]=(c[E]||0)+1;else{if(--c[Be(t).obId])return;s(e,t,v,d,a,r,y,o)}}else c&&(c[Be(t).obId]=1),s(e,t,v,void 0,a,r,y,o);if(v)for(g in t)_=o+"."+g,h(t,g,a);else f(t,a)}},nt=function(e){return e.indexOf(".")<0&&e.indexOf("[")<0};s=function(){function e(){function i(e,r,i,o){var a,s,l=He(H),u=We(H),c=x,p=M;if(e=n?e+"."+n:e,!E&&(o||i))for(C=(C=(C=l&&t._data(H))&&C.events)&&C[i?De:Ue],b=C&&C.length;b--;)if((O=C[b]&&C[b].data)&&(o&&O.ns!==n||!o&&O.ns===n&&O.cb&&O.cb._cId===I._cId))return;E||o?t(u).off(e,$e):((s=i?{}:{fullPath:y,paths:r?[r]:[],prop:_}).ns=n,s.cb=I,M&&(s.observeAll={_path:p,path:function(){return a=c.length,p.replace(/[[.]/g,(function(e){return a--,"["===e?"["+t.inArray(c[a-1],c[a]):"."}))},parents:function(){return c},filter:U}),t(u).on(e,null,s,$e),R&&(R[Be(H).obId||Be(H,"obId",ke++)]=H))}function a(t){var n=F;return t.ob=N(t,n),t.cb=function(i,o){var a=t.ob,l=t.sb,u=N(t,n);u!==a&&(typeof a===B&&(s(a,!0),(l||r&&p(a))&&e([a],l,I,N,!0)),t.ob=u,typeof u===B&&(s(u),(l||r&&p(u))&&e([u],l,I,N))),I(i,o)}}function s(e,t,n,o){if(r){var a=H,s=M;H=e,o&&(H=e[o],M+="."+o),U&&H&&(H=l._fltr(M,H,o?[e].concat(x):x,U)),H&&(n||p(H))&&i(De+".observe"+(I?Ye(I):""),void 0,!0,t),H=a,M=s}}var f,h,d,g,_,y,m,E,I,T,A,b,O,C,N,L,S,R,w,P,x,M,U,D,j,V=Ve,k=1!=this?Pe.apply([],arguments):Re.call(arguments),G=k.pop()||!1,F=k.shift(),H=F,q=k.length;if(G+""===G&&(M=G,x=k.pop(),U=k.pop(),G=!!k.pop(),q-=3),G===!!G&&(E=G,G=k[q-1],G=!q||G+""===G||G&&!c(G)?void 0:(q--,k.pop()),E&&!q&&c(F)&&(G=F,F=void 0)),I=G,q&&c(k[q-1])&&(L=N=I,I=k.pop(),q--),!E||!I||I._cId){for(V+=I?(A=I._inId||"",E?I._cId+A:(T=Ye(I))+A):"",T&&!E&&(R=je[T]=je[T]||{}),j=(D=n&&n.match(Me)||[""]).length;j--;){if(n=D[j],F&&(!(y=k[0])||y+""!==y)&&(p(F)?s(F,E,!0):E&&i(V,"")),E&&!q&&!F)for(h in je)for(O in h=je[h])H=h[O],p(H)?s(H,E,E):i(V,"");for(w=0,f=0;f<q;f++)if(""!==(y=k[f])){if(y&&y._cp&&(N=v._gccb(y[0]),o=F=y[0].data,y=y[1]),H=F,""+y===y){if((g=y.split("^"))[1]&&(w=g[0].split(".").length,w=(y=g.join(".")).split(".").length-w),N&&(S=N(y,F,w),N=L),S){q+=S.length-1,we.apply(k,[f--,1].concat(S));continue}g=y.split(".")}else c(y)||(y&&y._jsv?((P=E?y.cb:a(y)).noArray=!r,P._cId=I._cId,P._inId=P._inId||".obIn"+Fe++,(y.bnd||y.prm&&y.prm.length||!y.sb)&&e([H],y.path,[o],y.prm,P,N,E),y.sb&&e([y.ob],y.sb,I,N,E),y=o,H=void 0):H=y),g=[F=y];for(;H&&void 0!==(_=g.shift());)if(typeof H===B){if(""+_===_){if(""===_)continue;if(g.length<w+1&&!H.nodeType){if(!E&&(C=He(H)&&t._data(H))){for(C=(C=C.events)&&C[Ue],b=C&&C.length,d=0;b--;)!(O=C[b].data)||O.ns!==n||O.cb._cId!==I._cId||O.cb._inId!==I._inId||O.prop!==_&&"*"!==O.prop&&"**"!==O.prop||((h=g.join("."))&&O.paths.push(h),d++);if(d){H=H[_];continue}}if("*"===_||"**"===_){if(!E&&C&&C.length&&i(V,"",!1,!0),"*"===_)for(h in i(V,""),H)h!==u&&s(H,E,void 0,h);else t.observable(n,H)[(E?"un":"")+"observeAll"](I);break}_&&i(V+".p_"+_,g.join("^"))}M&&(M+="."+_),_=H[_]}if(c(_)){(m=_.depends)&&e([H],Xe(m,H,I),I,N,E);break}H=_,E&&H===F&&(f>q-2||k[f+1]+""!==k[f+1])&&i(V,"")}s(H,E)}}return T&&ze(R,T),{cbId:T,bnd:R}}}var n,r=0!=this,i=Re.call(arguments),o=i[0];return o+""===o&&r&&(n=o,i.shift(),o=i[0]),e.apply(1,i)},l=function(e,t){return 1===arguments.length&&(t=e,e=""),p(t)?new Qe(e,t):new Ke(e,t)},v.getDeps=function(){var e=arguments;return function(){for(var t,n,r=[],i=e.length;i--;)t=e[i--],(n=e[i])&&(r=r.concat(c(n)?n(t,t):n));return r}},t.observable=l,l._fltr=function(e,t,n,r){if(!r||!c(r)||r(e,t,n))return typeof(t=c(t)?t.set&&t.call(n[0]):t)===B&&t},l.Object=Ke,l.Array=Qe,t.observe=l.observe=s,t.unobserve=l.unobserve=function(){return[].push.call(arguments,!0),s.apply(this,arguments)},l._apply=Je,Ke.prototype={_data:null,observeAll:Ze,unobserveAll:et,data:function(){return this._data},setProperty:function(e,t,n){var r,i,o,a=(e=e||"")+""!==e,s=this,l=s._data;if(l)if(a)if(n=t,p(e))for(r=e.length;r--;)i=e[r],s.setProperty(i.name,i.value,void 0===n||n);else for(r in e)s.setProperty(r,e[r],n);else if(e!==u){for(o=e.split(/[.^]/);l&&o.length>1;)l=l[o.shift()];l&&s._setProperty(l,o[0],t,n)}return s},removeProperty:function(e){return this.setProperty(e,qe),this},_setProperty:function(e,t,n,r){var i,o,a,s=t?e[t]:e;c(s)&&s.set&&(e=e._wrp||e,i=!0===(o=s).set?o:o.set,s=o.call(e)),(s!==n||r&&s!=n)&&(!(s instanceof Date)||s>n||s<n)&&(i?(i.call(e,n),n=o.call(e)):(a=n===qe)?void 0!==s?(delete e[t],n=void 0):t=void 0:t&&(e[t]=n),t&&this._trigger(e,{change:"set",path:t,value:n,oldValue:s,remove:a}))},_trigger:function(e,n){t(e).triggerHandler(Ue+(this._ns?"."+/^\S+/.exec(this._ns)[0]:""),n)}},Qe.prototype={_data:null,observeAll:Ze,unobserveAll:et,data:function(){return this._data},insert:function(e,t){var n=this._data;return 1===arguments.length&&(t=e,e=n.length),(e=xe(e))>-1&&(t=p(t)?t:[t]).length&&this._insert(e,t),this},_insert:function(e,t){var n=this._data,r=n.length;e>r&&(e=r),we.apply(n,[e,0].concat(t)),this._trigger({change:"insert",index:e,items:t},r)},remove:function(e,t){var n,r=this._data;return void 0===e&&(e=r.length-1),e=xe(e),(t=t?xe(t):0===t?0:1)>0&&e>-1&&(t=(n=r.slice(e,e+t)).length)&&this._remove(e,t,n),this},_remove:function(e,t,n){var r=this._data,i=r.length;r.splice(e,t),this._trigger({change:"remove",index:e,items:n},i)},move:function(e,t,n){return n=n?xe(n):0===n?0:1,e=xe(e),t=xe(t),n>0&&e>-1&&t>-1&&e!==t&&this._move(e,t,n),this},_move:function(e,t,n){var r,i=this._data,o=i.length,a=e+n-o;a>0&&(n-=a),n&&(r=i.splice(e,n),t>i.length&&(t=i.length),we.apply(i,[t,0].concat(r)),this._trigger({change:"move",oldIndex:e,index:t,items:r},o))},refresh:function(e,t){function n(){o&&(l.insert(i-o,u),h+=o,r+=o,o=0,u=[])}var r,i,o,a,s,l=this,u=[],c=l._data,p=c.slice(),f=c.length,h=f,d=e.length;for(l._srt=!0,i=o=0;i<d;i++)if((a=e[i])===c[i-o])n();else{for(r=i-o;r<h&&a!==c[r];r++);if(r<h){for(n(),s=0;s++<d-r&&e[i+s]===c[r+s];);l.move(r,i,s),i+=s-1}else o++,u.push(a)}return n(),h>i&&l.remove(i,h-i),l._srt=void 0,l._trigger({change:"refresh",oldItems:p},f),l},_trigger:function(e,n){var r=this,i=r._data,o=i.length,a=t([i]);r._srt?e.refresh=!0:o!==n&&a.triggerHandler(Ue,{change:"set",path:"length",value:o,oldValue:n}),a.triggerHandler(De+(r._ns?"."+/^\S+/.exec(r._ns)[0]:""),e)}},Se[Ue]=Se[De]={remove:function(e){var n,r,i,o,a,s=e.data;if(s&&(s.off=!0,s=s.cb)&&(n=je[s._cId])){for(o=(i=t._data(this).events[e.type]).length;o--&&!r;)r=(a=i[o].data)&&a.cb&&a.cb._cId===s._cId;r||(delete n[Be(this).obId],ze(n,s._cId))}}},a.map=function(e){function n(t,n,r,i){var o,a=this;this.src&&this.unmap(),typeof t===B&&(a.src=t,a.tgt=r||a.tgt||[],a.options=n||a.options,a.update(),i||(e.obsSrc&&l(a.src).observeAll(a.obs=function(t,n){o||(o=!0,e.obsSrc(a,t,n),o=void 0)},a.srcFlt),e.obsTgt&&l(a.tgt).observeAll(a.obt=function(t,n){o||(o=!0,e.obsTgt(a,t,n),o=void 0)},a.tgtFlt)))}return c(e)&&(e={getTgt:e}),e.baseMap&&(e=t.extend({},e.baseMap,e)),e.map=function(e,t,r,i){return new n(e,t,r,i)},(n.prototype={srcFlt:e.srcFlt||nt,tgtFlt:e.tgtFlt||nt,update:function(t){var n=this;l(n.tgt).refresh(e.getTgt(n.src,n.options=t||n.options))},unmap:function(){var e=this;e.src&&(e.obs&&l(e.src).unobserveAll(e.obs,e.srcFlt),e.obt&&l(e.tgt).unobserveAll(e.obt,e.tgtFlt),e.src=void 0)},map:n,_def:e}).constructor=n,e},v.advSet=function(){v._gccb=this._gccb,e._jsv=_.advanced._jsv?{cbBindings:je}:void 0}}if(m=a.settings,_=v.settings,y=_.advanced,h=a.converters,t.templates=f=a.templates,g=a.tags,U=/<(?!script)(\w+)[>\s]/,t.link)return t;_.trigger=!0;var rt,it,ot,at,st,lt,ut,ct,pt="data-jsv",ft="change.jsv",ht="onBeforeChange",dt="onAfterChange",gt="checked",vt="checkbox",_t="radio",yt="none",mt="SCRIPT",Et="true",It='"><\/script>',Tt='<script type="jsv',At="script,[data-jsv]",bt={value:"val",input:"val",html:H,text:"text"},Ot={from:"value",to:"value"},Ct=0,Nt=t.cleanData,Lt=m.delimiters,St=document.createDocumentFragment(),Rt=document.querySelector,wt={ol:1,ul:1,table:1,tbody:1,thead:1,tfoot:1,tr:1,colgroup:1,dl:1,select:1,optgroup:1,svg:1,svg_ns:1},Pt={tr:"table"},xt={br:1,img:1,input:1,hr:1,area:1,base:1,col:1,link:1,meta:1,command:1,embed:1,keygen:1,param:1,source:1,track:1,wbr:1},Mt={},Ut={},Dt=1,jt=/^#(view\.?)?/,Vt=/((\/>)|<\/(\w+)>|)(\s*)([#\/]\d+(?:_|(\^)))`(\s*)(<\w+(?=[\s\/>]))?|\s*(?:(<\w+(?=[\s\/>]))|<\/(\w+)>(\s*)|(\/>)\s*|(>)|$)/g,kt=/(#)()(\d+)(_)/g,Gt=/(#)()(\d+)([_^])/g,Ft=/(?:(#)|(\/))(\d+)(_)/g,Ht=/(#)()(\d+)(\^)/g,Bt=/(?:(#)|(\/))(\d+)([_^])([-+@\d]+)?/g,qt=/&(\d+)\+?/g,Yt=e.getComputedStyle;if(!(l=t.observable))throw requiresStr+"JsObservable";function Kt(e,n,r){for(var i,o,a,s,u,p,f,h,d,g,v,_,y,m,E,I,T,A=e.target,b=A._jsvBnd;d=qt.exec(b);)if((d=Ut[d[1]])&&(m=d.to)){if(h=(a=d.linkCtx).view,y=a.tag||h.tag,f=t(A),v=h.hlp(ht),_=h.hlp(dt),o=Jt(A),i=bt[o],void 0===r&&(r=c(o)?o(A):i?f[i]():f.attr(o)),u=m[1],m=(m=m[0])+""===m?[a.data,m]:m,u&&(s=c(u)?u:h.getRsc("converters",u)),"SELECT"===a.elem.nodeName&&(a.elem._jsvSel=r=r||(a.elem.multiple?[]:r)),s&&(r=s.call(y,r)),g=h.linkCtx,h.linkCtx=a,E={change:"change",oldValue:a._val,value:r},!(v&&!1===v.call(a,e,E)||y&&y.onBeforeChange&&!1===y.onBeforeChange(e,E)||void 0===r)&&(p=m[0],void 0!==r&&p)){if(p._jsv)for(T=a._ctxCb,I=p,p=a.data,I._cpCtx&&(p=I.data,T=I._cpCtx);I&&I.sb;)p=T(I,p),I=I.sb;y&&(y._.chging=!0),l(p).setProperty(m[1],r),_&&_.call(a,e,E),y&&(y.onAfterChange&&y.onAfterChange(e,E),y._.chging=void 0),a._val=r}h.linkCtx=g}}function Qt(e,n,r){var i,o,a,s,l,u,p=this,f=p.tag,h=p.data,d=p.elem,g=p.convert,_=d.parentNode,y=p.view,m=y.linkCtx,E=y.hlp(ht);if(y.linkCtx=p,_&&(!E||!n||!1!==E.call(p,e,n))&&(!n||"*"===e.data.prop||e.data.prop===n.path)){if(n&&(p.eventArgs=n),n||p._toLk){if(p._toLk=0,r._er)try{o=r(h,y)}catch(e){l=r._er,o=[{props:{},args:[u=ve(e,y,new Function("data,view","return "+l+";")(h,y))]}]}else o=r(h,y,v);if(i=function(e,n,r,i){var o,a,s,l,u=r&&r.parentElem||n.elem;if(void 0!==e){if(l=t(u),i=r&&r.attr||i,c(e)&&_e(n.expr+": missing parens"),s=/^css-/.test(i)&&i.slice(4))o=t.style(u,s),+e===e&&(o=parseInt(o));else if("link"!==i){if("value"===i)u.type===vt&&(o=l.prop(i=gt));else if(i===_t){if(u.value!==""+e)return i;o=l.prop(gt)}void 0===o&&(o=(a=bt[i])?l[a]():l.attr(i))}n._val=o}return i}(o,p,f=p.tag,p.attr||Jt(d,!0,void 0!==g)),f){if(s=l||f._er,o=o[0]?o:[o],a=!s&&n&&f.onUpdate&&!1===f.onUpdate(e,n,o),_n(f,o,s),a||i===yt)return hn(f,e,n),tn(p,h,d),void(y.linkCtx=m);if(f._.chging)return;f.onUnbind&&f.onUnbind(f.tagCtx,p,f.ctx,e,n),o=":"===f.tagName?v._cnvt(f.cvt,y,o[0]):v._tag(f,y,y.tmpl,o,!0,u)}else r._tag&&(o=(g=""===g?Et:g)?v._cnvt(g,y,o[0]||o):v._tag(r._tag,y,y.tmpl,o,!0,u),An(f=p.tag,!0),i=p.attr||i);Xt(o,p,i,f)&&n&&(E=y.hlp(dt))&&E.call(p,e,n),p._noUpd=0,f&&(f._er=l,hn(f,e,n))}tn(p,h,d),y.linkCtx=m}}function Wt(e,t){e._df=t,e[(t?"set":"remove")+"Attribute"]("data-jsv-df","")}function Xt(n,r,i,o){var a,s,l,u,c,f,h,d,g,v,_,y,m,E,I=i!==yt&&void 0!==n&&!r._noUpd,T=r.data,A=o&&o.parentElem||r.elem,b=A.parentNode,O=t(A),C=r.view,N=r._val,L=C.linkCtx,S=o;if(o&&(o._.unlinked=!0,o.parentElem=o.parentElem||r.expr||o._elCnt?A:b,s=o._prv,l=o._nxt),I)return"visible"===i&&(i="css-display"),/^css-/.test(i)?("visible"===r.attr&&(m=(A.currentStyle||Yt.call(e,A,"")).display,n?(n=A._jsvd||m)!==yt||(n=Mt[y=A.nodeName])||(_=document.createElement(y),document.body.appendChild(_),n=Mt[y]=(_.currentStyle||Yt.call(e,_,"")).display,document.body.removeChild(_)):(A._jsvd=m,n=yt)),(S=S||N!==n)&&t.style(A,i.slice(4),n)):"link"!==i&&(/^data-/.test(i)&&t.data(A,i.slice(5),n),i===gt?(f=!0,n=n&&"false"!==n):i===_t?(f=!0,i=gt,n=A.value===""+n):"selected"===i||"disabled"===i||"multiple"===i||"readonly"===i?n=n&&"false"!==n?i:null:"value"===i&&"SELECT"===A.nodeName&&(A._jsvSel=p(n)?n:""+n),(a=bt[i])?i===H?(C.linkCtx=r,o&&o._.inline?(c=o.nodes(!0),o._elCnt&&(s&&s!==l?In(s,l,A,o._tgId,"^",!0):(h=A._df)&&(d=o._tgId+"^",g=h.indexOf("#"+d)+1,v=h.indexOf("/"+d),g&&v>0&&v>(g+=d.length)&&(Wt(A,h.slice(0,g)+h.slice(v)),Tn(h.slice(g,v)))),s=s?s.previousSibling:l?l.previousSibling:A.lastChild),t(c).remove(),u=C.link(C.data,A,s,l,n,o&&{tag:o._tgId,lazyLink:o.tagCtx.props.lazyLink})):((I=I&&N!==n)&&O.empty(),I&&(u=C.link(T,A,s,l,n,o&&{tag:o._tgId}))),C.linkCtx=L):((S=S||N!==n)&&("text"===i&&A.children&&!A.children[0]?void 0!==A.textContent?A.textContent=n:A.innerText=null===n?"":n:O[a](n)),!(E=b._jsvSel)||"value"!==i&&O.attr("value")||(A.selected=t.inArray(""+n,p(E)?E:[E])>-1)):(S=S||N!==n)&&O[f?"prop":"attr"](i,void 0!==n||f?n:null),r._val=n),u||S}function zt(e,t){var n=this,r=n.hlp(ht),i=n.hlp(dt);if(!r||!1!==r.call(this,e,t)){if(t){var o=t.change,a=t.index,s=t.items;switch(n._.srt=t.refresh,o){case"insert":n.addViews(a,s);break;case"remove":n.removeViews(a,s.length);break;case"move":n.removeViews(t.oldIndex,s.length,void 0,!0),n.addViews(a,s);break;case"refresh":n._.srt=void 0,n.fixIndex(0)}}i&&i.call(this,e,t)}}function $t(e){var n,r,i=e.type,o=e.data,a=e._.bnd;!e._.useKey&&a&&((r=e._.bndArr)&&(t([r[1]]).off(De,r[0]),e._.bndArr=void 0),a!==!!a?i?a._.arrVws[e._.id]=e:delete a._.arrVws[e._.id]:i&&o&&(n=function(t){t.data&&t.data.off||zt.apply(e,arguments)},t([o]).on(De,n),e._.bndArr=[n,o]))}function Jt(e,t,n){var r=e.nodeName.toLowerCase(),i=y._fe[r]||e.contentEditable===Et&&{to:H,from:H};return i?t?"input"===r&&e.type===_t?_t:i.to:i.from:t?n?"text":H:""}function Zt(e,n,r,i,o,a,s){var l,u,c,p,f,h=e.parentElem,d=e._prv,g=e._nxt,v=e._elCnt;if(d&&d.parentNode!==h&&_e("Missing parentNode"),s)for(f in p=e.nodes(),v&&d&&d!==g&&In(d,g,h,e._.id,"_",!0),e.removeViews(void 0,void 0,!0),u=g,v&&(d=d?d.previousSibling:g?g.previousSibling:h.lastChild),t(p).remove(),e._.bnds)mn(f);else{if(n){if(!(c=i[n-1]))return!1;d=c._nxt}v?d=(u=d)?u.previousSibling:h.lastChild:u=d.nextSibling}l=r.render(o,a,e._.useKey&&s,e,s||n,!0),e.link(o,h,d,u,l,c)}function en(e,t,n){var r,i;return n?(i="^`",An(n,!0),(r=n._tgId)||(Ut[r=Dt++]=n,n._tgId=""+r)):(i="_`",An(ut[r=t._.id]=t)),"#"+r+i+(null!=e?e:"")+"/"+r+i}function tn(e,t,n){var r,i,o,a,s,u,p,f,h=e.tag,d=e.convertBack,g=[],v=e._bndId||""+Dt++,_=e._hdl;if(e._bndId=void 0,h&&(g=h.depends||g,g=c(g)?h.depends(h):g,a=h.linkedElem),!e._depends||""+e._depends!=""+g){if(e._depends&&l._apply(!1,[t],e._depends,_,!0),s=e.fn.deps.slice(),h&&h.boundProps)for(i=h.boundProps.length;i--;)for(p=h.boundProps[i],o=h._.bnd.paths.length;o--;)(f=h._.bnd.paths[o][p])&&f.skp&&(s=s.concat(f));for(i=s.length;i--;)(u=s[i])._jsv&&(s[i]=re({},u));if((r=l._apply(!1,[t],s,g,_,e._ctxCb)).elem=n,r.linkCtx=e,r._tgId=v,n._jsvBnd=n._jsvBnd||"",n._jsvBnd+="&"+v,e._depends=g,e.view._.bnds[v]=v,Ut[v]=r,a)for(i=a.length;i--;)a[i]._jsvLkEl=h,vn(r,h,a[i]),a[i]._jsvBnd="&"+r._tgId+"+";else void 0!==d&&vn(r,h,n,d);h&&(h.flow||h._.inline||(n.setAttribute(pt,(n.getAttribute(pt)||"")+"#"+v+"^/"+v+"^"),h._tgId=""+v))}}function nn(e,t,n,r,i,o,a){return rn(this,e,t,n,r,i,o,a)}function rn(e,n,r,i,a,s,l,u){if(!0===i?(a=i,i=void 0):i="object"!=typeof i?void 0:re({},i),e&&n){n=n.jquery?n:t(n),rt||(rt=document.body,t(rt).on(ft,Kt).on("blur","[contenteditable]",Kt));for(var c,p,f,h,d,g,v,_,y,m=en,E=i&&"replace"===i.target,I=n.length;I--;){if(v=n[I],(y=(s=s||ot(v))===o)&&(o.data=(o.ctx=i||{}).root=r),""+e===e)an(e,v,s,void 0,!0,r,i);else{if(void 0!==e.markup)E&&(g=v.parentNode),f=e.render(r,i,a,s,void 0,m),g?(l=v.previousSibling,u=v.nextSibling,t.cleanData([v],!0),g.removeChild(v),v=g):(l=u=void 0,t(v).empty());else{if(!0!==e||s!==o)break;_={lnk:1}}if(v._df&&!u){for(c=0,p=(h=cn(v._df,!0,kt)).length;c<p;c++)d=h[c],(d=ut[d.id])&&void 0!==d.data&&d.parent.removeViews(d._.key,void 0,!0);Wt(v)}s.link(r,v,l,u,f,_,i)}y&&(o.data=o.ctx=void 0)}}return n}function on(e,n,r,i,o,a,s,l){function u(e,t){var r,i,o,a,s,l,u,c=[];if(e){for("@"===e._tkns.charAt(0)&&(t=I.previousSibling,I.parentNode.removeChild(I),I=void 0),m=e.length;m--;){if(o=(A=e[m]).ch,r=A.path)for(_=r.length-1;i=r.charAt(_--);)"+"===i?"-"===r.charAt(_)?(_--,t=t.previousSibling):t=t.parentNode:t=t.lastChild;"^"===o?(d=Ut[s=A.id])&&(u=t&&(!I||I.parentNode!==t),I&&!u||(d.parentElem=t),A.elCnt&&u&&Wt(t,(A.open?"#":"/")+s+o+(t._df||"")),c.push([u?null:I,A])):(T=ut[s=A.id])&&(T.parentElem||(T.parentElem=t||I&&I.parentNode||n,T._.onRender=en,T._.onArrayChange=zt,$t(T)),a=T.parentElem,A.open?(T._elCnt=A.elCnt,t&&!I?Wt(t,"#"+s+o+(t._df||"")):(T._prv||Wt(a,ln(a._df,"#"+s+o)),T._prv=I)):(!t||I&&I.parentNode===t?I&&(T._nxt||Wt(a,ln(a._df,"/"+s+o)),T._nxt=I):(Wt(t,"/"+s+o+(t._df||"")),T._nxt=void 0),(l=T.ctx&&T.ctx.onAfterCreate||le)&&l.call(T.ctx.tag,T)))}for(m=c.length;m--;)oe.push(c[m])}return!e||e.elCnt}function c(e){var t,n,r;if(e)for(m=e.length,_=0;_<m;_++)if(A=e[_],n=d=Ut[A.id].linkCtx.tag,r=d.tagName===P,!d.flow||r){if(!w){for(t=1;n=n.parent;)t++;D=D||t}!w&&t!==D||P&&!r||R.push(d)}}function p(){var a,l,p="",f={},_=st+(te?",[data-jsv-df]":"");for(E=Rt?n.querySelectorAll(_):t(_,n).get(),v=E.length,r&&r.innerHTML&&(O=Rt?r.querySelectorAll(_):t(_,r).get(),r=O.length?O[O.length-1]:r),D=0,g=0;g<v;g++)if(I=E[g],r&&!$)$=I===r;else{if(i&&I===i){te&&(p+=un(I));break}if(I.parentNode)if(te){if(p+=un(I),I._df){for(a=g+1;a<v&&I.contains(E[a]);)a++;f[a-1]=I._df}f[g]&&(p+=f[g]||"")}else ee&&(A=cn(I,void 0,Ft))&&(A=A[0])&&(J=J?A.id!==J&&J:A.open&&A.id),!J&&ue(cn(I))&&I.getAttribute(at)&&oe.push([I])}if(te&&((l=(p+=n._df||"").indexOf("#"+te.id)+1)&&(p=p.slice(l+te.id.length)),(l=p.indexOf("/"+te.id))+1&&(p=p.slice(0,l)),c(cn(p,void 0,Ht))),void 0===o&&n.getAttribute(at)&&oe.push([n]),pn(r,K),pn(i,K),te)Z&&Z.resolve();else{for(K&&ie+X&&(I=i,ie&&(i?u(cn(ie+"+",!0),i):u(cn(ie,!0),n)),u(cn(X,!0),n),i&&(p=i.getAttribute(pt),(v=p.indexOf(z)+1)&&(p=p.slice(v+z.length-1)),i.setAttribute(pt,X+p))),v=oe.length,g=0;g<v;g++)I=oe[g],b=I[1],I=I[0],b?(d=Ut[b.id])&&((h=d.linkCtx)&&((d=h.tag).linkCtx=h),b.open?(I&&(d.parentElem=I.parentNode,d._prv=I),d._elCnt=b.elCnt,T=d.tagCtx.view,an(void 0,d._prv,T,b.id)):(d._nxt=I,d._.unlinked&&(x=d.tagCtx,T=x.view,hn(d)))):an(I.getAttribute(at),I,ot(I),void 0,ee,e,s);Z&&Z.resolve()}}var f,h,d,g,v,_,m,E,I,T,A,b,O,C,N,L,S,R,w,P,x,M,D,j,V,k,G,F,H,B,q,Y,K,Q,W,X,z,$,J,Z,ee,te,ne=this,re=ne._.id+"_",ie="",oe=[],ae=[],se=[],le=ne.hlp("onAfterCreate"),ue=u;if(a&&(Z=a.lazyLink&&t.Deferred(),a.tmpl?N="/"+a._.id+"_":(ee=a.lnk,a.tag&&(re=a.tag+"^",a=!0),(te=a.get)&&(ue=c,R=te.tags,w=te.deep,P=te.name)),a=!0===a),n=n?""+n===n?t(n)[0]:n.jquery?n[0]:n:ne.parentElem||document.body,M=!y.noValidate&&n.contentEditable!==Et,F=n.tagName.toLowerCase(),K=!!wt[F],r=r&&fn(r,K),i=i&&fn(i,K)||null,null!=o){if(B=q=document.createElement("div"),z=X="",W="http://www.w3.org/2000/svg"===n.namespaceURI?"svg_ns":(G=U.exec(o))&&G[1]||"",K){for(S=i;S&&!(L=cn(S));)S=S.nextSibling;(Y=L?L._tkns:n._df)&&(C=N||"",!a&&N||(C+="#"+re),(_=Y.indexOf(C))+1&&(_+=C.length,z=X=Y.slice(0,_),Y=Y.slice(_),L?S.setAttribute(pt,Y):Wt(n,Y)))}if(H=void 0,o=(""+o).replace(Vt,(function(e,t,n,r,i,a,s,l,u,c,p,h,g,v){var _,y,m="";return v?(f=0,e):(d=u||c||"",r=r||p,n=n||g,H&&!n&&(!e||r||d||a&&!f)&&(H=void 0,F=ae.shift()),(r=r||n)&&(f=0,H=void 0,M&&(n||g?xt[F]||/;svg;|;math;/.test(";"+ae.join(";")+";")||(_="'<"+F+".../"):xt[r]?_="'</"+r:ae.length&&r===F||(_="Mismatch: '</"+r),_&&ye(_+">' in:\n"+o)),Q=K,F=ae.shift(),K=wt[F],p=p?"</"+p+">":"",Q&&(ie+=X,X="",K?ie+="-":(m=p+Tt+"@"+ie+It+(h||""),ie=se.shift()))),K?(a?X+=a:t=p||g||"",d&&(t+=d,X&&(t+=' data-jsv="'+X+'"',X=""))):t=a?t+m+i+(f?"":Tt+a+It)+l+d:m||e,M&&s&&(f&&ye("{^{ within elem markup ("+f+' ). Use data-link="..."'),"#"===a.charAt(0)?ae.unshift(a.slice(1)):a.slice(1)!==(y=ae.shift())&&ye("Closing tag for {^{...}} under different elem: <"+y+">")),d&&(f=d,ae.unshift(F),F=d.slice(1),M&&ae[0]&&ae[0]===Pt[F]&&_e("Parent of <tr> must be <tbody>"),H=xt[F],(K=wt[F])&&!Q&&(se.unshift(ie),ie=""),Q=K,ie&&K&&(ie+="+")),t)})),M&&ae.length&&ye("Mismatched '<"+F+"...>' in:\n"+o),l)return;for(St.appendChild(q),j=(W=lt[W]||lt.div)[0],B.innerHTML=W[1]+o+W[2];j--;)B=B.lastChild;for(St.removeChild(q),V=document.createDocumentFragment();k=B.firstChild;)V.appendChild(k);n.insertBefore(V,i)}return Z?setTimeout(p,0):p(),Z&&Z.promise()}function an(e,n,r,i,o,a,s){var l,u,c,p,f,h,d,g,_,y,m,b=[];if(i)sn(d=(g=(g=Ut[i]).linkCtx?g.linkCtx.tag:g).linkCtx||{type:"inline",data:r.data,elem:g._elCnt?g.parentElem:n,view:r,ctx:r.ctx,attr:H,fn:g._.bnd,tag:g,_bndId:i},d.fn);else if(e&&n){for(a=o?a:r.data,l=r.tmpl,e=function(e,n){return(e=t.trim(e).replace(P,"\\$&")).slice(-1)!==T?e=I+":"+e+(n?":":"")+T:e}(e,Jt(n)),m=it.lastIndex=0;u=it.exec(e);)b.push(u),m=it.lastIndex;for(m<e.length&&ye(e);u=b.shift();){for(_=it.lastIndex,c=u[1],f=u[3];b[0]&&"else"===b[0][4];)f+=A+E+b.shift()[3],y=!0;y&&(f+=A+E+I+"/"+u[4]+T),d={type:o?"top":"link",data:a,elem:n,view:r,ctx:s,attr:c,isLk:o,_toLk:1,_noUpd:u[2]},p=void 0,u[6]&&(p=u[10]||void 0,d.convert=u[5]||"",!c&&void 0!==p&&Jt(n)&&(d.convertBack=p=p.slice(1))),d.expr=c+f,(h=l.links[f])||(l.links[f]=h=v.tmplFn(f,l,!0,p,y)),d.fn=h,sn(d,h),it.lastIndex=_}}}function sn(e,t){function n(n,r){Qt.call(e,n,r,t)}n.noArray=!0,e.isLk&&An(e.view=new v.View(v.extendCtx(e.ctx,e.view.ctx),"link",e.view,e.data,e.expr,void 0,en)),e._ctxCb=v._gccb(e.view),e._hdl=n,n(!0)}function ln(e,t){var n;return e?(n=e.indexOf(t))+1?e.slice(0,n)+e.slice(n+t.length):e:""}function un(e){return e&&(""+e===e?e:e.tagName===mt?e.type.slice(3):1===e.nodeType&&e.getAttribute(pt)||"")}function cn(e,t,n){var r,i,o=[];if(i=t?e:un(e))return r=o.elCnt=e.tagName!==mt,r="@"===i.charAt(0)||r,o._tkns=i,i.replace(n||Bt,(function(e,t,n,i,a,s){o.push({elCnt:r,id:i,ch:a,open:t,close:n,path:s,token:e})})),o}function pn(e,t){e&&("jsv"===e.type?e.parentNode.removeChild(e):t&&""===e.getAttribute(at)&&e.removeAttribute(at))}function fn(e,t){for(var n=e;t&&n&&1!==n.nodeType;)n=n.previousSibling;return n&&(1!==n.nodeType?((n=document.createElement(mt)).type="jsv",e.parentNode.insertBefore(n,e)):un(n)||n.getAttribute(at)||n.setAttribute(at,"")),n}function hn(e,n,r){var i,o,a,s,l,u,c=e.tagCtx,p=(c.view,c.props),f=e.linkCtx;if(e._.unlinked&&(void 0!==e.linkedElement&&(e.linkedElem=e._.inline?e.contents(!0,e.linkedElement||"*").first():t(f.elem)),e.onBind&&e.onBind(c,f,e.ctx,n,r)),e.onAfterLink&&e.onAfterLink(c,f,e.ctx,n,r),i=e.targetTag?e.targetTag.linkedElem:e.linkedElem,o=e.displayElem||i,i&&i[0]){if(void 0!==(s=e.cvtArgs()[0])&&!e._.chging)for(l=i.length;l--;)a=i[l],e._.unlinked&&a!==f.elem&&(u=a._jsvLkEl,e._.inline&&(!u||u!==e&&u.targetTag!==e)&&(a._jsvLkEl=e,vn(Ut[e._tgId],e,a),a._jsvBnd="&"+e._tgId+"+")),void 0!==s&&(void 0!==a.value?a.type===vt?a.checked=s&&"false"!==s:a.type===_t?a.checked=a.value===s:t(a).val(s):a.contentEditable===Et&&(a.innerHTML=s),f._val=s),p.name&&(a.name=a.name||p.name);e.setSize&&(p.height&&o.height(p.height),p.width&&o.width(p.width)),void 0!==p.title&&o.attr("title",p.title),p.class&&(r&&o.hasClass(r.oldValue)&&o.removeClass(r.oldValue),o.addClass(p.class)),p.id&&(i[0].id=p.id)}e._.unlinked=void 0}function dn(e){setTimeout((function(){Kt(e)}),0)}function gn(e,t,n){t&&(t=""+t===t?t:"keydown",e[n](t,"keydown"===t?dn:Kt))}function vn(e,n,r,i){var o,a,s,l,u,c,p,f,h,d=e.linkCtx,g=d._ctxCb,y=d.data,m=d.fn.paths[0];if(n=n||r._jsvLkEl,e&&m&&!e.to){if(p=r._jsvTr||!1,n&&(i=n.convertBack||i,c=n.tagCtx.props.trigger),p!==(c=(c=void 0===c?_.trigger:c)&&("INPUT"===r.tagName&&r.type!==vt&&r.type!==_t||"textarea"===r.type||r.contentEditable===Et)&&c||!1)&&(gn(u=t(r),p,"off"),gn(u,r._jsvTr=c,"on")),o=(m=m._jsvto||m[0])&&m.length){if((s=m[o-1])._jsv){for(l=s;s.sb&&s.sb._jsv;)a=s=s.sb;s=(a=s.sb||a&&a.path)?a.slice(1):l.path}if(a)f=[l,s];else{for(;(f=g(a=s.split("^").join("."),y))&&(h=f.length);){if(f[0]._cp){if(f=f[0],g=v._gccb(f[0]),s=f[1],f=[f[0].data,f[1]],s._jsv){for((l=s).data=f[0],l._cpCtx=g;s.sb&&s.sb._jsv;)a=s=s.sb;f=[l,s=(a=s.sb||a&&a.path)?a.slice(1):l.path]}}else f=h>2?[f[h-3],f[h-2]]:[f[h-2]];y=f[0],s=f[1]}f=f||[y,a]}}else f=[];e.to=[f,i]}}function _n(e,t,n){var r,i,o=e.tagCtx.view,a=e.tagCtxs||[e.tagCtx],s=a.length,u=!t;if(t=t||e._.bnd.call(o.tmpl,(e.linkCtx||o).data,o,v),n)a=e.tagCtxs=t,e.tagCtx=a[0];else for(;s--;)r=a[s],i=t[s],l(r.props).setProperty(i.props),re(r.ctx,i.ctx),r.args=i.args,u&&(r.tmpl=i.tmpl);return v._ths(e,a[0]),a}function yn(e){for(var t,n,r,i=[],o=e.length,a=o;a--;)i.push(e[a]);for(a=o;a--;)if((n=i[a]).parentNode){if(r=n._jsvBnd)for(r=r.slice(1).split("&"),n._jsvBnd="",t=r.length;t--;)mn(r[t],n._jsvLkEl,n);Tn(un(n)+(n._df||""))}}function mn(e,n,r){var i,o,a,s,l,u,c,f,h,d,g,v,_=Ut[e];if(n)n=n.targetTag||n,r._jsvLkEl=void 0;else if(_){for(i in delete Ut[e],_.bnd)s=_.bnd[i],l=_.cbId,p(s)?t([s]).off(De+l).off(Ue+l):t(s).off(Ue+l),delete _.bnd[i];if(o=_.linkCtx){if(a=o.tag){if(u=a.tagCtxs)for(c=u.length;c--;)(f=u[c].map)&&f.unmap();h=a.linkedElem,a.onUnbind&&a.onUnbind(a.tagCtx,o,a.ctx,!0),a.onDispose&&a.onDispose(),a._elCnt||(a._prv&&a._prv.parentNode.removeChild(a._prv),a._nxt&&a._nxt.parentNode.removeChild(a._nxt))}(g=(d=h&&h[0]||o.elem)&&d._jsvTr)&&(gn(h||t(d),g,"off"),d._jsvTr=void 0),"link"===(v=o.view).type?v.parent.removeViews(v._.key,void 0,!0):delete v._.bnds[e]}delete je[_.cbId]}}function En(e){e?((e=e.jquery?e:t(e)).each((function(){for(var e;(e=ot(this,!0))&&e.parent;)e.parent.removeViews(e._.key,void 0,!0);yn(this.getElementsByTagName("*"))})),yn(e)):(rt&&(t(rt).off(ft,Kt).off("blur","[contenteditable]",Kt),rt=void 0),o.removeViews(),yn(document.body.getElementsByTagName("*")))}function In(e,t,n,r,i,o){var a,s,l,u,c,p,f,h=0,d=e===t;if(e){for(a=0,s=(l=cn(e)||[]).length;a<s;a++){if((p=(u=l[a]).id)===r&&u.ch===i){if(!o)break;s=0}d||(c="_"===u.ch?ut[p]:Ut[p].linkCtx.tag,u.open?c._prv=t:u.close&&(c._nxt=t)),h+=p.length+2}h&&e.setAttribute(pt,e.getAttribute(pt).slice(h)),(s=(f=t?t.getAttribute(pt):n._df).indexOf("/"+r+i)+1)&&(f=l._tkns.slice(0,h)+f.slice(s+(o?-1:r.length+1))),f&&(t?t.setAttribute(pt,f):Wt(n,f))}else Wt(n,ln(n._df,"#"+r+i)),o||t||Wt(n,ln(n._df,"/"+r+i))}function Tn(e){var t,n,r,i;if(i=cn(e,!0,Gt))for(t=0,n=i.length;t<n;t++)"_"===(r=i[t]).ch?(r=ut[r.id])&&r.type&&r.parent.removeViews(r._.key,void 0,!0):mn(r.id)}function An(e,n){e.contents=function(e,n){e!==!!e&&(n=e,e=void 0);var r,i=t(this.nodes());return i[0]&&(r=n?i.filter(n):i,i=e&&n?r.add(i.find(n)):r),i},e.nodes=function(e,t,n){var r,i=this,o=i._elCnt,a=!t&&o,s=[];for(t=t||i._prv,n=n||i._nxt,r=a?t===i._nxt?i.parentElem.lastSibling:t:!1===i._.inline?t||i.linkCtx.elem.firstChild:t&&t.nextSibling;r&&(!n||r!==n);)(e||o||r.tagName!==mt)&&s.push(r),r=r.nextSibling;return s},e.childTags=function(e,t){e!==!!e&&(t=e,e=void 0);var n=this,r=n.link?n:n.tagCtx.view,i=n._prv,o=n._elCnt,a=[];return r.link(void 0,n.parentElem,o?i&&i.previousSibling:i,n._nxt,void 0,{get:{tags:a,deep:e,name:t,id:n.link?n._.id+"_":n._tgId+"^"}}),a},e.refresh=function(e){var t,n=this,r=n.linkCtx,i=n.tagCtx.view;return n.disposed&&_e("Removed tag"),void 0===e&&(e=v._tag(n,i,i.tmpl,_n(n),!0)),e+""===e&&(n.onUnbind&&n.onUnbind(n.tagCtx,r,n.ctx),t=Xt(e,r,n._.inline?H:r.attr||Jt(n.parentElem,!0),n)),hn(n),t||n},e.update=function(e){var t=this.linkedElem;t&&Kt({target:t[0]},0,e)},n?e.domChange=function(){var e=this.parentElem,n=t.hasData(e)&&t._data(e).events,r="jsv-domchange";n&&n[r]&&t(e).triggerHandler(r,arguments)}:(e.addViews=function(e,t){var n=this,r=t.length,i=n.views;!n._.useKey&&r&&i.length+r===n.data.length&&!1!==Zt(n,e,n.tmpl,i,t,n.ctx)&&(n._.srt||n.fixIndex(e+r))},e.removeViews=function(e,n,r,i){function o(e){var n,i,o,a,s,l,u=p[e];if(u&&u.link){if(n=u._.id,r||(l=u.nodes()),u.removeViews(void 0,void 0,!0),u.type=void 0,a=u._prv,s=u._nxt,o=u.parentElem,r||(u._elCnt&&In(a,s,o,n,"_"),t(l).remove()),!u._elCnt)try{a.parentNode.removeChild(a),s.parentNode.removeChild(s)}catch(e){}for(i in $t(u),u._.bnds)mn(i);delete ut[n]}}var a,s,l,u=this,c=!u._.useKey,p=u.views;if(c&&(l=p.length),void 0===e)if(c){for(a=l;a--;)o(a);u.views=[]}else{for(s in p)o(s);u.views={}}else if(void 0===n&&(c?n=1:(o(e),delete p[e])),c&&n&&(i||l-n===u.data.length)){for(a=e+n;a-- >e;)o(a);p.splice(e,n),u._.sort||u.fixIndex(e)}},e.refresh=function(){var e=this,t=e.parent;t&&(Zt(e,e.index,e.tmpl,t.views,e.data,void 0,!0),$t(e))},e.fixIndex=function(e){for(var t=this.views,n=t.length;e<n--;)t[n].index!==n&&l(t[n]).setProperty("index",n)},e.link=on)}function bn(e){return this.tagCtx.view}return s=l.observe,v.onStore.template=function(e,n){n.link=nn,e&&(t.link[e]=function(){return nn.apply(n,arguments)})},v.viewInfos=cn,(m.delimiters=function(){var e=Lt.apply(0,arguments);return Lt!==ie&&(e=ie.apply(0,arguments)),it=new RegExp("(?:^|\\s*)([\\w-]*)(\\"+b+")?(\\"+I+v.rTag+"(:\\w*)?\\"+T+")","g"),e})(),v.addSetting("trigger"),h.merge=function(e){var t,n=this.linkCtx._val||"",r=this.tagCtx.props.toggle;return r&&(t="(\\s(?="+(t=r.replace(/[\\^$.|?*+()[{]/g,"\\$&"))+"$)|(\\s)|^)("+t+"(\\s|$))",e=(n=n.replace(new RegExp(t),"$2"))+(e?(n&&" ")+r:"")),e},g({on:{attr:yt,init:function(e){for(var n,r=this,i=0,o=e.args,a=o.length;i<a&&!c(o[i]);i++);r._hi=a>i&&i+1,r._.inline&&(v.rTmpl.exec(n=e.tmpl.markup)||(r.template="<button>"+(t.trim(n)||e.params.args[i]||"noop")+"</button>"),r.attr=H)},onAfterLink:function(e,n){var r,i,o,a=this,s=a._hi,l=e.args,u=l.length,c=e.props,p=c.data,f=e.view,h=c.context;s&&(r=l[s-1],i=l.slice(s),l=l.slice(0,s-1),a._sel=l[1],o=a.activeElem=a.activeElem||t(a._.inline?(a._sel=l[1]||"*",a.parentElem):n.elem),h||(h=(h=/^(.*)[\.^][\w$]+$/.exec(e.params.args.slice(-i.length-1)[0]))&&v.tmplFn(I+":"+h[1]+T,f.tmpl,!0)(n.data,f)),a._evs&&a.onUnbind(),o.on(a._evs=l[0]||"click",a._sel,null==p?null:p,a._hlr=function(e){var t,o=!a._.inline;if(!o)for(t=a.contents("*"),u=t.length;!o&&u--;)t[u].contains(e.target)&&(o=!0);if(o)return r.apply(h||n.data,[].concat(i,e,{change:e.type,view:f,linkCtx:n},i.slice.call(arguments,1)))}))},onUpdate:function(){return!1},onUnbind:function(){var e=this;e.activeElem&&e.activeElem.off(e._evs,e._sel,e._hlr)},flow:!0,contentCtx:bn,dataBoundOnly:!0},radiogroup:{init:function(e){this.name=e.props.name||"jsv"+Math.random()},onBind:function(e,n){var r,i=this,o=i.linkedElem=i._.inline?i.contents(!0,"input[type=radio]"):t(n.elem).find("input[type=radio]"),a=o.length;for(r=i._.inline?(r=i.contents("*")[0])&&t.view(r).ctx.tag===i.parent?r:i.parentElem:n.elem;a--;)o[a].name=o[a].name||i.name;t(r).on("jsv-domchange",(function(e,t){var n,s=t.ctx.parentTags;if(!i._.inline||r!==i.parentElem||s&&s[i.tagName]===i)for(o=i.linkedElem=i.contents(!0,"input[type=radio]"),a=o.length;a--;)(n=o[a])._jsvLkEl=i,n.name=n.name||i.name,vn(Ut[i._tgId],i,n),n._jsvBnd="&"+i._tgId+"+",n.checked=i.cvtArgs()[0]===n.value}))},onUpdate:function(e,t,n){return!1},contentCtx:bn,dataBoundOnly:!0}}),re(g.for,{onArrayChange:function(e,t,n,r){var i,o=e.target,a=o.length,s=this,l=t.change;if(s._.noVws||s.tagCtxs[1]&&("insert"===l&&a===t.items.length||"remove"===l&&!a))s.refresh();else for(i in s._.arrVws)(i=s._.arrVws[i]).data===o&&i._.onArrayChange.apply(i,arguments);s.domChange(n,r,t),e.done=!0},onAfterLink:function(e,t){var n,r,i,o,a=this,l=a._ars||{},u=a.tagCtxs,c=u.length,f=a.selected||0;for(n=0;n<=f;n++)o=(e=u[n]).map?e.map.tgt:e.args.length?e.args[0]:e.view.data,(i=l[n])&&o!==i[0]&&(s(i[0],i[1],!0),delete l[n]),!l[n]&&p(o)&&(s(o,r=function(n,r){var i=e;a.onArrayChange(n,r,i,t)}),l[n]=[o,r]);for(n=f+1;n<c;n++)(i=l[n])&&(s(i[0],i[1],!0),delete l[n]);a._ars=l},onDispose:function(){var e,t=this;for(e in t._ars)s(t._ars[e][0],t._ars[e][1],!0)}}),re(g.if,{onUpdate:function(e,t,n){var r,i,o;for(r=0;i=this.tagCtxs[r];r++)if(o=i.props.tmpl!==n[r].props.tmpl||i.args.length&&!(i=i.args[0])!=!n[r].args[0],!this.convert&&i||o)return o;return!1},onAfterLink:function(e,t,n,r,i){i&&this.domChange(e,t,i)}}),g("props",{baseTag:"for",dataMap:a.map({getTgt:g.props.dataMap.getTgt,obsSrc:function(e,t,n){if("set"===n.change){for(var r=e.tgt,i=r.length;i--&&r[i].key!==n.path;);-1===i?n.path&&!n.remove&&l(r).insert({key:n.path,prop:n.value}):n.remove?l(r).remove(i):l(r[i]).setProperty("prop",n.value)}},obsTgt:function(e,t,n){var r,i=e.src,o=n.change;"set"===o?"prop"===n.path?l(i).setProperty(t.target.key,n.value):(l(i).removeProperty(n.oldValue),l(i).setProperty(n.value,t.target.prop)):"remove"===o?(r=n.items[0],l(i).removeProperty(r.key),delete i[r.key]):"insert"===o&&(r=n.items[0]).key&&l(i).setProperty(r.key,r.prop)},tgtFlt:function(e){return e.indexOf(".")<0}}),flow:!0}),re(t,{view:ot=function(e,n,r){function i(e,t){if(e)for(s=cn(e,t,kt),u=0,c=s.length;u<c&&(!(a=ut[s[u].id])||!(a=a&&r?a.get(!0,r):a));u++);}n!==!!n&&(r=n,n=void 0);var a,s,l,u,c,p,f,h=0,d=document.body;if(e&&e!==d&&o._.useKey>1&&(e=""+e===e?t(e)[0]:e.jquery?e[0]:e)){if(n){if(i(e._df,!0),!a)for(p=(f=Rt?e.querySelectorAll(At):t(At,e).get()).length,l=0;!a&&l<p;l++)i(f[l]);return a}for(;e;){if(s=cn(e,void 0,Ft))for(p=s.length;p--;)if((a=s[p]).open){if(h<1)return(a=ut[a.id])&&r?a.get(r):a||o;h--}else h++;e=e.previousSibling||e.parentNode}}return o},link:rn,unlink:En,cleanData:function(e){e.length&&Ct&&yn(e),Nt.apply(t,arguments)}}),re(t.fn,{link:function(e,t,n,r,i,o,a){return rn(e,this,t,n,r,i,o,a)},unlink:function(){return En(this)},view:function(e,t){return ot(this[0],e,t)}}),t.each([H,"replaceWith","empty","remove"],(function(e,n){var r=t.fn[n];t.fn[n]=function(){var e;Ct=1;try{e=r.apply(this,arguments)}finally{Ct=0}return e}})),An(re(o=v.topView,{tmpl:{links:{}}})),ut={0:o},a.getCtx=function(e){return e&&e._cp&&(e=e[1](e[0].data,e[0],v)),e},v._cp=function(e,t,n){if(n.linked){t=I+":"+t+T;var r=n.tmpl,i=o.tmpl.links,a=i[t];a||(i[t]=a=v.tmplFn(t,r,!0)),(e=[n,a])._cp=!0}return e},v._ceo=function e(t){var n,r=t,i=t.length;if(i)for(r=[];i--;)(n=t[i])._jsv&&((n=re({},n)).prm=e(n.prm)),r.unshift(n);return r},v._gccb=function(e){return function(t,n,r){var i,o,a,s,l,u,p;if(e&&t){if(t._jsv)return t._jsv.call(e.tmpl,n,e,v);if("~"===t.charAt(0))return"~tag"===t.slice(0,4)&&(o=e.ctx,"."===t.charAt(4)&&(i=t.slice(5).split("."),o=o.tag),i)?o?[o,i.join("."),n]:[]:(t=t.slice(1).split("."),(s=e.hlp(l=t.shift(),!0))&&(s._cp?(t.length&&(u="."+t.join("."),(l=s[p=s.length-1])._jsv?(l.sb=u,l.bnd=!!r):(s[p]=(l+u).replace("#data.",""),"#view"===l.slice(0,5)&&(s[p]=s[p].slice(6),s.splice(p,0,e)))),a=[s]):(t.length||c(s))&&(a=[s,t.join("."),n])),a||[]);if("#"===t.charAt(0))return"#data"===t?[]:[e,t.replace(jt,""),n]}}},ct=v.advSet,v.advSet=function(){ct.call(v),e._jsv=y._jsv?re(e._jsv||{},{views:ut,bindings:Ut}):void 0,at=y.linkAttr,st=At+",["+at+"]",(lt=y._wm).optgroup=lt.option,lt.tbody=lt.tfoot=lt.colgroup=lt.caption=lt.thead,lt.th=lt.td},m.advanced({linkAttr:"data-link",useViews:!1,noValidate:!1,_wm:{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],svg_ns:[1,"<svg>","</svg>"],div:t.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},_fe:{input:{from:function(e){return e.type===vt?e.checked:e.value},to:"value"},textarea:Ot,select:Ot,optgroup:{to:"label"}}}),t},i=window,o=a,e.exports=o?r(i,o):function(e){return r(i,e)}},6947:function(e){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(9)),r(n(10)),r(n(11)),r(n(12)),r(n(13)),r(n(14)),r(n(15)),r(n(16)),r(n(17)),r(n(31)),r(n(32)),r(n(33)),r(n(34)),r(n(35)),r(n(38)),r(n(39)),r(n(40)),r(n(41)),r(n(42)),r(n(43)),r(n(44)),r(n(45)),r(n(46)),r(n(47)),r(n(48)),r(n(49)),r(n(50)),r(n(3))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.BOOKMARKING="oa:bookmarking",e.CLASSIFYING="oa:classifying",e.COMMENTING="oa:commenting",e.DESCRIBING="oa:describing",e.EDITING="oa:editing",e.HIGHLIGHTING="oa:highlighting",e.IDENTIFYING="oa:identifying",e.LINKING="oa:linking",e.MODERATING="oa:moderating",e.PAINTING="sc:painting",e.QUESTIONING="oa:questioning",e.REPLYING="oa:replying",e.TAGGING="oa:tagging",e.TRANSCRIBING="oad:transcribing"}(t.AnnotationMotivation||(t.AnnotationMotivation={})),function(e){e.AUTO_ADVANCE="auto-advance",e.CONTINUOUS="continuous",e.FACING_PAGES="facing-pages",e.HIDDEN="hidden",e.INDIVIDUALS="individuals",e.MULTI_PART="multi-part",e.NO_NAV="no-nav",e.NON_PAGED="non-paged",e.PAGED="paged",e.REPEAT="repeat",e.SEQUENCE="sequence",e.THUMBNAIL_NAV="thumbnail-nav",e.TOGETHER="together",e.UNORDERED="unordered"}(t.Behavior||(t.Behavior={})),function(e){e.CANVAS="canvas",e.CHOICE="choice",e.OA_CHOICE="oa:choice",e.CONTENT_AS_TEXT="contentastext",e.DATASET="dataset",e.DOCUMENT="document",e.IMAGE="image",e.MODEL="model",e.MOVING_IMAGE="movingimage",e.PDF="pdf",e.PHYSICAL_OBJECT="physicalobject",e.SOUND="sound",e.TEXT="text",e.TEXTUALBODY="textualbody",e.VIDEO="video"}(t.ExternalResourceType||(t.ExternalResourceType={})),function(e){e.ANNOTATION="annotation",e.CANVAS="canvas",e.COLLECTION="collection",e.MANIFEST="manifest",e.RANGE="range",e.SEQUENCE="sequence"}(t.IIIFResourceType||(t.IIIFResourceType={})),function(e){e.AUDIO_MP4="audio/mp4",e.CORTO="application/corto",e.DICOM="application/dicom",e.DRACO="application/draco",e.EPUB="application/epub+zip",e.GLB="model/gltf-binary",e.GLTF="model/gltf+json",e.IIIF_PRESENTATION_2='application/ld+json;profile="http://iiif.io/api/presentation/2/context.json"',e.IIIF_PRESENTATION_3='application/ld+json;profile="http://iiif.io/api/presentation/3/context.json"',e.JPG="image/jpeg",e.M3U8="application/vnd.apple.mpegurl",e.MP3="audio/mp3",e.MPEG_DASH="application/dash+xml",e.OBJ="text/plain",e.OPF="application/oebps-package+xml",e.PDF="application/pdf",e.PLY="application/ply",e.THREEJS="application/vnd.threejs+json",e.USDZ="model/vnd.usd+zip",e.VIDEO_MP4="video/mp4",e.WEBM="video/webm"}(t.MediaType||(t.MediaType={})),function(e){e.DOC="application/msword",e.DOCX="application/vnd.openxmlformats-officedocument.wordprocessingml.document",e.PDF="application/pdf"}(t.RenderingFormat||(t.RenderingFormat={})),function(e){e.IMAGE_0_COMPLIANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/compliance.html#level0",e.IMAGE_0_COMPLIANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/compliance.html#level1",e.IMAGE_0_COMPLIANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/compliance.html#level2",e.IMAGE_0_CONFORMANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/conformance.html#level0",e.IMAGE_0_CONFORMANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/conformance.html#level1",e.IMAGE_0_CONFORMANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/conformance.html#level2",e.IMAGE_1_COMPLIANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",e.IMAGE_1_COMPLIANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",e.IMAGE_1_COMPLIANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",e.IMAGE_1_CONFORMANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",e.IMAGE_1_CONFORMANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",e.IMAGE_1_CONFORMANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",e.IMAGE_1_LEVEL_0="http://iiif.io/api/image/1/level0.json",e.IMAGE_1_PROFILE_LEVEL_0="http://iiif.io/api/image/1/profiles/level0.json",e.IMAGE_1_LEVEL_1="http://iiif.io/api/image/1/level1.json",e.IMAGE_1_PROFILE_LEVEL_1="http://iiif.io/api/image/1/profiles/level1.json",e.IMAGE_1_LEVEL_2="http://iiif.io/api/image/1/level2.json",e.IMAGE_1_PROFILE_LEVEL_2="http://iiif.io/api/image/1/profiles/level2.json",e.IMAGE_2_LEVEL_0="http://iiif.io/api/image/2/level0.json",e.IMAGE_2_PROFILE_LEVEL_0="http://iiif.io/api/image/2/profiles/level0.json",e.IMAGE_2_LEVEL_1="http://iiif.io/api/image/2/level1.json",e.IMAGE_2_PROFILE_LEVEL_1="http://iiif.io/api/image/2/profiles/level1.json",e.IMAGE_2_LEVEL_2="http://iiif.io/api/image/2/level2.json",e.IMAGE_2_PROFILE_LEVEL_2="http://iiif.io/api/image/2/profiles/level2.json",e.AUTH_0_CLICK_THROUGH="http://iiif.io/api/auth/0/login/clickthrough",e.AUTH_0_LOGIN="http://iiif.io/api/auth/0/login",e.AUTH_0_LOGOUT="http://iiif.io/api/auth/0/logout",e.AUTH_0_RESTRICTED="http://iiif.io/api/auth/0/login/restricted",e.AUTH_0_TOKEN="http://iiif.io/api/auth/0/token",e.AUTH_1_CLICK_THROUGH="http://iiif.io/api/auth/1/clickthrough",e.AUTH_1_EXTERNAL="http://iiif.io/api/auth/1/external",e.AUTH_1_KIOSK="http://iiif.io/api/auth/1/kiosk",e.AUTH_1_LOGIN="http://iiif.io/api/auth/1/login",e.AUTH_1_LOGOUT="http://iiif.io/api/auth/1/logout",e.AUTH_1_PROBE="http://iiif.io/api/auth/1/probe",e.AUTH_1_TOKEN="http://iiif.io/api/auth/1/token",e.SEARCH_0="http://iiif.io/api/search/0/search",e.SEARCH_0_AUTO_COMPLETE="http://iiif.io/api/search/0/autocomplete",e.SEARCH_1="http://iiif.io/api/search/1/search",e.SEARCH_1_AUTO_COMPLETE="http://iiif.io/api/search/1/autocomplete",e.TRACKING_EXTENSIONS="http://universalviewer.io/tracking-extensions-profile",e.UI_EXTENSIONS="http://universalviewer.io/ui-extensions-profile",e.PRINT_EXTENSIONS="http://universalviewer.io/print-extensions-profile",e.SHARE_EXTENSIONS="http://universalviewer.io/share-extensions-profile",e.OTHER_MANIFESTATIONS="http://iiif.io/api/otherManifestations.json",e.IXIF="http://wellcomelibrary.org/ld/ixif/0/alpha.json"}(t.ServiceProfile||(t.ServiceProfile={})),function(e){e.BOTTOM_TO_TOP="bottom-to-top",e.LEFT_TO_RIGHT="left-to-right",e.RIGHT_TO_LEFT="right-to-left",e.TOP_TO_BOTTOM="top-to-bottom"}(t.ViewingDirection||(t.ViewingDirection={})),function(e){e.CONTINUOUS="continuous",e.INDIVIDUALS="individuals",e.NON_PAGED="non-paged",e.PAGED="paged",e.TOP="top"}(t.ViewingHint||(t.ViewingHint={}))},function(e,t,n){var r=n(21).Symbol;e.exports=r},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(1),s=n(36);n(37);var l=function(){function e(){}return e.getMediaType=function(e){return(e=(e=e.toLowerCase()).split(";")[0]).trim()},e.getImageQuality=function(e){return e===a.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_1||e===a.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_2||e===a.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_1||e===a.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_2||e===a.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_1||e===a.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_2||e===a.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_1||e===a.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_2||e===a.ServiceProfile.IMAGE_1_LEVEL_1||e===a.ServiceProfile.IMAGE_1_PROFILE_LEVEL_1||e===a.ServiceProfile.IMAGE_1_LEVEL_2||e===a.ServiceProfile.IMAGE_1_PROFILE_LEVEL_2?"native":"default"},e.getInexactLocale=function(e){return-1!==e.indexOf("-")?e.substr(0,e.indexOf("-")):e},e.getLocalisedValue=function(e,t){if(!Array.isArray(e))return e;for(var n=0;n<e.length;n++){var r=e[n];if(t===r["@language"])return r["@value"]}var i=t.substr(0,t.indexOf("-"));for(n=0;n<e.length;n++){var o=e[n];if(o["@language"]===i)return o["@value"]}return null},e.generateTreeNodeIds=function(t,n){var r;void 0===n&&(n=0),r=t.parentNode?t.parentNode.id+"-"+n:"0",t.id=r;for(var i=0;i<t.nodes.length;i++){var o=t.nodes[i];e.generateTreeNodeIds(o,i)}},e.normaliseType=function(e){return-1!==(e=(e||"").toLowerCase()).indexOf(":")?e.split(":")[1]:e},e.normaliseUrl=function(e){return-1!==(e=e.substr(e.indexOf("://"))).indexOf("#")&&(e=e.split("#")[0]),e},e.normalisedUrlsMatch=function(t,n){return e.normaliseUrl(t)===e.normaliseUrl(n)},e.isImageProfile=function(t){return!!(e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_PROFILE_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_PROFILE_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_PROFILE_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_PROFILE_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_PROFILE_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_PROFILE_LEVEL_2))},e.isLevel0ImageProfile=function(t){return!!(e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_PROFILE_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_PROFILE_LEVEL_0))},e.isLevel1ImageProfile=function(t){return!!(e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_PROFILE_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_PROFILE_LEVEL_1))},e.isLevel2ImageProfile=function(t){return!!(e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_PROFILE_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_PROFILE_LEVEL_2))},e.parseManifest=function(e,t){return o.Deserialiser.parse(e,t)},e.checkStatus=function(e){if(e.ok)return e;var t=new Error(e.statusText);return t.response=e,Promise.reject(t)},e.loadManifest=function(t){return new Promise((function(n,r){fetch(t).then(e.checkStatus).then((function(e){return e.json()})).then((function(e){n(e)})).catch((function(e){r()}))}))},e.loadExternalResourcesAuth1=function(t,n,r,i,o,a,s,l){return new Promise((function(u,c){var p=t.map((function(t){return e.loadExternalResourceAuth1(t,n,r,i,o,a,s,l)}));Promise.all(p).then((function(){u(t)})).catch((function(e){c(e)}))}))},e.loadExternalResourceAuth1=function(t,n,o,a,l,u,c,p){return r(this,void 0,void 0,(function(){var r;return i(this,(function(i){switch(i.label){case 0:return[4,a(t)];case 1:return(r=i.sent())?[4,t.getData(r)]:[3,6];case 2:return i.sent(),t.status!==s.OK?[3,3]:[2,t];case 3:return[4,e.doAuthChain(t,n,o,l,u,c,p)];case 4:i.sent(),i.label=5;case 5:if(t.status===s.OK||t.status===s.MOVED_TEMPORARILY)return[2,t];throw e.createAuthorizationFailedError();case 6:return[4,t.getData()];case 7:return i.sent(),t.status!==s.MOVED_TEMPORARILY&&t.status!==s.UNAUTHORIZED?[3,9]:[4,e.doAuthChain(t,n,o,l,u,c,p)];case 8:i.sent(),i.label=9;case 9:if(t.status===s.OK||t.status===s.MOVED_TEMPORARILY)return[2,t];throw e.createAuthorizationFailedError()}}))}))},e.doAuthChain=function(t,n,o,a,l,u,c){return r(this,void 0,void 0,(function(){var r,p,f,h,d,g,v,_;return i(this,(function(i){switch(i.label){case 0:return t.isAccessControlled()?((r=t.externalService)&&(r.options=t.options),(p=t.kioskService)&&(p.options=t.options),(f=t.clickThroughService)&&(f.options=t.options),(h=t.loginService)&&(h.options=t.options),t.isResponseHandled||t.status!==s.MOVED_TEMPORARILY?[3,2]:[4,u(t)]):[2,t];case 1:case 3:case 6:case 10:case 14:return i.sent(),[2,t];case 2:return d=null,g=null,(d=r)?(g=d,[4,e.attemptResourceWithToken(t,o,d)]):[3,4];case 4:return(d=p)?(g=d,(v=n(d))?[4,a(v)]:[3,7]):[3,7];case 5:case 9:case 13:return i.sent(),[4,e.attemptResourceWithToken(t,o,d)];case 7:return(d=f)?(g=d,[4,l(t,d)]):[3,11];case 8:return(_=i.sent())?[4,a(_)]:[3,11];case 11:return(d=h)?(g=d,[4,l(t,d)]):[3,15];case 12:return(_=i.sent())?[4,a(_)]:[3,15];case 15:return g&&c(t,g),[2]}}))}))},e.attemptResourceWithToken=function(e,t,n){return r(this,void 0,void 0,(function(){var r,o;return i(this,(function(i){switch(i.label){case 0:return(r=n.getService(a.ServiceProfile.AUTH_1_TOKEN))?[4,t(e,r)]:[3,3];case 1:return(o=i.sent())&&o.accessToken?[4,e.getData(o)]:[3,3];case 2:return i.sent(),[2,e];case 3:return[2]}}))}))},e.loadExternalResourcesAuth09=function(t,n,r,i,o,a,s,l,u,c){return new Promise((function(p,f){var h=t.map((function(t){return e.loadExternalResourceAuth09(t,n,r,i,o,a,s,l,u,c)}));Promise.all(h).then((function(){p(t)})).catch((function(e){f(e)}))}))},e.loadExternalResourceAuth09=function(t,n,r,i,o,a,l,u,c,p){return new Promise((function(f,h){p&&p.pessimisticAccessControl?t.getData().then((function(){t.isAccessControlled()?t.clickThroughService?(f(r(t)),f(i(t))):o(t).then((function(){a(t,!0).then((function(n){t.getData(n).then((function(){f(c(t))})).catch((function(t){h(e.createInternalServerError(t))}))})).catch((function(t){h(e.createInternalServerError(t))}))})).catch((function(t){h(e.createInternalServerError(t))})):f(t)})).catch((function(t){h(e.createInternalServerError(t))})):u(t,n).then((function(p){p?t.getData(p).then((function(){t.status===s.OK?f(c(t)):e.authorize(t,n,r,i,o,a,l,u).then((function(){f(c(t))})).catch((function(t){h(e.createAuthorizationFailedError())}))})).catch((function(t){h(e.createAuthorizationFailedError())})):e.authorize(t,n,r,i,o,a,l,u).then((function(){f(c(t))})).catch((function(t){h(e.createAuthorizationFailedError())}))})).catch((function(t){h(e.createAuthorizationFailedError())}))}))},e.createError=function(e,t){var n=new Error;return n.message=t,n.name=String(e),n},e.createAuthorizationFailedError=function(){return e.createError(o.StatusCode.AUTHORIZATION_FAILED,"Authorization failed")},e.createRestrictedError=function(){return e.createError(o.StatusCode.RESTRICTED,"Restricted")},e.createInternalServerError=function(t){return e.createError(o.StatusCode.INTERNAL_SERVER_ERROR,t)},e.authorize=function(t,n,r,i,o,a,l,u){return new Promise((function(c,p){t.getData().then((function(){t.isAccessControlled()?u(t,n).then((function(u){u?t.getData(u).then((function(){t.status===s.OK?c(t):e.showAuthInteraction(t,n,r,i,o,a,l,c,p)})).catch((function(t){p(e.createInternalServerError(t))})):a(t,!1).then((function(u){u?l(t,u,n).then((function(){t.getData(u).then((function(){t.status===s.OK?c(t):e.showAuthInteraction(t,n,r,i,o,a,l,c,p)})).catch((function(t){p(e.createInternalServerError(t))}))})).catch((function(t){p(e.createInternalServerError(t))})):e.showAuthInteraction(t,n,r,i,o,a,l,c,p)}))})).catch((function(t){p(e.createInternalServerError(t))})):c(t)}))}))},e.showAuthInteraction=function(t,n,r,i,o,a,l,u,c){t.status!==s.MOVED_TEMPORARILY||t.isResponseHandled?t.clickThroughService&&!t.isResponseHandled?r(t).then((function(){a(t,!0).then((function(r){l(t,r,n).then((function(){t.getData(r).then((function(){u(t)})).catch((function(t){c(e.createInternalServerError(t))}))})).catch((function(t){c(e.createInternalServerError(t))}))})).catch((function(t){c(e.createInternalServerError(t))}))})):o(t).then((function(){a(t,!0).then((function(r){l(t,r,n).then((function(){t.getData(r).then((function(){u(t)})).catch((function(t){c(e.createInternalServerError(t))}))})).catch((function(t){c(e.createInternalServerError(t))}))})).catch((function(t){c(e.createInternalServerError(t))}))})):u(t)},e.getService=function(e,t){for(var n=this.getServices(e),r=0;r<n.length;r++){var i=n[r];if(i.getProfile()===t)return i}return null},e.getResourceById=function(t,n){return e.traverseAndFind(t.__jsonld,"@id",n)},e.traverseAndFind=function(t,n,r){if(t.hasOwnProperty(n)&&t[n]===r)return t;for(var i=0;i<Object.keys(t).length;i++)if("object"==typeof t[Object.keys(t)[i]]){var o=e.traverseAndFind(t[Object.keys(t)[i]],n,r);if(null!=o)return o}},e.getServices=function(t,n){var r=void 0===n?{}:n,i=r.onlyService,a=void 0!==i&&i,s=r.onlyServices,l=void 0!==s&&s,u=r.skipParentResources,c=[];(void 0===u||!u)&&t&&t.options&&t.options.resource&&t.options.resource!==t&&c.push.apply(c,e.getServices(t.options.resource,{onlyServices:!0}));var p=l?[]:(t.__jsonld||t).service||[];if(Array.isArray(p)||(p=[p]),a||p.push.apply(p,(t.__jsonld||t).services||[]),0===p.length)return c;for(var f=0;f<p.length;f++){var h=p[f];if("string"==typeof h){var d=this.getResourceById(t.options.resource,h);d&&c.push(new o.Service(d.__jsonld||d,t.options))}else c.push(new o.Service(h,t.options))}return c},e.getTemporalComponent=function(e){var t=/t=([^&]+)/g.exec(e),n=null;return t&&t[1]&&(n=t[1].split(",")),n},e}();t.Utils=l},function(e,t,n){var r=n(19),i=n(20);e.exports=function e(t,n,o,a,s){var l=-1,u=t.length;for(o||(o=i),s||(s=[]);++l<u;){var c=t[l];n>0&&o(c)?n>1?e(c,n-1,o,a,s):r(s,c):a||(s[s.length]=c)}return s}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){"use strict";n.r(t),t.default=function(e,t){return t=t||{},new Promise((function(n,r){var i=new XMLHttpRequest,o=[],a=[],s={},l=function(){return{ok:2==(i.status/100|0),statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(JSON.parse(i.responseText))},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:l,headers:{keys:function(){return o},entries:function(){return a},get:function(e){return s[e.toLowerCase()]},has:function(e){return e.toLowerCase()in s}}}};for(var u in i.open(t.method||"get",e,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,t,n){o.push(t=t.toLowerCase()),a.push([t,n]),s[t]=s[t]?s[t]+","+n:n})),n(l())},i.onerror=r,i.withCredentials="include"==t.credentials,t.headers)i.setRequestHeader(u,t.headers[u]);i.send(t.body||null)}))}},function(e,t,n){e.exports=n(8)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(0));var r=n(3);t.loadManifest=function(e){return r.Utils.loadManifest(e)},t.parseManifest=function(e,t){return r.Utils.parseManifest(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.__jsonld=e,this.context=this.getProperty("context"),this.id=this.getProperty("id")}return e.prototype.getProperty=function(e){var t=null;return this.__jsonld&&((t=this.__jsonld[e])||(t=this.__jsonld["@"+e])),t},e}();t.JSONLDResource=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(1),s=function(e){function t(t,n){var r=e.call(this,t)||this;return r.options=n,r}return i(t,e),t.prototype.getIIIFResourceType=function(){return o.Utils.normaliseType(this.getProperty("type"))},t.prototype.getLabel=function(){var e=this.getProperty("label");return e?o.PropertyValue.parse(e,this.options.locale):new o.PropertyValue([],this.options.locale)},t.prototype.getDefaultLabel=function(){return this.getLabel().getValue(this.options.locale)},t.prototype.getMetadata=function(){var e=this.getProperty("metadata"),t=[];if(!e)return t;for(var n=0;n<e.length;n++){var r=e[n],i=new o.LabelValuePair(this.options.locale);i.parse(r),t.push(i)}return t},t.prototype.getRendering=function(e){for(var t=this.getRenderings(),n=0;n<t.length;n++){var r=t[n];if(r.getFormat()===e)return r}return null},t.prototype.getRenderings=function(){var e,t=[];if(!(e=this.__jsonld?this.__jsonld.rendering:this.rendering))return t;Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var r=e[n];t.push(new o.Rendering(r,this.options))}return t},t.prototype.getRequiredStatement=function(){var e=null,t=this.getProperty("requiredStatement");return t&&(e=new o.LabelValuePair(this.options.locale)).parse(t),e},t.prototype.getService=function(e){return o.Utils.getService(this,e)},t.prototype.getServices=function(){return o.Utils.getServices(this)},t.prototype.getThumbnail=function(){var e=this.getProperty("thumbnail");return Array.isArray(e)&&(e=e[0]),e?new o.Thumbnail(e,this.options):null},t.prototype.isAnnotation=function(){return this.getIIIFResourceType()===a.IIIFResourceType.ANNOTATION},t.prototype.isCanvas=function(){return this.getIIIFResourceType()===a.IIIFResourceType.CANVAS},t.prototype.isCollection=function(){return this.getIIIFResourceType()===a.IIIFResourceType.COLLECTION},t.prototype.isManifest=function(){return this.getIIIFResourceType()===a.IIIFResourceType.MANIFEST},t.prototype.isRange=function(){return this.getIIIFResourceType()===a.IIIFResourceType.RANGE},t.prototype.isSequence=function(){return this.getIIIFResourceType()===a.IIIFResourceType.SEQUENCE},t}(o.JSONLDResource);t.ManifestResource=s},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.getFormat=function(){var e=this.getProperty("format");return e?e.toLowerCase():null},t.prototype.getResources=function(){var e=[];if(!this.__jsonld.resources)return e;for(var t=0;t<this.__jsonld.resources.length;t++){var n=this.__jsonld.resources[t],r=new o.Annotation(n,this.options);e.push(r)}return e},t.prototype.getType=function(){var e=this.getProperty("type");return e?o.Utils.normaliseType(e):null},t.prototype.getWidth=function(){return this.getProperty("width")},t.prototype.getHeight=function(){return this.getProperty("height")},t.prototype.getMaxWidth=function(){return this.getProperty("maxWidth")},t.prototype.getMaxHeight=function(){return this.getProperty("maxHeight")?null:this.getMaxWidth()},t}(o.ManifestResource);t.Resource=a},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(1),s=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.index=-1,r.isLoaded=!1;var i={defaultLabel:"-",locale:"en-GB",resource:r,pessimisticAccessControl:!1};return r.options=Object.assign(i,n),r}return i(t,e),t.prototype.getAttribution=function(){var e=this.getProperty("attribution");return e?o.PropertyValue.parse(e,this.options.locale):new o.PropertyValue([],this.options.locale)},t.prototype.getDescription=function(){var e=this.getProperty("description");return e?o.PropertyValue.parse(e,this.options.locale):new o.PropertyValue([],this.options.locale)},t.prototype.getHomepage=function(){var e=this.getProperty("homepage");return e?"string"==typeof e?e:(Array.isArray(e)&&e.length&&(e=e[0]),e["@id"]||e.id):null},t.prototype.getIIIFResourceType=function(){return o.Utils.normaliseType(this.getProperty("type"))},t.prototype.getLogo=function(){var e=this.getProperty("logo");if(!e){var t=this.getProperty("provider");if(!t)return null;e=t.logo}return e?"string"==typeof e?e:(Array.isArray(e)&&e.length&&(e=e[0]),e["@id"]||e.id):null},t.prototype.getLicense=function(){return o.Utils.getLocalisedValue(this.getProperty("license"),this.options.locale)},t.prototype.getNavDate=function(){return new Date(this.getProperty("navDate"))},t.prototype.getRelated=function(){return this.getProperty("related")},t.prototype.getSeeAlso=function(){return this.getProperty("seeAlso")},t.prototype.getTrackingLabel=function(){var e=this.getService(a.ServiceProfile.TRACKING_EXTENSIONS);return e?e.getProperty("trackingLabel"):""},t.prototype.getDefaultTree=function(){return this.defaultTree=new o.TreeNode("root"),this.defaultTree.data=this,this.defaultTree},t.prototype.getRequiredStatement=function(){var e=null,t=this.getProperty("requiredStatement");if(t)(e=new o.LabelValuePair(this.options.locale)).parse(t);else{var n=this.getAttribution();n&&((e=new o.LabelValuePair(this.options.locale)).value=n)}return e},t.prototype.isCollection=function(){return this.getIIIFResourceType()===a.IIIFResourceType.COLLECTION},t.prototype.isManifest=function(){return this.getIIIFResourceType()===a.IIIFResourceType.MANIFEST},t.prototype.load=function(){var e=this;return new Promise((function(t){if(e.isLoaded)t(e);else{var n=e.options;n.navDate=e.getNavDate();var r=e.__jsonld.id;r||(r=e.__jsonld["@id"]),o.Utils.loadManifest(r).then((function(r){e.parentLabel=e.getLabel().getValue(n.locale);var i=o.Deserialiser.parse(r,n);(e=Object.assign(e,i)).index=n.index,t(e)}))}}))},t}(o.ManifestResource);t.IIIFResource=s},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.getBody=function(){var e=[],t=this.getProperty("body");if(t)if(Array.isArray(t))for(var n=0;n<t.length;n++)if((a=t[n]).items)for(var r=0;r<a.items.length;r++){var i=a.items[r];e.push(new o.AnnotationBody(i,this.options))}else e.push(new o.AnnotationBody(a,this.options));else if(t.items)for(n=0;n<t.items.length;n++){var a=t.items[n];e.push(new o.AnnotationBody(a,this.options))}else e.push(new o.AnnotationBody(t,this.options));return e},t.prototype.getMotivation=function(){return this.getProperty("motivation")||null},t.prototype.getOn=function(){return this.getProperty("on")},t.prototype.getTarget=function(){return this.getProperty("target")},t.prototype.getResource=function(){return new o.Resource(this.getProperty("resource"),this.options)},t}(o.ManifestResource);t.Annotation=a},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.getFormat=function(){var e=this.getProperty("format");return e?o.Utils.getMediaType(e):null},t.prototype.getType=function(){return this.getProperty("type")?o.Utils.normaliseType(this.getProperty("type")):null},t.prototype.getWidth=function(){return this.getProperty("width")},t.prototype.getHeight=function(){return this.getProperty("height")},t}(o.ManifestResource);t.AnnotationBody=a},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(e){function t(t,n,r){var i=e.call(this,n)||this;return i.label=t,i.options=r,i}return i(t,e),t.prototype.getIIIFResourceType=function(){return o.Utils.normaliseType(this.getProperty("type"))},t.prototype.getLabel=function(){return this.label},t.prototype.getResources=function(){var e=this;return this.getProperty("resources").map((function(t){return new o.Annotation(t,e.options)}))},t.prototype.load=function(){var e=this;return new Promise((function(t,n){if(e.isLoaded)t(e);else{var r=e.__jsonld.id;r||(r=e.__jsonld["@id"]),o.Utils.loadManifest(r).then((function(n){e.__jsonld=n,e.context=e.getProperty("context"),e.id=e.getProperty("id"),e.isLoaded=!0,t(e)})).catch(n)}}))},t}(o.JSONLDResource);t.AnnotationList=a},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.getItems=function(){return this.getProperty("items")},t}(n(0).ManifestResource);t.AnnotationPage=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(0),l=o(n(18)),u=o(n(30)),c=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.getCanonicalImageUri=function(e){var t,n=null,r="default",i=e;if(this.externalResource&&this.externalResource.data&&this.externalResource.data["@id"])n=this.externalResource.data["@id"],i||(i=this.externalResource.data.width),this.externalResource.data["@context"]&&(this.externalResource.data["@context"].indexOf("/1.0/context.json")>-1||this.externalResource.data["@context"].indexOf("/1.1/context.json")>-1||this.externalResource.data["@context"].indexOf("/1/context.json")>-1)&&(r="native");else{var o=this.getImages();if(o&&o.length){var a=o[0].getResource(),l=a.getServices();i||(i=a.getWidth());var u=l?l.find((function(e){return s.Utils.isImageProfile(e.getProfile())})):null;if(u)n=u.id,r=s.Utils.getImageQuality(u.getProfile());else if(i===a.getWidth())return a.id}if(!n){var c=this.getProperty("thumbnail");if(c){if("string"==typeof c)return c;if(c["@id"])return c["@id"];if(c.length)return c[0].id}}}return t=i+",",n&&n.endsWith("/")&&(n=n.substr(0,n.length-1)),[n,"full",t,0,r+".jpg"].join("/")},t.prototype.getMaxDimensions=function(){var e,t=null;return this.externalResource&&this.externalResource.data&&this.externalResource.data.profile&&(e=this.externalResource.data.profile,Array.isArray(e)&&(e=e.filter((function(e){return e.maxWidth}))[0])&&(t=new s.Size(e.maxWidth,e.maxHeight?e.maxHeight:e.maxWidth))),t},t.prototype.getContent=function(){var e=[],t=this.__jsonld.items||this.__jsonld.content;if(!t)return e;var n=null;if(t.length&&(n=new s.AnnotationPage(t[0],this.options)),!n)return e;for(var r=n.getItems(),i=0;i<r.length;i++){var o=r[i],a=new s.Annotation(o,this.options);e.push(a)}return e},t.prototype.getDuration=function(){return this.getProperty("duration")},t.prototype.getImages=function(){var e=[];if(!this.__jsonld.images)return e;for(var t=0;t<this.__jsonld.images.length;t++){var n=this.__jsonld.images[t],r=new s.Annotation(n,this.options);e.push(r)}return e},t.prototype.getIndex=function(){return this.getProperty("index")},t.prototype.getOtherContent=function(){var e=this,t=(Array.isArray(this.getProperty("otherContent"))?this.getProperty("otherContent"):[this.getProperty("otherContent")]).filter((function(e){return e&&"string"==typeof(t=e["@type"])&&t.toLowerCase()==t.toLowerCase();var t})).map((function(t,n){return new s.AnnotationList(t.label||"Annotation list "+n,t,e.options)})).map((function(e){return e.load()}));return Promise.all(t)},t.prototype.getWidth=function(){return this.getProperty("width")},t.prototype.getHeight=function(){return this.getProperty("height")},t.prototype.getViewingHint=function(){return this.getProperty("viewingHint")},Object.defineProperty(t.prototype,"imageResources",{get:function(){var e=this,n=u.default([this.getImages().map((function(e){return e.getResource()})),this.getContent().map((function(e){return e.getBody()}))]);return l.default(n.map((function(n){switch(n.getProperty("type").toLowerCase()){case a.ExternalResourceType.CHOICE:case a.ExternalResourceType.OA_CHOICE:return new t({images:l.default([n.getProperty("default"),n.getProperty("item")]).map((function(e){return{resource:e}}))},e.options).getImages().map((function(e){return e.getResource()}));default:return n}})))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resourceAnnotations",{get:function(){return u.default([this.getImages(),this.getContent()])},enumerable:!0,configurable:!0}),t.prototype.resourceAnnotation=function(e){return this.resourceAnnotations.find((function(t){return t.getResource().id===e||l.default(new Array(t.getBody())).some((function(t){return t.id===e}))}))},t.prototype.onFragment=function(e){var t=this.resourceAnnotation(e);if(t){var n=t.getProperty("on"),r=t.getProperty("target"),i=(n||r).match(/xywh=(.*)$/);if(i)return i[1].split(",").map((function(e){return parseInt(e,10)}))}},Object.defineProperty(t.prototype,"iiifImageResources",{get:function(){return this.imageResources.filter((function(e){return e&&e.getServices()[0]&&e.getServices()[0].id}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageServiceIds",{get:function(){return this.iiifImageResources.map((function(e){return e.getServices()[0].id}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"aspectRatio",{get:function(){return this.getWidth()/this.getHeight()},enumerable:!0,configurable:!0}),t}(s.Resource);t.Canvas=c},function(e,t,n){var r=n(4);e.exports=function(e){return null!=e&&e.length?r(e,1):[]}},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},function(e,t,n){var r=n(2),i=n(24),o=n(29),a=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||i(e)||!!(a&&e&&e[a])}},function(e,t,n){var r=n(22),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(23))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(25),i=n(5),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},function(e,t,n){var r=n(26),i=n(5);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},function(e,t,n){var r=n(2),i=n(27),o=n(28),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},function(e,t,n){var r=n(2),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){var r=n(4);e.exports=function(e){return null!=e&&e.length?r(e,Infinity):[]}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=n(0),s=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.items=[],r._collections=null,r._manifests=null,t.__collection=r,r}return i(t,e),t.prototype.getCollections=function(){return this._collections?this._collections:this._collections=this.items.filter((function(e){return e.isCollection()}))},t.prototype.getManifests=function(){return this._manifests?this._manifests:this._manifests=this.items.filter((function(e){return e.isManifest()}))},t.prototype.getCollectionByIndex=function(e){for(var t,n=this.getCollections(),r=0;r<n.length;r++){var i=n[r];i.index===e&&(t=i)}if(t)return t.options.index=e,t.load();throw new Error("Collection index not found")},t.prototype.getManifestByIndex=function(e){for(var t,n=this.getManifests(),r=0;r<n.length;r++){var i=n[r];i.index===e&&(t=i)}if(t)return t.options.index=e,t.load();throw new Error("Manifest index not found")},t.prototype.getTotalCollections=function(){return this.getCollections().length},t.prototype.getTotalManifests=function(){return this.getManifests().length},t.prototype.getTotalItems=function(){return this.items.length},t.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")?this.getProperty("viewingDirection"):o.ViewingDirection.LEFT_TO_RIGHT},t.prototype.getBehavior=function(){var e=this.getProperty("behavior");return Array.isArray(e)&&(e=e[0]),e||null},t.prototype.getViewingHint=function(){return this.getProperty("viewingHint")},t.prototype.getDefaultTree=function(){return e.prototype.getDefaultTree.call(this),this.defaultTree.data.type=a.Utils.normaliseType(a.TreeNodeType.COLLECTION),this._parseManifests(this),this._parseCollections(this),a.Utils.generateTreeNodeIds(this.defaultTree),this.defaultTree},t.prototype._parseManifests=function(e){if(e.getManifests()&&e.getManifests().length)for(var t=0;t<e.getManifests().length;t++){var n=e.getManifests()[t],r=n.getDefaultTree();r.label=n.parentLabel||n.getLabel().getValue(this.options.locale)||"manifest "+(t+1),r.navDate=n.getNavDate(),r.data.id=n.id,r.data.type=a.Utils.normaliseType(a.TreeNodeType.MANIFEST),e.defaultTree.addNode(r)}},t.prototype._parseCollections=function(e){if(e.getCollections()&&e.getCollections().length)for(var t=0;t<e.getCollections().length;t++){var n=e.getCollections()[t],r=n.getDefaultTree();r.label=n.parentLabel||n.getLabel().getValue(this.options.locale)||"collection "+(t+1),r.navDate=n.getNavDate(),r.data.id=n.id,r.data.type=a.Utils.normaliseType(a.TreeNodeType.COLLECTION),e.defaultTree.addNode(r)}},t}(a.IIIFResource);t.Collection=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.start=e,this.end=t}return e.prototype.getLength=function(){return this.end-this.start},e}();t.Duration=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=function(){function e(e){this.defaultLocale=e}return e.prototype.parse=function(e){this.resource=e,this.label=r.PropertyValue.parse(this.resource.label,this.defaultLocale),this.value=r.PropertyValue.parse(this.resource.value,this.defaultLocale)},e.prototype.getLabel=function(e){return null===this.label?null:(Array.isArray(e)&&!e.length&&(e=void 0),this.label.getValue(e||this.defaultLocale))},e.prototype.setLabel=function(e){null===this.label&&(this.label=new r.PropertyValue([])),this.label.setValue(e,this.defaultLocale)},e.prototype.getValue=function(e,t){return void 0===t&&(t="<br/>"),null===this.value?null:(Array.isArray(e)&&!e.length&&(e=void 0),this.value.getValue(e||this.defaultLocale,t))},e.prototype.getValues=function(e){return null===this.value?[]:(Array.isArray(e)&&!e.length&&(e=void 0),this.value.getValues(e||this.defaultLocale))},e.prototype.setValue=function(e){null===this.value&&(this.value=new r.PropertyValue([])),this.value.setValue(e,this.defaultLocale)},e}();t.LabelValuePair=i},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.getValue=function(e,t){return e.getValue(t,"<br/>")},t.getValues=function(e,t){return e.getValues(t)},t}(Array);t.LanguageMap=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),s=function(){function e(e,t,n){void 0===n&&(n="none"),Array.isArray(e)&&1===e.length?this._value=e[0]:this._value=e,"none"!==t&&"@none"!==t||(t=void 0),this._locale=t,this._defaultLocale=n}return e.parseV2Value=function(t,n){return"string"==typeof t?new e(t,void 0,n):t["@value"]?new e(t["@value"],t["@language"],n):null},Object.defineProperty(e.prototype,"value",{get:function(){return Array.isArray(this._value)?this._value.join("<br/>"):this._value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locale",{get:function(){return void 0===this._locale?this._defaultLocale:this._locale},enumerable:!0,configurable:!0}),e.prototype.addValue=function(e){Array.isArray(this._value)||(this._value=[this._value]),Array.isArray(e)?this._value=this._value.concat(e):this._value.push(e)},e}();t.LocalizedValue=s;var l=function(e){function t(n,r){void 0===n&&(n=[]);var i=e.apply(this,n)||this;return i.__proto__=t.prototype,i._defaultLocale=r,i}return i(t,e),t.parse=function(e,n){if(!e)return new t([],n);if(Array.isArray(e)){var r=(i=e.map((function(e){return s.parseV2Value(e,n)})).filter((function(e){return null!==e}))).reduce((function(e,t){var n=t._locale;return n||(n="none"),e[n]?e[n].addValue(t._value):e[n]=t,e}),{});return new t(Object.values(r),n)}return"string"==typeof e?new t([new s(e,void 0,n)],n):e["@language"]||e["@value"]?new t(null!==(i=s.parseV2Value(e))?[i]:[],n):new t(Object.keys(e).map((function(t){var r=e[t];if(!Array.isArray(r))throw new Error("A IIIF v3 localized property value must have an array as the value for a given language.");return new s(r,t,n)})),n);var i},t.prototype.getSuitableLocale=function(e){for(var t=o(this).map((function(e){return e._locale})).filter((function(e){return void 0!==e})),n=function(e){var n=t.find((function(t){return t===e}));if(n)return{value:n}},r=0,i=e;r<i.length;r++){var s=n(i[r]);if("object"==typeof s)return s.value}for(var l=function(e){var n=t.find((function(t){return a.Utils.getInexactLocale(t)===a.Utils.getInexactLocale(e)}));if(n)return{value:n}},u=0,c=e;u<c.length;u++){var p=l(c[u]);if("object"==typeof p)return p.value}},t.prototype.setValue=function(e,t){var n=void 0;if(t){var r=this.getSuitableLocale([t]);r&&(n=this.find((function(e){return e._locale===r})))}else n=this.find((function(e){return void 0===e._locale}));n?n._value=e:this.push(new s(e,t,this._defaultLocale))},t.prototype.getValue=function(e,t){var n=this.getValues(e);return 0===n.length?null:t?n.join(t):n[0]},t.prototype.getValues=function(e){if(!this.length)return[];var t;if(t=e?Array.isArray(e)?e:[e]:[],1===this.length&&void 0===this[0]._locale){var n=this[0]._value;return Array.isArray(n)?n:[n]}var r=this.getSuitableLocale(t);if(r)return n=this.find((function(e){return e._locale===r}))._value,Array.isArray(n)?n:[n];if(!this.find((function(e){return void 0===e._locale})))return n=this[0]._value,Array.isArray(n)?n:[n];var i=this.find((function(e){return void 0===e._locale}));return i?Array.isArray(i._value)?i._value:[i._value]:[]},t}(Array);t.PropertyValue=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONTINUE=100,t.SWITCHING_PROTOCOLS=101,t.PROCESSING=102,t.OK=200,t.CREATED=201,t.ACCEPTED=202,t.NON_AUTHORITATIVE_INFORMATION=203,t.NO_CONTENT=204,t.RESET_CONTENT=205,t.PARTIAL_CONTENT=206,t.MULTI_STATUS=207,t.MULTIPLE_CHOICES=300,t.MOVED_PERMANENTLY=301,t.MOVED_TEMPORARILY=302,t.SEE_OTHER=303,t.NOT_MODIFIED=304,t.USE_PROXY=305,t.TEMPORARY_REDIRECT=307,t.BAD_REQUEST=400,t.UNAUTHORIZED=401,t.PAYMENT_REQUIRED=402,t.FORBIDDEN=403,t.NOT_FOUND=404,t.METHOD_NOT_ALLOWED=405,t.NOT_ACCEPTABLE=406,t.PROXY_AUTHENTICATION_REQUIRED=407,t.REQUEST_TIME_OUT=408,t.CONFLICT=409,t.GONE=410,t.LENGTH_REQUIRED=411,t.PRECONDITION_FAILED=412,t.REQUEST_ENTITY_TOO_LARGE=413,t.REQUEST_URI_TOO_LARGE=414,t.UNSUPPORTED_MEDIA_TYPE=415,t.REQUESTED_RANGE_NOT_SATISFIABLE=416,t.EXPECTATION_FAILED=417,t.IM_A_TEAPOT=418,t.UNPROCESSABLE_ENTITY=422,t.LOCKED=423,t.FAILED_DEPENDENCY=424,t.UNORDERED_COLLECTION=425,t.UPGRADE_REQUIRED=426,t.PRECONDITION_REQUIRED=428,t.TOO_MANY_REQUESTS=429,t.REQUEST_HEADER_FIELDS_TOO_LARGE=431,t.INTERNAL_SERVER_ERROR=500,t.NOT_IMPLEMENTED=501,t.BAD_GATEWAY=502,t.SERVICE_UNAVAILABLE=503,t.GATEWAY_TIME_OUT=504,t.HTTP_VERSION_NOT_SUPPORTED=505,t.VARIANT_ALSO_NEGOTIATES=506,t.INSUFFICIENT_STORAGE=507,t.BANDWIDTH_LIMIT_EXCEEDED=509,t.NOT_EXTENDED=510,t.NETWORK_AUTHENTICATION_REQUIRED=511},function(e,t,n){e.exports=window.fetch||(window.fetch=n(6).default||n(6))},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=n(0),s=function(e){function t(t,n){var r=e.call(this,t,n)||this;if(r.index=0,r._allRanges=null,r.items=[],r._topRanges=[],r.__jsonld.structures&&r.__jsonld.structures.length)for(var i=r._getTopRanges(),o=0;o<i.length;o++){var a=i[o];r._parseRanges(a,String(o))}return r}return i(t,e),t.prototype.getPosterCanvas=function(){var e=this.getProperty("posterCanvas");return e&&(e=new a.Canvas(e,this.options)),e},t.prototype.getAccompanyingCanvas=function(){var e=this.getProperty("accompanyingCanvas");return e&&(e=new a.Canvas(e,this.options)),e},t.prototype.getBehavior=function(){var e=this.getProperty("behavior");return Array.isArray(e)&&(e=e[0]),e||null},t.prototype.getDefaultTree=function(){if(e.prototype.getDefaultTree.call(this),this.defaultTree.data.type=a.Utils.normaliseType(a.TreeNodeType.MANIFEST),!this.isLoaded)return this.defaultTree;var t=this.getTopRanges();return t.length&&t[0].getTree(this.defaultTree),a.Utils.generateTreeNodeIds(this.defaultTree),this.defaultTree},t.prototype._getTopRanges=function(){var e=[];if(this.__jsonld.structures&&this.__jsonld.structures.length){for(var t=0;t<this.__jsonld.structures.length;t++){var n=this.__jsonld.structures[t];n.viewingHint===o.ViewingHint.TOP&&e.push(n)}if(!e.length){var r={};r.ranges=this.__jsonld.structures,e.push(r)}}return e},t.prototype.getTopRanges=function(){return this._topRanges},t.prototype._getRangeById=function(e){if(this.__jsonld.structures&&this.__jsonld.structures.length)for(var t=0;t<this.__jsonld.structures.length;t++){var n=this.__jsonld.structures[t];if(n["@id"]===e||n.id===e)return n}return null},t.prototype._parseRanges=function(e,t,n){var r,i=null;if("string"==typeof e&&(i=e,e=this._getRangeById(i)),e){(r=new a.Range(e,this.options)).parentRange=n,r.path=t,n?n.items.push(r):this._topRanges.push(r);var o=e.items||e.members;if(o)for(var s=0;s<o.length;s++){var l=o[s];if(l["@type"]&&"sc:range"===l["@type"].toLowerCase()||l.type&&"range"===l.type.toLowerCase())this._parseRanges(l,t+"/"+s,r);else if(l["@type"]&&"sc:canvas"===l["@type"].toLowerCase()||l.type&&"canvas"===l.type.toLowerCase()){r.canvases||(r.canvases=[]);var u=l.id||l["@id"];r.canvases.push(u)}}else if(e.ranges)for(s=0;s<e.ranges.length;s++)this._parseRanges(e.ranges[s],t+"/"+s,r)}else console.warn("Range:",i,"does not exist")},t.prototype.getAllRanges=function(){if(null!=this._allRanges)return this._allRanges;this._allRanges=[];for(var e=this.getTopRanges(),t=function(t){var r=e[t];r.id&&n._allRanges.push(r);var i=function(e,t){e.add(t);var n=t.getRanges();return n.length?n.reduce(i,e):e},o=Array.from(r.getRanges().reduce(i,new Set));n._allRanges=n._allRanges.concat(o)},n=this,r=0;r<e.length;r++)t(r);return this._allRanges},t.prototype.getRangeById=function(e){for(var t=this.getAllRanges(),n=0;n<t.length;n++){var r=t[n];if(r.id===e)return r}return null},t.prototype.getRangeByPath=function(e){for(var t=this.getAllRanges(),n=0;n<t.length;n++){var r=t[n];if(r.path===e)return r}return null},t.prototype.getSequences=function(){if(this.items.length)return this.items;var e=this.__jsonld.mediaSequences||this.__jsonld.sequences;if(e)for(var t=0;t<e.length;t++){var n=e[t],r=new a.Sequence(n,this.options);this.items.push(r)}else this.__jsonld.items&&(r=new a.Sequence(this.__jsonld.items,this.options),this.items.push(r));return this.items},t.prototype.getSequenceByIndex=function(e){return this.getSequences()[e]},t.prototype.getTotalSequences=function(){return this.getSequences().length},t.prototype.getManifestType=function(){var e=this.getService(o.ServiceProfile.UI_EXTENSIONS);return e?e.getProperty("manifestType"):a.ManifestType.EMPTY},t.prototype.isMultiSequence=function(){return this.getTotalSequences()>1},t.prototype.isPagingEnabled=function(){var e=this.getViewingHint();if(e)return e===o.ViewingHint.PAGED;var t=this.getBehavior();return!!t&&t===o.Behavior.PAGED},t.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")},t.prototype.getViewingHint=function(){return this.getProperty("viewingHint")},t}(a.IIIFResource);t.Manifest=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.EMPTY="",e.MANUSCRIPT="manuscript",e.MONOGRAPH="monograph"}(t.ManifestType||(t.ManifestType={}))},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(1),s=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r._ranges=null,r.canvases=null,r.items=[],r}return i(t,e),t.prototype.getCanvasIds=function(){return this.__jsonld.canvases?this.__jsonld.canvases:this.canvases?this.canvases:[]},t.prototype.getDuration=function(){if(this.canvases&&this.canvases.length){for(var e=[],t=[],n=0,r=this.canvases;n<r.length;n++)if(d=r[n]){var i=d.match(/(.*)#t=([0-9.]+),?([0-9.]+)?/)||[void 0,d],a=i[1],s=i[2],l=i[3];a&&(e.push(parseFloat(s)),t.push(parseFloat(l)))}if(e.length&&t.length)return new o.Duration(Math.min.apply(Math,e),Math.max.apply(Math,t))}else{e=[],t=[];for(var u=0,c=v=this.getRanges();u<c.length;u++)(_=c[u].getDuration())&&(e.push(_.start),t.push(_.end));if(e.length&&t.length)return new o.Duration(Math.min.apply(Math,e),Math.max.apply(Math,t))}var p,f;if(this.canvases&&this.canvases.length)for(var h=0;h<this.canvases.length;h++){var d=this.canvases[h],g=o.Utils.getTemporalComponent(d);g&&g.length>1&&(0===h&&(p=Number(g[0])),h===this.canvases.length-1&&(f=Number(g[1])))}else{var v=this.getRanges();for(h=0;h<v.length;h++){var _;(_=v[h].getDuration())&&(0===h&&(p=_.start),h===v.length-1&&(f=_.end))}}if(void 0!==p&&void 0!==f)return new o.Duration(p,f)},t.prototype.getRanges=function(){return this._ranges?this._ranges:this._ranges=this.items.filter((function(e){return e.isRange()}))},t.prototype.getBehavior=function(){var e=this.getProperty("behavior");return Array.isArray(e)&&(e=e[0]),e||null},t.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")},t.prototype.getViewingHint=function(){return this.getProperty("viewingHint")},t.prototype.getTree=function(e){e.data=this,this.treeNode=e;var t=this.getRanges();if(t&&t.length)for(var n=0;n<t.length;n++){var r=t[n],i=new o.TreeNode;e.addNode(i),this._parseTreeNode(i,r)}return o.Utils.generateTreeNodeIds(e),e},t.prototype.spansTime=function(e){var t=this.getDuration();return!!(t&&e>=t.start&&e<=t.end)},t.prototype._parseTreeNode=function(e,t){e.label=t.getLabel().getValue(this.options.locale),e.data=t,e.data.type=o.Utils.normaliseType(o.TreeNodeType.RANGE),t.treeNode=e;var n=t.getRanges();if(n&&n.length)for(var r=0;r<n.length;r++){var i=n[r];if(i.getBehavior()!==a.Behavior.NO_NAV){var s=new o.TreeNode;e.addNode(s),this._parseTreeNode(s,i)}}},t}(o.ManifestResource);t.Range=s},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.getFormat=function(){return this.getProperty("format")},t}(n(0).ManifestResource);t.Rendering=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=n(0),s=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.items=[],r._thumbnails=null,r}return i(t,e),t.prototype.getCanvases=function(){if(this.items.length)return this.items;var e=this.__jsonld.canvases||this.__jsonld.elements;if(e)for(var t=0;t<e.length;t++){var n=e[t];(r=new a.Canvas(n,this.options)).index=t,this.items.push(r)}else if(this.__jsonld)for(t=0;t<this.__jsonld.length;t++){var r;n=this.__jsonld[t],(r=new a.Canvas(n,this.options)).index=t,this.items.push(r)}return this.items},t.prototype.getCanvasById=function(e){for(var t=0;t<this.getTotalCanvases();t++){var n=this.getCanvasByIndex(t),r=a.Utils.normaliseUrl(n.id);if(a.Utils.normaliseUrl(e)===r)return n}return null},t.prototype.getCanvasByIndex=function(e){return this.getCanvases()[e]},t.prototype.getCanvasIndexById=function(e){for(var t=0;t<this.getTotalCanvases();t++)if(this.getCanvasByIndex(t).id===e)return t;return null},t.prototype.getCanvasIndexByLabel=function(e,t){e=e.trim(),isNaN(e)||(e=parseInt(e,10).toString(),t&&(e+="r"));for(var n,r,i,o=/(\d*)\D+(\d*)/,a=0;a<this.getTotalCanvases();a++){var s=this.getCanvasByIndex(a);if(s.getLabel().getValue(this.options.locale)===e)return a;if((n=o.exec(e))&&(r=n[1],(i=n[2])&&new RegExp("^"+r+"\\D+"+i+"$").test(s.getLabel().toString())))return a}return-1},t.prototype.getLastCanvasLabel=function(e){for(var t=this.getTotalCanvases()-1;t>=0;t--){var n=this.getCanvasByIndex(t).getLabel().getValue(this.options.locale);if(e){if(/^[a-zA-Z0-9]*$/.test(n))return n}else if(n)return n}return this.options.defaultLabel},t.prototype.getLastPageIndex=function(){return this.getTotalCanvases()-1},t.prototype.getNextPageIndex=function(e,t){var n;if(t){var r=this.getPagedIndices(e),i=this.getViewingDirection();n=i&&i===o.ViewingDirection.RIGHT_TO_LEFT?r[0]+1:r[r.length-1]+1}else n=e+1;return n>this.getLastPageIndex()?-1:n},t.prototype.getPagedIndices=function(e,t){var n=[];if(t){n=this.isFirstCanvas(e)||this.isLastCanvas(e)?[e]:e%2?[e,e+1]:[e-1,e];var r=this.getViewingDirection();r&&r===o.ViewingDirection.RIGHT_TO_LEFT&&(n=n.reverse())}else n.push(e);return n},t.prototype.getPrevPageIndex=function(e,t){var n;if(t){var r=this.getPagedIndices(e),i=this.getViewingDirection();n=i&&i===o.ViewingDirection.RIGHT_TO_LEFT?r[r.length-1]-1:r[0]-1}else n=e-1;return n},t.prototype.getStartCanvasIndex=function(){var e=this.getStartCanvas();if(e)for(var t=0;t<this.getTotalCanvases();t++)if(this.getCanvasByIndex(t).id===e)return t;return 0},t.prototype.getThumbs=function(e,t){for(var n=[],r=this.getTotalCanvases(),i=0;i<r;i++){var o=this.getCanvasByIndex(i),s=new a.Thumb(e,o);n.push(s)}return n},t.prototype.getThumbnails=function(){if(null!=this._thumbnails)return this._thumbnails;this._thumbnails=[];for(var e=this.getCanvases(),t=0;t<e.length;t++){var n=e[t].getThumbnail();n&&this._thumbnails.push(n)}return this._thumbnails},t.prototype.getStartCanvas=function(){return this.getProperty("startCanvas")},t.prototype.getTotalCanvases=function(){return this.getCanvases().length},t.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")?this.getProperty("viewingDirection"):this.options.resource.getViewingDirection?this.options.resource.getViewingDirection():null},t.prototype.getViewingHint=function(){return this.getProperty("viewingHint")},t.prototype.isCanvasIndexOutOfRange=function(e){return e>this.getTotalCanvases()-1},t.prototype.isFirstCanvas=function(e){return 0===e},t.prototype.isLastCanvas=function(e){return e===this.getTotalCanvases()-1},t.prototype.isMultiCanvas=function(){return this.getTotalCanvases()>1},t.prototype.isPagingEnabled=function(){var e=this.getViewingHint();return!!e&&e===o.ViewingHint.PAGED},t.prototype.isTotalCanvasesEven=function(){return this.getTotalCanvases()%2==0},t}(a.ManifestResource);t.Sequence=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=function(){function e(){}return e.parse=function(e,t){return"string"==typeof e&&(e=JSON.parse(e)),this.parseJson(e,t)},e.parseJson=function(e,t){var n;if(t&&t.navDate&&!isNaN(t.navDate.getTime())&&(e.navDate=t.navDate.toString()),e["@type"])switch(e["@type"]){case"sc:Collection":n=this.parseCollection(e,t);break;case"sc:Manifest":n=this.parseManifest(e,t);break;default:return null}else switch(e.type){case"Collection":n=this.parseCollection(e,t);break;case"Manifest":n=this.parseManifest(e,t);break;default:return null}return n.isLoaded=!0,n},e.parseCollection=function(e,t){var n=new r.Collection(e,t);return t?(n.index=t.index||0,t.resource&&(n.parentCollection=t.resource.parentCollection)):n.index=0,this.parseCollections(n,t),this.parseManifests(n,t),this.parseItems(n,t),n},e.parseCollections=function(e,t){var n;if(e.__jsonld.collections?n=e.__jsonld.collections:e.__jsonld.items&&(n=e.__jsonld.items.filter((function(e){return"collection"===e.type.toLowerCase()}))),n)for(var r=0;r<n.length;r++){t&&(t.index=r);var i=this.parseCollection(n[r],t);i.index=r,i.parentCollection=e,e.items.push(i)}},e.parseManifest=function(e,t){return new r.Manifest(e,t)},e.parseManifests=function(e,t){var n;if(e.__jsonld.manifests?n=e.__jsonld.manifests:e.__jsonld.items&&(n=e.__jsonld.items.filter((function(e){return"manifest"===e.type.toLowerCase()}))),n)for(var r=0;r<n.length;r++){var i=this.parseManifest(n[r],t);i.index=r,i.parentCollection=e,e.items.push(i)}},e.parseItem=function(e,t){if(e["@type"]){if("sc:manifest"===e["@type"].toLowerCase())return this.parseManifest(e,t);if("sc:collection"===e["@type"].toLowerCase())return this.parseCollection(e,t)}else if(e.type){if("manifest"===e.type.toLowerCase())return this.parseManifest(e,t);if("collection"===e.type.toLowerCase())return this.parseCollection(e,t)}return null},e.parseItems=function(e,t){var n=e.__jsonld.members||e.__jsonld.items;if(n)for(var r=function(r){t&&(t.index=r);var o=i.parseItem(n[r],t);return o?e.items.filter((function(e){return e.id===o.id}))[0]?"continue":(o.index=r,o.parentCollection=e,void e.items.push(o)):{value:void 0}},i=this,o=0;o<n.length;o++){var a=r(o);if("object"==typeof a)return a.value}},e}();t.Deserialiser=i},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.getProfile=function(){var e=this.getProperty("profile");return e||(e=this.getProperty("dcterms:conformsTo")),Array.isArray(e)?e[0]:e},t.prototype.getConfirmLabel=function(){return o.Utils.getLocalisedValue(this.getProperty("confirmLabel"),this.options.locale)},t.prototype.getDescription=function(){return o.Utils.getLocalisedValue(this.getProperty("description"),this.options.locale)},t.prototype.getFailureDescription=function(){return o.Utils.getLocalisedValue(this.getProperty("failureDescription"),this.options.locale)},t.prototype.getFailureHeader=function(){return o.Utils.getLocalisedValue(this.getProperty("failureHeader"),this.options.locale)},t.prototype.getHeader=function(){return o.Utils.getLocalisedValue(this.getProperty("header"),this.options.locale)},t.prototype.getServiceLabel=function(){return o.Utils.getLocalisedValue(this.getProperty("label"),this.options.locale)},t.prototype.getInfoUri=function(){var e=this.id;return e.endsWith("/")||(e+="/"),e+"info.json"},t}(o.ManifestResource);t.Service=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Size=function(e,t){this.width=e,this.height=t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.AUTHORIZATION_FAILED=1]="AUTHORIZATION_FAILED",e[e.FORBIDDEN=2]="FORBIDDEN",e[e.INTERNAL_SERVER_ERROR=3]="INTERNAL_SERVER_ERROR",e[e.RESTRICTED=4]="RESTRICTED"}(t.StatusCode||(t.StatusCode={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Thumb=function(e,t){this.data=t,this.index=t.index,this.width=e;var n=t.getHeight()/t.getWidth();this.height=n?Math.floor(this.width*n):e,this.uri=t.getCanonicalImageUri(e),this.label=t.getLabel().getValue(),this.viewingHint=t.getViewingHint()}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t}(n(0).Resource);t.Thumbnail=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=function(){function e(e,t){this.label=e,this.data=t||{},this.nodes=[]}return e.prototype.addNode=function(e){this.nodes.push(e),e.parentNode=this},e.prototype.isCollection=function(){return this.data.type===r.Utils.normaliseType(r.TreeNodeType.COLLECTION)},e.prototype.isManifest=function(){return this.data.type===r.Utils.normaliseType(r.TreeNodeType.MANIFEST)},e.prototype.isRange=function(){return this.data.type===r.Utils.normaliseType(r.TreeNodeType.RANGE)},e}();t.TreeNode=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.COLLECTION="collection",e.MANIFEST="manifest",e.RANGE="range"}(t.TreeNodeType||(t.TreeNodeType={}))}])},3379:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var o={},a=[],s=0;s<e.length;s++){var l=e[s],u=r.base?l[0]+r.base:l[0],c=o[u]||0,p="".concat(u," ").concat(c);o[u]=c+1;var f=n(p),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==f)t[f].references++,t[f].updater(h);else{var d=i(h,r);r.byIndex=s,t.splice(s,0,{identifier:p,updater:d,references:1})}a.push(p)}return a}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var o=r(e=e||[],i=i||{});return function(e){e=e||[];for(var a=0;a<o.length;a++){var s=n(o[a]);t[s].references--}for(var l=r(e,i),u=0;u<o.length;u++){var c=n(o[u]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}o=l}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},9216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}}]);