var __extends=this&&this.__extends||function(){var e=function(t,i){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i]};return e(t,i)};return function(t,i){e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();var __awaiter=this&&this.__awaiter||function(e,t,i,r){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function a(e){try{h(r.next(e))}catch(t){s(t)}}function o(e){try{h(r["throw"](e))}catch(t){s(t)}}function h(e){e.done?i(e.value):n(e.value).then(a,o)}h((r=r.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var i={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,n,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(e){return function(t){return h([e,t])}}function h(a){if(r)throw new TypeError("Generator is already executing.");while(i)try{if(r=1,n&&(s=a[0]&2?n["return"]:a[0]?n["throw"]||((s=n["return"])&&s.call(n),0):n.next)&&!(s=s.call(n,a[1])).done)return s;if(n=0,s)a=[a[0]&2,s.value];switch(a[0]){case 0:case 1:s=a;break;case 4:i.label++;return{value:a[1],done:false};case 5:i.label++;n=a[1];a=[0];continue;case 7:a=i.ops.pop();i.trys.pop();continue;default:if(!(s=i.trys,s=s.length>0&&s[s.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!s||a[1]>s[0]&&a[1]<s[3])){i.label=a[1];break}if(a[0]===6&&i.label<s[1]){i.label=s[1];s=a;break}if(s&&i.label<s[2]){i.label=s[2];i.ops.push(a);break}if(s[2])i.ops.pop();i.trys.pop();continue}a=t.call(e,i)}catch(o){a=[6,o];n=0}finally{r=s=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};System.register(["./p-a25b52a9.system.js"],(function(e){"use strict";var t,i,r,n;return{setters:[function(e){t=e.r;i=e.c;r=e.h;n=e.g}],execute:function(){var s=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function a(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}function o(e,t){return t={exports:{}},e(t,t.exports),t.exports}var h=void 0;var f=function(e){return e!==h&&e!==null};var u={object:true,function:true,undefined:true};var l=function(e){if(!f(e))return false;return hasOwnProperty.call(u,typeof e)};var c=function(e){if(!l(e))return false;try{if(!e.constructor)return false;return e.constructor.prototype===e}catch(t){return false}};var d=function(e){if(typeof e!=="function")return false;if(!hasOwnProperty.call(e,"length"))return false;try{if(typeof e.length!=="number")return false;if(typeof e.call!=="function")return false;if(typeof e.apply!=="function")return false}catch(t){return false}return!c(e)};var p=/^\s*class[\s{/}]/,v=Function.prototype.toString;var g=function(e){if(!d(e))return false;if(p.test(v.call(e)))return false;return true};var m=function(){var e=Object.assign,t;if(typeof e!=="function")return false;t={foo:"raz"};e(t,{bar:"dwa"},{trzy:"trzy"});return t.foo+t.bar+t.trzy==="razdwatrzy"};var y=function(){try{return true}catch(e){return false}};var w=function(){};var b=w();var _=function(e){return e!==b&&e!==null};var x=Object.keys;var E=function(e){return x(_(e)?Object(e):e)};var k=y()?Object.keys:E;var S=function(e){if(!_(e))throw new TypeError("Cannot use null or undefined");return e};var C=Math.max;var T=function(e,t){var i,r,n=C(arguments.length,2),s;e=Object(S(e));s=function(r){try{e[r]=t[r]}catch(n){if(!i)i=n}};for(r=1;r<n;++r){t=arguments[r];k(t).forEach(s)}if(i!==undefined)throw i;return e};var R=m()?Object.assign:T;var A=Array.prototype.forEach,N=Object.create;var O=function(e,t){var i;for(i in e)t[i]=e[i]};var L=function(e){var t=N(null);A.call(arguments,(function(e){if(!_(e))return;O(Object(e),t)}));return t};var I="razdwatrzy";var D=function(){if(typeof I.contains!=="function")return false;return I.contains("dwa")===true&&I.contains("foo")===false};var z=String.prototype.indexOf;var P=function(e){return z.call(this,e,arguments[1])>-1};var B=D()?String.prototype.contains:P;var j=o((function(e){var t=e.exports=function(e,t){var i,r,n,s,a;if(arguments.length<2||typeof e!=="string"){s=t;t=e;e=null}else{s=arguments[2]}if(f(e)){i=B.call(e,"c");r=B.call(e,"e");n=B.call(e,"w")}else{i=n=true;r=false}a={value:t,configurable:i,enumerable:r,writable:n};return!s?a:R(L(s),a)};t.gs=function(e,t,i){var r,n,s,a;if(typeof e!=="string"){s=i;i=t;t=e;e=null}else{s=arguments[3]}if(!f(t)){t=undefined}else if(!g(t)){s=t;t=i=undefined}else if(!f(i)){i=undefined}else if(!g(i)){s=i;i=undefined}if(f(e)){r=B.call(e,"c");n=B.call(e,"e")}else{r=true;n=false}a={get:t,set:i,configurable:r,enumerable:n};return!s?a:R(L(s),a)}}));var U=function(e){if(typeof e!=="function")throw new TypeError(e+" is not a function");return e};var M=o((function(e,t){var i=Function.prototype.apply,r=Function.prototype.call,n=Object.create,s=Object.defineProperty,a=Object.defineProperties,o=Object.prototype.hasOwnProperty,h={configurable:true,enumerable:false,writable:true},f,u,l,c,d,p,v;f=function(e,t){var i;U(t);if(!o.call(this,"__ee__")){i=h.value=n(null);s(this,"__ee__",h);h.value=null}else{i=this.__ee__}if(!i[e])i[e]=t;else if(typeof i[e]==="object")i[e].push(t);else i[e]=[i[e],t];return this};u=function(e,t){var r,n;U(t);n=this;f.call(this,e,r=function(){l.call(n,e,r);i.call(t,this,arguments)});r.__eeOnceListener__=t;return this};l=function(e,t){var i,r,n,s;U(t);if(!o.call(this,"__ee__"))return this;i=this.__ee__;if(!i[e])return this;r=i[e];if(typeof r==="object"){for(s=0;n=r[s];++s){if(n===t||n.__eeOnceListener__===t){if(r.length===2)i[e]=r[s?0:1];else r.splice(s,1)}}}else{if(r===t||r.__eeOnceListener__===t){delete i[e]}}return this};c=function(e){var t,n,s,a,h;if(!o.call(this,"__ee__"))return;a=this.__ee__[e];if(!a)return;if(typeof a==="object"){n=arguments.length;h=new Array(n-1);for(t=1;t<n;++t)h[t-1]=arguments[t];a=a.slice();for(t=0;s=a[t];++t){i.call(s,this,h)}}else{switch(arguments.length){case 1:r.call(a,this);break;case 2:r.call(a,this,arguments[1]);break;case 3:r.call(a,this,arguments[1],arguments[2]);break;default:n=arguments.length;h=new Array(n-1);for(t=1;t<n;++t){h[t-1]=arguments[t]}i.call(a,this,h)}}};d={on:f,once:u,off:l,emit:c};p={on:j(f),once:j(u),off:j(l),emit:j(c)};v=a({},p);e.exports=t=function(e){return e==null?n(v):a(Object(e),p)};t.methods=d}));var F=typeof window!="undefined"?window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame:false;var q=1;var W=3;var H=typeof URL!="undefined"?URL:typeof window!="undefined"?window.URL||window.webkitURL||window.mozURL:undefined;function Y(){var e=(new Date).getTime();var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var i=(e+Math.random()*16)%16|0;e=Math.floor(e/16);return(t=="x"?i:i&7|8).toString(16)}));return t}function Z(){return Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)}function V(e){return!!(e&&e.nodeType==1)}function X(e){return!isNaN(parseFloat(e))&&isFinite(e)}function K(e){var t=parseFloat(e);if(X(e)===false){return false}if(typeof e==="string"&&e.indexOf(".")>-1){return true}return Math.floor(t)!==t}function G(e){var t=["Webkit","webkit","Moz","O","ms"];var i=["-webkit-","-webkit-","-moz-","-o-","-ms-"];var r=e.toLowerCase();var n=t.length;if(typeof document==="undefined"||typeof document.body.style[r]!="undefined"){return e}for(var s=0;s<n;s++){if(typeof document.body.style[i[s]+r]!="undefined"){return i[s]+r}}return e}function $(e){for(var t=1,i=arguments.length;t<i;t++){var r=arguments[t];for(var n in r){if(e[n]===void 0)e[n]=r[n]}}return e}function J(e){var t=[].slice.call(arguments,1);t.forEach((function(t){if(!t)return;Object.getOwnPropertyNames(t).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}))}));return e}function Q(e,t,i){var r=ee(e,t,i);t.splice(r,0,e);return r}function ee(e,t,i,r,n){var s=r||0;var a=n||t.length;var o=parseInt(s+(a-s)/2);var h;if(!i){i=function(e,t){if(e>t)return 1;if(e<t)return-1;if(e==t)return 0}}if(a-s<=0){return o}h=i(t[o],e);if(a-s===1){return h>=0?o:o+1}if(h===0){return o}if(h===-1){return ee(e,t,i,o,a)}else{return ee(e,t,i,s,o)}}function te(e,t,i,r,n){var s=r||0;var a=n||t.length;var o=parseInt(s+(a-s)/2);var h;if(!i){i=function(e,t){if(e>t)return 1;if(e<t)return-1;if(e==t)return 0}}if(a-s<=0){return-1}h=i(t[o],e);if(a-s===1){return h===0?o:-1}if(h===0){return o}if(h===-1){return te(e,t,i,o,a)}else{return te(e,t,i,s,o)}}function ie(e){var t=window.getComputedStyle(e);var i=["width","paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"];var r=["height","paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"];var n=0;var s=0;i.forEach((function(e){n+=parseFloat(t[e])||0}));r.forEach((function(e){s+=parseFloat(t[e])||0}));return{height:s,width:n}}function re(e){var t=window.getComputedStyle(e);var i=["paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"];var r=["paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"];var n=0;var s=0;i.forEach((function(e){n+=parseFloat(t[e])||0}));r.forEach((function(e){s+=parseFloat(t[e])||0}));return{height:s,width:n}}function ne(e){var t;var i=e.ownerDocument;if(e.nodeType==Node.TEXT_NODE){var r=i.createRange();r.selectNodeContents(e);t=r.getBoundingClientRect()}else{t=e.getBoundingClientRect()}return t}function se(){var e=window.innerWidth;var t=window.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function ae(e,t){var i=e.parentNode;var r=i.childNodes;var n;var s=-1;for(var a=0;a<r.length;a++){n=r[a];if(n.nodeType===t){s++}if(n==e)break}return s}function oe(e){return ae(e,W)}function he(e){return ae(e,q)}function fe(e){return["xml","opf","ncx"].indexOf(e)>-1}function ue(e,t){return new Blob([e],{type:t})}function le(e,t){var i;var r=ue(e,t);i=H.createObjectURL(r);return i}function ce(e){return H.revokeObjectURL(e)}function de(e,t){var i;var r;if(typeof e!=="string"){return}i=btoa(encodeURIComponent(e));r="data:"+t+";base64,"+i;return r}function pe(e){return Object.prototype.toString.call(e).slice(8,-1)}function ve(e,t,i){var r;var n;if(typeof DOMParser==="undefined"||i){n=require("xmldom").DOMParser}else{n=DOMParser}if(e.charCodeAt(0)===65279){e=e.slice(1)}r=(new n).parseFromString(e,t);return r}function ge(e,t){var i;if(!e){throw new Error("No Element Provided")}if(typeof e.querySelector!="undefined"){return e.querySelector(t)}else{i=e.getElementsByTagName(t);if(i.length){return i[0]}}}function me(e,t){if(typeof e.querySelector!="undefined"){return e.querySelectorAll(t)}else{return e.getElementsByTagName(t)}}function ye(e,t,i){var r,n;if(typeof e.querySelector!="undefined"){t+="[";for(var s in i){t+=s+"~='"+i[s]+"'"}t+="]";return e.querySelector(t)}else{r=e.getElementsByTagName(t);n=Array.prototype.slice.call(r,0).filter((function(e){for(var t in i){if(e.getAttribute(t)===i[t]){return true}}return false}));if(n){return n[0]}}}function we(e,t){var i=e.ownerDocument||e;if(typeof i.createTreeWalker!=="undefined"){be(e,t,NodeFilter.SHOW_TEXT)}else{_e(e,(function(e){if(e&&e.nodeType===3){t(e)}}))}}function be(e,t,i){var r=document.createTreeWalker(e,i,null,false);var n;while(n=r.nextNode()){t(n)}}function _e(e,t){if(t(e)){return true}e=e.firstChild;if(e){do{var i=_e(e,t);if(i){return true}e=e.nextSibling}while(e)}}function xe(e){return new Promise((function(t,i){var r=new FileReader;r.readAsDataURL(e);r.onloadend=function(){t(r.result)}}))}function Ee(){var e=this;this.resolve=null;this.reject=null;this.id=Y();this.promise=new Promise((function(t,i){e.resolve=t;e.reject=i}));Object.freeze(this)}function ke(e,t,i){var r;if(typeof e.querySelector!="undefined"){r=e.querySelector(t+'[*|type="'+i+'"]')}if(!r||r.length===0){r=me(e,t);for(var n=0;n<r.length;n++){if(r[n].getAttributeNS("http://www.idpf.org/2007/ops","type")===i||r[n].getAttribute("epub:type")===i){return r[n]}}}else{return r}}function Se(e){var t=[];var i=e.childNodes;for(var r=0;r<i.length;r++){var n=i[r];if(n.nodeType===1){t.push(n)}}return t}function Ce(e){var t=[e];for(;e;e=e.parentNode){t.unshift(e)}return t}function Te(e,t,i){var r=[];var n=e.childNodes;for(var s=0;s<n.length;s++){var a=n[s];if(a.nodeType===1&&a.nodeName.toLowerCase()===t){if(i){return a}else{r.push(a)}}}if(!i){return r}}function Re(e,t){var i;if(e===null||t==="")return;i=e.parentNode;while(i.nodeType===1){if(i.tagName.toLowerCase()===t){return i}i=i.parentNode}}var Ae=function(){function e(){this.collapsed=false;this.commonAncestorContainer=undefined;this.endContainer=undefined;this.endOffset=undefined;this.startContainer=undefined;this.startOffset=undefined}e.prototype.setStart=function(e,t){this.startContainer=e;this.startOffset=t;if(!this.endContainer){this.collapse(true)}else{this.commonAncestorContainer=this._commonAncestorContainer()}this._checkCollapsed()};e.prototype.setEnd=function(e,t){this.endContainer=e;this.endOffset=t;if(!this.startContainer){this.collapse(false)}else{this.collapsed=false;this.commonAncestorContainer=this._commonAncestorContainer()}this._checkCollapsed()};e.prototype.collapse=function(e){this.collapsed=true;if(e){this.endContainer=this.startContainer;this.endOffset=this.startOffset;this.commonAncestorContainer=this.startContainer.parentNode}else{this.startContainer=this.endContainer;this.startOffset=this.endOffset;this.commonAncestorContainer=this.endOffset.parentNode}};e.prototype.selectNode=function(e){var t=e.parentNode;var i=Array.prototype.indexOf.call(t.childNodes,e);this.setStart(t,i);this.setEnd(t,i+1)};e.prototype.selectNodeContents=function(e){var t=e.nodeType===3?e.textContent.length:parent.childNodes.length;this.setStart(e,0);this.setEnd(e,t)};e.prototype._commonAncestorContainer=function(e,t){var i=Ce(e||this.startContainer);var r=Ce(t||this.endContainer);if(i[0]!=r[0])return undefined;for(var n=0;n<i.length;n++){if(i[n]!=r[n]){return i[n-1]}}};e.prototype._checkCollapsed=function(){if(this.startContainer===this.endContainer&&this.startOffset===this.endOffset){this.collapsed=true}else{this.collapsed=false}};e.prototype.toString=function(){};return e}();var Ne=Object.freeze({__proto__:null,requestAnimationFrame:F,uuid:Y,documentHeight:Z,isElement:V,isNumber:X,isFloat:K,prefixed:G,defaults:$,extend:J,insert:Q,locationOf:ee,indexOfSorted:te,bounds:ie,borders:re,nodeBounds:ne,windowBounds:se,indexOfNode:ae,indexOfTextNode:oe,indexOfElementNode:he,isXml:fe,createBlob:ue,createBlobUrl:le,revokeBlobUrl:ce,createBase64Url:de,type:pe,parse:ve,qs:ge,qsa:me,qsp:ye,sprint:we,treeWalker:be,walk:_e,blob2base64:xe,defer:Ee,querySelectorByType:ke,findChildren:Se,parents:Ce,filterChildren:Te,getParentByTagName:Re,RangeObject:Ae});if(!Oe){var Oe={cwd:function(){return"/"}}}function Le(e){if(typeof e!=="string"){throw new TypeError("Path must be a string. Received "+e)}}function Ie(e,t){var i="";var r=-1;var n=0;var s;for(var a=0;a<=e.length;++a){if(a<e.length)s=e.charCodeAt(a);else if(s===47)break;else s=47;if(s===47){if(r===a-1||n===1);else if(r!==a-1&&n===2){if(i.length<2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(i.length>2){var o=i.length-1;var h=o;for(;h>=0;--h){if(i.charCodeAt(h)===47)break}if(h!==o){if(h===-1)i="";else i=i.slice(0,h);r=a;n=0;continue}}else if(i.length===2||i.length===1){i="";r=a;n=0;continue}}if(t){if(i.length>0)i+="/..";else i=".."}}else{if(i.length>0)i+="/"+e.slice(r+1,a);else i=e.slice(r+1,a)}r=a;n=0}else if(s===46&&n!==-1){++n}else{n=-1}}return i}function De(e,t){var i=t.dir||t.root;var r=t.base||(t.name||"")+(t.ext||"");if(!i){return r}if(i===t.root){return i+r}return i+e+r}var ze={resolve:function e(){var t="";var i=false;var r;for(var n=arguments.length-1;n>=-1&&!i;n--){var s;if(n>=0)s=arguments[n];else{if(r===undefined)r=Oe.cwd();s=r}Le(s);if(s.length===0){continue}t=s+"/"+t;i=s.charCodeAt(0)===47}t=Ie(t,!i);if(i){if(t.length>0)return"/"+t;else return"/"}else if(t.length>0){return t}else{return"."}},normalize:function e(t){Le(t);if(t.length===0)return".";var i=t.charCodeAt(0)===47;var r=t.charCodeAt(t.length-1)===47;t=Ie(t,!i);if(t.length===0&&!i)t=".";if(t.length>0&&r)t+="/";if(i)return"/"+t;return t},isAbsolute:function e(t){Le(t);return t.length>0&&t.charCodeAt(0)===47},join:function e(){if(arguments.length===0)return".";var t;for(var i=0;i<arguments.length;++i){var r=arguments[i];Le(r);if(r.length>0){if(t===undefined)t=r;else t+="/"+r}}if(t===undefined)return".";return ze.normalize(t)},relative:function e(t,i){Le(t);Le(i);if(t===i)return"";t=ze.resolve(t);i=ze.resolve(i);if(t===i)return"";var r=1;for(;r<t.length;++r){if(t.charCodeAt(r)!==47)break}var n=t.length;var s=n-r;var a=1;for(;a<i.length;++a){if(i.charCodeAt(a)!==47)break}var o=i.length;var h=o-a;var f=s<h?s:h;var u=-1;var l=0;for(;l<=f;++l){if(l===f){if(h>f){if(i.charCodeAt(a+l)===47){return i.slice(a+l+1)}else if(l===0){return i.slice(a+l)}}else if(s>f){if(t.charCodeAt(r+l)===47){u=l}else if(l===0){u=0}}break}var c=t.charCodeAt(r+l);var d=i.charCodeAt(a+l);if(c!==d)break;else if(c===47)u=l}var p="";for(l=r+u+1;l<=n;++l){if(l===n||t.charCodeAt(l)===47){if(p.length===0)p+="..";else p+="/.."}}if(p.length>0)return p+i.slice(a+u);else{a+=u;if(i.charCodeAt(a)===47)++a;return i.slice(a)}},_makeLong:function e(t){return t},dirname:function e(t){Le(t);if(t.length===0)return".";var i=t.charCodeAt(0);var r=i===47;var n=-1;var s=true;for(var a=t.length-1;a>=1;--a){i=t.charCodeAt(a);if(i===47){if(!s){n=a;break}}else{s=false}}if(n===-1)return r?"/":".";if(r&&n===1)return"//";return t.slice(0,n)},basename:function e(t,i){if(i!==undefined&&typeof i!=="string")throw new TypeError('"ext" argument must be a string');Le(t);var r=0;var n=-1;var s=true;var a;if(i!==undefined&&i.length>0&&i.length<=t.length){if(i.length===t.length&&i===t)return"";var o=i.length-1;var h=-1;for(a=t.length-1;a>=0;--a){var f=t.charCodeAt(a);if(f===47){if(!s){r=a+1;break}}else{if(h===-1){s=false;h=a+1}if(o>=0){if(f===i.charCodeAt(o)){if(--o===-1){n=a}}else{o=-1;n=h}}}}if(r===n)n=h;else if(n===-1)n=t.length;return t.slice(r,n)}else{for(a=t.length-1;a>=0;--a){if(t.charCodeAt(a)===47){if(!s){r=a+1;break}}else if(n===-1){s=false;n=a+1}}if(n===-1)return"";return t.slice(r,n)}},extname:function e(t){Le(t);var i=-1;var r=0;var n=-1;var s=true;var a=0;for(var o=t.length-1;o>=0;--o){var h=t.charCodeAt(o);if(h===47){if(!s){r=o+1;break}continue}if(n===-1){s=false;n=o+1}if(h===46){if(i===-1)i=o;else if(a!==1)a=1}else if(i!==-1){a=-1}}if(i===-1||n===-1||a===0||a===1&&i===n-1&&i===r+1){return""}return t.slice(i,n)},format:function e(t){if(t===null||typeof t!=="object"){throw new TypeError('Parameter "pathObject" must be an object, not '+typeof t)}return De("/",t)},parse:function e(t){Le(t);var i={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return i;var r=t.charCodeAt(0);var n=r===47;var s;if(n){i.root="/";s=1}else{s=0}var a=-1;var o=0;var h=-1;var f=true;var u=t.length-1;var l=0;for(;u>=s;--u){r=t.charCodeAt(u);if(r===47){if(!f){o=u+1;break}continue}if(h===-1){f=false;h=u+1}if(r===46){if(a===-1)a=u;else if(l!==1)l=1}else if(a!==-1){l=-1}}if(a===-1||h===-1||l===0||l===1&&a===h-1&&a===o+1){if(h!==-1){if(o===0&&n)i.base=i.name=t.slice(1,h);else i.base=i.name=t.slice(o,h)}}else{if(o===0&&n){i.name=t.slice(1,a);i.base=t.slice(1,h)}else{i.name=t.slice(o,a);i.base=t.slice(o,h)}i.ext=t.slice(a,h)}if(o>0)i.dir=t.slice(0,o-1);else if(n)i.dir="/";return i},sep:"/",delimiter:":",posix:null};var Pe=ze;var Be=function(){function e(e){var t;var i;t=e.indexOf("://");if(t>-1){e=new URL(e).pathname}i=this.parse(e);this.path=e;if(this.isDirectory(e)){this.directory=e}else{this.directory=i.dir+"/"}this.filename=i.base;this.extension=i.ext.slice(1)}e.prototype.parse=function(e){return Pe.parse(e)};e.prototype.isAbsolute=function(e){return Pe.isAbsolute(e||this.path)};e.prototype.isDirectory=function(e){return e.charAt(e.length-1)==="/"};e.prototype.resolve=function(e){return Pe.resolve(this.directory,e)};e.prototype.relative=function(e){var t=e&&e.indexOf("://")>-1;if(t){return e}return Pe.relative(this.directory,e)};e.prototype.splitPath=function(e){return this.splitPathRe.exec(e).slice(1)};e.prototype.toString=function(){return this.path};return e}();var je=function(){function e(e,t){var i=e.indexOf("://")>-1;var r=e;var n;this.Url=undefined;this.href=e;this.protocol="";this.origin="";this.hash="";this.hash="";this.search="";this.base=t;if(!i&&t!==false&&typeof t!=="string"&&window&&window.location){this.base=window.location.href}if(i||this.base){try{if(this.base){this.Url=new URL(e,this.base)}else{this.Url=new URL(e)}this.href=this.Url.href;this.protocol=this.Url.protocol;this.origin=this.Url.origin;this.hash=this.Url.hash;this.search=this.Url.search;r=this.Url.pathname+(this.Url.search?this.Url.search:"")}catch(s){this.Url=undefined;if(this.base){n=new Be(this.base);r=n.resolve(r)}}}this.Path=new Be(r);this.directory=this.Path.directory;this.filename=this.Path.filename;this.extension=this.Path.extension}e.prototype.path=function(){return this.Path};e.prototype.resolve=function(e){var t=e.indexOf("://")>-1;var i;if(t){return e}i=Pe.resolve(this.directory,e);return this.origin+i};e.prototype.relative=function(e){return Pe.relative(e,this.directory)};e.prototype.toString=function(){return this.href};return e}();var Ue=1;var Me=3;var Fe=9;var qe=function(){function e(t,i,r){var n;this.str="";this.base={};this.spinePos=0;this.range=false;this.path={};this.start=null;this.end=null;if(!(this instanceof e)){return new e(t,i,r)}if(typeof i==="string"){this.base=this.parseComponent(i)}else if(typeof i==="object"&&i.steps){this.base=i}n=this.checkType(t);if(n==="string"){this.str=t;return J(this,this.parse(t))}else if(n==="range"){return J(this,this.fromRange(t,this.base,r))}else if(n==="node"){return J(this,this.fromNode(t,this.base,r))}else if(n==="EpubCFI"&&t.path){return t}else if(!t){return this}else{throw new TypeError("not a valid argument for EpubCFI")}}e.prototype.checkType=function(t){if(this.isCfiString(t)){return"string"}else if(t&&typeof t==="object"&&(pe(t)==="Range"||typeof t.startContainer!="undefined")){return"range"}else if(t&&typeof t==="object"&&typeof t.nodeType!="undefined"){return"node"}else if(t&&typeof t==="object"&&t instanceof e){return"EpubCFI"}else{return false}};e.prototype.parse=function(e){var t={spinePos:-1,range:false,base:{},path:{},start:null,end:null};var i,r,n;if(typeof e!=="string"){return{spinePos:-1}}if(e.indexOf("epubcfi(")===0&&e[e.length-1]===")"){e=e.slice(8,e.length-1)}i=this.getChapterComponent(e);if(!i){return{spinePos:-1}}t.base=this.parseComponent(i);r=this.getPathComponent(e);t.path=this.parseComponent(r);n=this.getRange(e);if(n){t.range=true;t.start=this.parseComponent(n[0]);t.end=this.parseComponent(n[1])}t.spinePos=t.base.steps[1].index;return t};e.prototype.parseComponent=function(e){var t={steps:[],terminal:{offset:null,assertion:null}};var i=e.split(":");var r=i[0].split("/");var n;if(i.length>1){n=i[1];t.terminal=this.parseTerminal(n)}if(r[0]===""){r.shift()}t.steps=r.map(function(e){return this.parseStep(e)}.bind(this));return t};e.prototype.parseStep=function(e){var t,i,r,n,s;n=e.match(/\[(.*)\]/);if(n&&n[1]){s=n[1]}i=parseInt(e);if(isNaN(i)){return}if(i%2===0){t="element";r=i/2-1}else{t="text";r=(i-1)/2}return{type:t,index:r,id:s||null}};e.prototype.parseTerminal=function(e){var t,i;var r=e.match(/\[(.*)\]/);if(r&&r[1]){t=parseInt(e.split("[")[0]);i=r[1]}else{t=parseInt(e)}if(!X(t)){t=null}return{offset:t,assertion:i}};e.prototype.getChapterComponent=function(e){var t=e.split("!");return t[0]};e.prototype.getPathComponent=function(e){var t=e.split("!");if(t[1]){var i=t[1].split(",");return i[0]}};e.prototype.getRange=function(e){var t=e.split(",");if(t.length===3){return[t[1],t[2]]}return false};e.prototype.getCharecterOffsetComponent=function(e){var t=e.split(":");return t[1]||""};e.prototype.joinSteps=function(e){if(!e){return""}return e.map((function(e){var t="";if(e.type==="element"){t+=(e.index+1)*2}if(e.type==="text"){t+=1+2*e.index}if(e.id){t+="["+e.id+"]"}return t})).join("/")};e.prototype.segmentString=function(e){var t="/";t+=this.joinSteps(e.steps);if(e.terminal&&e.terminal.offset!=null){t+=":"+e.terminal.offset}if(e.terminal&&e.terminal.assertion!=null){t+="["+e.terminal.assertion+"]"}return t};e.prototype.toString=function(){var e="epubcfi(";e+=this.segmentString(this.base);e+="!";e+=this.segmentString(this.path);if(this.range&&this.start){e+=",";e+=this.segmentString(this.start)}if(this.range&&this.end){e+=",";e+=this.segmentString(this.end)}e+=")";return e};e.prototype.compare=function(t,i){var r,n;var s,a;if(typeof t==="string"){t=new e(t)}if(typeof i==="string"){i=new e(i)}if(t.spinePos>i.spinePos){return 1}if(t.spinePos<i.spinePos){return-1}if(t.range){r=t.path.steps.concat(t.start.steps);s=t.start.terminal}else{r=t.path.steps;s=t.path.terminal}if(i.range){n=i.path.steps.concat(i.start.steps);a=i.start.terminal}else{n=i.path.steps;a=i.path.terminal}for(var o=0;o<r.length;o++){if(!r[o]){return-1}if(!n[o]){return 1}if(r[o].index>n[o].index){return 1}if(r[o].index<n[o].index){return-1}}if(r.length<n.length){return-1}if(s.offset>a.offset){return 1}if(s.offset<a.offset){return-1}return 0};e.prototype.step=function(e){var t=e.nodeType===Me?"text":"element";return{id:e.id,tagName:e.tagName,type:t,index:this.position(e)}};e.prototype.filteredStep=function(e,t){var i=this.filter(e,t);var r;if(!i){return}r=i.nodeType===Me?"text":"element";return{id:i.id,tagName:i.tagName,type:r,index:this.filteredPosition(i,t)}};e.prototype.pathTo=function(e,t,i){var r={steps:[],terminal:{offset:null,assertion:null}};var n=e;var s;while(n&&n.parentNode&&n.parentNode.nodeType!=Fe){if(i){s=this.filteredStep(n,i)}else{s=this.step(n)}if(s){r.steps.unshift(s)}n=n.parentNode}if(t!=null&&t>=0){r.terminal.offset=t;if(r.steps[r.steps.length-1].type!="text"){r.steps.push({type:"text",index:0})}}return r};e.prototype.equalStep=function(e,t){if(!e||!t){return false}if(e.index===t.index&&e.id===t.id&&e.type===t.type){return true}return false};e.prototype.fromRange=function(e,t,i){var r={range:false,base:{},path:{},start:null,end:null};var n=e.startContainer;var s=e.endContainer;var a=e.startOffset;var o=e.endOffset;var h=false;if(i){h=n.ownerDocument.querySelector("."+i)!=null}if(typeof t==="string"){r.base=this.parseComponent(t);r.spinePos=r.base.steps[1].index}else if(typeof t==="object"){r.base=t}if(e.collapsed){if(h){a=this.patchOffset(n,a,i)}r.path=this.pathTo(n,a,i)}else{r.range=true;if(h){a=this.patchOffset(n,a,i)}r.start=this.pathTo(n,a,i);if(h){o=this.patchOffset(s,o,i)}r.end=this.pathTo(s,o,i);r.path={steps:[],terminal:null};var f=r.start.steps.length;var u;for(u=0;u<f;u++){if(this.equalStep(r.start.steps[u],r.end.steps[u])){if(u===f-1){if(r.start.terminal===r.end.terminal){r.path.steps.push(r.start.steps[u]);r.range=false}}else{r.path.steps.push(r.start.steps[u])}}else{break}}r.start.steps=r.start.steps.slice(r.path.steps.length);r.end.steps=r.end.steps.slice(r.path.steps.length)}return r};e.prototype.fromNode=function(e,t,i){var r={range:false,base:{},path:{},start:null,end:null};if(typeof t==="string"){r.base=this.parseComponent(t);r.spinePos=r.base.steps[1].index}else if(typeof t==="object"){r.base=t}r.path=this.pathTo(e,null,i);return r};e.prototype.filter=function(e,t){var i;var r;var n,s,a;var o=false;if(e.nodeType===Me){o=true;n=e.parentNode;i=e.parentNode.classList.contains(t)}else{o=false;i=e.classList.contains(t)}if(i&&o){s=n.previousSibling;a=n.nextSibling;if(s&&s.nodeType===Me){r=s}else if(a&&a.nodeType===Me){r=a}if(r){return r}else{return e}}else if(i&&!o){return false}else{return e}};e.prototype.patchOffset=function(e,t,i){if(e.nodeType!=Me){throw new Error("Anchor must be a text node")}var r=e;var n=t;if(e.parentNode.classList.contains(i)){r=e.parentNode}while(r.previousSibling){if(r.previousSibling.nodeType===Ue){if(r.previousSibling.classList.contains(i)){n+=r.previousSibling.textContent.length}else{break}}else{n+=r.previousSibling.textContent.length}r=r.previousSibling}return n};e.prototype.normalizedMap=function(e,t,i){var r={};var n=-1;var s,a=e.length;var o;var h;for(s=0;s<a;s++){o=e[s].nodeType;if(o===Ue&&e[s].classList.contains(i)){o=Me}if(s>0&&o===Me&&h===Me){r[s]=n}else if(t===o){n=n+1;r[s]=n}h=o}return r};e.prototype.position=function(e){var t,i;if(e.nodeType===Ue){t=e.parentNode.children;if(!t){t=Se(e.parentNode)}i=Array.prototype.indexOf.call(t,e)}else{t=this.textNodes(e.parentNode);i=t.indexOf(e)}return i};e.prototype.filteredPosition=function(e,t){var i,r,n;if(e.nodeType===Ue){i=e.parentNode.children;n=this.normalizedMap(i,Ue,t)}else{i=e.parentNode.childNodes;if(e.parentNode.classList.contains(t)){e=e.parentNode;i=e.parentNode.childNodes}n=this.normalizedMap(i,Me,t)}r=Array.prototype.indexOf.call(i,e);return n[r]};e.prototype.stepsToXpath=function(e){var t=[".","*"];e.forEach((function(e){var i=e.index+1;if(e.id){t.push("*[position()="+i+" and @id='"+e.id+"']")}else if(e.type==="text"){t.push("text()["+i+"]")}else{t.push("*["+i+"]")}}));return t.join("/")};e.prototype.stepsToQuerySelector=function(e){var t=["html"];e.forEach((function(e){var i=e.index+1;if(e.id){t.push("#"+e.id)}else if(e.type==="text");else{t.push("*:nth-child("+i+")")}}));return t.join(">")};e.prototype.textNodes=function(e,t){return Array.prototype.slice.call(e.childNodes).filter((function(e){if(e.nodeType===Me){return true}else if(t&&e.classList.contains(t)){return true}return false}))};e.prototype.walkToNode=function(e,t,i){var r=t||document;var n=r.documentElement;var s;var a;var o=e.length;var h;for(h=0;h<o;h++){a=e[h];if(a.type==="element"){if(a.id){n=r.getElementById(a.id)}else{s=n.children||Se(n);n=s[a.index]}}else if(a.type==="text"){n=this.textNodes(n,i)[a.index]}if(!n){break}}return n};e.prototype.findNode=function(e,t,i){var r=t||document;var n;var s;if(!i&&typeof r.evaluate!="undefined"){s=this.stepsToXpath(e);n=r.evaluate(s,r,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}else if(i){n=this.walkToNode(e,r,i)}else{n=this.walkToNode(e,r)}return n};e.prototype.fixMiss=function(e,t,i,r){var n=this.findNode(e.slice(0,-1),i,r);var s=n.childNodes;var a=this.normalizedMap(s,Me,r);var o;var h;var f=e[e.length-1].index;for(var u in a){if(!a.hasOwnProperty(u))return;if(a[u]===f){o=s[u];h=o.textContent.length;if(t>h){t=t-h}else{if(o.nodeType===Ue){n=o.childNodes[0]}else{n=o}break}}}return{container:n,offset:t}};e.prototype.toRange=function(e,t){var i=e||document;var r;var n,s,a,o;var h=this;var f,u;var l=t?i.querySelector("."+t)!=null:false;var c;if(typeof i.createRange!=="undefined"){r=i.createRange()}else{r=new Ae}if(h.range){n=h.start;f=h.path.steps.concat(n.steps);a=this.findNode(f,i,l?t:null);s=h.end;u=h.path.steps.concat(s.steps);o=this.findNode(u,i,l?t:null)}else{n=h.path;f=h.path.steps;a=this.findNode(h.path.steps,i,l?t:null)}if(a){try{if(n.terminal.offset!=null){r.setStart(a,n.terminal.offset)}else{r.setStart(a,0)}}catch(d){c=this.fixMiss(f,n.terminal.offset,i,l?t:null);r.setStart(c.container,c.offset)}}else{console.log("No startContainer found for",this.toString());return null}if(o){try{if(s.terminal.offset!=null){r.setEnd(o,s.terminal.offset)}else{r.setEnd(o,0)}}catch(d){c=this.fixMiss(u,h.end.terminal.offset,i,l?t:null);r.setEnd(c.container,c.offset)}}return r};e.prototype.isCfiString=function(e){if(typeof e==="string"&&e.indexOf("epubcfi(")===0&&e[e.length-1]===")"){return true}return false};e.prototype.generateChapterComponent=function(e,t,i){var r=parseInt(t),n=(e+1)*2,s="/"+n+"/";s+=(r+1)*2;if(i){s+="["+i+"]"}return s};e.prototype.collapse=function(e){if(!this.range){return}this.range=false;if(e){this.path.steps=this.path.steps.concat(this.start.steps);this.path.terminal=this.start.terminal}else{this.path.steps=this.path.steps.concat(this.end.steps);this.path.terminal=this.end.terminal}};return e}();var We=function(){function e(e){this.context=e||this;this.hooks=[]}e.prototype.register=function(){for(var e=0;e<arguments.length;++e){if(typeof arguments[e]==="function"){this.hooks.push(arguments[e])}else{for(var t=0;t<arguments[e].length;++t){this.hooks.push(arguments[e][t])}}}};e.prototype.deregister=function(e){var t;for(var i=0;i<this.hooks.length;i++){t=this.hooks[i];if(t===e){this.hooks.splice(i,1);break}}};e.prototype.trigger=function(){var e=arguments;var t=this.context;var i=[];this.hooks.forEach((function(r){var n=r.apply(t,e);if(n&&typeof n["then"]==="function"){i.push(n)}}));return Promise.all(i)};e.prototype.list=function(){return this.hooks};e.prototype.clear=function(){return this.hooks=[]};return e}();function He(e,t){var i;var r;var n=t.url;var s=n.indexOf("://")>-1;if(!e){return}r=ge(e,"head");i=ge(r,"base");if(!i){i=e.createElement("base");r.insertBefore(i,r.firstChild)}if(!s&&window&&window.location){n=window.location.origin+n}i.setAttribute("href",n)}function Ye(e,t){var i;var r;var n=t.canonical;if(!e){return}i=ge(e,"head");r=ge(i,"link[rel='canonical']");if(r){r.setAttribute("href",n)}else{r=e.createElement("link");r.setAttribute("rel","canonical");r.setAttribute("href",n);i.appendChild(r)}}function Ze(e,t){var i;var r;var n=t.idref;if(!e){return}i=ge(e,"head");r=ge(i,"link[property='dc.identifier']");if(r){r.setAttribute("content",n)}else{r=e.createElement("meta");r.setAttribute("name","dc.identifier");r.setAttribute("content",n);i.appendChild(r)}}function Ve(e,t){var i=e.querySelectorAll("a[href]");if(!i.length){return}var r=ge(e.ownerDocument,"base");var n=r?r.getAttribute("href"):undefined;var s=function(e){var i=e.getAttribute("href");if(i.indexOf("mailto:")===0){return}var r=i.indexOf("://")>-1;if(r){e.setAttribute("target","_blank")}else{var s;try{s=new je(i,n)}catch(a){}e.onclick=function(){if(s&&s.hash){t(s.Path.path+s.hash)}else if(s){t(s.Path.path)}else{t(i)}return false}}}.bind(this);for(var a=0;a<i.length;a++){s(i[a])}}function Xe(e,t,i){t.forEach((function(t,r){if(t&&i[r]){e=e.replace(new RegExp(t,"g"),i[r])}}));return e}var Ke=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;var Ge=new RegExp("[\\-\\.0-9"+Ke.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]");var $e=new RegExp("^"+Ke.source+Ge.source+"*(?::"+Ke.source+Ge.source+"*)?$");var Je=0;var Qe=1;var et=2;var tt=3;var it=4;var rt=5;var nt=6;var st=7;function at(){}at.prototype={parse:function(e,t,i){var r=this.domBuilder;r.startDocument();dt(t,t={});ot(e,t,i,r,this.errorHandler);r.endDocument()}};function ot(e,t,i,r,n){function s(e){if(e>65535){e-=65536;var t=55296+(e>>10),i=56320+(e&1023);return String.fromCharCode(t,i)}else{return String.fromCharCode(e)}}function a(e){var t=e.slice(1,-1);if(t in i){return i[t]}else if(t.charAt(0)==="#"){return s(parseInt(t.substr(1).replace("x","0x")))}else{n.error("entity not found:"+e);return e}}function o(t){if(t>v){var i=e.substring(v,t).replace(/&#?\w+;/g,a);c&&h(v);r.characters(i,0,t-v);v=t}}function h(t,i){while(t>=u&&(i=l.exec(e))){f=i.index;u=f+i[0].length;c.lineNumber++}c.columnNumber=t-f+1}var f=0;var u=0;var l=/.*(?:\r\n?|\n)|.*$/g;var c=r.locator;var d=[{currentNSMap:t}];var p={};var v=0;while(true){try{var g=e.indexOf("<",v);if(g<0){if(!e.substr(v).match(/^\s*$/)){var m=r.doc;var y=m.createTextNode(e.substr(v));m.appendChild(y);r.currentElement=y}return}if(g>v){o(g)}switch(e.charAt(g+1)){case"/":var w=e.indexOf(">",g+3);var b=e.substring(g+2,w);var _=d.pop();if(w<0){b=e.substring(g+2).replace(/[\s<].*/,"");n.error("end tag name: "+b+" is not complete:"+_.tagName);w=g+1+b.length}else if(b.match(/\s</)){b=b.replace(/[\s<].*/,"");n.error("end tag name: "+b+" maybe not complete");w=g+1+b.length}var x=_.localNSMap;var E=_.tagName==b;var k=E||_.tagName&&_.tagName.toLowerCase()==b.toLowerCase();if(k){r.endElement(_.uri,_.localName,b);if(x){for(var S in x){r.endPrefixMapping(S)}}if(!E){n.fatalError("end tag name: "+b+" is not match the current start tagName:"+_.tagName)}}else{d.push(_)}w++;break;case"?":c&&h(g);w=vt(e,g,r);break;case"!":c&&h(g);w=pt(e,g,r,n);break;default:c&&h(g);var C=new gt;var T=d[d.length-1].currentNSMap;var w=ft(e,g,C,T,a,n);var R=C.length;if(!C.closed&&ct(e,w,C.tagName,p)){C.closed=true;if(!i.nbsp){n.warning("unclosed xml attribute")}}if(c&&R){var A=ht(c,{});for(var N=0;N<R;N++){var O=C[N];h(O.offset);O.locator=ht(c,{})}r.locator=A;if(ut(C,r,T)){d.push(C)}r.locator=c}else{if(ut(C,r,T)){d.push(C)}}if(C.uri==="http://www.w3.org/1999/xhtml"&&!C.closed){w=lt(e,w,C.tagName,a,r)}else{w++}}}catch(L){n.error("element parse error: "+L);w=-1}if(w>v){v=w}else{o(Math.max(g,v)+1)}}}function ht(e,t){t.lineNumber=e.lineNumber;t.columnNumber=e.columnNumber;return t}function ft(e,t,i,r,n,s){var a;var o;var h=++t;var f=Je;while(true){var u=e.charAt(h);switch(u){case"=":if(f===Qe){a=e.slice(t,h);f=tt}else if(f===et){f=tt}else{throw new Error("attribute equal must after attrName")}break;case"'":case'"':if(f===tt||f===Qe){if(f===Qe){s.warning('attribute value must after "="');a=e.slice(t,h)}t=h+1;h=e.indexOf(u,t);if(h>0){o=e.slice(t,h).replace(/&#?\w+;/g,n);i.add(a,o,t-1);f=rt}else{throw new Error("attribute value no end '"+u+"' match")}}else if(f==it){o=e.slice(t,h).replace(/&#?\w+;/g,n);i.add(a,o,t);s.warning('attribute "'+a+'" missed start quot('+u+")!!");t=h+1;f=rt}else{throw new Error('attribute value must after "="')}break;case"/":switch(f){case Je:i.setTagName(e.slice(t,h));case rt:case nt:case st:f=st;i.closed=true;case it:case Qe:case et:break;default:throw new Error("attribute invalid close char('/')")}break;case"":s.error("unexpected end of input");if(f==Je){i.setTagName(e.slice(t,h))}return h;case">":switch(f){case Je:i.setTagName(e.slice(t,h));case rt:case nt:case st:break;case it:case Qe:o=e.slice(t,h);if(o.slice(-1)==="/"){i.closed=true;o=o.slice(0,-1)}case et:if(f===et){o=a}if(f==it){s.warning('attribute "'+o+'" missed quot(")!!');i.add(a,o.replace(/&#?\w+;/g,n),t)}else{if(r[""]!=="http://www.w3.org/1999/xhtml"||!o.match(/^(?:disabled|checked|selected)$/i)){s.warning('attribute "'+o+'" missed value!! "'+o+'" instead!!')}i.add(o,o,t)}break;case tt:throw new Error("attribute value missed!!")}return h;case"":u=" ";default:if(u<=" "){switch(f){case Je:i.setTagName(e.slice(t,h));f=nt;break;case Qe:a=e.slice(t,h);f=et;break;case it:var o=e.slice(t,h).replace(/&#?\w+;/g,n);s.warning('attribute "'+o+'" missed quot(")!!');i.add(a,o,t);case rt:f=nt;break}}else{switch(f){case et:if(r[""]!=="http://www.w3.org/1999/xhtml"||!a.match(/^(?:disabled|checked|selected)$/i)){s.warning('attribute "'+a+'" missed value!! "'+a+'" instead2!!')}i.add(a,a,t);t=h;f=Qe;break;case rt:s.warning('attribute space is required"'+a+'"!!');case nt:f=Qe;t=h;break;case tt:f=it;t=h;break;case st:throw new Error("elements closed character '/' and '>' must be connected to")}}}h++}}function ut(e,t,i){var r=e.tagName;var n=null;var s=e.length;while(s--){var a=e[s];var o=a.qName;var h=a.value;var f=o.indexOf(":");if(f>0){var u=a.prefix=o.slice(0,f);var l=o.slice(f+1);var c=u==="xmlns"&&l}else{l=o;u=null;c=o==="xmlns"&&""}a.localName=l;if(c!==false){if(n==null){n={};dt(i,i={})}i[c]=n[c]=h;a.uri="http://www.w3.org/2000/xmlns/";t.startPrefixMapping(c,h)}}var s=e.length;while(s--){a=e[s];var u=a.prefix;if(u){if(u==="xml"){a.uri="http://www.w3.org/XML/1998/namespace"}if(u!=="xmlns"){a.uri=i[u||""]}}}var f=r.indexOf(":");if(f>0){u=e.prefix=r.slice(0,f);l=e.localName=r.slice(f+1)}else{u=null;l=e.localName=r}var d=e.uri=i[u||""];t.startElement(d,l,r,e);if(e.closed){t.endElement(d,l,r);if(n){for(u in n){t.endPrefixMapping(u)}}}else{e.currentNSMap=i;e.localNSMap=n;return true}}function lt(e,t,i,r,n){if(/^(?:script|textarea)$/i.test(i)){var s=e.indexOf("</"+i+">",t);var a=e.substring(t+1,s);if(/[&<]/.test(a)){if(/^script$/i.test(i)){n.characters(a,0,a.length);return s}a=a.replace(/&#?\w+;/g,r);n.characters(a,0,a.length);return s}}return t+1}function ct(e,t,i,r){var n=r[i];if(n==null){n=e.lastIndexOf("</"+i+">");if(n<t){n=e.lastIndexOf("</"+i)}r[i]=n}return n<t}function dt(e,t){for(var i in e){t[i]=e[i]}}function pt(e,t,i,r){var n=e.charAt(t+2);switch(n){case"-":if(e.charAt(t+3)==="-"){var s=e.indexOf("--\x3e",t+4);if(s>t){i.comment(e,t+4,s-t-4);return s+3}else{r.error("Unclosed comment");return-1}}else{return-1}default:if(e.substr(t+3,6)=="CDATA["){var s=e.indexOf("]]>",t+9);i.startCDATA();i.characters(e,t+9,s-t-9);i.endCDATA();return s+3}var a=yt(e,t);var o=a.length;if(o>1&&/!doctype/i.test(a[0][0])){var h=a[1][0];var f=o>3&&/^public$/i.test(a[2][0])&&a[3][0];var u=o>4&&a[4][0];var l=a[o-1];i.startDTD(h,f&&f.replace(/^(['"])(.*?)\1$/,"$2"),u&&u.replace(/^(['"])(.*?)\1$/,"$2"));i.endDTD();return l.index+l[0].length}}return-1}function vt(e,t,i){var r=e.indexOf("?>",t);if(r){var n=e.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(n){i.processingInstruction(n[1],n[2]);return r+2}else{return-1}}return-1}function gt(e){}gt.prototype={setTagName:function(e){if(!$e.test(e)){throw new Error("invalid tagName:"+e)}this.tagName=e},add:function(e,t,i){if(!$e.test(e)){throw new Error("invalid attribute:"+e)}this[this.length++]={qName:e,value:t,offset:i}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}};function mt(e,t){e.__proto__=t;return e}if(!(mt({},mt.prototype)instanceof mt)){mt=function(e,t){function i(){}i.prototype=t;i=new i;for(t in e){i[t]=e[t]}return i}}function yt(e,t){var i;var r=[];var n=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;n.lastIndex=t;n.exec(e);while(i=n.exec(e)){r.push(i);if(i[1])return r}}var wt=at;var bt={XMLReader:wt};function _t(e,t){for(var i in e){t[i]=e[i]}}function xt(e,t){var i=e.prototype;if(Object.create){var r=Object.create(t.prototype);i.__proto__=r}if(!(i instanceof t)){function n(){}n.prototype=t.prototype;n=new n;_t(i,n);e.prototype=i=n}if(i.constructor!=e){if(typeof e!="function"){console.error("unknow Class:"+e)}i.constructor=e}}var Et="http://www.w3.org/1999/xhtml";var kt={};var St=kt.ELEMENT_NODE=1;var Ct=kt.ATTRIBUTE_NODE=2;var Tt=kt.TEXT_NODE=3;var Rt=kt.CDATA_SECTION_NODE=4;var At=kt.ENTITY_REFERENCE_NODE=5;var Nt=kt.ENTITY_NODE=6;var Ot=kt.PROCESSING_INSTRUCTION_NODE=7;var Lt=kt.COMMENT_NODE=8;var It=kt.DOCUMENT_NODE=9;var Dt=kt.DOCUMENT_TYPE_NODE=10;var zt=kt.DOCUMENT_FRAGMENT_NODE=11;var Pt=kt.NOTATION_NODE=12;var Bt={};var jt={};var Ut=Bt.INDEX_SIZE_ERR=(jt[1]="Index size error",1);var Mt=Bt.DOMSTRING_SIZE_ERR=(jt[2]="DOMString size error",2);var Ft=Bt.HIERARCHY_REQUEST_ERR=(jt[3]="Hierarchy request error",3);var qt=Bt.WRONG_DOCUMENT_ERR=(jt[4]="Wrong document",4);var Wt=Bt.INVALID_CHARACTER_ERR=(jt[5]="Invalid character",5);var Ht=Bt.NO_DATA_ALLOWED_ERR=(jt[6]="No data allowed",6);var Yt=Bt.NO_MODIFICATION_ALLOWED_ERR=(jt[7]="No modification allowed",7);var Zt=Bt.NOT_FOUND_ERR=(jt[8]="Not found",8);var Vt=Bt.NOT_SUPPORTED_ERR=(jt[9]="Not supported",9);var Xt=Bt.INUSE_ATTRIBUTE_ERR=(jt[10]="Attribute in use",10);var Kt=Bt.INVALID_STATE_ERR=(jt[11]="Invalid state",11);var Gt=Bt.SYNTAX_ERR=(jt[12]="Syntax error",12);var $t=Bt.INVALID_MODIFICATION_ERR=(jt[13]="Invalid modification",13);var Jt=Bt.NAMESPACE_ERR=(jt[14]="Invalid namespace",14);var Qt=Bt.INVALID_ACCESS_ERR=(jt[15]="Invalid access",15);function ei(e,t){if(t instanceof Error){var i=t}else{i=this;Error.call(this,jt[e]);this.message=jt[e];if(Error.captureStackTrace)Error.captureStackTrace(this,ei)}i.code=e;if(t)this.message=this.message+": "+t;return i}ei.prototype=Error.prototype;_t(Bt,ei);function ti(){}ti.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var i=[],r=0;r<this.length;r++){Di(this[r],i,e,t)}return i.join("")}};function ii(e,t){this._node=e;this._refresh=t;ri(this)}function ri(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var i=e._refresh(e._node);Bi(e,"length",i.length);_t(i,e);e._inc=t}}ii.prototype.item=function(e){ri(this);return this[e]};xt(ii,ti);function ni(){}function si(e,t){var i=e.length;while(i--){if(e[i]===t){return i}}}function ai(e,t,i,r){if(r){t[si(t,r)]=i}else{t[t.length++]=i}if(e){i.ownerElement=e;var n=e.ownerDocument;if(n){r&&pi(n,e,r);di(n,e,i)}}}function oi(e,t,i){var r=si(t,i);if(r>=0){var n=t.length-1;while(r<n){t[r]=t[++r]}t.length=n;if(e){var s=e.ownerDocument;if(s){pi(s,e,i);i.ownerElement=null}}}else{throw ei(Zt,new Error(e.tagName+"@"+i))}}ni.prototype={length:0,item:ti.prototype.item,getNamedItem:function(e){var t=this.length;while(t--){var i=this[t];if(i.nodeName==e){return i}}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement){throw new ei(Xt)}var i=this.getNamedItem(e.nodeName);ai(this._ownerElement,this,e,i);return i},setNamedItemNS:function(e){var t=e.ownerElement,i;if(t&&t!=this._ownerElement){throw new ei(Xt)}i=this.getNamedItemNS(e.namespaceURI,e.localName);ai(this._ownerElement,this,e,i);return i},removeNamedItem:function(e){var t=this.getNamedItem(e);oi(this._ownerElement,this,t);return t},removeNamedItemNS:function(e,t){var i=this.getNamedItemNS(e,t);oi(this._ownerElement,this,i);return i},getNamedItemNS:function(e,t){var i=this.length;while(i--){var r=this[i];if(r.localName==t&&r.namespaceURI==e){return r}}return null}};function hi(e){this._features={};if(e){for(var t in e){this._features=e[t]}}}hi.prototype={hasFeature:function(e,t){var i=this._features[e.toLowerCase()];if(i&&(!t||t in i)){return true}else{return false}},createDocument:function(e,t,i){var r=new ci;r.implementation=this;r.childNodes=new ti;r.doctype=i;if(i){r.appendChild(i)}if(t){var n=r.createElementNS(e,t);r.appendChild(n)}return r},createDocumentType:function(e,t,i){var r=new Si;r.name=e;r.nodeName=e;r.publicId=t;r.systemId=i;return r}};function fi(){}fi.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return mi(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t);if(t){this.removeChild(t)}},removeChild:function(e){return gi(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(e){return Pi(this.ownerDocument||this,this,e)},normalize:function(){var e=this.firstChild;while(e){var t=e.nextSibling;if(t&&t.nodeType==Tt&&e.nodeType==Tt){this.removeChild(t);e.appendData(t.data)}else{e.normalize();e=t}}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){var t=this;while(t){var i=t._nsMap;if(i){for(var r in i){if(i[r]==e){return r}}}t=t.nodeType==Ct?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){var t=this;while(t){var i=t._nsMap;if(i){if(e in i){return i[e]}}t=t.nodeType==Ct?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){var t=this.lookupPrefix(e);return t==null}};function ui(e){return e=="<"&&"&lt;"||e==">"&&"&gt;"||e=="&"&&"&amp;"||e=='"'&&"&quot;"||"&#"+e.charCodeAt()+";"}_t(kt,fi);_t(kt,fi.prototype);function li(e,t){if(t(e)){return true}if(e=e.firstChild){do{if(li(e,t)){return true}}while(e=e.nextSibling)}}function ci(){}function di(e,t,i){e&&e._inc++;var r=i.namespaceURI;if(r=="http://www.w3.org/2000/xmlns/"){t._nsMap[i.prefix?i.localName:""]=i.value}}function pi(e,t,i,r){e&&e._inc++;var n=i.namespaceURI;if(n=="http://www.w3.org/2000/xmlns/"){delete t._nsMap[i.prefix?i.localName:""]}}function vi(e,t,i){if(e&&e._inc){e._inc++;var r=t.childNodes;if(i){r[r.length++]=i}else{var n=t.firstChild;var s=0;while(n){r[s++]=n;n=n.nextSibling}r.length=s}}}function gi(e,t){var i=t.previousSibling;var r=t.nextSibling;if(i){i.nextSibling=r}else{e.firstChild=r}if(r){r.previousSibling=i}else{e.lastChild=i}vi(e.ownerDocument,e);return t}function mi(e,t,i){var r=t.parentNode;if(r){r.removeChild(t)}if(t.nodeType===zt){var n=t.firstChild;if(n==null){return t}var s=t.lastChild}else{n=s=t}var a=i?i.previousSibling:e.lastChild;n.previousSibling=a;s.nextSibling=i;if(a){a.nextSibling=n}else{e.firstChild=n}if(i==null){e.lastChild=s}else{i.previousSibling=s}do{n.parentNode=e}while(n!==s&&(n=n.nextSibling));vi(e.ownerDocument||e,e);if(t.nodeType==zt){t.firstChild=t.lastChild=null}return t}function yi(e,t){var i=t.parentNode;if(i){var r=e.lastChild;i.removeChild(t);var r=e.lastChild}var r=e.lastChild;t.parentNode=e;t.previousSibling=r;t.nextSibling=null;if(r){r.nextSibling=t}else{e.firstChild=t}e.lastChild=t;vi(e.ownerDocument,e,t);return t}ci.prototype={nodeName:"#document",nodeType:It,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==zt){var i=e.firstChild;while(i){var r=i.nextSibling;this.insertBefore(i,t);i=r}return e}if(this.documentElement==null&&e.nodeType==St){this.documentElement=e}return mi(this,e,t),e.ownerDocument=this,e},removeChild:function(e){if(this.documentElement==e){this.documentElement=null}return gi(this,e)},importNode:function(e,t){return zi(this,e,t)},getElementById:function(e){var t=null;li(this.documentElement,(function(i){if(i.nodeType==St){if(i.getAttribute("id")==e){t=i;return true}}}));return t},createElement:function(e){var t=new wi;t.ownerDocument=this;t.nodeName=e;t.tagName=e;t.childNodes=new ti;var i=t.attributes=new ni;i._ownerElement=t;return t},createDocumentFragment:function(){var e=new Ai;e.ownerDocument=this;e.childNodes=new ti;return e},createTextNode:function(e){var t=new xi;t.ownerDocument=this;t.appendData(e);return t},createComment:function(e){var t=new Ei;t.ownerDocument=this;t.appendData(e);return t},createCDATASection:function(e){var t=new ki;t.ownerDocument=this;t.appendData(e);return t},createProcessingInstruction:function(e,t){var i=new Ni;i.ownerDocument=this;i.tagName=i.target=e;i.nodeValue=i.data=t;return i},createAttribute:function(e){var t=new bi;t.ownerDocument=this;t.name=e;t.nodeName=e;t.localName=e;t.specified=true;return t},createEntityReference:function(e){var t=new Ri;t.ownerDocument=this;t.nodeName=e;return t},createElementNS:function(e,t){var i=new wi;var r=t.split(":");var n=i.attributes=new ni;i.childNodes=new ti;i.ownerDocument=this;i.nodeName=t;i.tagName=t;i.namespaceURI=e;if(r.length==2){i.prefix=r[0];i.localName=r[1]}else{i.localName=t}n._ownerElement=i;return i},createAttributeNS:function(e,t){var i=new bi;var r=t.split(":");i.ownerDocument=this;i.nodeName=t;i.name=t;i.namespaceURI=e;i.specified=true;if(r.length==2){i.prefix=r[0];i.localName=r[1]}else{i.localName=t}return i}};xt(ci,fi);function wi(){this._nsMap={}}wi.prototype={nodeType:St,hasAttribute:function(e){return this.getAttributeNode(e)!=null},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var i=this.ownerDocument.createAttribute(e);i.value=i.nodeValue=""+t;this.setAttributeNode(i)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){if(e.nodeType===zt){return this.insertBefore(e,null)}else{return yi(this,e)}},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var i=this.getAttributeNodeNS(e,t);i&&this.removeAttributeNode(i)},hasAttributeNS:function(e,t){return this.getAttributeNodeNS(e,t)!=null},getAttributeNS:function(e,t){var i=this.getAttributeNodeNS(e,t);return i&&i.value||""},setAttributeNS:function(e,t,i){var r=this.ownerDocument.createAttributeNS(e,t);r.value=r.nodeValue=""+i;this.setAttributeNode(r)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new ii(this,(function(t){var i=[];li(t,(function(r){if(r!==t&&r.nodeType==St&&(e==="*"||r.tagName==e)){i.push(r)}}));return i}))},getElementsByTagNameNS:function(e,t){return new ii(this,(function(i){var r=[];li(i,(function(n){if(n!==i&&n.nodeType===St&&(e==="*"||n.namespaceURI===e)&&(t==="*"||n.localName==t)){r.push(n)}}));return r}))}};ci.prototype.getElementsByTagName=wi.prototype.getElementsByTagName;ci.prototype.getElementsByTagNameNS=wi.prototype.getElementsByTagNameNS;xt(wi,fi);function bi(){}bi.prototype.nodeType=Ct;xt(bi,fi);function _i(){}_i.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e;this.nodeValue=this.data=e;this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(jt[Ft])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,i){var r=this.data.substring(0,e);var n=this.data.substring(e+t);i=r+i+n;this.nodeValue=this.data=i;this.length=i.length}};xt(_i,fi);function xi(){}xi.prototype={nodeName:"#text",nodeType:Tt,splitText:function(e){var t=this.data;var i=t.substring(e);t=t.substring(0,e);this.data=this.nodeValue=t;this.length=t.length;var r=this.ownerDocument.createTextNode(i);if(this.parentNode){this.parentNode.insertBefore(r,this.nextSibling)}return r}};xt(xi,_i);function Ei(){}Ei.prototype={nodeName:"#comment",nodeType:Lt};xt(Ei,_i);function ki(){}ki.prototype={nodeName:"#cdata-section",nodeType:Rt};xt(ki,_i);function Si(){}Si.prototype.nodeType=Dt;xt(Si,fi);function Ci(){}Ci.prototype.nodeType=Pt;xt(Ci,fi);function Ti(){}Ti.prototype.nodeType=Nt;xt(Ti,fi);function Ri(){}Ri.prototype.nodeType=At;xt(Ri,fi);function Ai(){}Ai.prototype.nodeName="#document-fragment";Ai.prototype.nodeType=zt;xt(Ai,fi);function Ni(){}Ni.prototype.nodeType=Ot;xt(Ni,fi);function Oi(){}Oi.prototype.serializeToString=function(e,t,i){return Li.call(e,t,i)};fi.prototype.toString=Li;function Li(e,t){var i=[];var r=this.nodeType==9?this.documentElement:this;var n=r.prefix;var s=r.namespaceURI;if(s&&n==null){var n=r.lookupPrefix(s);if(n==null){var a=[{namespace:s,prefix:null}]}}Di(this,i,e,t,a);return i.join("")}function Ii(e,t,i){var r=e.prefix||"";var n=e.namespaceURI;if(!r&&!n){return false}if(r==="xml"&&n==="http://www.w3.org/XML/1998/namespace"||n=="http://www.w3.org/2000/xmlns/"){return false}var s=i.length;while(s--){var a=i[s];if(a.prefix==r){return a.namespace!=n}}return true}function Di(e,t,i,r,n){if(r){e=r(e);if(e){if(typeof e=="string"){t.push(e);return}}else{return}}switch(e.nodeType){case St:if(!n)n=[];var s=e.attributes;var a=s.length;var o=e.firstChild;var h=e.tagName;i=Et===e.namespaceURI||i;t.push("<",h);for(var f=0;f<a;f++){var u=s.item(f);if(u.prefix=="xmlns"){n.push({prefix:u.localName,namespace:u.value})}else if(u.nodeName=="xmlns"){n.push({prefix:"",namespace:u.value})}}for(var f=0;f<a;f++){var u=s.item(f);if(Ii(u,i,n)){var l=u.prefix||"";var c=u.namespaceURI;var d=l?" xmlns:"+l:" xmlns";t.push(d,'="',c,'"');n.push({prefix:l,namespace:c})}Di(u,t,i,r,n)}if(Ii(e,i,n)){var l=e.prefix||"";var c=e.namespaceURI;var d=l?" xmlns:"+l:" xmlns";t.push(d,'="',c,'"');n.push({prefix:l,namespace:c})}if(o||i&&!/^(?:meta|link|img|br|hr|input)$/i.test(h)){t.push(">");if(i&&/^script$/i.test(h)){while(o){if(o.data){t.push(o.data)}else{Di(o,t,i,r,n)}o=o.nextSibling}}else{while(o){Di(o,t,i,r,n);o=o.nextSibling}}t.push("</",h,">")}else{t.push("/>")}return;case It:case zt:var o=e.firstChild;while(o){Di(o,t,i,r,n);o=o.nextSibling}return;case Ct:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,ui),'"');case Tt:return t.push(e.data.replace(/[<&]/g,ui));case Rt:return t.push("<![CDATA[",e.data,"]]>");case Lt:return t.push("\x3c!--",e.data,"--\x3e");case Dt:var p=e.publicId;var v=e.systemId;t.push("<!DOCTYPE ",e.name);if(p){t.push(' PUBLIC "',p);if(v&&v!="."){t.push('" "',v)}t.push('">')}else if(v&&v!="."){t.push(' SYSTEM "',v,'">')}else{var g=e.internalSubset;if(g){t.push(" [",g,"]")}t.push(">")}return;case Ot:return t.push("<?",e.target," ",e.data,"?>");case At:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function zi(e,t,i){var r;switch(t.nodeType){case St:r=t.cloneNode(false);r.ownerDocument=e;case zt:break;case Ct:i=true;break}if(!r){r=t.cloneNode(false)}r.ownerDocument=e;r.parentNode=null;if(i){var n=t.firstChild;while(n){r.appendChild(zi(e,n,i));n=n.nextSibling}}return r}function Pi(e,t,i){var r=new t.constructor;for(var n in t){var s=t[n];if(typeof s!="object"){if(s!=r[n]){r[n]=s}}}if(t.childNodes){r.childNodes=new ti}r.ownerDocument=e;switch(r.nodeType){case St:var a=t.attributes;var o=r.attributes=new ni;var h=a.length;o._ownerElement=r;for(var f=0;f<h;f++){r.setAttributeNode(Pi(e,a.item(f),true))}break;case Ct:i=true}if(i){var u=t.firstChild;while(u){r.appendChild(Pi(e,u,i));u=u.nextSibling}}return r}function Bi(e,t,i){e[t]=i}try{if(Object.defineProperty){Object.defineProperty(ii.prototype,"length",{get:function(){ri(this);return this.$$length}});Object.defineProperty(fi.prototype,"textContent",{get:function(){return ji(this)},set:function(e){switch(this.nodeType){case St:case zt:while(this.firstChild){this.removeChild(this.firstChild)}if(e||String(e)){this.appendChild(this.ownerDocument.createTextNode(e))}break;default:this.data=e;this.value=e;this.nodeValue=e}}});function ji(e){switch(e.nodeType){case St:case zt:var t=[];e=e.firstChild;while(e){if(e.nodeType!==7&&e.nodeType!==8){t.push(ji(e))}e=e.nextSibling}return t.join("");default:return e.nodeValue}}Bi=function(e,t,i){e["$$"+t]=i}}}catch(Ng){}var Ui=hi;var Mi=Oi;var Fi={DOMImplementation:Ui,XMLSerializer:Mi};var qi=o((function(e,t){function i(e){this.options=e||{locator:{}}}i.prototype.parseFromString=function(e,t){var i=this.options;var s=new f;var a=i.domBuilder||new n;var o=i.errorHandler;var h=i.locator;var u=i.xmlns||{};var l={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};if(h){a.setDocumentLocator(h)}s.errorHandler=r(o,a,h);s.domBuilder=i.domBuilder||a;if(/\/x?html?$/.test(t)){l.nbsp=" ";l.copy="©";u[""]="http://www.w3.org/1999/xhtml"}u.xml=u.xml||"http://www.w3.org/XML/1998/namespace";if(e){s.parse(e,u,l)}else{s.errorHandler.error("invalid doc source")}return a.doc};function r(e,t,i){if(!e){if(t instanceof n){return t}e=t}var r={};var s=e instanceof Function;i=i||{};function o(t){var n=e[t];if(!n&&s){n=e.length==2?function(i){e(t,i)}:e}r[t]=n&&function(e){n("[xmldom "+t+"]\t"+e+a(i))}||function(){}}o("warning");o("error");o("fatalError");return r}function n(){this.cdata=false}function s(e,t){t.lineNumber=e.lineNumber;t.columnNumber=e.columnNumber}n.prototype={startDocument:function(){this.doc=(new u).createDocument(null,null,null);if(this.locator){this.doc.documentURI=this.locator.systemId}},startElement:function(e,t,i,r){var n=this.doc;var a=n.createElementNS(e,i||t);var o=r.length;h(this,a);this.currentElement=a;this.locator&&s(this.locator,a);for(var f=0;f<o;f++){var e=r.getURI(f);var u=r.getValue(f);var i=r.getQName(f);var l=n.createAttributeNS(e,i);this.locator&&s(r.getLocator(f),l);l.value=l.nodeValue=u;a.setAttributeNode(l)}},endElement:function(e,t,i){var r=this.currentElement;this.currentElement=r.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var i=this.doc.createProcessingInstruction(e,t);this.locator&&s(this.locator,i);h(this,i)},ignorableWhitespace:function(e,t,i){},characters:function(e,t,i){e=o.apply(this,arguments);if(e){if(this.cdata){var r=this.doc.createCDATASection(e)}else{var r=this.doc.createTextNode(e)}if(this.currentElement){this.currentElement.appendChild(r)}else if(/^\s*$/.test(e)){this.doc.appendChild(r)}this.locator&&s(this.locator,r)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){if(this.locator=e){e.lineNumber=0}},comment:function(e,t,i){e=o.apply(this,arguments);var r=this.doc.createComment(e);this.locator&&s(this.locator,r);h(this,r)},startCDATA:function(){this.cdata=true},endCDATA:function(){this.cdata=false},startDTD:function(e,t,i){var r=this.doc.implementation;if(r&&r.createDocumentType){var n=r.createDocumentType(e,t,i);this.locator&&s(this.locator,n);h(this,n)}},warning:function(e){console.warn("[xmldom warning]\t"+e,a(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,a(this.locator))},fatalError:function(e){console.error("[xmldom fatalError]\t"+e,a(this.locator));throw e}};function a(e){if(e){return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}}function o(e,t,i){if(typeof e=="string"){return e.substr(t,i)}else{if(e.length>=t+i||t){return new java.lang.String(e,t,i)+""}return e}}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){n.prototype[e]=function(){return null}}));function h(e,t){if(!e.currentElement){e.doc.appendChild(t)}else{e.currentElement.appendChild(t)}}var f=bt.XMLReader;var u=t.DOMImplementation=Fi.DOMImplementation;t.XMLSerializer=Fi.XMLSerializer;t.DOMParser=i}));var Wi=qi.XMLSerializer;var Hi=function(){function e(e,t){this.idref=e.idref;this.linear=e.linear==="yes";this.properties=e.properties;this.index=e.index;this.href=e.href;this.url=e.url;this.canonical=e.canonical;this.next=e.next;this.prev=e.prev;this.cfiBase=e.cfiBase;if(t){this.hooks=t}else{this.hooks={};this.hooks.serialize=new We(this);this.hooks.content=new We(this)}this.document=undefined;this.contents=undefined;this.output=undefined}e.prototype.load=function(e){var t=e||this.request||require("./utils/request");var i=new Ee;var r=i.promise;if(this.contents){i.resolve(this.contents)}else{t(this.url).then(function(e){this.document=e;this.contents=e.documentElement;return this.hooks.content.trigger(this.document,this)}.bind(this)).then(function(){i.resolve(this.contents)}.bind(this)).catch((function(e){i.reject(e)}))}return r};e.prototype.base=function(){return He(this.document,this)};e.prototype.render=function(e){var t=new Ee;var i=t.promise;this.load(e).then(function(e){var t=typeof navigator!=="undefined"&&navigator.userAgent||"";var i=t.indexOf("Trident")>=0;var r;if(typeof XMLSerializer==="undefined"||i){r=Wi}else{r=XMLSerializer}var n=new r;this.output=n.serializeToString(e);return this.output}.bind(this)).then(function(){return this.hooks.serialize.trigger(this.output,this)}.bind(this)).then(function(){t.resolve(this.output)}.bind(this)).catch((function(e){t.reject(e)}));return i};e.prototype.find=function(e){var t=this;var i=[];var r=e.toLowerCase();var n=function(e){var n=e.textContent.toLowerCase();var s=t.document.createRange();var a;var o;var h=-1;var f;var u=150;while(o!=-1){o=n.indexOf(r,h+1);if(o!=-1){s=t.document.createRange();s.setStart(e,o);s.setEnd(e,o+r.length);a=t.cfiFromRange(s);if(e.textContent.length<u){f=e.textContent}else{f=e.textContent.substring(o-u/2,o+u/2);f="..."+f+"..."}i.push({cfi:a,excerpt:f})}h=o}};we(t.document,(function(e){n(e)}));return i};e.prototype.reconcileLayoutSettings=function(e){var t={layout:e.layout,spread:e.spread,orientation:e.orientation};this.properties.forEach((function(e){var i=e.replace("rendition:","");var r=i.indexOf("-");var n,s;if(r!=-1){n=i.slice(0,r);s=i.slice(r+1);t[n]=s}}));return t};e.prototype.cfiFromRange=function(e){return new qe(e,this.cfiBase).toString()};e.prototype.cfiFromElement=function(e){return new qe(e,this.cfiBase).toString()};e.prototype.unload=function(){this.document=undefined;this.contents=undefined;this.output=undefined};e.prototype.destroy=function(){this.unload();this.hooks.serialize.clear();this.hooks.content.clear();this.hooks=undefined;this.idref=undefined;this.linear=undefined;this.properties=undefined;this.index=undefined;this.href=undefined;this.url=undefined;this.next=undefined;this.prev=undefined;this.cfiBase=undefined};return e}();var Yi=function(){function e(){this.spineItems=[];this.spineByHref={};this.spineById={};this.hooks={};this.hooks.serialize=new We;this.hooks.content=new We;this.hooks.content.register(He);this.hooks.content.register(Ye);this.hooks.content.register(Ze);this.epubcfi=new qe;this.loaded=false;this.items=undefined;this.manifest=undefined;this.spineNodeIndex=undefined;this.baseUrl=undefined;this.length=undefined}e.prototype.unpack=function(e,t,i){var r=this;this.items=e.spine;this.manifest=e.manifest;this.spineNodeIndex=e.spineNodeIndex;this.baseUrl=e.baseUrl||e.basePath||"";this.length=this.items.length;this.items.forEach((function(e,n){var s=r.manifest[e.idref];var a;e.index=n;e.cfiBase=r.epubcfi.generateChapterComponent(r.spineNodeIndex,e.index,e.idref);if(e.href){e.url=t(e.href,true);e.canonical=i(e.href)}if(s){e.href=s.href;e.url=t(e.href,true);e.canonical=i(e.href);if(s.properties.length){e.properties.push.apply(e.properties,s.properties)}}if(e.linear==="yes"){e.prev=function(){var t=e.index;while(t>0){var i=this.get(t-1);if(i&&i.linear){return i}t-=1}return}.bind(r);e.next=function(){var t=e.index;while(t<this.spineItems.length-1){var i=this.get(t+1);if(i&&i.linear){return i}t+=1}return}.bind(r)}else{e.prev=function(){return};e.next=function(){return}}a=new Hi(e,r.hooks);r.append(a)}));this.loaded=true};e.prototype.get=function(e){var t=0;if(typeof e==="undefined"){while(t<this.spineItems.length){var i=this.spineItems[t];if(i&&i.linear){break}t+=1}}else if(this.epubcfi.isCfiString(e)){var r=new qe(e);t=r.spinePos}else if(typeof e==="number"||isNaN(e)===false){t=e}else if(typeof e==="string"&&e.indexOf("#")===0){t=this.spineById[e.substring(1)]}else if(typeof e==="string"){e=e.split("#")[0];if(e.startsWith("../")){e=e.split("../")[1]}t=this.spineByHref[e]||this.spineByHref[encodeURI(e)]||Object.keys(this.spineByHref).findIndex((function(t){return t.indexOf(e)!==-1}))}return this.spineItems[t]||null};e.prototype.append=function(e){var t=this.spineItems.length;e.index=t;this.spineItems.push(e);this.spineByHref[decodeURI(e.href)]=t;this.spineByHref[encodeURI(e.href)]=t;this.spineByHref[e.href]=t;this.spineById[e.idref]=t;return t};e.prototype.prepend=function(e){this.spineByHref[e.href]=0;this.spineById[e.idref]=0;this.spineItems.forEach((function(e,t){e.index=t}));return 0};e.prototype.remove=function(e){var t=this.spineItems.indexOf(e);if(t>-1){delete this.spineByHref[e.href];delete this.spineById[e.idref];return this.spineItems.splice(t,1)}};e.prototype.each=function(){return this.spineItems.forEach.apply(this.spineItems,arguments)};e.prototype.first=function(){var e=0;do{var t=this.get(e);if(t&&t.linear){return t}e+=1}while(e<this.spineItems.length)};e.prototype.last=function(){var e=this.spineItems.length-1;do{var t=this.get(e);if(t&&t.linear){return t}e-=1}while(e>=0)};e.prototype.destroy=function(){this.each((function(e){return e.destroy()}));this.spineItems=undefined;this.spineByHref=undefined;this.spineById=undefined;this.hooks.serialize.clear();this.hooks.content.clear();this.hooks=undefined;this.epubcfi=undefined;this.loaded=false;this.items=undefined;this.manifest=undefined;this.spineNodeIndex=undefined;this.baseUrl=undefined;this.length=undefined};return e}();var Zi=function(){function e(e){this._q=[];this.context=e;this.tick=F;this.running=false;this.paused=false}e.prototype.enqueue=function(){var e,t;var i;var r=[].shift.call(arguments);var n=arguments;if(!r){throw new Error("No Task Provided")}if(typeof r==="function"){e=new Ee;t=e.promise;i={task:r,args:n,deferred:e,promise:t}}else{i={promise:r}}this._q.push(i);if(this.paused==false&&!this.running){this.run()}return i.promise};e.prototype.dequeue=function(){var e,t,i;if(this._q.length&&!this.paused){e=this._q.shift();t=e.task;if(t){i=t.apply(this.context,e.args);if(i&&typeof i["then"]==="function"){return i.then(function(){e.deferred.resolve.apply(this.context,arguments)}.bind(this),function(){e.deferred.reject.apply(this.context,arguments)}.bind(this))}else{e.deferred.resolve.apply(this.context,i);return e.promise}}else if(e.promise){return e.promise}}else{e=new Ee;e.deferred.resolve();return e.promise}};e.prototype.dump=function(){while(this._q.length){this.dequeue()}};e.prototype.run=function(){var e=this;if(!this.running){this.running=true;this.defered=new Ee}this.tick.call(window,(function(){if(e._q.length){e.dequeue().then(function(){this.run()}.bind(e))}else{e.defered.resolve();e.running=undefined}}));if(this.paused==true){this.paused=false}return this.defered.promise};e.prototype.flush=function(){if(this.running){return this.running}if(this._q.length){this.running=this.dequeue().then(function(){this.running=undefined;return this.flush()}.bind(this));return this.running}};e.prototype.clear=function(){this._q=[]};e.prototype.length=function(){return this._q.length};e.prototype.pause=function(){this.paused=true};e.prototype.stop=function(){this._q=[];this.running=false;this.paused=true};return e}();var Vi="0.3";var Xi=["keydown","keyup","keypressed","mouseup","mousedown","click","touchend","touchstart","touchmove"];var Ki={BOOK:{OPEN_FAILED:"openFailed"},CONTENTS:{EXPAND:"expand",RESIZE:"resize",SELECTED:"selected",SELECTED_RANGE:"selectedRange",LINK_CLICKED:"linkClicked"},LOCATIONS:{CHANGED:"changed"},MANAGERS:{RESIZE:"resize",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",ADDED:"added",SCROLL:"scroll",SCROLLED:"scrolled",REMOVED:"removed"},VIEWS:{AXIS:"axis",LOAD_ERROR:"loaderror",RENDERED:"rendered",RESIZED:"resized",DISPLAYED:"displayed",SHOWN:"shown",HIDDEN:"hidden",MARK_CLICKED:"markClicked"},RENDITION:{STARTED:"started",ATTACHED:"attached",DISPLAYED:"displayed",DISPLAY_ERROR:"displayerror",RENDERED:"rendered",REMOVED:"removed",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",LOCATION_CHANGED:"locationChanged",RELOCATED:"relocated",MARK_CLICKED:"markClicked",SELECTED:"selected",LAYOUT:"layout"},LAYOUT:{UPDATED:"updated"},ANNOTATION:{ATTACH:"attach",DETACH:"detach"}};var Gi=function(){function e(e,t,i){this.spine=e;this.request=t;this.pause=i||100;this.q=new Zi(this);this.epubcfi=new qe;this._locations=[];this.total=0;this.break=150;this._current=0;this.currentLocation="";this._currentCfi="";this.processingTimeout=undefined}e.prototype.generate=function(e){if(e){this.break=e}this.q.pause();this.spine.each(function(e){if(e.linear){this.q.enqueue(this.process.bind(this),e)}}.bind(this));return this.q.run().then(function(){this.total=this._locations.length-1;if(this._currentCfi){this.currentLocation=this._currentCfi}return this._locations}.bind(this))};e.prototype.createRange=function(){return{startContainer:undefined,startOffset:undefined,endContainer:undefined,endOffset:undefined}};e.prototype.process=function(e){return e.load(this.request).then(function(t){var i=new Ee;var r=this.parse(t,e.cfiBase);this._locations=this._locations.concat(r);e.unload();this.processingTimeout=setTimeout((function(){return i.resolve(r)}),this.pause);return i.promise}.bind(this))};e.prototype.parse=function(e,t,i){var r=[];var n;var s=e.ownerDocument;var a=ge(s,"body");var o=0;var h;var f=i||this.break;var u=function(e){var i=e.length;var s;var a=0;if(e.textContent.trim().length===0){return false}if(o==0){n=this.createRange();n.startContainer=e;n.startOffset=0}s=f-o;if(s>i){o+=i;a=i}while(a<i){s=f-o;if(o===0){a+=1;n=this.createRange();n.startContainer=e;n.startOffset=a}if(a+s>=i){o+=i-a;a=i}else{a+=s;n.endContainer=e;n.endOffset=a;var u=new qe(n,t).toString();r.push(u);o=0}}h=e};we(a,u.bind(this));if(n&&n.startContainer&&h){n.endContainer=h;n.endOffset=h.length;var l=new qe(n,t).toString();r.push(l);o=0}return r};e.prototype.locationFromCfi=function(e){var t;if(qe.prototype.isCfiString(e)){e=new qe(e)}if(this._locations.length===0){return-1}t=ee(e,this._locations,this.epubcfi.compare);if(t>this.total){return this.total}return t};e.prototype.percentageFromCfi=function(e){if(this._locations.length===0){return null}var t=this.locationFromCfi(e);return this.percentageFromLocation(t)};e.prototype.percentageFromLocation=function(e){if(!e||!this.total){return 0}return e/this.total};e.prototype.cfiFromLocation=function(e){var t=-1;if(typeof e!="number"){e=parseInt(e)}if(e>=0&&e<this._locations.length){t=this._locations[e]}return t};e.prototype.cfiFromPercentage=function(e){var t;if(e>1){console.warn("Normalize cfiFromPercentage value to between 0 - 1")}if(e>=1){var i=new qe(this._locations[this.total]);i.collapse();return i.toString()}t=Math.ceil(this.total*e);return this.cfiFromLocation(t)};e.prototype.load=function(e){if(typeof e==="string"){this._locations=JSON.parse(e)}else{this._locations=e}this.total=this._locations.length-1;return this._locations};e.prototype.save=function(){return JSON.stringify(this._locations)};e.prototype.getCurrent=function(){return this._current};e.prototype.setCurrent=function(e){var t;if(typeof e=="string"){this._currentCfi=e}else if(typeof e=="number"){this._current=e}else{return}if(this._locations.length===0){return}if(typeof e=="string"){t=this.locationFromCfi(e);this._current=t}else{t=e}this.emit(Ki.LOCATIONS.CHANGED,{percentage:this.percentageFromLocation(t)})};Object.defineProperty(e.prototype,"currentLocation",{get:function(){return this._current},set:function(e){this.setCurrent(e)},enumerable:true,configurable:true});e.prototype.length=function(){return this._locations.length};e.prototype.destroy=function(){this.spine=undefined;this.request=undefined;this.pause=undefined;this.q.stop();this.q=undefined;this.epubcfi=undefined;this._locations=undefined;this.total=undefined;this.break=undefined;this._current=undefined;this.currentLocation=undefined;this._currentCfi=undefined;clearTimeout(this.processingTimeout)};return e}();M(Gi.prototype);var $i=function(){function e(e){this.packagePath="";this.directory="";this.encoding="";if(e){this.parse(e)}}e.prototype.parse=function(e){var t;if(!e){throw new Error("Container File Not Found")}t=ge(e,"rootfile");if(!t){throw new Error("No RootFile Found")}this.packagePath=t.getAttribute("full-path");this.directory=Pe.dirname(this.packagePath);this.encoding=e.xmlEncoding};e.prototype.destroy=function(){this.packagePath=undefined;this.directory=undefined;this.encoding=undefined};return e}();var Ji=function(){function e(e){this.manifest={};this.navPath="";this.ncxPath="";this.coverPath="";this.spineNodeIndex=0;this.spine=[];this.metadata={};if(e){this.parse(e)}}e.prototype.parse=function(e){var t,i,r;if(!e){throw new Error("Package File Not Found")}t=ge(e,"metadata");if(!t){throw new Error("No Metadata Found")}i=ge(e,"manifest");if(!i){throw new Error("No Manifest Found")}r=ge(e,"spine");if(!r){throw new Error("No Spine Found")}this.manifest=this.parseManifest(i);this.navPath=this.findNavPath(i);this.ncxPath=this.findNcxPath(i,r);this.coverPath=this.findCoverPath(e);this.spineNodeIndex=he(r);this.spine=this.parseSpine(r,this.manifest);this.uniqueIdentifier=this.findUniqueIdentifier(e);this.metadata=this.parseMetadata(t);this.metadata.direction=r.getAttribute("page-progression-direction");return{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex}};e.prototype.parseMetadata=function(e){var t={};t.title=this.getElementText(e,"title");t.creator=this.getElementText(e,"creator");t.description=this.getElementText(e,"description");t.pubdate=this.getElementText(e,"date");t.publisher=this.getElementText(e,"publisher");t.identifier=this.getElementText(e,"identifier");t.language=this.getElementText(e,"language");t.rights=this.getElementText(e,"rights");t.modified_date=this.getPropertyText(e,"dcterms:modified");t.layout=this.getPropertyText(e,"rendition:layout");t.orientation=this.getPropertyText(e,"rendition:orientation");t.flow=this.getPropertyText(e,"rendition:flow");t.viewport=this.getPropertyText(e,"rendition:viewport");t.media_active_class=this.getPropertyText(e,"media:active-class");return t};e.prototype.parseManifest=function(e){var t={};var i=me(e,"item");var r=Array.prototype.slice.call(i);r.forEach((function(e){var i=e.getAttribute("id"),r=e.getAttribute("href")||"",n=e.getAttribute("media-type")||"",s=e.getAttribute("media-overlay")||"",a=e.getAttribute("properties")||"";t[i]={href:r,type:n,overlay:s,properties:a.length?a.split(" "):[]}}));return t};e.prototype.parseSpine=function(e,t){var i=[];var r=me(e,"itemref");var n=Array.prototype.slice.call(r);n.forEach((function(e,t){var r=e.getAttribute("idref");var n=e.getAttribute("properties")||"";var s=n.length?n.split(" "):[];var a={idref:r,linear:e.getAttribute("linear")||"yes",properties:s,index:t};i.push(a)}));return i};e.prototype.findUniqueIdentifier=function(e){var t=e.documentElement.getAttribute("unique-identifier");if(!t){return""}var i=e.getElementById(t);if(!i){return""}if(i.localName==="identifier"&&i.namespaceURI==="http://purl.org/dc/elements/1.1/"){return i.childNodes.length>0?i.childNodes[0].nodeValue.trim():""}return""};e.prototype.findNavPath=function(e){var t=ye(e,"item",{properties:"nav"});return t?t.getAttribute("href"):false};e.prototype.findNcxPath=function(e,t){var i=ye(e,"item",{"media-type":"application/x-dtbncx+xml"});var r;if(!i){r=t.getAttribute("toc");if(r){i=e.querySelector("#"+r)}}return i?i.getAttribute("href"):false};e.prototype.findCoverPath=function(e){var t=ge(e,"package");var i=t.getAttribute("version");if(i==="2.0"){var r=ye(e,"meta",{name:"cover"});if(r){var n=r.getAttribute("content");var s=e.getElementById(n);return s?s.getAttribute("href"):""}else{return false}}else{var a=ye(e,"item",{properties:"cover-image"});return a?a.getAttribute("href"):""}};e.prototype.getElementText=function(e,t){var i=e.getElementsByTagNameNS("http://purl.org/dc/elements/1.1/",t);var r;if(!i||i.length===0)return"";r=i[0];if(r.childNodes.length){return r.childNodes[0].nodeValue}return""};e.prototype.getPropertyText=function(e,t){var i=ye(e,"meta",{property:t});if(i&&i.childNodes.length){return i.childNodes[0].nodeValue}return""};e.prototype.load=function(e){var t=this;this.metadata=e.metadata;var i=e.readingOrder||e.spine;this.spine=i.map((function(e,t){e.index=t;e.linear=e.linear||"yes";return e}));e.resources.forEach((function(e,i){t.manifest[i]=e;if(e.rel&&e.rel[0]==="cover"){t.coverPath=e.href}}));this.spineNodeIndex=0;this.toc=e.toc.map((function(e,t){e.label=e.title;return e}));return{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex,toc:this.toc}};e.prototype.destroy=function(){this.manifest=undefined;this.navPath=undefined;this.ncxPath=undefined;this.coverPath=undefined;this.spineNodeIndex=undefined;this.spine=undefined;this.metadata=undefined};return e}();var Qi=function(){function e(e){this.toc=[];this.tocByHref={};this.tocById={};this.landmarks=[];this.landmarksByType={};this.length=0;if(e){this.parse(e)}}e.prototype.parse=function(e){var t=e.nodeType;var i;var r;if(t){i=ge(e,"html");r=ge(e,"ncx")}if(!t){this.toc=this.load(e)}else if(i){this.toc=this.parseNav(e);this.landmarks=this.parseLandmarks(e)}else if(r){this.toc=this.parseNcx(e)}this.length=0;this.unpack(this.toc)};e.prototype.unpack=function(e){var t;for(var i=0;i<e.length;i++){t=e[i];if(t.href){this.tocByHref[t.href]=i}if(t.id){this.tocById[t.id]=i}this.length++;if(t.subitems.length){this.unpack(t.subitems)}}};e.prototype.get=function(e){var t;if(!e){return this.toc}if(e.indexOf("#")===0){t=this.tocById[e.substring(1)]}else if(e in this.tocByHref){t=this.tocByHref[e]}return this.toc[t]};e.prototype.landmark=function(e){var t;if(!e){return this.landmarks}t=this.landmarksByType[e];return this.landmarks[t]};e.prototype.parseNav=function(e){var t=ke(e,"nav","toc");var i=t?me(t,"li"):[];var r=i.length;var n;var s={};var a=[];var o,h;if(!i||r===0)return a;for(n=0;n<r;++n){o=this.navItem(i[n]);if(o){s[o.id]=o;if(!o.parent){a.push(o)}else{h=s[o.parent];h.subitems.push(o)}}}return a};e.prototype.navItem=function(e){var t=e.getAttribute("id")||undefined;var i=Te(e,"a",true);if(!i){return}var r=i.getAttribute("href")||"";if(!t){t=r}var n=i.textContent||"";var s=[];var a=Re(e,"li");var o;if(a){o=a.getAttribute("id");if(!o){var h=Te(a,"a",true);o=h&&h.getAttribute("href")}}while(!o&&a){a=Re(a,"li");if(a){o=a.getAttribute("id");if(!o){var h=Te(a,"a",true);o=h&&h.getAttribute("href")}}}return{id:t,href:r,label:n,subitems:s,parent:o}};e.prototype.parseLandmarks=function(e){var t=ke(e,"nav","landmarks");var i=t?me(t,"li"):[];var r=i.length;var n;var s=[];var a;if(!i||r===0)return s;for(n=0;n<r;++n){a=this.landmarkItem(i[n]);if(a){s.push(a);this.landmarksByType[a.type]=n}}return s};e.prototype.landmarkItem=function(e){var t=Te(e,"a",true);if(!t){return}var i=t.getAttributeNS("http://www.idpf.org/2007/ops","type")||undefined;var r=t.getAttribute("href")||"";var n=t.textContent||"";return{href:r,label:n,type:i}};e.prototype.parseNcx=function(e){var t=me(e,"navPoint");var i=t.length;var r;var n={};var s=[];var a,o;if(!t||i===0)return s;for(r=0;r<i;++r){a=this.ncxItem(t[r]);n[a.id]=a;if(!a.parent){s.push(a)}else{o=n[a.parent];o.subitems.push(a)}}return s};e.prototype.ncxItem=function(e){var t=e.getAttribute("id")||false,i=ge(e,"content"),r=i.getAttribute("src"),n=ge(e,"navLabel"),s=n.textContent?n.textContent:"",a=[],o=e.parentNode,h;if(o&&(o.nodeName==="navPoint"||o.nodeName.split(":").slice(-1)[0]==="navPoint")){h=o.getAttribute("id")}return{id:t,href:r,label:s,subitems:a,parent:h}};e.prototype.load=function(e){var t=this;return e.map((function(e){e.label=e.title;e.subitems=e.children?t.load(e.children):[];return e}))};e.prototype.forEach=function(e){return this.toc.forEach(e)};return e}();var er={application:{ecmascript:["es","ecma"],javascript:"js",ogg:"ogx",pdf:"pdf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],"rdf+xml":"rdf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","opf","ncx"],zip:"zip","x-httpd-eruby":"rhtml","x-latex":"latex","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-object":"o","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","epub+zip":"epub","font-tdpfr":"pfr","inkml+xml":["ink","inkml"],json:"json","jsonml+json":"jsonml","mathml+xml":"mathml","metalink+xml":"metalink",mp4:"mp4s","omdoc+xml":"omdoc",oxps:"oxps","vnd.amazon.ebook":"azw",widget:"wgt","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-mobipocket-ebook":["prc","mobi"],"x-mspublisher":"pub","x-nzb":"nzb","x-tgif":"obj","xaml+xml":"xaml","xml-dtd":"dtd","xproc+xml":"xpl","xslt+xml":"xslt","internet-property-stream":"acx","x-compress":"z","x-compressed":"tgz","x-gzip":"gz"},audio:{flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"x-aiff":["aif","aiff","aifc"],"x-ms-wma":"wma","x-wav":"wav",adpcm:"adp",mp4:"mp4a",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"x-icon":"ico",bmp:"bmp",webp:"webp","x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod"},text:{"cache-manifest":["manifest","appcache"],css:"css",csv:"csv",html:["html","htm","shtml","stm"],mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx","tab-separated-values":"tsv","x-bibtex":"bib"},video:{mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"}};var tr=function(){var e,t,i,r,n={};for(e in er){if(er.hasOwnProperty(e)){for(t in er[e]){if(er[e].hasOwnProperty(t)){i=er[e][t];if(typeof i=="string"){n[i]=e+"/"+t}else{for(r=0;r<i.length;r++){n[i[r]]=e+"/"+t}}}}}}return n}();var ir="text/plain";function rr(e){return e&&tr[e.split(".").pop().toLowerCase()]||ir}var nr={lookup:rr};var sr=function(){function e(e,t){this.settings={replacements:t&&t.replacements||"base64",archive:t&&t.archive,resolver:t&&t.resolver,request:t&&t.request};this.process(e)}e.prototype.process=function(e){this.manifest=e;this.resources=Object.keys(e).map((function(t){return e[t]}));this.replacementUrls=[];this.html=[];this.assets=[];this.css=[];this.urls=[];this.cssUrls=[];this.split();this.splitUrls()};e.prototype.split=function(){this.html=this.resources.filter((function(e){if(e.type==="application/xhtml+xml"||e.type==="text/html"){return true}}));this.assets=this.resources.filter((function(e){if(e.type!=="application/xhtml+xml"&&e.type!=="text/html"){return true}}));this.css=this.resources.filter((function(e){if(e.type==="text/css"){return true}}))};e.prototype.splitUrls=function(){this.urls=this.assets.map(function(e){return e.href}.bind(this));this.cssUrls=this.css.map((function(e){return e.href}))};e.prototype.createUrl=function(e){var t=new je(e);var i=nr.lookup(t.filename);if(this.settings.archive){return this.settings.archive.createUrl(e,{base64:this.settings.replacements==="base64"})}else{if(this.settings.replacements==="base64"){return this.settings.request(e,"blob").then((function(e){return xe(e)})).then((function(e){return de(e,i)}))}else{return this.settings.request(e,"blob").then((function(e){return le(e,i)}))}}};e.prototype.replacements=function(){var e=this;if(this.settings.replacements==="none"){return new Promise(function(e){e(this.urls)}.bind(this))}var t=this.urls.map((function(t){var i=e.settings.resolver(t);return e.createUrl(i).catch((function(e){console.error(e);return null}))}));return Promise.all(t).then((function(t){e.replacementUrls=t.filter((function(e){return typeof e==="string"}));return t}))};e.prototype.replaceCss=function(e,t){var i=[];e=e||this.settings.archive;t=t||this.settings.resolver;this.cssUrls.forEach(function(r){var n=this.createCssFile(r,e,t).then(function(e){var t=this.urls.indexOf(r);if(t>-1){this.replacementUrls[t]=e}}.bind(this));i.push(n)}.bind(this));return Promise.all(i)};e.prototype.createCssFile=function(e){var t=this;var i;if(Pe.isAbsolute(e)){return new Promise((function(e){e()}))}var r=this.settings.resolver(e);var n;if(this.settings.archive){n=this.settings.archive.getText(r)}else{n=this.settings.request(r,"text")}var s=this.urls.map((function(e){var i=t.settings.resolver(e);var n=new Be(r).relative(i);return n}));if(!n){return new Promise((function(e){e()}))}return n.then((function(e){e=Xe(e,s,t.replacementUrls);if(t.settings.replacements==="base64"){i=de(e,"text/css")}else{i=le(e,"text/css")}return i}),(function(e){return new Promise((function(e){e()}))}))};e.prototype.relativeTo=function(e,t){t=t||this.settings.resolver;return this.urls.map(function(i){var r=t(i);var n=new Be(e).relative(r);return n}.bind(this))};e.prototype.get=function(e){var t=this.urls.indexOf(e);if(t===-1){return}if(this.replacementUrls.length){return new Promise(function(e,i){e(this.replacementUrls[t])}.bind(this))}else{return this.createUrl(e)}};e.prototype.substitute=function(e,t){var i;if(t){i=this.relativeTo(t)}else{i=this.urls}return Xe(e,i,this.replacementUrls)};e.prototype.destroy=function(){this.settings=undefined;this.manifest=undefined;this.resources=undefined;this.replacementUrls=undefined;this.html=undefined;this.assets=undefined;this.css=undefined;this.urls=undefined;this.cssUrls=undefined};return e}();var ar=function(){function e(e){this.pages=[];this.locations=[];this.epubcfi=new qe;this.firstPage=0;this.lastPage=0;this.totalPages=0;this.toc=undefined;this.ncx=undefined;if(e){this.pageList=this.parse(e)}if(this.pageList&&this.pageList.length){this.process(this.pageList)}}e.prototype.parse=function(e){var t=ge(e,"html");var i=ge(e,"ncx");if(t){return this.parseNav(e)}else if(i){return this.parseNcx(e)}};e.prototype.parseNav=function(e){var t=ke(e,"nav","page-list");var i=t?me(t,"li"):[];var r=i.length;var n;var s=[];var a;if(!i||r===0)return s;for(n=0;n<r;++n){a=this.item(i[n]);s.push(a)}return s};e.prototype.parseNcx=function(e){var t=[];var i=0;var r;var n;var s;var a=0;n=ge(e,"pageList");if(!n)return t;s=me(n,"pageTarget");a=s.length;if(!s||s.length===0){return t}for(i=0;i<a;++i){r=this.ncxItem(s[i]);t.push(r)}return t};e.prototype.ncxItem=function(e){var t=ge(e,"navLabel");var i=ge(t,"text");var r=i.textContent;var n=ge(e,"content");var s=n.getAttribute("src");var a=parseInt(r,10);return{href:s,page:a}};e.prototype.item=function(e){var t=ge(e,"a"),i=t.getAttribute("href")||"",r=t.textContent||"",n=parseInt(r),s=i.indexOf("epubcfi"),a,o,h;if(s!=-1){a=i.split("#");o=a[0];h=a.length>1?a[1]:false;return{cfi:h,href:i,packageUrl:o,page:n}}else{return{href:i,page:n}}};e.prototype.process=function(e){e.forEach((function(e){this.pages.push(e.page);if(e.cfi){this.locations.push(e.cfi)}}),this);this.firstPage=parseInt(this.pages[0]);this.lastPage=parseInt(this.pages[this.pages.length-1]);this.totalPages=this.lastPage-this.firstPage};e.prototype.pageFromCfi=function(e){var t=-1;if(this.locations.length===0){return-1}var i=te(e,this.locations,this.epubcfi.compare);if(i!=-1){t=this.pages[i]}else{i=ee(e,this.locations,this.epubcfi.compare);t=i-1>=0?this.pages[i-1]:this.pages[0];if(t!==undefined);else{t=-1}}return t};e.prototype.cfiFromPage=function(e){var t=-1;if(typeof e!="number"){e=parseInt(e)}var i=this.pages.indexOf(e);if(i!=-1){t=this.locations[i]}return t};e.prototype.pageFromPercentage=function(e){var t=Math.round(this.totalPages*e);return t};e.prototype.percentageFromPage=function(e){var t=(e-this.firstPage)/this.totalPages;return Math.round(t*1e3)/1e3};e.prototype.percentageFromCfi=function(e){var t=this.pageFromCfi(e);var i=this.percentageFromPage(t);return i};e.prototype.destroy=function(){this.pages=undefined;this.locations=undefined;this.epubcfi=undefined;this.pageList=undefined;this.toc=undefined;this.ncx=undefined};return e}();var or=function(){function e(e){this.settings=e;this.name=e.layout||"reflowable";this._spread=e.spread==="none"?false:true;this._minSpreadWidth=e.minSpreadWidth||800;this._evenSpreads=e.evenSpreads||false;if(e.flow==="scrolled"||e.flow==="scrolled-continuous"||e.flow==="scrolled-doc"){this._flow="scrolled"}else{this._flow="paginated"}this.width=0;this.height=0;this.spreadWidth=0;this.delta=0;this.columnWidth=0;this.gap=0;this.divisor=1;this.props={name:this.name,spread:this._spread,flow:this._flow,width:0,height:0,spreadWidth:0,delta:0,columnWidth:0,gap:0,divisor:1}}e.prototype.flow=function(e){if(typeof e!="undefined"){if(e==="scrolled"||e==="scrolled-continuous"||e==="scrolled-doc"){this._flow="scrolled"}else{this._flow="paginated"}this.update({flow:this._flow})}return this._flow};e.prototype.spread=function(e,t){if(e){this._spread=e==="none"?false:true;this.update({spread:this._spread})}if(t>=0){this._minSpreadWidth=t}return this._spread};e.prototype.calculate=function(e,t,i){var r=1;var n=i||0;var s=e;var a=t;var o=Math.floor(s/12);var h;var f;var u;var l;if(this._spread&&s>=this._minSpreadWidth){r=2}else{r=1}if(this.name==="reflowable"&&this._flow==="paginated"&&!(i>=0)){n=o%2===0?o:o-1}if(this.name==="pre-paginated"){n=0}if(r>1){h=s/r-n;u=h+n}else{h=s;u=s}if(this.name==="pre-paginated"&&r>1){s=h}f=h*r+n;l=s;this.width=s;this.height=a;this.spreadWidth=f;this.pageWidth=u;this.delta=l;this.columnWidth=h;this.gap=n;this.divisor=r;this.update({width:s,height:a,spreadWidth:f,pageWidth:u,delta:l,columnWidth:h,gap:n,divisor:r})};e.prototype.format=function(e){var t;if(this.name==="pre-paginated"){t=e.fit(this.columnWidth,this.height)}else if(this._flow==="paginated"){t=e.columns(this.width,this.height,this.columnWidth,this.gap)}else{t=e.size(this.width,null)}return t};e.prototype.count=function(e,t){var i,r;if(this.name==="pre-paginated"){i=1;r=1}else if(this._flow==="paginated"){t=t||this.delta;i=Math.ceil(e/t);r=i*this.divisor}else{t=t||this.height;i=Math.ceil(e/t);r=i}return{spreads:i,pages:r}};e.prototype.update=function(e){var t=this;Object.keys(e).forEach((function(i){if(t.props[i]===e[i]){delete e[i]}}));if(Object.keys(e).length>0){var i=J(this.props,e);this.emit(Ki.LAYOUT.UPDATED,i,e)}};return e}();M(or.prototype);var hr=function(){function e(e){this.rendition=e;this._themes={default:{rules:{},url:"",serialized:""}};this._overrides={};this._current="default";this._injected=[];this.rendition.hooks.content.register(this.inject.bind(this));this.rendition.hooks.content.register(this.overrides.bind(this))}e.prototype.register=function(){if(arguments.length===0){return}if(arguments.length===1&&typeof arguments[0]==="object"){return this.registerThemes(arguments[0])}if(arguments.length===1&&typeof arguments[0]==="string"){return this.default(arguments[0])}if(arguments.length===2&&typeof arguments[1]==="string"){return this.registerUrl(arguments[0],arguments[1])}if(arguments.length===2&&typeof arguments[1]==="object"){return this.registerRules(arguments[0],arguments[1])}};e.prototype.default=function(e){if(!e){return}if(typeof e==="string"){return this.registerUrl("default",e)}if(typeof e==="object"){return this.registerRules("default",e)}};e.prototype.registerThemes=function(e){for(var t in e){if(e.hasOwnProperty(t)){if(typeof e[t]==="string"){this.registerUrl(t,e[t])}else{this.registerRules(t,e[t])}}}};e.prototype.registerUrl=function(e,t){var i=new je(t);this._themes[e]={url:i.toString()};if(this._injected[e]){this.update(e)}};e.prototype.registerRules=function(e,t){this._themes[e]={rules:t};if(this._injected[e]){this.update(e)}};e.prototype.select=function(e){var t=this._current;var i;this._current=e;this.update(e);i=this.rendition.getContents();i.forEach((function(i){i.removeClass(t);i.addClass(e)}))};e.prototype.update=function(e){var t=this;var i=this.rendition.getContents();i.forEach((function(i){t.add(e,i)}))};e.prototype.inject=function(e){var t=[];var i=this._themes;var r;for(var n in i){if(i.hasOwnProperty(n)&&(n===this._current||n==="default")){r=i[n];if(r.rules&&Object.keys(r.rules).length>0||r.url&&t.indexOf(r.url)===-1){this.add(n,e)}this._injected.push(n)}}if(this._current!="default"){e.addClass(this._current)}};e.prototype.add=function(e,t){var i=this._themes[e];if(!i||!t){return}if(i.url){t.addStylesheet(i.url)}else if(i.serialized);else if(i.rules){t.addStylesheetRules(i.rules);i.injected=true}};e.prototype.override=function(e,t,i){var r=this;var n=this.rendition.getContents();this._overrides[e]={value:t,priority:i===true};n.forEach((function(t){t.css(e,r._overrides[e].value,r._overrides[e].priority)}))};e.prototype.removeOverride=function(e){var t=this.rendition.getContents();delete this._overrides[e];t.forEach((function(t){t.css(e)}))};e.prototype.overrides=function(e){var t=this._overrides;for(var i in t){if(t.hasOwnProperty(i)){e.css(i,t[i].value,t[i].priority)}}};e.prototype.fontSize=function(e){this.override("font-size",e)};e.prototype.font=function(e){this.override("font-family",e,true)};e.prototype.destroy=function(){this.rendition=undefined;this._themes=undefined;this._overrides=undefined;this._current=undefined;this._injected=undefined};return e}();var fr=function(){function e(e,t,i,r){this.layout=e;this.horizontal=i==="horizontal"?true:false;this.direction=t||"ltr";this._dev=r}e.prototype.section=function(e){var t=this.findRanges(e);var i=this.rangeListToCfiList(e.section.cfiBase,t);return i};e.prototype.page=function(e,t,i,r){var n=e&&e.document?e.document.body:false;var s;if(!n){return}s=this.rangePairToCfiPair(t,{start:this.findStart(n,i,r),end:this.findEnd(n,i,r)});if(this._dev===true){var a=e.document;var o=new qe(s.start).toRange(a);var h=new qe(s.end).toRange(a);var f=a.defaultView.getSelection();var u=a.createRange();f.removeAllRanges();u.setStart(o.startContainer,o.startOffset);u.setEnd(h.endContainer,h.endOffset);f.addRange(u)}return s};e.prototype.walk=function(e,t){if(e&&e.nodeType===Node.TEXT_NODE){return}var i={acceptNode:function(e){if(e.data.trim().length>0){return NodeFilter.FILTER_ACCEPT}else{return NodeFilter.FILTER_REJECT}}};var r=i.acceptNode;r.acceptNode=i.acceptNode;var n=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,r,false);var s;var a;while(s=n.nextNode()){a=t(s);if(a)break}return a};e.prototype.findRanges=function(e){var t=[];var i=e.contents.scrollWidth();var r=Math.ceil(i/this.layout.spreadWidth);var n=r*this.layout.divisor;var s=this.layout.columnWidth;var a=this.layout.gap;var o,h;for(var f=0;f<n.pages;f++){o=(s+a)*f;h=s*(f+1)+a*f;t.push({start:this.findStart(e.document.body,o,h),end:this.findEnd(e.document.body,o,h)})}return t};e.prototype.findStart=function(e,t,i){var r=this;var n=[e];var s;var a;var o=e;while(n.length){s=n.shift();a=this.walk(s,(function(e){var s,a,h,f;var u;u=ne(e);if(r.horizontal&&r.direction==="ltr"){s=r.horizontal?u.left:u.top;a=r.horizontal?u.right:u.bottom;if(s>=t&&s<=i){return e}else if(a>t){return e}else{o=e;n.push(e)}}else if(r.horizontal&&r.direction==="rtl"){s=u.left;a=u.right;if(a<=i&&a>=t){return e}else if(s<i){return e}else{o=e;n.push(e)}}else{h=u.top;f=u.bottom;if(h>=t&&h<=i){return e}else if(f>t){return e}else{o=e;n.push(e)}}}));if(a){return this.findTextStartRange(a,t,i)}}return this.findTextStartRange(o,t,i)};e.prototype.findEnd=function(e,t,i){var r=this;var n=[e];var s;var a=e;var o;while(n.length){s=n.shift();o=this.walk(s,(function(e){var s,o,h,f;var u;u=ne(e);if(r.horizontal&&r.direction==="ltr"){s=Math.round(u.left);o=Math.round(u.right);if(s>i&&a){return a}else if(o>i){return e}else{a=e;n.push(e)}}else if(r.horizontal&&r.direction==="rtl"){s=Math.round(r.horizontal?u.left:u.top);o=Math.round(r.horizontal?u.right:u.bottom);if(o<t&&a){return a}else if(s<t){return e}else{a=e;n.push(e)}}else{h=Math.round(u.top);f=Math.round(u.bottom);if(h>i&&a){return a}else if(f>i){return e}else{a=e;n.push(e)}}}));if(o){return this.findTextEndRange(o,t,i)}}return this.findTextEndRange(a,t,i)};e.prototype.findTextStartRange=function(e,t,i){var r=this.splitTextNodeIntoRanges(e);var n;var s;var a,o,h;for(var f=0;f<r.length;f++){n=r[f];s=n.getBoundingClientRect();if(this.horizontal&&this.direction==="ltr"){a=s.left;if(a>=t){return n}}else if(this.horizontal&&this.direction==="rtl"){h=s.right;if(h<=i){return n}}else{o=s.top;if(o>=t){return n}}}return r[0]};e.prototype.findTextEndRange=function(e,t,i){var r=this.splitTextNodeIntoRanges(e);var n;var s;var a;var o,h,f,u;for(var l=0;l<r.length;l++){s=r[l];a=s.getBoundingClientRect();if(this.horizontal&&this.direction==="ltr"){o=a.left;h=a.right;if(o>i&&n){return n}else if(h>i){return s}}else if(this.horizontal&&this.direction==="rtl"){o=a.left;h=a.right;if(h<t&&n){return n}else if(o<t){return s}}else{f=a.top;u=a.bottom;if(f>i&&n){return n}else if(u>i){return s}}n=s}return r[r.length-1]};e.prototype.splitTextNodeIntoRanges=function(e,t){var i=[];var r=e.textContent||"";var n=r.trim();var s;var a=e.ownerDocument;var o=t||" ";var h=n.indexOf(o);if(h===-1||e.nodeType!=Node.TEXT_NODE){s=a.createRange();s.selectNodeContents(e);return[s]}s=a.createRange();s.setStart(e,0);s.setEnd(e,h);i.push(s);s=false;while(h!=-1){h=n.indexOf(o,h+1);if(h>0){if(s){s.setEnd(e,h);i.push(s)}s=a.createRange();s.setStart(e,h+1)}}if(s){s.setEnd(e,n.length);i.push(s)}return i};e.prototype.rangePairToCfiPair=function(e,t){var i=t.start;var r=t.end;i.collapse(true);r.collapse(false);var n=new qe(i,e).toString();var s=new qe(r,e).toString();return{start:n,end:s}};e.prototype.rangeListToCfiList=function(e,t){var i=[];var r;for(var n=0;n<t.length;n++){r=this.rangePairToCfiPair(e,t[n]);i.push(r)}return i};e.prototype.axis=function(e){if(e){this.horizontal=e==="horizontal"?true:false}return this.horizontal};return e}();var ur=typeof navigator!=="undefined";var lr=ur&&/Chrome/.test(navigator.userAgent);var cr=ur&&!lr&&/AppleWebKit/.test(navigator.userAgent);var dr=1;var pr=function(){function e(e,t,i,r){this.epubcfi=new qe;this.document=e;this.documentElement=this.document.documentElement;this.content=t||this.document.body;this.window=this.document.defaultView;this._size={width:0,height:0};this.sectionIndex=r||0;this.cfiBase=i||"";this.epubReadingSystem("epub.js",Vi);this.listeners()}Object.defineProperty(e,"listenedEvents",{get:function(){return Xi},enumerable:true,configurable:true});e.prototype.width=function(e){var t=this.content;if(e&&X(e)){e=e+"px"}if(e){t.style.width=e}return this.window.getComputedStyle(t)["width"]};e.prototype.height=function(e){var t=this.content;if(e&&X(e)){e=e+"px"}if(e){t.style.height=e}return this.window.getComputedStyle(t)["height"]};e.prototype.contentWidth=function(e){var t=this.content||this.document.body;if(e&&X(e)){e=e+"px"}if(e){t.style.width=e}return this.window.getComputedStyle(t)["width"]};e.prototype.contentHeight=function(e){var t=this.content||this.document.body;if(e&&X(e)){e=e+"px"}if(e){t.style.height=e}return this.window.getComputedStyle(t)["height"]};e.prototype.textWidth=function(){var e;var t;var i=this.document.createRange();var r=this.content||this.document.body;var n=re(r);i.selectNodeContents(r);e=i.getBoundingClientRect();t=e.width;if(n&&n.width){t+=n.width}return Math.round(t)};e.prototype.textHeight=function(){var e;var t;var i=this.document.createRange();var r=this.content||this.document.body;var n=re(r);i.selectNodeContents(r);e=i.getBoundingClientRect();t=e.height;if(t&&n.height){t+=n.height}if(t&&e.top){t+=e.top}return Math.round(t)};e.prototype.scrollWidth=function(){var e=this.documentElement.scrollWidth;return e};e.prototype.scrollHeight=function(){var e=this.documentElement.scrollHeight;return e};e.prototype.overflow=function(e){if(e){this.documentElement.style.overflow=e}return this.window.getComputedStyle(this.documentElement)["overflow"]};e.prototype.overflowX=function(e){if(e){this.documentElement.style.overflowX=e}return this.window.getComputedStyle(this.documentElement)["overflowX"]};e.prototype.overflowY=function(e){if(e){this.documentElement.style.overflowY=e}return this.window.getComputedStyle(this.documentElement)["overflowY"]};e.prototype.css=function(e,t,i){var r=this.content||this.document.body;if(t){r.style.setProperty(e,t,i?"important":"")}else{r.style.removeProperty(e)}return this.window.getComputedStyle(r)[e]};e.prototype.viewport=function(e){var t=this.document.querySelector("meta[name='viewport']");var i={width:undefined,height:undefined,scale:undefined,minimum:undefined,maximum:undefined,scalable:undefined};var r=[];var n={};if(t&&t.hasAttribute("content")){var s=t.getAttribute("content");var a=s.match(/width\s*=\s*([^,]*)/);var o=s.match(/height\s*=\s*([^,]*)/);var h=s.match(/initial-scale\s*=\s*([^,]*)/);var f=s.match(/minimum-scale\s*=\s*([^,]*)/);var u=s.match(/maximum-scale\s*=\s*([^,]*)/);var l=s.match(/user-scalable\s*=\s*([^,]*)/);if(a&&a.length&&typeof a[1]!=="undefined"){i.width=a[1]}if(o&&o.length&&typeof o[1]!=="undefined"){i.height=o[1]}if(h&&h.length&&typeof h[1]!=="undefined"){i.scale=h[1]}if(f&&f.length&&typeof f[1]!=="undefined"){i.minimum=f[1]}if(u&&u.length&&typeof u[1]!=="undefined"){i.maximum=u[1]}if(l&&l.length&&typeof l[1]!=="undefined"){i.scalable=l[1]}}n=$(e||{},i);if(e){if(n.width){r.push("width="+n.width)}if(n.height){r.push("height="+n.height)}if(n.scale){r.push("initial-scale="+n.scale)}if(n.scalable==="no"){r.push("minimum-scale="+n.scale);r.push("maximum-scale="+n.scale);r.push("user-scalable="+n.scalable)}else{if(n.scalable){r.push("user-scalable="+n.scalable)}if(n.minimum){r.push("minimum-scale="+n.minimum)}if(n.maximum){r.push("minimum-scale="+n.maximum)}}if(!t){t=this.document.createElement("meta");t.setAttribute("name","viewport");this.document.querySelector("head").appendChild(t)}t.setAttribute("content",r.join(", "));this.window.scrollTo(0,0)}return n};e.prototype.expand=function(){this.emit(Ki.CONTENTS.EXPAND)};e.prototype.listeners=function(){this.imageLoadListeners();this.mediaQueryListeners();this.addEventListeners();this.addSelectionListeners();this.resizeListeners();this.linksHandler()};e.prototype.removeListeners=function(){this.removeEventListeners();this.removeSelectionListeners();clearTimeout(this.expanding)};e.prototype.resizeCheck=function(){var e=this.textWidth();var t=this.textHeight();if(e!=this._size.width||t!=this._size.height){this._size={width:e,height:t};this.onResize&&this.onResize(this._size);this.emit(Ki.CONTENTS.RESIZE,this._size)}};e.prototype.resizeListeners=function(){clearTimeout(this.expanding);requestAnimationFrame(this.resizeCheck.bind(this))};e.prototype.transitionListeners=function(){var e=this.content;e.style["transitionProperty"]="font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height";e.style["transitionDuration"]="0.001ms";e.style["transitionTimingFunction"]="linear";e.style["transitionDelay"]="0";this._resizeCheck=this.resizeCheck.bind(this);this.document.addEventListener("transitionend",this._resizeCheck)};e.prototype.mediaQueryListeners=function(){var e=this.document.styleSheets;var t=function(e){if(e.matches&&!this._expanding){setTimeout(this.expand.bind(this),1)}}.bind(this);for(var i=0;i<e.length;i+=1){var r;try{r=e[i].cssRules}catch(Ng){return}if(!r)return;for(var n=0;n<r.length;n+=1){if(r[n].media){var s=this.window.matchMedia(r[n].media.mediaText);s.addListener(t)}}}};e.prototype.resizeObservers=function(){var e=this;this.observer=new MutationObserver((function(t){e.resizeCheck()}));var t={attributes:true,childList:true,characterData:true,subtree:true};this.observer.observe(this.document,t)};e.prototype.imageLoadListeners=function(){var e=this.document.querySelectorAll("img");var t;for(var i=0;i<e.length;i++){t=e[i];if(typeof t.naturalWidth!=="undefined"&&t.naturalWidth===0){t.onload=this.expand.bind(this)}}};e.prototype.fontLoadListeners=function(){if(!this.document||!this.document.fonts){return}this.document.fonts.ready.then(function(){this.resizeCheck()}.bind(this))};e.prototype.root=function(){if(!this.document)return null;return this.document.documentElement};e.prototype.locationOf=function(e,t){var i;var r={left:0,top:0};if(!this.document)return r;if(this.epubcfi.isCfiString(e)){var n=new qe(e).toRange(this.document,t);if(n){try{if(!n.endContainer||n.startContainer==n.endContainer&&n.startOffset==n.endOffset){var s=n.startContainer.textContent.indexOf(" ",n.startOffset);if(s==-1){s=n.startContainer.textContent.length}n.setEnd(n.startContainer,s)}}catch(Ng){console.error("setting end offset to start container length failed",Ng)}if(n.startContainer.nodeType===Node.ELEMENT_NODE){i=n.startContainer.getBoundingClientRect();r.left=i.left;r.top=i.top}else{if(cr){var a=n.startContainer;var o=new Range;try{if(a.nodeType===dr){i=a.getBoundingClientRect()}else if(n.startOffset+2<a.length){o.setStart(a,n.startOffset);o.setEnd(a,n.startOffset+2);i=o.getBoundingClientRect()}else if(n.startOffset-2>0){o.setStart(a,n.startOffset-2);o.setEnd(a,n.startOffset);i=o.getBoundingClientRect()}else{i=a.parentNode.getBoundingClientRect()}}catch(Ng){console.error(Ng,Ng.stack)}}else{i=n.getBoundingClientRect()}}}}else if(typeof e==="string"&&e.indexOf("#")>-1){var h=e.substring(e.indexOf("#")+1);var f=this.document.getElementById(h);if(f){if(cr){var o=new Range;o.selectNode(f);i=o.getBoundingClientRect()}else{i=f.getBoundingClientRect()}}}if(i){r.left=i.left;r.top=i.top}return r};e.prototype.addStylesheet=function(e){return new Promise(function(t,i){var r;var n=false;if(!this.document){t(false);return}r=this.document.querySelector("link[href='"+e+"']");if(r){t(true);return}r=this.document.createElement("link");r.type="text/css";r.rel="stylesheet";r.href=e;r.onload=r.onreadystatechange=function(){if(!n&&(!this.readyState||this.readyState=="complete")){n=true;setTimeout((function(){t(true)}),1)}};this.document.head.appendChild(r)}.bind(this))};e.prototype.addStylesheetRules=function(e){var t;var i;var r="epubjs-inserted-css";if(!this.document||!e||e.length===0)return;t=this.document.getElementById("#"+r);if(!t){t=this.document.createElement("style");t.id=r}this.document.head.appendChild(t);i=t.sheet;if(Object.prototype.toString.call(e)==="[object Array]"){for(var n=0,s=e.length;n<s;n++){var a=1,o=e[n],h=e[n][0],f="";if(Object.prototype.toString.call(o[1][0])==="[object Array]"){o=o[1];a=0}for(var u=o.length;a<u;a++){var l=o[a];f+=l[0]+":"+l[1]+(l[2]?" !important":"")+";\n"}i.insertRule(h+"{"+f+"}",i.cssRules.length)}}else{var c=Object.keys(e);c.forEach((function(t){var r=e[t];if(Array.isArray(r)){r.forEach((function(e){var r=Object.keys(e);var n=r.map((function(t){return t+":"+e[t]})).join(";");i.insertRule(t+"{"+n+"}",i.cssRules.length)}))}else{var n=Object.keys(r);var s=n.map((function(e){return e+":"+r[e]})).join(";");i.insertRule(t+"{"+s+"}",i.cssRules.length)}}))}};e.prototype.addScript=function(e){return new Promise(function(t,i){var r;var n=false;if(!this.document){t(false);return}r=this.document.createElement("script");r.type="text/javascript";r.async=true;r.src=e;r.onload=r.onreadystatechange=function(){if(!n&&(!this.readyState||this.readyState=="complete")){n=true;setTimeout((function(){t(true)}),1)}};this.document.head.appendChild(r)}.bind(this))};e.prototype.addClass=function(e){var t;if(!this.document)return;t=this.content||this.document.body;if(t){t.classList.add(e)}};e.prototype.removeClass=function(e){var t;if(!this.document)return;t=this.content||this.document.body;if(t){t.classList.remove(e)}};e.prototype.addEventListeners=function(){if(!this.document){return}this._triggerEvent=this.triggerEvent.bind(this);Xi.forEach((function(e){this.document.addEventListener(e,this._triggerEvent,{passive:true})}),this)};e.prototype.removeEventListeners=function(){if(!this.document){return}Xi.forEach((function(e){this.document.removeEventListener(e,this._triggerEvent,{passive:true})}),this);this._triggerEvent=undefined};e.prototype.triggerEvent=function(e){this.emit(e.type,e)};e.prototype.addSelectionListeners=function(){if(!this.document){return}this._onSelectionChange=this.onSelectionChange.bind(this);this.document.addEventListener("selectionchange",this._onSelectionChange,{passive:true})};e.prototype.removeSelectionListeners=function(){if(!this.document){return}this.document.removeEventListener("selectionchange",this._onSelectionChange,{passive:true});this._onSelectionChange=undefined};e.prototype.onSelectionChange=function(e){if(this.selectionEndTimeout){clearTimeout(this.selectionEndTimeout)}this.selectionEndTimeout=setTimeout(function(){var e=this.window.getSelection();this.triggerSelectedEvent(e)}.bind(this),250)};e.prototype.triggerSelectedEvent=function(e){var t,i;if(e&&e.rangeCount>0){t=e.getRangeAt(0);if(!t.collapsed){i=new qe(t,this.cfiBase).toString();this.emit(Ki.CONTENTS.SELECTED,i);this.emit(Ki.CONTENTS.SELECTED_RANGE,t)}}};e.prototype.range=function(e,t){var i=new qe(e);return i.toRange(this.document,t)};e.prototype.cfiFromRange=function(e,t){return new qe(e,this.cfiBase,t).toString()};e.prototype.cfiFromNode=function(e,t){return new qe(e,this.cfiBase,t).toString()};e.prototype.map=function(e){var t=new fr(e);return t.section()};e.prototype.size=function(e,t){var i={scale:1,scalable:"no"};this.layoutStyle("scrolling");if(e>=0){this.width(e);i.width=e;this.css("padding","0 "+e/12+"px")}if(t>=0){this.height(t);i.height=t}this.css("margin","0");this.css("box-sizing","border-box");this.viewport(i)};e.prototype.columns=function(e,t,i,r){var n=G("column-axis");var s=G("column-gap");var a=G("column-width");var o=G("column-fill");var h=this.writingMode();var f=h.indexOf("vertical")===0?"vertical":"horizontal";this.layoutStyle("paginated");if(this.content.dir==="rtl"){this.direction("rtl")}this.width(e);this.height(t);this.viewport({width:e,height:t,scale:1,scalable:"no"});this.css("overflow-y","hidden");this.css("margin","0",true);if(f==="vertical"){this.css("padding-top",r/2+"px",true);this.css("padding-bottom",r/2+"px",true);this.css("padding-left","20px");this.css("padding-right","20px")}else{this.css("padding-top","20px");this.css("padding-bottom","20px");this.css("padding-left",r/2+"px",true);this.css("padding-right",r/2+"px",true)}this.css("box-sizing","border-box");this.css("max-width","inherit");this.css(n,"horizontal");this.css(o,"auto");this.css(s,r+"px");this.css(a,i+"px");this.css("-webkit-line-box-contain","block glyphs replaced")};e.prototype.scaler=function(e,t,i){var r="scale("+e+")";var n="";this.css("transform-origin","top left");if(t>=0||i>=0){n=" translate("+(t||0)+"px, "+(i||0)+"px )"}this.css("transform",r+n)};e.prototype.fit=function(e,t){var i=this.viewport();var r=parseInt(i.width);var n=parseInt(i.height);var s=e/r;var a=t/n;var o=s<a?s:a;this.layoutStyle("paginated");this.width(r);this.height(n);this.overflow("hidden");this.scaler(o,0,0);this.css("background-size",r*o+"px "+n*o+"px");this.css("background-color","transparent")};e.prototype.direction=function(e){if(this.documentElement){this.documentElement.style["direction"]=e}};e.prototype.mapPage=function(e,t,i,r,n){var s=new fr(t,n);return s.page(this,e,i,r)};e.prototype.linksHandler=function(){var e=this;Ve(this.content,(function(t){e.emit(Ki.CONTENTS.LINK_CLICKED,t)}))};e.prototype.writingMode=function(e){var t=G("writing-mode");if(e&&this.documentElement){this.documentElement.style[t]=e}return this.window.getComputedStyle(this.documentElement)[t]||""};e.prototype.layoutStyle=function(e){if(e){this._layoutStyle=e;navigator.epubReadingSystem.layoutStyle=this._layoutStyle}return this._layoutStyle||"paginated"};e.prototype.epubReadingSystem=function(e,t){navigator.epubReadingSystem={name:e,version:t,layoutStyle:this.layoutStyle(),hasFeature:function(e){switch(e){case"dom-manipulation":return true;case"layout-changes":return true;case"touch-events":return true;case"mouse-events":return true;case"keyboard-events":return true;case"spine-scripting":return false;default:return false}}};return navigator.epubReadingSystem};e.prototype.destroy=function(){if(this.observer){this.observer.disconnect()}this.document.removeEventListener("transitionend",this._resizeCheck);this.removeListeners()};return e}();M(pr.prototype);var vr=function(){function e(e){this.rendition=e;this.highlights=[];this.underlines=[];this.marks=[];this._annotations={};this._annotationsBySectionIndex={};this.rendition.hooks.render.register(this.inject.bind(this));this.rendition.hooks.unloaded.register(this.clear.bind(this))}e.prototype.add=function(e,t,i,r,n,s){var a=encodeURI(t+e);var o=new qe(t);var h=o.spinePos;var f=new gr({type:e,cfiRange:t,data:i,sectionIndex:h,cb:r,className:n,styles:s});this._annotations[a]=f;if(h in this._annotationsBySectionIndex){this._annotationsBySectionIndex[h].push(a)}else{this._annotationsBySectionIndex[h]=[a]}var u=this.rendition.views();u.forEach((function(e){if(f.sectionIndex===e.index){f.attach(e)}}));return f};e.prototype.remove=function(e,t){var i=this;var r=encodeURI(e+t);if(r in this._annotations){var n=this._annotations[r];if(t&&n.type!==t){return}var s=this.rendition.views();s.forEach((function(e){i._removeFromAnnotationBySectionIndex(n.sectionIndex,r);if(n.sectionIndex===e.index){n.detach(e)}}));delete this._annotations[r]}};e.prototype._removeFromAnnotationBySectionIndex=function(e,t){this._annotationsBySectionIndex[e]=this._annotationsAt(e).filter((function(e){return e!==t}))};e.prototype._annotationsAt=function(e){return this._annotationsBySectionIndex[e]};e.prototype.highlight=function(e,t,i,r,n){return this.add("highlight",e,t,i,r,n)};e.prototype.underline=function(e,t,i,r,n){return this.add("underline",e,t,i,r,n)};e.prototype.mark=function(e,t,i){return this.add("mark",e,t,i)};e.prototype.each=function(){return this._annotations.forEach.apply(this._annotations,arguments)};e.prototype.inject=function(e){var t=this;var i=e.index;if(i in this._annotationsBySectionIndex){var r=this._annotationsBySectionIndex[i];r.forEach((function(i){var r=t._annotations[i];r.attach(e)}))}};e.prototype.clear=function(e){var t=this;var i=e.index;if(i in this._annotationsBySectionIndex){var r=this._annotationsBySectionIndex[i];r.forEach((function(i){var r=t._annotations[i];r.detach(e)}))}};e.prototype.show=function(){};e.prototype.hide=function(){};return e}();var gr=function(){function e(e){var t=e.type,i=e.cfiRange,r=e.data,n=e.sectionIndex,s=e.cb,a=e.className,o=e.styles;this.type=t;this.cfiRange=i;this.data=r;this.sectionIndex=n;this.mark=undefined;this.cb=s;this.className=a;this.styles=o}e.prototype.update=function(e){this.data=e};e.prototype.attach=function(e){var t=this,i=t.cfiRange,r=t.data,n=t.type,s=t.mark,a=t.cb,o=t.className,h=t.styles;var f;if(n==="highlight"){f=e.highlight(i,r,a,o,h)}else if(n==="underline"){f=e.underline(i,r,a,o,h)}else if(n==="mark"){f=e.mark(i,r,a)}this.mark=f;this.emit(Ki.ANNOTATION.ATTACH,f);return f};e.prototype.detach=function(e){var t=this,i=t.cfiRange,r=t.type;var n;if(e){if(r==="highlight"){n=e.unhighlight(i)}else if(r==="underline"){n=e.ununderline(i)}else if(r==="mark"){n=e.unmark(i)}}this.mark=undefined;this.emit(Ki.ANNOTATION.DETACH,n);return n};e.prototype.text=function(){};return e}();M(gr.prototype);var mr=o((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.createElement=i;function i(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}t.default={createElement:i}}));a(mr);var yr=o((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.proxyMouse=i;t.clone=r;t.default={proxyMouse:i};function i(e,t){function i(i){for(var s=t.length-1;s>=0;s--){var a=t[s];var o=i.clientX;var h=i.clientY;if(i.touches&&i.touches.length){o=i.touches[0].clientX;h=i.touches[0].clientY}if(!n(a,e,o,h)){continue}a.dispatchEvent(r(i));break}}if(e.nodeName==="iframe"||e.nodeName==="IFRAME"){try{this.target=e.contentDocument}catch(Ql){this.target=e}}else{this.target=e}var s=["mouseup","mousedown","click","touchstart"];for(var a=0;a<s.length;a++){var o=s[a];this.target.addEventListener(o,(function(e){return i(e)}),false)}}function r(e){var t=Object.assign({},e,{bubbles:false});try{return new MouseEvent(e.type,t)}catch(Ql){var i=document.createEvent("MouseEvents");i.initMouseEvent(e.type,false,t.cancelable,t.view,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget);return i}}function n(e,t,i,r){var n=t.getBoundingClientRect();function s(e,t,i){var r=e.top-n.top;var s=e.left-n.left;var a=r+e.height;var o=s+e.width;return r<=i&&s<=t&&a>i&&o>t}var a=e.getBoundingClientRect();if(!s(a,i,r)){return false}var o=e.getClientRects();for(var h=0,f=o.length;h<f;h++){if(s(o[h],i,r)){return true}}return false}}));a(yr);var wr=o((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.Underline=t.Highlight=t.Mark=t.Pane=undefined;var i=function e(t,i,r){if(t===null)t=Function.prototype;var n=Object.getOwnPropertyDescriptor(t,i);if(n===undefined){var s=Object.getPrototypeOf(t);if(s===null){return undefined}else{return e(s,i,r)}}else if("value"in n){return n.value}else{var a=n.get;if(a===undefined){return undefined}return a.call(r)}};var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}}();var n=a(mr);var s=a(yr);function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var u=t.Pane=function(){function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:document.body;f(this,e);this.target=t;this.element=n.default.createElement("svg");this.marks=[];this.element.style.position="absolute";this.element.setAttribute("pointer-events","none");s.default.proxyMouse(this.target,this.marks);this.container=i;this.container.appendChild(this.element);this.render()}r(e,[{key:"addMark",value:function e(t){var i=n.default.createElement("g");this.element.appendChild(i);t.bind(i,this.container);this.marks.push(t);t.render();return t}},{key:"removeMark",value:function e(t){var i=this.marks.indexOf(t);if(i===-1){return}var r=t.unbind();this.element.removeChild(r);this.marks.splice(i,1)}},{key:"render",value:function e(){v(this.element,p(this.target,this.container));var t=true;var i=false;var r=undefined;try{for(var n=this.marks[Symbol.iterator](),s;!(t=(s=n.next()).done);t=true){var a=s.value;a.render()}}catch(Ql){i=true;r=Ql}finally{try{if(!t&&n.return){n.return()}}finally{if(i){throw r}}}}}]);return e}();var l=t.Mark=function(){function e(){f(this,e);this.element=null}r(e,[{key:"bind",value:function e(t,i){this.element=t;this.container=i}},{key:"unbind",value:function e(){var t=this.element;this.element=null;return t}},{key:"render",value:function e(){}},{key:"dispatchEvent",value:function e(t){if(!this.element)return;this.element.dispatchEvent(t)}},{key:"getBoundingClientRect",value:function e(){return this.element.getBoundingClientRect()}},{key:"getClientRects",value:function e(){var t=[];var i=this.element.firstChild;while(i){t.push(i.getBoundingClientRect());i=i.nextSibling}return t}},{key:"filteredRanges",value:function e(){var t=Array.from(this.range.getClientRects());return t.filter((function(e){for(var i=0;i<t.length;i++){if(t[i]===e){return true}var r=g(t[i],e);if(r){return false}}return true}))}}]);return e}();var c=t.Highlight=function(e){h(t,e);function t(e,i,r,n){f(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));s.range=e;s.className=i;s.data=r||{};s.attributes=n||{};return s}r(t,[{key:"bind",value:function e(r,n){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"bind",this).call(this,r,n);for(var s in this.data){if(this.data.hasOwnProperty(s)){this.element.dataset[s]=this.data[s]}}for(var s in this.attributes){if(this.attributes.hasOwnProperty(s)){this.element.setAttribute(s,this.attributes[s])}}if(this.className){this.element.classList.add(this.className)}}},{key:"render",value:function e(){while(this.element.firstChild){this.element.removeChild(this.element.firstChild)}var t=this.element.ownerDocument.createDocumentFragment();var i=this.filteredRanges();var r=this.element.getBoundingClientRect();var s=this.container.getBoundingClientRect();for(var a=0,o=i.length;a<o;a++){var h=i[a];var f=n.default.createElement("rect");f.setAttribute("x",h.left-r.left+s.left);f.setAttribute("y",h.top-r.top+s.top);f.setAttribute("height",h.height);f.setAttribute("width",h.width);t.appendChild(f)}this.element.appendChild(t)}}]);return t}(l);var d=t.Underline=function(e){h(t,e);function t(e,i,r,n){f(this,t);return o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,r,n))}r(t,[{key:"render",value:function e(){while(this.element.firstChild){this.element.removeChild(this.element.firstChild)}var t=this.element.ownerDocument.createDocumentFragment();var i=this.filteredRanges();var r=this.element.getBoundingClientRect();var s=this.container.getBoundingClientRect();for(var a=0,o=i.length;a<o;a++){var h=i[a];var f=n.default.createElement("rect");f.setAttribute("x",h.left-r.left+s.left);f.setAttribute("y",h.top-r.top+s.top);f.setAttribute("height",h.height);f.setAttribute("width",h.width);f.setAttribute("fill","none");var u=n.default.createElement("line");u.setAttribute("x1",h.left-r.left+s.left);u.setAttribute("x2",h.left-r.left+s.left+h.width);u.setAttribute("y1",h.top-r.top+s.top+h.height-1);u.setAttribute("y2",h.top-r.top+s.top+h.height-1);u.setAttribute("stroke-width",1);u.setAttribute("stroke","black");u.setAttribute("stroke-linecap","square");t.appendChild(f);t.appendChild(u)}this.element.appendChild(t)}}]);return t}(c);function p(e,t){var i=t.getBoundingClientRect();var r=e.getBoundingClientRect();return{top:r.top-i.top,left:r.left-i.left,height:e.scrollHeight,width:e.scrollWidth}}function v(e,t){e.style.setProperty("top",t.top+"px","important");e.style.setProperty("left",t.left+"px","important");e.style.setProperty("height",t.height+"px","important");e.style.setProperty("width",t.width+"px","important")}function g(e,t){return t.right<=e.right&&t.left>=e.left&&t.top>=e.top&&t.bottom<=e.bottom}}));a(wr);var br=wr.Underline;var _r=wr.Highlight;var xr=wr.Pane;var Er=function(){function e(e,t){this.settings=J({ignoreClass:"",axis:t.layout&&t.layout.props.flow==="scrolled"?"vertical":"horizontal",direction:undefined,width:0,height:0,layout:undefined,globalLayoutProperties:{},method:undefined},t||{});this.id="epubjs-view-"+Y();this.section=e;this.index=e.index;this.element=this.container(this.settings.axis);this.added=false;this.displayed=false;this.rendered=false;this.fixedWidth=0;this.fixedHeight=0;this.epubcfi=new qe;this.layout=this.settings.layout;this.pane=undefined;this.highlights={};this.underlines={};this.marks={}}e.prototype.container=function(e){var t=document.createElement("div");t.classList.add("epub-view");t.style.height="0px";t.style.width="0px";t.style.overflow="hidden";t.style.position="relative";t.style.display="block";if(e&&e=="horizontal"){t.style.flex="none"}else{t.style.flex="initial"}return t};e.prototype.create=function(){if(this.iframe){return this.iframe}if(!this.element){this.element=this.createContainer()}this.iframe=document.createElement("iframe");this.iframe.id=this.id;this.iframe.scrolling="no";this.iframe.style.overflow="hidden";this.iframe.seamless="seamless";this.iframe.style.border="none";this.iframe.setAttribute("enable-annotation","true");this.resizing=true;this.element.style.visibility="hidden";this.iframe.style.visibility="hidden";this.iframe.style.width="0";this.iframe.style.height="0";this._width=0;this._height=0;this.element.setAttribute("ref",this.index);this.added=true;this.elementBounds=ie(this.element);if("srcdoc"in this.iframe){this.supportsSrcdoc=true}else{this.supportsSrcdoc=false}if(!this.settings.method){this.settings.method=this.supportsSrcdoc?"srcdoc":"write"}return this.iframe};e.prototype.render=function(e,t){this.create();this.size();if(!this.sectionRender){this.sectionRender=this.section.render(e)}return this.sectionRender.then(function(e){return this.load(e)}.bind(this)).then(function(){var e=this;this.layout.format(this.contents);var t=this.contents.writingMode();var i=t.indexOf("vertical")===0?"vertical":"horizontal";this.setAxis(i);this.emit(Ki.VIEWS.AXIS,i);this.addListeners();return new Promise((function(t,i){e.expand();t()}))}.bind(this),function(e){this.emit(Ki.VIEWS.LOAD_ERROR,e);return new Promise((function(t,i){i(e)}))}.bind(this)).then(function(){this.emit(Ki.VIEWS.RENDERED,this.section)}.bind(this))};e.prototype.reset=function(){if(this.iframe){this.iframe.style.width="0";this.iframe.style.height="0";this._width=0;this._height=0;this._textWidth=undefined;this._contentWidth=undefined;this._textHeight=undefined;this._contentHeight=undefined}this._needsReframe=true};e.prototype.size=function(e,t){var i=e||this.settings.width;var r=t||this.settings.height;if(this.layout.name==="pre-paginated"){this.lock("both",i,r)}else if(this.settings.axis==="horizontal"){this.lock("height",i,r)}else{this.lock("width",i,r)}this.settings.width=i;this.settings.height=r};e.prototype.lock=function(e,t,i){var r=re(this.element);var n;if(this.iframe){n=re(this.iframe)}else{n={width:0,height:0}}if(e=="width"&&X(t)){this.lockedWidth=t-r.width-n.width}if(e=="height"&&X(i)){this.lockedHeight=i-r.height-n.height}if(e==="both"&&X(t)&&X(i)){this.lockedWidth=t-r.width-n.width;this.lockedHeight=i-r.height-n.height}if(this.displayed&&this.iframe){this.expand()}};e.prototype.expand=function(e){var t=this.lockedWidth;var i=this.lockedHeight;var r;if(!this.iframe||this._expanding)return;this._expanding=true;if(this.layout.name==="pre-paginated"){t=this.layout.columnWidth;i=this.layout.height}else if(this.settings.axis==="horizontal"){t=this.contents.textWidth();if(t%this.layout.pageWidth>0){t=Math.ceil(t/this.layout.pageWidth)*this.layout.pageWidth}if(this.settings.forceEvenPages){r=t/this.layout.pageWidth;if(this.layout.divisor>1&&this.layout.name==="reflowable"&&r%2>0){t+=this.layout.pageWidth}}}else if(this.settings.axis==="vertical"){i=this.contents.textHeight()}if(this._needsReframe||t!=this._width||i!=this._height){this.reframe(t,i)}this._expanding=false};e.prototype.reframe=function(e,t){var i=this;var r;if(X(e)){this.element.style.width=e+"px";this.iframe.style.width=e+"px";this._width=e}if(X(t)){this.element.style.height=t+"px";this.iframe.style.height=t+"px";this._height=t}var n=this.prevBounds?e-this.prevBounds.width:e;var s=this.prevBounds?t-this.prevBounds.height:t;r={width:e,height:t,widthDelta:n,heightDelta:s};this.pane&&this.pane.render();requestAnimationFrame((function(){var e;for(var t in i.marks){if(i.marks.hasOwnProperty(t)){e=i.marks[t];i.placeMark(e.element,e.range)}}}));this.onResize(this,r);this.emit(Ki.VIEWS.RESIZED,r);this.prevBounds=r;this.elementBounds=ie(this.element)};e.prototype.load=function(e){var t=new Ee;var i=t.promise;if(!this.iframe){t.reject(new Error("No Iframe Available"));return i}this.iframe.onload=function(e){this.onLoad(e,t)}.bind(this);if(this.settings.method==="blobUrl"){this.blobUrl=le(e,"application/xhtml+xml");this.iframe.src=this.blobUrl;this.element.appendChild(this.iframe)}else if(this.settings.method==="srcdoc"){this.iframe.srcdoc=e;this.element.appendChild(this.iframe)}else{this.element.appendChild(this.iframe);this.document=this.iframe.contentDocument;if(!this.document){t.reject(new Error("No Document Available"));return i}this.iframe.contentDocument.open();if(window.MSApp&&MSApp.execUnsafeLocalFunction){var r=this;MSApp.execUnsafeLocalFunction((function(){r.iframe.contentDocument.write(e)}))}else{this.iframe.contentDocument.write(e)}this.iframe.contentDocument.close()}return i};e.prototype.onLoad=function(e,t){var i=this;this.window=this.iframe.contentWindow;this.document=this.iframe.contentDocument;this.contents=new pr(this.document,this.document.body,this.section.cfiBase,this.section.index);this.rendering=false;var r=this.document.querySelector("link[rel='canonical']");if(r){r.setAttribute("href",this.section.canonical)}else{r=this.document.createElement("link");r.setAttribute("rel","canonical");r.setAttribute("href",this.section.canonical);this.document.querySelector("head").appendChild(r)}this.contents.on(Ki.CONTENTS.EXPAND,(function(){if(i.displayed&&i.iframe){i.expand();if(i.contents){i.layout.format(i.contents)}}}));this.contents.on(Ki.CONTENTS.RESIZE,(function(e){if(i.displayed&&i.iframe){i.expand();if(i.contents){i.layout.format(i.contents)}}}));t.resolve(this.contents)};e.prototype.setLayout=function(e){this.layout=e;if(this.contents){this.layout.format(this.contents);this.expand()}};e.prototype.setAxis=function(e){if(this.layout.props.flow==="scrolled"){e="vertical"}this.settings.axis=e;if(e=="horizontal"){this.element.style.flex="none"}else{this.element.style.flex="initial"}this.size()};e.prototype.addListeners=function(){};e.prototype.removeListeners=function(e){};e.prototype.display=function(e){var t=new Ee;if(!this.displayed){this.render(e).then(function(){this.emit(Ki.VIEWS.DISPLAYED,this);this.onDisplayed(this);this.displayed=true;t.resolve(this)}.bind(this),(function(e){t.reject(e,this)}))}else{t.resolve(this)}return t.promise};e.prototype.show=function(){this.element.style.visibility="visible";if(this.iframe){this.iframe.style.visibility="visible";this.iframe.style.transform="translateZ(0)";this.iframe.style.transform=null}this.emit(Ki.VIEWS.SHOWN,this)};e.prototype.hide=function(){this.element.style.visibility="hidden";this.iframe.style.visibility="hidden";this.stopExpanding=true;this.emit(Ki.VIEWS.HIDDEN,this)};e.prototype.offset=function(){return{top:this.element.offsetTop,left:this.element.offsetLeft}};e.prototype.width=function(){return this._width};e.prototype.height=function(){return this._height};e.prototype.position=function(){return this.element.getBoundingClientRect()};e.prototype.locationOf=function(e){var t=this.iframe.getBoundingClientRect();var i=this.contents.locationOf(e,this.settings.ignoreClass);return{left:i.left,top:i.top}};e.prototype.onDisplayed=function(e){};e.prototype.onResize=function(e,t){};e.prototype.bounds=function(e){if(e||!this.elementBounds){this.elementBounds=ie(this.element)}return this.elementBounds};e.prototype.highlight=function(e,t,i,r,n){var s=this;if(t===void 0){t={}}if(r===void 0){r="epubjs-hl"}if(n===void 0){n={}}if(!this.contents){return}var a=Object.assign({fill:"yellow","fill-opacity":"0.3","mix-blend-mode":"multiply"},n);var o=this.contents.range(e);var h=function(){s.emit(Ki.VIEWS.MARK_CLICKED,e,t)};t["epubcfi"]=e;if(!this.pane){this.pane=new xr(this.iframe,this.element)}var f=new _r(o,r,t,a);var u=this.pane.addMark(f);this.highlights[e]={mark:u,element:u.element,listeners:[h,i]};u.element.setAttribute("ref",r);u.element.addEventListener("click",h);u.element.addEventListener("touchstart",h);if(i){u.element.addEventListener("click",i);u.element.addEventListener("touchstart",i)}return u};e.prototype.underline=function(e,t,i,r,n){var s=this;if(t===void 0){t={}}if(r===void 0){r="epubjs-ul"}if(n===void 0){n={}}if(!this.contents){return}var a=Object.assign({stroke:"black","stroke-opacity":"0.3","mix-blend-mode":"multiply"},n);var o=this.contents.range(e);var h=function(){s.emit(Ki.VIEWS.MARK_CLICKED,e,t)};t["epubcfi"]=e;if(!this.pane){this.pane=new xr(this.iframe,this.element)}var f=new br(o,r,t,a);var u=this.pane.addMark(f);this.underlines[e]={mark:u,element:u.element,listeners:[h,i]};u.element.setAttribute("ref",r);u.element.addEventListener("click",h);u.element.addEventListener("touchstart",h);if(i){u.element.addEventListener("click",i);u.element.addEventListener("touchstart",i)}return u};e.prototype.mark=function(e,t,i){var r=this;if(t===void 0){t={}}if(!this.contents){return}if(e in this.marks){var n=this.marks[e];return n}var s=this.contents.range(e);if(!s){return}var a=s.commonAncestorContainer;var o=a.nodeType===1?a:a.parentNode;var h=function(i){r.emit(Ki.VIEWS.MARK_CLICKED,e,t)};if(s.collapsed&&a.nodeType===1){s=new Range;s.selectNodeContents(a)}else if(s.collapsed){s=new Range;s.selectNodeContents(o)}var f=this.document.createElement("a");f.setAttribute("ref","epubjs-mk");f.style.position="absolute";f.dataset["epubcfi"]=e;if(t){Object.keys(t).forEach((function(e){f.dataset[e]=t[e]}))}if(i){f.addEventListener("click",i);f.addEventListener("touchstart",i)}f.addEventListener("click",h);f.addEventListener("touchstart",h);this.placeMark(f,s);this.element.appendChild(f);this.marks[e]={element:f,range:s,listeners:[h,i]};return o};e.prototype.placeMark=function(e,t){var i,r,n;if(this.layout.name==="pre-paginated"||this.settings.axis!=="horizontal"){var s=t.getBoundingClientRect();i=s.top;r=s.right}else{var a=t.getClientRects();var o=void 0;for(var h=0;h!=a.length;h++){o=a[h];if(!n||o.left<n){n=o.left;r=Math.ceil(n/this.layout.props.pageWidth)*this.layout.props.pageWidth-this.layout.gap/2;i=o.top}}}e.style.top=i+"px";e.style.left=r+"px"};e.prototype.unhighlight=function(e){var t;if(e in this.highlights){t=this.highlights[e];this.pane.removeMark(t.mark);t.listeners.forEach((function(e){if(e){t.element.removeEventListener("click",e);t.element.removeEventListener("touchstart",e)}}));delete this.highlights[e]}};e.prototype.ununderline=function(e){var t;if(e in this.underlines){t=this.underlines[e];this.pane.removeMark(t.mark);t.listeners.forEach((function(e){if(e){t.element.removeEventListener("click",e);t.element.removeEventListener("touchstart",e)}}));delete this.underlines[e]}};e.prototype.unmark=function(e){var t;if(e in this.marks){t=this.marks[e];this.element.removeChild(t.element);t.listeners.forEach((function(e){if(e){t.element.removeEventListener("click",e);t.element.removeEventListener("touchstart",e)}}));delete this.marks[e]}};e.prototype.destroy=function(){for(var e in this.highlights){this.unhighlight(e)}for(var e in this.underlines){this.ununderline(e)}for(var e in this.marks){this.unmark(e)}if(this.blobUrl){ce(this.blobUrl)}if(this.displayed){this.displayed=false;this.removeListeners();this.contents.destroy();this.stopExpanding=true;this.element.removeChild(this.iframe);this.iframe=undefined;this.contents=undefined;this._textWidth=null;this._textHeight=null;this._width=null;this._height=null}};return e}();M(Er.prototype);function kr(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Sr=kr;var Cr=typeof s=="object"&&s&&s.Object===Object&&s;var Tr=Cr;var Rr=typeof self=="object"&&self&&self.Object===Object&&self;var Ar=Tr||Rr||Function("return this")();var Nr=Ar;var Or=function(){return Nr.Date.now()};var Lr=Or;var Ir=Nr.Symbol;var Dr=Ir;var zr=Object.prototype;var Pr=zr.hasOwnProperty;var Br=zr.toString;var jr=Dr?Dr.toStringTag:undefined;function Ur(e){var t=Pr.call(e,jr),i=e[jr];try{e[jr]=undefined;var r=true}catch(Ng){}var n=Br.call(e);if(r){if(t){e[jr]=i}else{delete e[jr]}}return n}var Mr=Ur;var Fr=Object.prototype;var qr=Fr.toString;function Wr(e){return qr.call(e)}var Hr=Wr;var Yr="[object Null]",Zr="[object Undefined]";var Vr=Dr?Dr.toStringTag:undefined;function Xr(e){if(e==null){return e===undefined?Zr:Yr}return Vr&&Vr in Object(e)?Mr(e):Hr(e)}var Kr=Xr;function Gr(e){return e!=null&&typeof e=="object"}var $r=Gr;var Jr="[object Symbol]";function Qr(e){return typeof e=="symbol"||$r(e)&&Kr(e)==Jr}var en=Qr;var tn=0/0;var rn=/^\s+|\s+$/g;var nn=/^[-+]0x[0-9a-f]+$/i;var sn=/^0b[01]+$/i;var an=/^0o[0-7]+$/i;var on=parseInt;function hn(e){if(typeof e=="number"){return e}if(en(e)){return tn}if(Sr(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Sr(t)?t+"":t}if(typeof e!="string"){return e===0?e:+e}e=e.replace(rn,"");var i=sn.test(e);return i||an.test(e)?on(e.slice(2),i?2:8):nn.test(e)?tn:+e}var fn=hn;var un="Expected a function";var ln=Math.max,cn=Math.min;function dn(e,t,i){var r,n,s,a,o,h,f=0,u=false,l=false,c=true;if(typeof e!="function"){throw new TypeError(un)}t=fn(t)||0;if(Sr(i)){u=!!i.leading;l="maxWait"in i;s=l?ln(fn(i.maxWait)||0,t):s;c="trailing"in i?!!i.trailing:c}function d(t){var i=r,s=n;r=n=undefined;f=t;a=e.apply(s,i);return a}function p(e){f=e;o=setTimeout(m,t);return u?d(e):a}function v(e){var i=e-h,r=e-f,n=t-i;return l?cn(n,s-r):n}function g(e){var i=e-h,r=e-f;return h===undefined||i>=t||i<0||l&&r>=s}function m(){var e=Lr();if(g(e)){return y(e)}o=setTimeout(m,v(e))}function y(e){o=undefined;if(c&&r){return d(e)}r=n=undefined;return a}function w(){if(o!==undefined){clearTimeout(o)}f=0;r=h=n=o=undefined}function b(){return o===undefined?a:y(Lr())}function _(){var e=Lr(),i=g(e);r=arguments;n=this;h=e;if(i){if(o===undefined){return p(h)}if(l){clearTimeout(o);o=setTimeout(m,t);return d(h)}}if(o===undefined){o=setTimeout(m,t)}return a}_.cancel=w;_.flush=b;return _}var pn=dn;var vn="Expected a function";function gn(e,t,i){var r=true,n=true;if(typeof e!="function"){throw new TypeError(vn)}if(Sr(i)){r="leading"in i?!!i.leading:r;n="trailing"in i?!!i.trailing:n}return pn(e,t,{leading:r,maxWait:t,trailing:n})}var mn=gn;var yn=function(){function e(e){this.settings=e||{};this.id="epubjs-container-"+Y();this.container=this.create(this.settings);if(this.settings.hidden){this.wrapper=this.wrap(this.container)}}e.prototype.create=function(e){var t=e.height;var i=e.width;var r=e.overflow||false;var n=e.axis||"vertical";var s=e.direction;J(this.settings,e);if(e.height&&X(e.height)){t=e.height+"px"}if(e.width&&X(e.width)){i=e.width+"px"}var a=document.createElement("div");a.id=this.id;a.classList.add("epub-container");a.style.wordSpacing="0";a.style.lineHeight="0";a.style.verticalAlign="top";a.style.position="relative";if(n==="horizontal"){a.style.display="flex";a.style.flexDirection="row";a.style.flexWrap="nowrap"}if(i){a.style.width=i}if(t){a.style.height=t}if(r){if(r==="scroll"&&n==="vertical"){a.style["overflow-y"]=r;a.style["overflow-x"]="hidden"}else if(r==="scroll"&&n==="horizontal"){a.style["overflow-y"]="hidden";a.style["overflow-x"]=r}else{a.style["overflow"]=r}}if(s){a.dir=s;a.style["direction"]=s}if(s&&this.settings.fullsize){document.body.style["direction"]=s}return a};e.prototype.wrap=function(e){var t=document.createElement("div");t.style.visibility="hidden";t.style.overflow="hidden";t.style.width="0";t.style.height="0";t.appendChild(e);return t};e.prototype.getElement=function(e){var t;if(V(e)){t=e}else if(typeof e==="string"){t=document.getElementById(e)}if(!t){throw new Error("Not an Element")}return t};e.prototype.attachTo=function(e){var t=this.getElement(e);var i;if(!t){return}if(this.settings.hidden){i=this.wrapper}else{i=this.container}t.appendChild(i);this.element=t;return t};e.prototype.getContainer=function(){return this.container};e.prototype.onResize=function(e){if(!X(this.settings.width)||!X(this.settings.height)){this.resizeFunc=mn(e,50);window.addEventListener("resize",this.resizeFunc,false)}};e.prototype.onOrientationChange=function(e){this.orientationChangeFunc=e;window.addEventListener("orientationchange",this.orientationChangeFunc,false)};e.prototype.size=function(e,t){var i;var r=e||this.settings.width;var n=t||this.settings.height;if(e===null){i=this.element.getBoundingClientRect();if(i.width){e=Math.floor(i.width);this.container.style.width=e+"px"}}else{if(X(e)){this.container.style.width=e+"px"}else{this.container.style.width=e}}if(t===null){i=i||this.element.getBoundingClientRect();if(i.height){t=i.height;this.container.style.height=t+"px"}}else{if(X(t)){this.container.style.height=t+"px"}else{this.container.style.height=t}}if(!X(e)){e=this.container.clientWidth}if(!X(t)){t=this.container.clientHeight}this.containerStyles=window.getComputedStyle(this.container);this.containerPadding={left:parseFloat(this.containerStyles["padding-left"])||0,right:parseFloat(this.containerStyles["padding-right"])||0,top:parseFloat(this.containerStyles["padding-top"])||0,bottom:parseFloat(this.containerStyles["padding-bottom"])||0};var s=se();var a=window.getComputedStyle(document.body);var o={left:parseFloat(a["padding-left"])||0,right:parseFloat(a["padding-right"])||0,top:parseFloat(a["padding-top"])||0,bottom:parseFloat(a["padding-bottom"])||0};if(!r){e=s.width-o.left-o.right}if(this.settings.fullsize&&!n||!n){t=s.height-o.top-o.bottom}return{width:e-this.containerPadding.left-this.containerPadding.right,height:t-this.containerPadding.top-this.containerPadding.bottom}};e.prototype.bounds=function(){var e;if(this.container.style.overflow!=="visible"){e=this.container&&this.container.getBoundingClientRect()}if(!e||!e.width||!e.height){return se()}else{return e}};e.prototype.getSheet=function(){var e=document.createElement("style");e.appendChild(document.createTextNode(""));document.head.appendChild(e);return e.sheet};e.prototype.addStyleRules=function(e,t){var i="#"+this.id+" ";var r="";if(!this.sheet){this.sheet=this.getSheet()}t.forEach((function(e){for(var t in e){if(e.hasOwnProperty(t)){r+=t+":"+e[t]+";"}}}));this.sheet.insertRule(i+e+" {"+r+"}",0)};e.prototype.axis=function(e){if(e==="horizontal"){this.container.style.display="flex";this.container.style.flexDirection="row";this.container.style.flexWrap="nowrap"}else{this.container.style.display="block"}this.settings.axis=e};e.prototype.direction=function(e){if(this.container){this.container.dir=e;this.container.style["direction"]=e}if(this.settings.fullsize){document.body.style["direction"]=e}this.settings.dir=e};e.prototype.overflow=function(e){if(this.container){if(e==="scroll"&&this.settings.axis==="vertical"){this.container.style["overflow-y"]=e;this.container.style["overflow-x"]="hidden"}else if(e==="scroll"&&this.settings.axis==="horizontal"){this.container.style["overflow-y"]="hidden";this.container.style["overflow-x"]=e}else{this.container.style["overflow"]=e}}this.settings.overflow=e};e.prototype.destroy=function(){if(this.element){if(this.element.contains(this.container)){this.element.removeChild(this.container)}window.removeEventListener("resize",this.resizeFunc);window.removeEventListener("orientationChange",this.orientationChangeFunc)}};return e}();var wn=function(){function e(e){this.container=e;this._views=[];this.length=0;this.hidden=false}e.prototype.all=function(){return this._views};e.prototype.first=function(){return this._views[0]};e.prototype.last=function(){return this._views[this._views.length-1]};e.prototype.indexOf=function(e){return this._views.indexOf(e)};e.prototype.slice=function(){return this._views.slice.apply(this._views,arguments)};e.prototype.get=function(e){return this._views[e]};e.prototype.append=function(e){this._views.push(e);if(this.container){this.container.appendChild(e.element)}this.length++;return e};e.prototype.prepend=function(e){this._views.unshift(e);if(this.container){this.container.insertBefore(e.element,this.container.firstChild)}this.length++;return e};e.prototype.insert=function(e,t){this._views.splice(t,0,e);if(this.container){if(t<this.container.children.length){this.container.insertBefore(e.element,this.container.children[t])}else{this.container.appendChild(e.element)}}this.length++;return e};e.prototype.remove=function(e){var t=this._views.indexOf(e);if(t>-1){this._views.splice(t,1)}this.destroy(e);this.length--};e.prototype.destroy=function(e){if(e.displayed){e.destroy()}if(this.container){this.container.removeChild(e.element)}e=null};e.prototype.forEach=function(){return this._views.forEach.apply(this._views,arguments)};e.prototype.clear=function(){var e;var t=this.length;if(!this.length)return;for(var i=0;i<t;i++){e=this._views[i];this.destroy(e)}this._views=[];this.length=0};e.prototype.find=function(e){var t;var i=this.length;for(var r=0;r<i;r++){t=this._views[r];if(t.displayed&&t.section.index==e.index){return t}}};e.prototype.displayed=function(){var e=[];var t;var i=this.length;for(var r=0;r<i;r++){t=this._views[r];if(t.displayed){e.push(t)}}return e};e.prototype.show=function(){var e;var t=this.length;for(var i=0;i<t;i++){e=this._views[i];if(e.displayed){e.show()}}this.hidden=false};e.prototype.hide=function(){var e;var t=this.length;for(var i=0;i<t;i++){e=this._views[i];if(e.displayed){e.hide()}}this.hidden=true};return e}();var bn=function(){function e(e){this.name="default";this.optsSettings=e.settings;this.View=e.view;this.request=e.request;this.renditionQueue=e.queue;this.q=new Zi(this);this.settings=J(this.settings||{},{infinite:true,hidden:false,width:undefined,height:undefined,axis:undefined,flow:"scrolled",ignoreClass:"",fullsize:undefined});J(this.settings,e.settings||{});this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,method:this.settings.method,width:0,height:0,forceEvenPages:true};this.rendered=false}e.prototype.render=function(e,t){var i=e.tagName;if(typeof this.settings.fullsize==="undefined"&&i&&(i.toLowerCase()=="body"||i.toLowerCase()=="html")){this.settings.fullsize=true}if(this.settings.fullsize){this.settings.overflow="visible";this.overflow=this.settings.overflow}this.settings.size=t;this.stage=new yn({width:t.width,height:t.height,overflow:this.overflow,hidden:this.settings.hidden,axis:this.settings.axis,fullsize:this.settings.fullsize,direction:this.settings.direction});this.stage.attachTo(e);this.container=this.stage.getContainer();this.views=new wn(this.container);this._bounds=this.bounds();this._stageSize=this.stage.size();this.viewSettings.width=this._stageSize.width;this.viewSettings.height=this._stageSize.height;this.stage.onResize(this.onResized.bind(this));this.stage.onOrientationChange(this.onOrientationChange.bind(this));this.addEventListeners();if(this.layout){this.updateLayout()}this.rendered=true};e.prototype.addEventListeners=function(){var e;window.addEventListener("unload",function(e){this.destroy()}.bind(this));if(!this.settings.fullsize){e=this.container}else{e=window}this._onScroll=this.onScroll.bind(this);e.addEventListener("scroll",this._onScroll)};e.prototype.removeEventListeners=function(){var e;if(!this.settings.fullsize){e=this.container}else{e=window}e.removeEventListener("scroll",this._onScroll);this._onScroll=undefined};e.prototype.destroy=function(){clearTimeout(this.orientationTimeout);clearTimeout(this.resizeTimeout);clearTimeout(this.afterScrolled);this.clear();this.removeEventListeners();this.stage.destroy();this.rendered=false};e.prototype.onOrientationChange=function(e){var t=window.orientation;if(this.optsSettings.resizeOnOrientationChange){this.resize()}clearTimeout(this.orientationTimeout);this.orientationTimeout=setTimeout(function(){this.orientationTimeout=undefined;if(this.optsSettings.resizeOnOrientationChange){this.resize()}this.emit(Ki.MANAGERS.ORIENTATION_CHANGE,t)}.bind(this),500)};e.prototype.onResized=function(e){this.resize()};e.prototype.resize=function(e,t,i){var r=this.stage.size(e,t);this.winBounds=se();if(this.orientationTimeout&&this.winBounds.width===this.winBounds.height){this._stageSize=undefined;return}if(this._stageSize&&this._stageSize.width===r.width&&this._stageSize.height===r.height){return}this._stageSize=r;this._bounds=this.bounds();this.clear();this.viewSettings.width=this._stageSize.width;this.viewSettings.height=this._stageSize.height;this.updateLayout();this.emit(Ki.MANAGERS.RESIZED,{width:this._stageSize.width,height:this._stageSize.height},i)};e.prototype.createView=function(e){return new this.View(e,this.viewSettings)};e.prototype.display=function(e,t){var i=new Ee;var r=i.promise;if(t===e.href||X(t)){t=undefined}var n=this.views.find(e);if(n&&e){var s=n.offset();if(this.settings.direction==="ltr"){this.scrollTo(s.left,s.top,true)}else{var a=n.width();this.scrollTo(s.left+a,s.top,true)}if(t){var o=n.locationOf(t);this.moveTo(o)}i.resolve();return r}this.clear();this.add(e).then(function(e){if(t){var i=e.locationOf(t);this.moveTo(i)}}.bind(this),(function(e){i.reject(e)})).then(function(){var t;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1&&e.index>0){t=e.next();if(t){return this.add(t)}}}.bind(this)).then(function(){this.views.show();i.resolve()}.bind(this));return r};e.prototype.afterDisplayed=function(e){this.emit(Ki.MANAGERS.ADDED,e)};e.prototype.afterResized=function(e){this.emit(Ki.MANAGERS.RESIZE,e.section)};e.prototype.moveTo=function(e){var t=0,i=0;if(!this.isPaginated){i=e.top}else{t=Math.floor(e.left/this.layout.delta)*this.layout.delta;if(t+this.layout.delta>this.container.scrollWidth){t=this.container.scrollWidth-this.layout.delta}}this.scrollTo(t,i,true)};e.prototype.add=function(e){var t=this;var i=this.createView(e);this.views.append(i);i.onDisplayed=this.afterDisplayed.bind(this);i.onResize=this.afterResized.bind(this);i.on(Ki.VIEWS.AXIS,(function(e){t.updateAxis(e)}));return i.display(this.request)};e.prototype.append=function(e){var t=this;var i=this.createView(e);this.views.append(i);i.onDisplayed=this.afterDisplayed.bind(this);i.onResize=this.afterResized.bind(this);i.on(Ki.VIEWS.AXIS,(function(e){t.updateAxis(e)}));return i.display(this.request)};e.prototype.prepend=function(e){var t=this;var i=this.createView(e);i.on(Ki.VIEWS.RESIZED,(function(e){t.counter(e)}));this.views.prepend(i);i.onDisplayed=this.afterDisplayed.bind(this);i.onResize=this.afterResized.bind(this);i.on(Ki.VIEWS.AXIS,(function(e){t.updateAxis(e)}));return i.display(this.request)};e.prototype.counter=function(e){if(this.settings.axis==="vertical"){this.scrollBy(0,e.heightDelta,true)}else{this.scrollBy(e.widthDelta,0,true)}};e.prototype.next=function(){var e;var t;var i=this.settings.direction;if(!this.views.length)return;if(this.isPaginated&&this.settings.axis==="horizontal"&&(!i||i==="ltr")){this.scrollLeft=this.container.scrollLeft;t=this.container.scrollLeft+this.container.offsetWidth+this.layout.delta;if(t<=this.container.scrollWidth){this.scrollBy(this.layout.delta,0,true)}else{e=this.views.last().section.next()}}else if(this.isPaginated&&this.settings.axis==="horizontal"&&i==="rtl"){this.scrollLeft=this.container.scrollLeft;t=this.container.scrollLeft;if(t>0){this.scrollBy(this.layout.delta,0,true)}else{e=this.views.last().section.next()}}else if(this.isPaginated&&this.settings.axis==="vertical"){this.scrollTop=this.container.scrollTop;var r=this.container.scrollTop+this.container.offsetHeight;if(r<this.container.scrollHeight){this.scrollBy(0,this.layout.height,true)}else{e=this.views.last().section.next()}}else{e=this.views.last().section.next()}if(e){this.clear();return this.append(e).then(function(){var t;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1){t=e.next();if(t){return this.append(t)}}}.bind(this),(function(e){return e})).then(function(){this.views.show()}.bind(this))}};e.prototype.prev=function(){var e;var t;var i=this.settings.direction;if(!this.views.length)return;if(this.isPaginated&&this.settings.axis==="horizontal"&&(!i||i==="ltr")){this.scrollLeft=this.container.scrollLeft;t=this.container.scrollLeft;if(t>0){this.scrollBy(-this.layout.delta,0,true)}else{e=this.views.first().section.prev()}}else if(this.isPaginated&&this.settings.axis==="horizontal"&&i==="rtl"){this.scrollLeft=this.container.scrollLeft;t=this.container.scrollLeft+this.container.offsetWidth+this.layout.delta;if(t<=this.container.scrollWidth){this.scrollBy(-this.layout.delta,0,true)}else{e=this.views.first().section.prev()}}else if(this.isPaginated&&this.settings.axis==="vertical"){this.scrollTop=this.container.scrollTop;var r=this.container.scrollTop;if(r>0){this.scrollBy(0,-this.layout.height,true)}else{e=this.views.first().section.prev()}}else{e=this.views.first().section.prev()}if(e){this.clear();return this.prepend(e).then(function(){var t;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1){t=e.prev();if(t){return this.prepend(t)}}}.bind(this),(function(e){return e})).then(function(){if(this.isPaginated&&this.settings.axis==="horizontal"){if(this.settings.direction==="rtl"){this.scrollTo(0,0,true)}else{this.scrollTo(this.container.scrollWidth-this.layout.delta,0,true)}}this.views.show()}.bind(this))}};e.prototype.current=function(){var e=this.visible();if(e.length){return e[e.length-1]}return null};e.prototype.clear=function(){if(this.views){this.views.hide();this.scrollTo(0,0,true);this.views.clear()}};e.prototype.currentLocation=function(){if(this.settings.axis==="vertical"){this.location=this.scrolledLocation()}else{this.location=this.paginatedLocation()}return this.location};e.prototype.scrolledLocation=function(){var e=this;var t=this.visible();var i=this.container.getBoundingClientRect();var r=i.height<window.innerHeight?i.height:window.innerHeight;var n=0;var s=0;if(this.settings.fullsize){n=window.scrollY}var a=t.map((function(t){var a=t.section,o=a.index,h=a.href;var f=t.position();var u=t.height();var l=n+i.top-f.top+s;var c=l+r-s;if(c>u){c=u;s=c-l}var d=e.layout.count(u,r).pages;var p=Math.ceil(l/r);var v=[];var g=Math.ceil(c/r);v=[];for(var m=p;m<=g;m++){var y=m+1;v.push(y)}var w=e.mapping.page(t.contents,t.section.cfiBase,l,c);return{index:o,href:h,pages:v,totalPages:d,mapping:w}}));return a};e.prototype.paginatedLocation=function(){var e=this;var t=this.visible();var i=this.container.getBoundingClientRect();var r=0;var n=0;if(this.settings.fullsize){r=window.scrollX}var s=t.map((function(t){var s=t.section,a=s.index,o=s.href;var h=t.offset().left;var f=t.position().left;var u=t.width();var l=r+i.left-f+n;var c=l+e.layout.width-n;var d=e.mapping.page(t.contents,t.section.cfiBase,l,c);var p=e.layout.count(u).pages;var v=Math.floor(l/e.layout.pageWidth);var g=[];var m=Math.floor(c/e.layout.pageWidth);if(v<0){v=0;m=m+1}if(e.settings.direction==="rtl"){var y=v;v=p-m;m=p-y}for(var w=v+1;w<=m;w++){var b=w;g.push(b)}return{index:a,href:o,pages:g,totalPages:p,mapping:d}}));return s};e.prototype.isVisible=function(e,t,i,r){var n=e.position();var s=r||this.bounds();if(this.settings.axis==="horizontal"&&n.right>s.left-t&&n.left<s.right+i){return true}else if(this.settings.axis==="vertical"&&n.bottom>s.top-t&&n.top<s.bottom+i){return true}return false};e.prototype.visible=function(){var e=this.bounds();var t=this.views.displayed();var i=t.length;var r=[];var n;var s;for(var a=0;a<i;a++){s=t[a];n=this.isVisible(s,0,0,e);if(n===true){r.push(s)}}return r};e.prototype.scrollBy=function(e,t,i){var r=this.settings.direction==="rtl"?-1:1;if(i){this.ignore=true}if(!this.settings.fullsize){if(e)this.container.scrollLeft+=e*r;if(t)this.container.scrollTop+=t}else{window.scrollBy(e*r,t*r)}this.scrolled=true};e.prototype.scrollTo=function(e,t,i){if(i){this.ignore=true}if(!this.settings.fullsize){this.container.scrollLeft=e;this.container.scrollTop=t}else{window.scrollTo(e,t)}this.scrolled=true};e.prototype.onScroll=function(){var e;var t;if(!this.settings.fullsize){e=this.container.scrollTop;t=this.container.scrollLeft}else{e=window.scrollY;t=window.scrollX}this.scrollTop=e;this.scrollLeft=t;if(!this.ignore){this.emit(Ki.MANAGERS.SCROLL,{top:e,left:t});clearTimeout(this.afterScrolled);this.afterScrolled=setTimeout(function(){this.emit(Ki.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}.bind(this),20)}else{this.ignore=false}};e.prototype.bounds=function(){var e;e=this.stage.bounds();return e};e.prototype.applyLayout=function(e){this.layout=e;this.updateLayout()};e.prototype.updateLayout=function(){if(!this.stage){return}this._stageSize=this.stage.size();if(!this.isPaginated){this.layout.calculate(this._stageSize.width,this._stageSize.height)}else{this.layout.calculate(this._stageSize.width,this._stageSize.height,this.settings.gap);this.settings.offset=this.layout.delta}this.viewSettings.width=this.layout.width;this.viewSettings.height=this.layout.height;this.setLayout(this.layout)};e.prototype.setLayout=function(e){this.viewSettings.layout=e;this.mapping=new fr(e.props,this.settings.direction,this.settings.axis);if(this.views){this.views.forEach((function(t){if(t){t.setLayout(e)}}))}};e.prototype.updateAxis=function(e,t){if(!this.isPaginated){e="vertical"}if(!t&&e===this.settings.axis){return}this.settings.axis=e;this.stage&&this.stage.axis(e);this.viewSettings.axis=e;if(this.mapping){this.mapping=new fr(this.layout.props,this.settings.direction,this.settings.axis)}if(this.layout){if(e==="vertical"){this.layout.spread("none")}else{this.layout.spread(this.layout.settings.spread)}}};e.prototype.updateFlow=function(e,t){if(t===void 0){t="auto"}var i=e==="paginated"||e==="auto";this.isPaginated=i;if(e==="scrolled-doc"||e==="scrolled-continuous"||e==="scrolled"){this.updateAxis("vertical")}else{this.updateAxis("horizontal")}this.viewSettings.flow=e;if(!this.settings.overflow){this.overflow=i?"hidden":t}else{this.overflow=this.settings.overflow}this.stage&&this.stage.overflow(this.overflow);this.updateLayout()};e.prototype.getContents=function(){var e=[];if(!this.views){return e}this.views.forEach((function(t){var i=t&&t.contents;if(i){e.push(i)}}));return e};e.prototype.direction=function(e){if(e===void 0){e="ltr"}this.settings.direction=e;this.stage&&this.stage.direction(e);this.viewSettings.direction=e;this.updateLayout()};e.prototype.isRendered=function(){return this.rendered};return e}();M(bn.prototype);var _n=Math.PI/2;var xn={easeOutSine:function(e){return Math.sin(e*_n)},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInOutQuint:function(e){if((e/=.5)<1){return.5*Math.pow(e,5)}return.5*(Math.pow(e-2,5)+2)},easeInCubic:function(e){return Math.pow(e,3)}};var En=function(){function e(e,t){this.settings=J({duration:80,minVelocity:.2,minDistance:10,easing:xn["easeInCubic"]},t||{});this.supportsTouch=this.supportsTouch();if(this.supportsTouch){this.setup(e)}}e.prototype.setup=function(e){this.manager=e;this.layout=this.manager.layout;this.fullsize=this.manager.settings.fullsize;if(this.fullsize){this.element=this.manager.stage.element;this.scroller=window;this.disableScroll()}else{this.element=this.manager.stage.container;this.scroller=this.element;this.element.style["WebkitOverflowScrolling"]="touch"}this.manager.settings.offset=this.layout.width;this.manager.settings.afterScrolledTimeout=this.settings.duration*2;this.isVertical=this.manager.settings.axis==="vertical";if(!this.manager.isPaginated||this.isVertical){return}this.touchCanceler=false;this.resizeCanceler=false;this.snapping=false;this.startTouchX=undefined;this.startTouchY=undefined;this.startTime=undefined;this.endTouchX=undefined;this.endTouchY=undefined;this.endTime=undefined;this.addListeners()};e.prototype.supportsTouch=function(){if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch){return true}return false};e.prototype.disableScroll=function(){this.element.style.overflow="hidden"};e.prototype.enableScroll=function(){this.element.style.overflow=""};e.prototype.addListeners=function(){this._onResize=this.onResize.bind(this);window.addEventListener("resize",this._onResize);this._onScroll=this.onScroll.bind(this);this.scroller.addEventListener("scroll",this._onScroll);this._onTouchStart=this.onTouchStart.bind(this);this.scroller.addEventListener("touchstart",this._onTouchStart,{passive:true});this.on("touchstart",this._onTouchStart);this._onTouchMove=this.onTouchMove.bind(this);this.scroller.addEventListener("touchmove",this._onTouchMove,{passive:true});this.on("touchmove",this._onTouchMove);this._onTouchEnd=this.onTouchEnd.bind(this);this.scroller.addEventListener("touchend",this._onTouchEnd,{passive:true});this.on("touchend",this._onTouchEnd);this._afterDisplayed=this.afterDisplayed.bind(this);this.manager.on(Ki.MANAGERS.ADDED,this._afterDisplayed)};e.prototype.removeListeners=function(){window.removeEventListener("resize",this._onResize);this._onResize=undefined;this.scroller.removeEventListener("scroll",this._onScroll);this._onScroll=undefined;this.scroller.removeEventListener("touchstart",this._onTouchStart,{passive:true});this.off("touchstart",this._onTouchStart);this._onTouchStart=undefined;this.scroller.removeEventListener("touchmove",this._onTouchMove,{passive:true});this.off("touchmove",this._onTouchMove);this._onTouchMove=undefined;this.scroller.removeEventListener("touchend",this._onTouchEnd,{passive:true});this.off("touchend",this._onTouchEnd);this._onTouchEnd=undefined;this.manager.off(Ki.MANAGERS.ADDED,this._afterDisplayed);this._afterDisplayed=undefined};e.prototype.afterDisplayed=function(e){var t=this;var i=e.contents;["touchstart","touchmove","touchend"].forEach((function(e){i.on(e,(function(e){return t.triggerViewEvent(e,i)}))}))};e.prototype.triggerViewEvent=function(e,t){this.emit(e.type,e,t)};e.prototype.onScroll=function(e){this.scrollLeft=this.fullsize?window.scrollX:this.scroller.scrollLeft;this.scrollTop=this.fullsize?window.scrollY:this.scroller.scrollTop};e.prototype.onResize=function(e){this.resizeCanceler=true};e.prototype.onTouchStart=function(e){var t=e.touches[0],i=t.screenX,r=t.screenY;if(this.fullsize){this.enableScroll()}this.touchCanceler=true;if(!this.startTouchX){this.startTouchX=i;this.startTouchY=r;this.startTime=this.now()}this.endTouchX=i;this.endTouchY=r;this.endTime=this.now()};e.prototype.onTouchMove=function(e){var t=e.touches[0],i=t.screenX,r=t.screenY;var n=Math.abs(r-this.endTouchY);this.touchCanceler=true;if(!this.fullsize&&n<10){this.element.scrollLeft-=i-this.endTouchX}this.endTouchX=i;this.endTouchY=r;this.endTime=this.now()};e.prototype.onTouchEnd=function(e){if(this.fullsize){this.disableScroll()}this.touchCanceler=false;var t=this.wasSwiped();if(t!==0){this.snap(t)}else{this.snap()}this.startTouchX=undefined;this.startTouchY=undefined;this.startTime=undefined;this.endTouchX=undefined;this.endTouchY=undefined;this.endTime=undefined};e.prototype.wasSwiped=function(){var e=this.layout.pageWidth*this.layout.divisor;var t=this.endTouchX-this.startTouchX;var i=Math.abs(t);var r=this.endTime-this.startTime;var n=t/r;var s=this.settings.minVelocity;if(i<=this.settings.minDistance||i>=e){return 0}if(n>s){return-1}else if(n<-s){return 1}};e.prototype.needsSnap=function(){var e=this.scrollLeft;var t=this.layout.pageWidth*this.layout.divisor;return e%t!==0};e.prototype.snap=function(e){if(e===void 0){e=0}var t=this.scrollLeft;var i=this.layout.pageWidth*this.layout.divisor;var r=Math.round(t/i)*i;if(e){r+=e*i}return this.smoothScrollTo(r)};e.prototype.smoothScrollTo=function(e){var t=new Ee;var i=this.scrollLeft;var r=this.now();var n=this.settings.duration;var s=this.settings.easing;this.snapping=true;function a(){var o=this.now();var h=Math.min(1,(o-r)/n);var f=s(h);if(this.touchCanceler||this.resizeCanceler){this.resizeCanceler=false;this.snapping=false;t.resolve();return}if(h<1){window.requestAnimationFrame(a.bind(this));this.scrollTo(i+(e-i)*h,0)}else{this.scrollTo(e,0);this.snapping=false;t.resolve()}}a.call(this);return t.promise};e.prototype.scrollTo=function(e,t){if(e===void 0){e=0}if(t===void 0){t=0}if(this.fullsize){window.scroll(e,t)}else{this.scroller.scrollLeft=e;this.scroller.scrollTop=t}};e.prototype.now=function(){return"now"in window.performance?performance.now():(new Date).getTime()};e.prototype.destroy=function(){if(!this.scroller){return}if(this.fullsize){this.enableScroll()}this.removeListeners();this.scroller=undefined};return e}();M(En.prototype);var kn=function(e){__extends(t,e);function t(t){var i=e.call(this,t)||this;i.name="continuous";i.settings=J(i.settings||{},{infinite:true,overflow:undefined,axis:undefined,flow:"scrolled",offset:500,offsetDelta:250,width:undefined,height:undefined,snap:false,afterScrolledTimeout:10});J(i.settings,t.settings||{});if(t.settings.gap!="undefined"&&t.settings.gap===0){i.settings.gap=t.settings.gap}i.viewSettings={ignoreClass:i.settings.ignoreClass,axis:i.settings.axis,flow:i.settings.flow,layout:i.layout,width:0,height:0,forceEvenPages:false};i.scrollTop=0;i.scrollLeft=0;return i}t.prototype.display=function(e,t){return bn.prototype.display.call(this,e,t).then(function(){return this.fill()}.bind(this))};t.prototype.fill=function(e){var t=this;var i=e||new Ee;this.q.enqueue((function(){return t.check()})).then((function(e){if(e){t.fill(i)}else{i.resolve()}}));return i.promise};t.prototype.moveTo=function(e){var t=0,i=0;if(!this.isPaginated){i=e.top}else{t=Math.floor(e.left/this.layout.delta)*this.layout.delta}if(t>0||i>0){this.scrollBy(t,i,true)}};t.prototype.afterResized=function(e){this.emit(Ki.MANAGERS.RESIZE,e.section)};t.prototype.removeShownListeners=function(e){e.onDisplayed=function(){}};t.prototype.add=function(e){var t=this;var i=this.createView(e);this.views.append(i);i.on(Ki.VIEWS.RESIZED,(function(e){i.expanded=true}));i.on(Ki.VIEWS.AXIS,(function(e){t.updateAxis(e)}));i.onDisplayed=this.afterDisplayed.bind(this);i.onResize=this.afterResized.bind(this);return i.display(this.request)};t.prototype.append=function(e){var t=this;var i=this.createView(e);i.on(Ki.VIEWS.RESIZED,(function(e){i.expanded=true}));i.on(Ki.VIEWS.AXIS,(function(e){t.updateAxis(e)}));this.views.append(i);i.onDisplayed=this.afterDisplayed.bind(this);return i};t.prototype.prepend=function(e){var t=this;var i=this.createView(e);i.on(Ki.VIEWS.RESIZED,(function(e){t.counter(e);i.expanded=true}));i.on(Ki.VIEWS.AXIS,(function(e){t.updateAxis(e)}));this.views.prepend(i);i.onDisplayed=this.afterDisplayed.bind(this);return i};t.prototype.counter=function(e){if(this.settings.axis==="vertical"){this.scrollBy(0,e.heightDelta,true)}else{this.scrollBy(e.widthDelta,0,true)}};t.prototype.update=function(e){var t=this.bounds();var i=this.views.all();var r=i.length;var n=typeof e!="undefined"?e:this.settings.offset||0;var s;var a;var o=new Ee;var h=[];for(var f=0;f<r;f++){a=i[f];s=this.isVisible(a,n,n,t);if(s===true){if(!a.displayed){var u=a.display(this.request).then((function(e){e.show()}),(function(e){a.hide()}));h.push(u)}else{a.show()}}else{this.q.enqueue(a.destroy.bind(a));clearTimeout(this.trimTimeout);this.trimTimeout=setTimeout(function(){this.q.enqueue(this.trim.bind(this))}.bind(this),250)}}if(h.length){return Promise.all(h).catch((function(e){o.reject(e)}))}else{o.resolve();return o.promise}};t.prototype.check=function(e,t){var i=this;var r=new Ee;var n=[];var s=this.settings.axis==="horizontal";var a=this.settings.offset||0;if(e&&s){a=e}if(t&&!s){a=t}var o=this._bounds;var h=this.settings.direction==="rtl";var f=s&&h?-1:1;var u=s?this.scrollLeft:this.scrollTop*f;var l=s?Math.floor(o.width):o.height;var c=s?this.container.scrollWidth:this.container.scrollHeight;var d=function(){var e=i.views.first();var t=e&&e.section.prev();if(t){n.push(i.prepend(t))}};var p=function(){var e=i.views.last();var t=e&&e.section.next();if(t){n.push(i.append(t))}};if(u+l+a>=c){if(s&&h){d()}else{p()}}if(u-a<0){if(s&&h){p()}else{d()}}var v=n.map((function(e){return e.displayed}));if(n.length){return Promise.all(v).then((function(){if(i.layout.name==="pre-paginated"&&i.layout.props.spread){return i.check()}})).then((function(){return i.update(a)}),(function(e){return e}))}else{this.q.enqueue(function(){this.update()}.bind(this));r.resolve(false);return r.promise}};t.prototype.trim=function(){var e=new Ee;var t=this.views.displayed();var i=t[0];var r=t[t.length-1];var n=this.views.indexOf(i);var s=this.views.indexOf(r);var a=this.views.slice(0,n);var o=this.views.slice(s+1);for(var h=0;h<a.length-1;h++){this.erase(a[h],a)}for(var f=1;f<o.length;f++){this.erase(o[f])}e.resolve();return e.promise};t.prototype.erase=function(e,t){var i;var r;if(!this.settings.fullsize){i=this.container.scrollTop;r=this.container.scrollLeft}else{i=window.scrollY;r=window.scrollX}var n=e.bounds();this.views.remove(e);if(t){if(this.settings.axis==="vertical"){this.scrollTo(0,i-n.height,true)}else{this.scrollTo(r-Math.floor(n.width),0,true)}}};t.prototype.addEventListeners=function(e){window.addEventListener("unload",function(e){this.ignore=true;this.destroy()}.bind(this));this.addScrollListeners();if(this.isPaginated&&this.settings.snap){this.snapper=new En(this,this.settings.snap&&typeof this.settings.snap==="object"&&this.settings.snap)}};t.prototype.addScrollListeners=function(){var e;this.tick=F;if(!this.settings.fullsize){this.prevScrollTop=this.container.scrollTop;this.prevScrollLeft=this.container.scrollLeft}else{this.prevScrollTop=window.scrollY;this.prevScrollLeft=window.scrollX}this.scrollDeltaVert=0;this.scrollDeltaHorz=0;if(!this.settings.fullsize){e=this.container;this.scrollTop=this.container.scrollTop;this.scrollLeft=this.container.scrollLeft}else{e=window;this.scrollTop=window.scrollY;this.scrollLeft=window.scrollX}this._onScroll=this.onScroll.bind(this);e.addEventListener("scroll",this._onScroll);this._scrolled=pn(this.scrolled.bind(this),30);this.didScroll=false};t.prototype.removeEventListeners=function(){var e;if(!this.settings.fullsize){e=this.container}else{e=window}e.removeEventListener("scroll",this._onScroll);this._onScroll=undefined};t.prototype.onScroll=function(){var e;var t;var i=this.settings.direction==="rtl"?-1:1;if(!this.settings.fullsize){e=this.container.scrollTop;t=this.container.scrollLeft}else{e=window.scrollY*i;t=window.scrollX*i}this.scrollTop=e;this.scrollLeft=t;if(!this.ignore){this._scrolled()}else{this.ignore=false}this.scrollDeltaVert+=Math.abs(e-this.prevScrollTop);this.scrollDeltaHorz+=Math.abs(t-this.prevScrollLeft);this.prevScrollTop=e;this.prevScrollLeft=t;clearTimeout(this.scrollTimeout);this.scrollTimeout=setTimeout(function(){this.scrollDeltaVert=0;this.scrollDeltaHorz=0}.bind(this),150);clearTimeout(this.afterScrolled);this.didScroll=false};t.prototype.scrolled=function(){this.q.enqueue(function(){this.check()}.bind(this));this.emit(Ki.MANAGERS.SCROLL,{top:this.scrollTop,left:this.scrollLeft});clearTimeout(this.afterScrolled);this.afterScrolled=setTimeout(function(){if(this.snapper&&this.snapper.supportsTouch&&this.snapper.needsSnap()){return}this.emit(Ki.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}.bind(this),this.settings.afterScrolledTimeout)};t.prototype.next=function(){var e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;if(!this.views.length)return;if(this.isPaginated&&this.settings.axis==="horizontal"){this.scrollBy(e,0,true)}else{this.scrollBy(0,this.layout.height,true)}this.q.enqueue(function(){this.check()}.bind(this))};t.prototype.prev=function(){var e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;if(!this.views.length)return;if(this.isPaginated&&this.settings.axis==="horizontal"){this.scrollBy(-e,0,true)}else{this.scrollBy(0,-this.layout.height,true)}this.q.enqueue(function(){this.check()}.bind(this))};t.prototype.updateFlow=function(t){if(this.rendered&&this.snapper){this.snapper.destroy();this.snapper=undefined}e.prototype.updateFlow.call(this,t,"scroll");if(this.rendered&&this.isPaginated&&this.settings.snap){this.snapper=new En(this,this.settings.snap&&typeof this.settings.snap==="object"&&this.settings.snap)}};t.prototype.destroy=function(){e.prototype.destroy.call(this);if(this.snapper){this.snapper.destroy()}};return t}(bn);var Sn=function(){function e(e,t){this.settings=J(this.settings||{},{width:null,height:null,ignoreClass:"",manager:"default",view:"iframe",flow:null,layout:null,spread:null,minSpreadWidth:800,stylesheet:null,resizeOnOrientationChange:true,script:null,snap:false});J(this.settings,t);if(typeof this.settings.manager==="object"){this.manager=this.settings.manager}this.book=e;this.hooks={};this.hooks.display=new We(this);this.hooks.serialize=new We(this);this.hooks.content=new We(this);this.hooks.unloaded=new We(this);this.hooks.layout=new We(this);this.hooks.render=new We(this);this.hooks.show=new We(this);this.hooks.content.register(this.handleLinks.bind(this));this.hooks.content.register(this.passEvents.bind(this));this.hooks.content.register(this.adjustImages.bind(this));this.book.spine.hooks.content.register(this.injectIdentifier.bind(this));if(this.settings.stylesheet){this.book.spine.hooks.content.register(this.injectStylesheet.bind(this))}if(this.settings.script){this.book.spine.hooks.content.register(this.injectScript.bind(this))}this.themes=new hr(this);this.annotations=new vr(this);this.epubcfi=new qe;this.q=new Zi(this);this.location=undefined;this.q.enqueue(this.book.opened);this.starting=new Ee;this.started=this.starting.promise;this.q.enqueue(this.start)}e.prototype.setManager=function(e){this.manager=e};e.prototype.requireManager=function(e){var t;if(typeof e==="string"&&e==="default"){t=bn}else if(typeof e==="string"&&e==="continuous"){t=kn}else{t=e}return t};e.prototype.requireView=function(e){var t;if(typeof e=="string"&&e==="iframe"){t=Er}else{t=e}return t};e.prototype.start=function(){if(!this.settings.layout&&(this.book.package.metadata.layout==="pre-paginated"||this.book.displayOptions.fixedLayout==="true")){this.settings.layout="pre-paginated"}if(!this.manager){this.ViewManager=this.requireManager(this.settings.manager);this.View=this.requireView(this.settings.view);this.manager=new this.ViewManager({view:this.View,queue:this.q,request:this.book.load.bind(this.book),settings:this.settings})}this.direction(this.book.package.metadata.direction);this.settings.globalLayoutProperties=this.determineLayoutProperties(this.book.package.metadata);this.flow(this.settings.globalLayoutProperties.flow);this.layout(this.settings.globalLayoutProperties);this.manager.on(Ki.MANAGERS.ADDED,this.afterDisplayed.bind(this));this.manager.on(Ki.MANAGERS.REMOVED,this.afterRemoved.bind(this));this.manager.on(Ki.MANAGERS.RESIZED,this.onResized.bind(this));this.manager.on(Ki.MANAGERS.ORIENTATION_CHANGE,this.onOrientationChange.bind(this));this.manager.on(Ki.MANAGERS.SCROLLED,this.reportLocation.bind(this));this.emit(Ki.RENDITION.STARTED);this.starting.resolve()};e.prototype.attachTo=function(e){return this.q.enqueue(function(){this.manager.render(e,{width:this.settings.width,height:this.settings.height});this.emit(Ki.RENDITION.ATTACHED)}.bind(this))};e.prototype.display=function(e){if(this.displaying){this.displaying.resolve()}return this.q.enqueue(this._display,e)};e.prototype._display=function(e){var t=this;if(!this.book){return}var i=this.epubcfi.isCfiString(e);var r=new Ee;var n=r.promise;var s;this.displaying=r;if(this.book.locations.length()&&K(e)){e=this.book.locations.cfiFromPercentage(parseFloat(e))}s=this.book.spine.get(e);if(!s){r.reject(new Error("No Section Found"));return n}this.manager.display(s,e).then((function(){r.resolve(s);t.displaying=undefined;t.emit(Ki.RENDITION.DISPLAYED,s);t.reportLocation()}),(function(e){t.emit(Ki.RENDITION.DISPLAY_ERROR,e)}));return n};e.prototype.afterDisplayed=function(e){var t=this;e.on(Ki.VIEWS.MARK_CLICKED,(function(i,r){return t.triggerMarkEvent(i,r,e.contents)}));this.hooks.render.trigger(e,this).then((function(){if(e.contents){t.hooks.content.trigger(e.contents,t).then((function(){t.emit(Ki.RENDITION.RENDERED,e.section,e)}))}else{t.emit(Ki.RENDITION.RENDERED,e.section,e)}}))};e.prototype.afterRemoved=function(e){var t=this;this.hooks.unloaded.trigger(e,this).then((function(){t.emit(Ki.RENDITION.REMOVED,e.section,e)}))};e.prototype.onResized=function(e,t){this.emit(Ki.RENDITION.RESIZED,{width:e.width,height:e.height},t);if(this.location&&this.location.start){this.display(t||this.location.start.cfi)}};e.prototype.onOrientationChange=function(e){this.emit(Ki.RENDITION.ORIENTATION_CHANGE,e)};e.prototype.moveTo=function(e){this.manager.moveTo(e)};e.prototype.resize=function(e,t,i){if(e){this.settings.width=e}if(t){this.settings.height=t}this.manager.resize(e,t,i)};e.prototype.clear=function(){this.manager.clear()};e.prototype.next=function(){return this.q.enqueue(this.manager.next.bind(this.manager)).then(this.reportLocation.bind(this))};e.prototype.prev=function(){return this.q.enqueue(this.manager.prev.bind(this.manager)).then(this.reportLocation.bind(this))};e.prototype.determineLayoutProperties=function(e){var t;var i=this.settings.layout||e.layout||"reflowable";var r=this.settings.spread||e.spread||"auto";var n=this.settings.orientation||e.orientation||"auto";var s=this.settings.flow||e.flow||"auto";var a=e.viewport||"";var o=this.settings.minSpreadWidth||e.minSpreadWidth||800;var h=this.settings.direction||e.direction||"ltr";t={layout:i,spread:r,orientation:n,flow:s,viewport:a,minSpreadWidth:o,direction:h};return t};e.prototype.flow=function(e){var t=e;if(e==="scrolled"||e==="scrolled-doc"||e==="scrolled-continuous"){t="scrolled"}if(e==="auto"||e==="paginated"){t="paginated"}this.settings.flow=e;if(this._layout){this._layout.flow(t)}if(this.manager&&this._layout){this.manager.applyLayout(this._layout)}if(this.manager){this.manager.updateFlow(t)}if(this.manager&&this.manager.isRendered()&&this.location){this.manager.clear();this.display(this.location.start.cfi)}};e.prototype.layout=function(e){var t=this;if(e){this._layout=new or(e);this._layout.spread(e.spread,this.settings.minSpreadWidth);this._layout.on(Ki.LAYOUT.UPDATED,(function(e,i){t.emit(Ki.RENDITION.LAYOUT,e,i)}))}if(this.manager&&this._layout){this.manager.applyLayout(this._layout)}return this._layout};e.prototype.spread=function(e,t){this.settings.spread=e;if(t){this.settings.minSpreadWidth=t}if(this._layout){this._layout.spread(e,t)}if(this.manager&&this.manager.isRendered()){this.manager.updateLayout()}};e.prototype.direction=function(e){this.settings.direction=e||"ltr";if(this.manager){this.manager.direction(this.settings.direction)}if(this.manager&&this.manager.isRendered()&&this.location){this.manager.clear();this.display(this.location.start.cfi)}};e.prototype.reportLocation=function(){return this.q.enqueue(function e(){requestAnimationFrame(function e(){var t=this.manager.currentLocation();if(t&&t.then&&typeof t.then==="function"){t.then(function(e){var t=this.located(e);if(!t||!t.start||!t.end){return}this.location=t;this.emit(Ki.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage});this.emit(Ki.RENDITION.RELOCATED,this.location)}.bind(this))}else if(t){var i=this.located(t);if(!i||!i.start||!i.end){return}this.location=i;this.emit(Ki.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage});this.emit(Ki.RENDITION.RELOCATED,this.location)}}.bind(this))}.bind(this))};e.prototype.currentLocation=function(){var e=this.manager.currentLocation();if(e&&e.then&&typeof e.then==="function"){e.then(function(e){var t=this.located(e);return t}.bind(this))}else if(e){var t=this.located(e);return t}};e.prototype.located=function(e){if(!e.length){return{}}var t=e[0];var i=e[e.length-1];var r={start:{index:t.index,href:t.href,cfi:t.mapping.start,displayed:{page:t.pages[0]||1,total:t.totalPages}},end:{index:i.index,href:i.href,cfi:i.mapping.end,displayed:{page:i.pages[i.pages.length-1]||1,total:i.totalPages}}};var n=this.book.locations.locationFromCfi(t.mapping.start);var s=this.book.locations.locationFromCfi(i.mapping.end);if(n!=null){r.start.location=n;r.start.percentage=this.book.locations.percentageFromLocation(n)}if(s!=null){r.end.location=s;r.end.percentage=this.book.locations.percentageFromLocation(s)}var a=this.book.pageList.pageFromCfi(t.mapping.start);var o=this.book.pageList.pageFromCfi(i.mapping.end);if(a!=-1){r.start.page=a}if(o!=-1){r.end.page=o}if(i.index===this.book.spine.last().index&&r.end.displayed.page>=r.end.displayed.total){r.atEnd=true}if(t.index===this.book.spine.first().index&&r.start.displayed.page===1){r.atStart=true}return r};e.prototype.destroy=function(){this.manager&&this.manager.destroy();this.book=undefined};e.prototype.passEvents=function(e){var t=this;Xi.forEach((function(i){e.on(i,(function(i){return t.triggerViewEvent(i,e)}))}));e.on(Ki.CONTENTS.SELECTED,(function(i){return t.triggerSelectedEvent(i,e)}))};e.prototype.triggerViewEvent=function(e,t){this.emit(e.type,e,t)};e.prototype.triggerSelectedEvent=function(e,t){this.emit(Ki.RENDITION.SELECTED,e,t)};e.prototype.triggerMarkEvent=function(e,t,i){this.emit(Ki.RENDITION.MARK_CLICKED,e,t,i)};e.prototype.getRange=function(e,t){var i=new qe(e);var r=this.manager.visible().filter((function(e){if(i.spinePos===e.index)return true}));if(r.length){return r[0].contents.range(i,t)}};e.prototype.adjustImages=function(e){if(this._layout.name==="pre-paginated"){return new Promise((function(e){e()}))}var t=e.window.getComputedStyle(e.content,null);var i=(e.content.offsetHeight-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)))*.95;var r=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight);e.addStylesheetRules({img:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-r+"px":"100%")+"!important","max-height":i+"px"+"!important","object-fit":"contain","page-break-inside":"avoid","break-inside":"avoid","box-sizing":"border-box"},svg:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-r+"px":"100%")+"!important","max-height":i+"px"+"!important","page-break-inside":"avoid","break-inside":"avoid"}});return new Promise((function(e,t){setTimeout((function(){e()}),1)}))};e.prototype.getContents=function(){return this.manager?this.manager.getContents():[]};e.prototype.views=function(){var e=this.manager?this.manager.views:undefined;return e||[]};e.prototype.handleLinks=function(e){var t=this;if(e){e.on(Ki.CONTENTS.LINK_CLICKED,(function(e){var i=t.book.path.relative(e);t.display(i)}))}};e.prototype.injectStylesheet=function(e,t){var i=e.createElement("link");i.setAttribute("type","text/css");i.setAttribute("rel","stylesheet");i.setAttribute("href",this.settings.stylesheet);e.getElementsByTagName("head")[0].appendChild(i)};e.prototype.injectScript=function(e,t){var i=e.createElement("script");i.setAttribute("type","text/javascript");i.setAttribute("src",this.settings.script);i.textContent=" ";e.getElementsByTagName("head")[0].appendChild(i)};e.prototype.injectIdentifier=function(e,t){var i=this.book.packaging.metadata.identifier;var r=e.createElement("meta");r.setAttribute("name","dc.relation.ispartof");if(i){r.setAttribute("content",i)}e.getElementsByTagName("head")[0].appendChild(r)};return e}();M(Sn.prototype);function Cn(e,t,i,r){var n=typeof window!="undefined"?window.URL:false;var s=n?"blob":"arraybuffer";var a=new Ee;var o=new XMLHttpRequest;var h=XMLHttpRequest.prototype;var f;if(!("overrideMimeType"in h)){Object.defineProperty(h,"overrideMimeType",{value:function e(){}})}if(i){o.withCredentials=true}o.onreadystatechange=l;o.onerror=u;o.open("GET",e,true);for(f in r){o.setRequestHeader(f,r[f])}if(t=="json"){o.setRequestHeader("Accept","application/json")}if(!t){t=new Be(e).extension}if(t=="blob"){o.responseType=s}if(fe(t)){o.overrideMimeType("text/xml")}if(t=="binary"){o.responseType="arraybuffer"}o.send();function u(e){a.reject(e)}function l(){if(this.readyState===XMLHttpRequest.DONE){var e=false;if(this.responseType===""||this.responseType==="document"){e=this.responseXML}if(this.status===200||this.status===0||e){var i;if(!this.response&&!e){a.reject({status:this.status,message:"Empty Response",stack:(new Error).stack});return a.promise}if(this.status===403){a.reject({status:this.status,response:this.response,message:"Forbidden",stack:(new Error).stack});return a.promise}if(e){i=this.responseXML}else if(fe(t)){i=ve(this.response,"text/xml")}else if(t=="xhtml"){i=ve(this.response,"application/xhtml+xml")}else if(t=="html"||t=="htm"){i=ve(this.response,"text/html")}else if(t=="json"){i=JSON.parse(this.response)}else if(t=="blob"){if(n){i=this.response}else{i=new Blob([this.response])}}else{i=this.response}a.resolve(i)}else{a.reject({status:this.status,message:this.response,stack:(new Error).stack})}}}return a.promise}var Tn=typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{};var Rn=[];var An=[];var Nn=typeof Uint8Array!=="undefined"?Uint8Array:Array;var On=false;function Ln(){On=true;var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var t=0,i=e.length;t<i;++t){Rn[t]=e[t];An[e.charCodeAt(t)]=t}An["-".charCodeAt(0)]=62;An["_".charCodeAt(0)]=63}function In(e){if(!On){Ln()}var t,i,r,n,s,a;var o=e.length;if(o%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}s=e[o-2]==="="?2:e[o-1]==="="?1:0;a=new Nn(o*3/4-s);r=s>0?o-4:o;var h=0;for(t=0,i=0;t<r;t+=4,i+=3){n=An[e.charCodeAt(t)]<<18|An[e.charCodeAt(t+1)]<<12|An[e.charCodeAt(t+2)]<<6|An[e.charCodeAt(t+3)];a[h++]=n>>16&255;a[h++]=n>>8&255;a[h++]=n&255}if(s===2){n=An[e.charCodeAt(t)]<<2|An[e.charCodeAt(t+1)]>>4;a[h++]=n&255}else if(s===1){n=An[e.charCodeAt(t)]<<10|An[e.charCodeAt(t+1)]<<4|An[e.charCodeAt(t+2)]>>2;a[h++]=n>>8&255;a[h++]=n&255}return a}function Dn(e){return Rn[e>>18&63]+Rn[e>>12&63]+Rn[e>>6&63]+Rn[e&63]}function zn(e,t,i){var r;var n=[];for(var s=t;s<i;s+=3){r=(e[s]<<16)+(e[s+1]<<8)+e[s+2];n.push(Dn(r))}return n.join("")}function Pn(e){if(!On){Ln()}var t;var i=e.length;var r=i%3;var n="";var s=[];var a=16383;for(var o=0,h=i-r;o<h;o+=a){s.push(zn(e,o,o+a>h?h:o+a))}if(r===1){t=e[i-1];n+=Rn[t>>2];n+=Rn[t<<4&63];n+="=="}else if(r===2){t=(e[i-2]<<8)+e[i-1];n+=Rn[t>>10];n+=Rn[t>>4&63];n+=Rn[t<<2&63];n+="="}s.push(n);return s.join("")}function Bn(e,t,i,r,n){var s,a;var o=n*8-r-1;var h=(1<<o)-1;var f=h>>1;var u=-7;var l=i?n-1:0;var c=i?-1:1;var d=e[t+l];l+=c;s=d&(1<<-u)-1;d>>=-u;u+=o;for(;u>0;s=s*256+e[t+l],l+=c,u-=8){}a=s&(1<<-u)-1;s>>=-u;u+=r;for(;u>0;a=a*256+e[t+l],l+=c,u-=8){}if(s===0){s=1-f}else if(s===h){return a?NaN:(d?-1:1)*Infinity}else{a=a+Math.pow(2,r);s=s-f}return(d?-1:1)*a*Math.pow(2,s-r)}function jn(e,t,i,r,n,s){var a,o,h;var f=s*8-n-1;var u=(1<<f)-1;var l=u>>1;var c=n===23?Math.pow(2,-24)-Math.pow(2,-77):0;var d=r?0:s-1;var p=r?1:-1;var v=t<0||t===0&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||t===Infinity){o=isNaN(t)?1:0;a=u}else{a=Math.floor(Math.log(t)/Math.LN2);if(t*(h=Math.pow(2,-a))<1){a--;h*=2}if(a+l>=1){t+=c/h}else{t+=c*Math.pow(2,1-l)}if(t*h>=2){a++;h/=2}if(a+l>=u){o=0;a=u}else if(a+l>=1){o=(t*h-1)*Math.pow(2,n);a=a+l}else{o=t*Math.pow(2,l-1)*Math.pow(2,n);a=0}}for(;n>=8;e[i+d]=o&255,d+=p,o/=256,n-=8){}a=a<<n|o;f+=n;for(;f>0;e[i+d]=a&255,d+=p,a/=256,f-=8){}e[i+d-p]|=v*128}var Un={}.toString;var Mn=Array.isArray||function(e){return Un.call(e)=="[object Array]"};
/*!
             * The buffer module from node.js, for the browser.
             *
             * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
             * @license  MIT
             */var Fn=50;Hn.TYPED_ARRAY_SUPPORT=Tn.TYPED_ARRAY_SUPPORT!==undefined?Tn.TYPED_ARRAY_SUPPORT:true;function qn(){return Hn.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Wn(e,t){if(qn()<t){throw new RangeError("Invalid typed array length")}if(Hn.TYPED_ARRAY_SUPPORT){e=new Uint8Array(t);e.__proto__=Hn.prototype}else{if(e===null){e=new Hn(t)}e.length=t}return e}function Hn(e,t,i){if(!Hn.TYPED_ARRAY_SUPPORT&&!(this instanceof Hn)){return new Hn(e,t,i)}if(typeof e==="number"){if(typeof t==="string"){throw new Error("If encoding is specified then the first argument must be a string")}return Xn(this,e)}return Yn(this,e,t,i)}Hn.poolSize=8192;Hn._augment=function(e){e.__proto__=Hn.prototype;return e};function Yn(e,t,i,r){if(typeof t==="number"){throw new TypeError('"value" argument must not be a number')}if(typeof ArrayBuffer!=="undefined"&&t instanceof ArrayBuffer){return $n(e,t,i,r)}if(typeof t==="string"){return Kn(e,t,i)}return Jn(e,t)}Hn.from=function(e,t,i){return Yn(null,e,t,i)};if(Hn.TYPED_ARRAY_SUPPORT){Hn.prototype.__proto__=Uint8Array.prototype;Hn.__proto__=Uint8Array}function Zn(e){if(typeof e!=="number"){throw new TypeError('"size" argument must be a number')}else if(e<0){throw new RangeError('"size" argument must not be negative')}}function Vn(e,t,i,r){Zn(t);if(t<=0){return Wn(e,t)}if(i!==undefined){return typeof r==="string"?Wn(e,t).fill(i,r):Wn(e,t).fill(i)}return Wn(e,t)}Hn.alloc=function(e,t,i){return Vn(null,e,t,i)};function Xn(e,t){Zn(t);e=Wn(e,t<0?0:Qn(t)|0);if(!Hn.TYPED_ARRAY_SUPPORT){for(var i=0;i<t;++i){e[i]=0}}return e}Hn.allocUnsafe=function(e){return Xn(null,e)};Hn.allocUnsafeSlow=function(e){return Xn(null,e)};function Kn(e,t,i){if(typeof i!=="string"||i===""){i="utf8"}if(!Hn.isEncoding(i)){throw new TypeError('"encoding" must be a valid string encoding')}var r=ts(t,i)|0;e=Wn(e,r);var n=e.write(t,i);if(n!==r){e=e.slice(0,n)}return e}function Gn(e,t){var i=t.length<0?0:Qn(t.length)|0;e=Wn(e,i);for(var r=0;r<i;r+=1){e[r]=t[r]&255}return e}function $n(e,t,i,r){if(i<0||t.byteLength<i){throw new RangeError("'offset' is out of bounds")}if(t.byteLength<i+(r||0)){throw new RangeError("'length' is out of bounds")}if(i===undefined&&r===undefined){t=new Uint8Array(t)}else if(r===undefined){t=new Uint8Array(t,i)}else{t=new Uint8Array(t,i,r)}if(Hn.TYPED_ARRAY_SUPPORT){e=t;e.__proto__=Hn.prototype}else{e=Gn(e,t)}return e}function Jn(e,t){if(es(t)){var i=Qn(t.length)|0;e=Wn(e,i);if(e.length===0){return e}t.copy(e,0,0,i);return e}if(t){if(typeof ArrayBuffer!=="undefined"&&t.buffer instanceof ArrayBuffer||"length"in t){if(typeof t.length!=="number"||Ps(t.length)){return Wn(e,0)}return Gn(e,t)}if(t.type==="Buffer"&&Mn(t.data)){return Gn(e,t.data)}}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Qn(e){if(e>=qn()){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+qn().toString(16)+" bytes")}return e|0}Hn.isBuffer=Bs;function es(e){return!!(e!=null&&e._isBuffer)}Hn.compare=function e(t,i){if(!es(t)||!es(i)){throw new TypeError("Arguments must be Buffers")}if(t===i)return 0;var r=t.length;var n=i.length;for(var s=0,a=Math.min(r,n);s<a;++s){if(t[s]!==i[s]){r=t[s];n=i[s];break}}if(r<n)return-1;if(n<r)return 1;return 0};Hn.isEncoding=function e(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};Hn.concat=function e(t,i){if(!Mn(t)){throw new TypeError('"list" argument must be an Array of Buffers')}if(t.length===0){return Hn.alloc(0)}var r;if(i===undefined){i=0;for(r=0;r<t.length;++r){i+=t[r].length}}var n=Hn.allocUnsafe(i);var s=0;for(r=0;r<t.length;++r){var a=t[r];if(!es(a)){throw new TypeError('"list" argument must be an Array of Buffers')}a.copy(n,s);s+=a.length}return n};function ts(e,t){if(es(e)){return e.length}if(typeof ArrayBuffer!=="undefined"&&typeof ArrayBuffer.isView==="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)){return e.byteLength}if(typeof e!=="string"){e=""+e}var i=e.length;if(i===0)return 0;var r=false;for(;;){switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case undefined:return Os(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i*2;case"hex":return i>>>1;case"base64":return Ds(e).length;default:if(r)return Os(e).length;t=(""+t).toLowerCase();r=true}}}Hn.byteLength=ts;function is(e,t,i){var r=false;if(t===undefined||t<0){t=0}if(t>this.length){return""}if(i===undefined||i>this.length){i=this.length}if(i<=0){return""}i>>>=0;t>>>=0;if(i<=t){return""}if(!e)e="utf8";while(true){switch(e){case"hex":return ys(this,t,i);case"utf8":case"utf-8":return ds(this,t,i);case"ascii":return gs(this,t,i);case"latin1":case"binary":return ms(this,t,i);case"base64":return cs(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ws(this,t,i);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();r=true}}}Hn.prototype._isBuffer=true;function rs(e,t,i){var r=e[t];e[t]=e[i];e[i]=r}Hn.prototype.swap16=function e(){var t=this.length;if(t%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var i=0;i<t;i+=2){rs(this,i,i+1)}return this};Hn.prototype.swap32=function e(){var t=this.length;if(t%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var i=0;i<t;i+=4){rs(this,i,i+3);rs(this,i+1,i+2)}return this};Hn.prototype.swap64=function e(){var t=this.length;if(t%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var i=0;i<t;i+=8){rs(this,i,i+7);rs(this,i+1,i+6);rs(this,i+2,i+5);rs(this,i+3,i+4)}return this};Hn.prototype.toString=function e(){var t=this.length|0;if(t===0)return"";if(arguments.length===0)return ds(this,0,t);return is.apply(this,arguments)};Hn.prototype.equals=function e(t){if(!es(t))throw new TypeError("Argument must be a Buffer");if(this===t)return true;return Hn.compare(this,t)===0};Hn.prototype.inspect=function e(){var t="";var i=Fn;if(this.length>0){t=this.toString("hex",0,i).match(/.{2}/g).join(" ");if(this.length>i)t+=" ... "}return"<Buffer "+t+">"};Hn.prototype.compare=function e(t,i,r,n,s){if(!es(t)){throw new TypeError("Argument must be a Buffer")}if(i===undefined){i=0}if(r===undefined){r=t?t.length:0}if(n===undefined){n=0}if(s===undefined){s=this.length}if(i<0||r>t.length||n<0||s>this.length){throw new RangeError("out of range index")}if(n>=s&&i>=r){return 0}if(n>=s){return-1}if(i>=r){return 1}i>>>=0;r>>>=0;n>>>=0;s>>>=0;if(this===t)return 0;var a=s-n;var o=r-i;var h=Math.min(a,o);var f=this.slice(n,s);var u=t.slice(i,r);for(var l=0;l<h;++l){if(f[l]!==u[l]){a=f[l];o=u[l];break}}if(a<o)return-1;if(o<a)return 1;return 0};function ns(e,t,i,r,n){if(e.length===0)return-1;if(typeof i==="string"){r=i;i=0}else if(i>2147483647){i=2147483647}else if(i<-2147483648){i=-2147483648}i=+i;if(isNaN(i)){i=n?0:e.length-1}if(i<0)i=e.length+i;if(i>=e.length){if(n)return-1;else i=e.length-1}else if(i<0){if(n)i=0;else return-1}if(typeof t==="string"){t=Hn.from(t,r)}if(es(t)){if(t.length===0){return-1}return ss(e,t,i,r,n)}else if(typeof t==="number"){t=t&255;if(Hn.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf==="function"){if(n){return Uint8Array.prototype.indexOf.call(e,t,i)}else{return Uint8Array.prototype.lastIndexOf.call(e,t,i)}}return ss(e,[t],i,r,n)}throw new TypeError("val must be string, number or Buffer")}function ss(e,t,i,r,n){var s=1;var a=e.length;var o=t.length;if(r!==undefined){r=String(r).toLowerCase();if(r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le"){if(e.length<2||t.length<2){return-1}s=2;a/=2;o/=2;i/=2}}function h(e,t){if(s===1){return e[t]}else{return e.readUInt16BE(t*s)}}var f;if(n){var u=-1;for(f=i;f<a;f++){if(h(e,f)===h(t,u===-1?0:f-u)){if(u===-1)u=f;if(f-u+1===o)return u*s}else{if(u!==-1)f-=f-u;u=-1}}}else{if(i+o>a)i=a-o;for(f=i;f>=0;f--){var l=true;for(var c=0;c<o;c++){if(h(e,f+c)!==h(t,c)){l=false;break}}if(l)return f}}return-1}Hn.prototype.includes=function e(t,i,r){return this.indexOf(t,i,r)!==-1};Hn.prototype.indexOf=function e(t,i,r){return ns(this,t,i,r,true)};Hn.prototype.lastIndexOf=function e(t,i,r){return ns(this,t,i,r,false)};function as(e,t,i,r){i=Number(i)||0;var n=e.length-i;if(!r){r=n}else{r=Number(r);if(r>n){r=n}}var s=t.length;if(s%2!==0)throw new TypeError("Invalid hex string");if(r>s/2){r=s/2}for(var a=0;a<r;++a){var o=parseInt(t.substr(a*2,2),16);if(isNaN(o))return a;e[i+a]=o}return a}function os(e,t,i,r){return zs(Os(t,e.length-i),e,i,r)}function hs(e,t,i,r){return zs(Ls(t),e,i,r)}function fs(e,t,i,r){return hs(e,t,i,r)}function us(e,t,i,r){return zs(Ds(t),e,i,r)}function ls(e,t,i,r){return zs(Is(t,e.length-i),e,i,r)}Hn.prototype.write=function e(t,i,r,n){if(i===undefined){n="utf8";r=this.length;i=0}else if(r===undefined&&typeof i==="string"){n=i;r=this.length;i=0}else if(isFinite(i)){i=i|0;if(isFinite(r)){r=r|0;if(n===undefined)n="utf8"}else{n=r;r=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var s=this.length-i;if(r===undefined||r>s)r=s;if(t.length>0&&(r<0||i<0)||i>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!n)n="utf8";var a=false;for(;;){switch(n){case"hex":return as(this,t,i,r);case"utf8":case"utf-8":return os(this,t,i,r);case"ascii":return hs(this,t,i,r);case"latin1":case"binary":return fs(this,t,i,r);case"base64":return us(this,t,i,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ls(this,t,i,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase();a=true}}};Hn.prototype.toJSON=function e(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function cs(e,t,i){if(t===0&&i===e.length){return Pn(e)}else{return Pn(e.slice(t,i))}}function ds(e,t,i){i=Math.min(e.length,i);var r=[];var n=t;while(n<i){var s=e[n];var a=null;var o=s>239?4:s>223?3:s>191?2:1;if(n+o<=i){var h,f,u,l;switch(o){case 1:if(s<128){a=s}break;case 2:h=e[n+1];if((h&192)===128){l=(s&31)<<6|h&63;if(l>127){a=l}}break;case 3:h=e[n+1];f=e[n+2];if((h&192)===128&&(f&192)===128){l=(s&15)<<12|(h&63)<<6|f&63;if(l>2047&&(l<55296||l>57343)){a=l}}break;case 4:h=e[n+1];f=e[n+2];u=e[n+3];if((h&192)===128&&(f&192)===128&&(u&192)===128){l=(s&15)<<18|(h&63)<<12|(f&63)<<6|u&63;if(l>65535&&l<1114112){a=l}}}}if(a===null){a=65533;o=1}else if(a>65535){a-=65536;r.push(a>>>10&1023|55296);a=56320|a&1023}r.push(a);n+=o}return vs(r)}var ps=4096;function vs(e){var t=e.length;if(t<=ps){return String.fromCharCode.apply(String,e)}var i="";var r=0;while(r<t){i+=String.fromCharCode.apply(String,e.slice(r,r+=ps))}return i}function gs(e,t,i){var r="";i=Math.min(e.length,i);for(var n=t;n<i;++n){r+=String.fromCharCode(e[n]&127)}return r}function ms(e,t,i){var r="";i=Math.min(e.length,i);for(var n=t;n<i;++n){r+=String.fromCharCode(e[n])}return r}function ys(e,t,i){var r=e.length;if(!t||t<0)t=0;if(!i||i<0||i>r)i=r;var n="";for(var s=t;s<i;++s){n+=Ns(e[s])}return n}function ws(e,t,i){var r=e.slice(t,i);var n="";for(var s=0;s<r.length;s+=2){n+=String.fromCharCode(r[s]+r[s+1]*256)}return n}Hn.prototype.slice=function e(t,i){var r=this.length;t=~~t;i=i===undefined?r:~~i;if(t<0){t+=r;if(t<0)t=0}else if(t>r){t=r}if(i<0){i+=r;if(i<0)i=0}else if(i>r){i=r}if(i<t)i=t;var n;if(Hn.TYPED_ARRAY_SUPPORT){n=this.subarray(t,i);n.__proto__=Hn.prototype}else{var s=i-t;n=new Hn(s,undefined);for(var a=0;a<s;++a){n[a]=this[a+t]}}return n};function bs(e,t,i){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}Hn.prototype.readUIntLE=function e(t,i,r){t=t|0;i=i|0;if(!r)bs(t,i,this.length);var n=this[t];var s=1;var a=0;while(++a<i&&(s*=256)){n+=this[t+a]*s}return n};Hn.prototype.readUIntBE=function e(t,i,r){t=t|0;i=i|0;if(!r){bs(t,i,this.length)}var n=this[t+--i];var s=1;while(i>0&&(s*=256)){n+=this[t+--i]*s}return n};Hn.prototype.readUInt8=function e(t,i){if(!i)bs(t,1,this.length);return this[t]};Hn.prototype.readUInt16LE=function e(t,i){if(!i)bs(t,2,this.length);return this[t]|this[t+1]<<8};Hn.prototype.readUInt16BE=function e(t,i){if(!i)bs(t,2,this.length);return this[t]<<8|this[t+1]};Hn.prototype.readUInt32LE=function e(t,i){if(!i)bs(t,4,this.length);return(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};Hn.prototype.readUInt32BE=function e(t,i){if(!i)bs(t,4,this.length);return this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};Hn.prototype.readIntLE=function e(t,i,r){t=t|0;i=i|0;if(!r)bs(t,i,this.length);var n=this[t];var s=1;var a=0;while(++a<i&&(s*=256)){n+=this[t+a]*s}s*=128;if(n>=s)n-=Math.pow(2,8*i);return n};Hn.prototype.readIntBE=function e(t,i,r){t=t|0;i=i|0;if(!r)bs(t,i,this.length);var n=i;var s=1;var a=this[t+--n];while(n>0&&(s*=256)){a+=this[t+--n]*s}s*=128;if(a>=s)a-=Math.pow(2,8*i);return a};Hn.prototype.readInt8=function e(t,i){if(!i)bs(t,1,this.length);if(!(this[t]&128))return this[t];return(255-this[t]+1)*-1};Hn.prototype.readInt16LE=function e(t,i){if(!i)bs(t,2,this.length);var r=this[t]|this[t+1]<<8;return r&32768?r|4294901760:r};Hn.prototype.readInt16BE=function e(t,i){if(!i)bs(t,2,this.length);var r=this[t+1]|this[t]<<8;return r&32768?r|4294901760:r};Hn.prototype.readInt32LE=function e(t,i){if(!i)bs(t,4,this.length);return this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};Hn.prototype.readInt32BE=function e(t,i){if(!i)bs(t,4,this.length);return this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};Hn.prototype.readFloatLE=function e(t,i){if(!i)bs(t,4,this.length);return Bn(this,t,true,23,4)};Hn.prototype.readFloatBE=function e(t,i){if(!i)bs(t,4,this.length);return Bn(this,t,false,23,4)};Hn.prototype.readDoubleLE=function e(t,i){if(!i)bs(t,8,this.length);return Bn(this,t,true,52,8)};Hn.prototype.readDoubleBE=function e(t,i){if(!i)bs(t,8,this.length);return Bn(this,t,false,52,8)};function _s(e,t,i,r,n,s){if(!es(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<s)throw new RangeError('"value" argument is out of bounds');if(i+r>e.length)throw new RangeError("Index out of range")}Hn.prototype.writeUIntLE=function e(t,i,r,n){t=+t;i=i|0;r=r|0;if(!n){var s=Math.pow(2,8*r)-1;_s(this,t,i,r,s,0)}var a=1;var o=0;this[i]=t&255;while(++o<r&&(a*=256)){this[i+o]=t/a&255}return i+r};Hn.prototype.writeUIntBE=function e(t,i,r,n){t=+t;i=i|0;r=r|0;if(!n){var s=Math.pow(2,8*r)-1;_s(this,t,i,r,s,0)}var a=r-1;var o=1;this[i+a]=t&255;while(--a>=0&&(o*=256)){this[i+a]=t/o&255}return i+r};Hn.prototype.writeUInt8=function e(t,i,r){t=+t;i=i|0;if(!r)_s(this,t,i,1,255,0);if(!Hn.TYPED_ARRAY_SUPPORT)t=Math.floor(t);this[i]=t&255;return i+1};function xs(e,t,i,r){if(t<0)t=65535+t+1;for(var n=0,s=Math.min(e.length-i,2);n<s;++n){e[i+n]=(t&255<<8*(r?n:1-n))>>>(r?n:1-n)*8}}Hn.prototype.writeUInt16LE=function e(t,i,r){t=+t;i=i|0;if(!r)_s(this,t,i,2,65535,0);if(Hn.TYPED_ARRAY_SUPPORT){this[i]=t&255;this[i+1]=t>>>8}else{xs(this,t,i,true)}return i+2};Hn.prototype.writeUInt16BE=function e(t,i,r){t=+t;i=i|0;if(!r)_s(this,t,i,2,65535,0);if(Hn.TYPED_ARRAY_SUPPORT){this[i]=t>>>8;this[i+1]=t&255}else{xs(this,t,i,false)}return i+2};function Es(e,t,i,r){if(t<0)t=4294967295+t+1;for(var n=0,s=Math.min(e.length-i,4);n<s;++n){e[i+n]=t>>>(r?n:3-n)*8&255}}Hn.prototype.writeUInt32LE=function e(t,i,r){t=+t;i=i|0;if(!r)_s(this,t,i,4,4294967295,0);if(Hn.TYPED_ARRAY_SUPPORT){this[i+3]=t>>>24;this[i+2]=t>>>16;this[i+1]=t>>>8;this[i]=t&255}else{Es(this,t,i,true)}return i+4};Hn.prototype.writeUInt32BE=function e(t,i,r){t=+t;i=i|0;if(!r)_s(this,t,i,4,4294967295,0);if(Hn.TYPED_ARRAY_SUPPORT){this[i]=t>>>24;this[i+1]=t>>>16;this[i+2]=t>>>8;this[i+3]=t&255}else{Es(this,t,i,false)}return i+4};Hn.prototype.writeIntLE=function e(t,i,r,n){t=+t;i=i|0;if(!n){var s=Math.pow(2,8*r-1);_s(this,t,i,r,s-1,-s)}var a=0;var o=1;var h=0;this[i]=t&255;while(++a<r&&(o*=256)){if(t<0&&h===0&&this[i+a-1]!==0){h=1}this[i+a]=(t/o>>0)-h&255}return i+r};Hn.prototype.writeIntBE=function e(t,i,r,n){t=+t;i=i|0;if(!n){var s=Math.pow(2,8*r-1);_s(this,t,i,r,s-1,-s)}var a=r-1;var o=1;var h=0;this[i+a]=t&255;while(--a>=0&&(o*=256)){if(t<0&&h===0&&this[i+a+1]!==0){h=1}this[i+a]=(t/o>>0)-h&255}return i+r};Hn.prototype.writeInt8=function e(t,i,r){t=+t;i=i|0;if(!r)_s(this,t,i,1,127,-128);if(!Hn.TYPED_ARRAY_SUPPORT)t=Math.floor(t);if(t<0)t=255+t+1;this[i]=t&255;return i+1};Hn.prototype.writeInt16LE=function e(t,i,r){t=+t;i=i|0;if(!r)_s(this,t,i,2,32767,-32768);if(Hn.TYPED_ARRAY_SUPPORT){this[i]=t&255;this[i+1]=t>>>8}else{xs(this,t,i,true)}return i+2};Hn.prototype.writeInt16BE=function e(t,i,r){t=+t;i=i|0;if(!r)_s(this,t,i,2,32767,-32768);if(Hn.TYPED_ARRAY_SUPPORT){this[i]=t>>>8;this[i+1]=t&255}else{xs(this,t,i,false)}return i+2};Hn.prototype.writeInt32LE=function e(t,i,r){t=+t;i=i|0;if(!r)_s(this,t,i,4,2147483647,-2147483648);if(Hn.TYPED_ARRAY_SUPPORT){this[i]=t&255;this[i+1]=t>>>8;this[i+2]=t>>>16;this[i+3]=t>>>24}else{Es(this,t,i,true)}return i+4};Hn.prototype.writeInt32BE=function e(t,i,r){t=+t;i=i|0;if(!r)_s(this,t,i,4,2147483647,-2147483648);if(t<0)t=4294967295+t+1;if(Hn.TYPED_ARRAY_SUPPORT){this[i]=t>>>24;this[i+1]=t>>>16;this[i+2]=t>>>8;this[i+3]=t&255}else{Es(this,t,i,false)}return i+4};function ks(e,t,i,r,n,s){if(i+r>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function Ss(e,t,i,r,n){if(!n){ks(e,t,i,4)}jn(e,t,i,r,23,4);return i+4}Hn.prototype.writeFloatLE=function e(t,i,r){return Ss(this,t,i,true,r)};Hn.prototype.writeFloatBE=function e(t,i,r){return Ss(this,t,i,false,r)};function Cs(e,t,i,r,n){if(!n){ks(e,t,i,8)}jn(e,t,i,r,52,8);return i+8}Hn.prototype.writeDoubleLE=function e(t,i,r){return Cs(this,t,i,true,r)};Hn.prototype.writeDoubleBE=function e(t,i,r){return Cs(this,t,i,false,r)};Hn.prototype.copy=function e(t,i,r,n){if(!r)r=0;if(!n&&n!==0)n=this.length;if(i>=t.length)i=t.length;if(!i)i=0;if(n>0&&n<r)n=r;if(n===r)return 0;if(t.length===0||this.length===0)return 0;if(i<0){throw new RangeError("targetStart out of bounds")}if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");if(n>this.length)n=this.length;if(t.length-i<n-r){n=t.length-i+r}var s=n-r;var a;if(this===t&&r<i&&i<n){for(a=s-1;a>=0;--a){t[a+i]=this[a+r]}}else if(s<1e3||!Hn.TYPED_ARRAY_SUPPORT){for(a=0;a<s;++a){t[a+i]=this[a+r]}}else{Uint8Array.prototype.set.call(t,this.subarray(r,r+s),i)}return s};Hn.prototype.fill=function e(t,i,r,n){if(typeof t==="string"){if(typeof i==="string"){n=i;i=0;r=this.length}else if(typeof r==="string"){n=r;r=this.length}if(t.length===1){var s=t.charCodeAt(0);if(s<256){t=s}}if(n!==undefined&&typeof n!=="string"){throw new TypeError("encoding must be a string")}if(typeof n==="string"&&!Hn.isEncoding(n)){throw new TypeError("Unknown encoding: "+n)}}else if(typeof t==="number"){t=t&255}if(i<0||this.length<i||this.length<r){throw new RangeError("Out of range index")}if(r<=i){return this}i=i>>>0;r=r===undefined?this.length:r>>>0;if(!t)t=0;var a;if(typeof t==="number"){for(a=i;a<r;++a){this[a]=t}}else{var o=es(t)?t:Os(new Hn(t,n).toString());var h=o.length;for(a=0;a<r-i;++a){this[a+i]=o[a%h]}}return this};var Ts=/[^+\/0-9A-Za-z-_]/g;function Rs(e){e=As(e).replace(Ts,"");if(e.length<2)return"";while(e.length%4!==0){e=e+"="}return e}function As(e){if(e.trim)return e.trim();return e.replace(/^\s+|\s+$/g,"")}function Ns(e){if(e<16)return"0"+e.toString(16);return e.toString(16)}function Os(e,t){t=t||Infinity;var i;var r=e.length;var n=null;var s=[];for(var a=0;a<r;++a){i=e.charCodeAt(a);if(i>55295&&i<57344){if(!n){if(i>56319){if((t-=3)>-1)s.push(239,191,189);continue}else if(a+1===r){if((t-=3)>-1)s.push(239,191,189);continue}n=i;continue}if(i<56320){if((t-=3)>-1)s.push(239,191,189);n=i;continue}i=(n-55296<<10|i-56320)+65536}else if(n){if((t-=3)>-1)s.push(239,191,189)}n=null;if(i<128){if((t-=1)<0)break;s.push(i)}else if(i<2048){if((t-=2)<0)break;s.push(i>>6|192,i&63|128)}else if(i<65536){if((t-=3)<0)break;s.push(i>>12|224,i>>6&63|128,i&63|128)}else if(i<1114112){if((t-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}else{throw new Error("Invalid code point")}}return s}function Ls(e){var t=[];for(var i=0;i<e.length;++i){t.push(e.charCodeAt(i)&255)}return t}function Is(e,t){var i,r,n;var s=[];for(var a=0;a<e.length;++a){if((t-=2)<0)break;i=e.charCodeAt(a);r=i>>8;n=i%256;s.push(n);s.push(r)}return s}function Ds(e){return In(Rs(e))}function zs(e,t,i,r){for(var n=0;n<r;++n){if(n+i>=t.length||n>=e.length)break;t[n+i]=e[n]}return n}function Ps(e){return e!==e}function Bs(e){return e!=null&&(!!e._isBuffer||js(e)||Us(e))}function js(e){return!!e.constructor&&typeof e.constructor.isBuffer==="function"&&e.constructor.isBuffer(e)}function Us(e){return typeof e.readFloatLE==="function"&&typeof e.slice==="function"&&js(e.slice(0,0))}function Ms(){}Ms.prototype=Object.create(null);function Fs(){Fs.init.call(this)}Fs.EventEmitter=Fs;Fs.usingDomains=false;Fs.prototype.domain=undefined;Fs.prototype._events=undefined;Fs.prototype._maxListeners=undefined;Fs.defaultMaxListeners=10;Fs.init=function(){this.domain=null;if(!this._events||this._events===Object.getPrototypeOf(this)._events){this._events=new Ms;this._eventsCount=0}this._maxListeners=this._maxListeners||undefined};Fs.prototype.setMaxListeners=function e(t){if(typeof t!=="number"||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');this._maxListeners=t;return this};function qs(e){if(e._maxListeners===undefined)return Fs.defaultMaxListeners;return e._maxListeners}Fs.prototype.getMaxListeners=function e(){return qs(this)};function Ws(e,t,i){if(t)e.call(i);else{var r=e.length;var n=Qs(e,r);for(var s=0;s<r;++s)n[s].call(i)}}function Hs(e,t,i,r){if(t)e.call(i,r);else{var n=e.length;var s=Qs(e,n);for(var a=0;a<n;++a)s[a].call(i,r)}}function Ys(e,t,i,r,n){if(t)e.call(i,r,n);else{var s=e.length;var a=Qs(e,s);for(var o=0;o<s;++o)a[o].call(i,r,n)}}function Zs(e,t,i,r,n,s){if(t)e.call(i,r,n,s);else{var a=e.length;var o=Qs(e,a);for(var h=0;h<a;++h)o[h].call(i,r,n,s)}}function Vs(e,t,i,r){if(t)e.apply(i,r);else{var n=e.length;var s=Qs(e,n);for(var a=0;a<n;++a)s[a].apply(i,r)}}Fs.prototype.emit=function e(t){var i,r,n,s,a,o,h;var f=t==="error";o=this._events;if(o)f=f&&o.error==null;else if(!f)return false;h=this.domain;if(f){i=arguments[1];if(h){if(!i)i=new Error('Uncaught, unspecified "error" event');i.domainEmitter=this;i.domain=h;i.domainThrown=false;h.emit("error",i)}else if(i instanceof Error){throw i}else{var u=new Error('Uncaught, unspecified "error" event. ('+i+")");u.context=i;throw u}return false}r=o[t];if(!r)return false;var l=typeof r==="function";n=arguments.length;switch(n){case 1:Ws(r,l,this);break;case 2:Hs(r,l,this,arguments[1]);break;case 3:Ys(r,l,this,arguments[1],arguments[2]);break;case 4:Zs(r,l,this,arguments[1],arguments[2],arguments[3]);break;default:s=new Array(n-1);for(a=1;a<n;a++)s[a-1]=arguments[a];Vs(r,l,this,s)}return true};function Xs(e,t,i,r){var n;var s;var a;if(typeof i!=="function")throw new TypeError('"listener" argument must be a function');s=e._events;if(!s){s=e._events=new Ms;e._eventsCount=0}else{if(s.newListener){e.emit("newListener",t,i.listener?i.listener:i);s=e._events}a=s[t]}if(!a){a=s[t]=i;++e._eventsCount}else{if(typeof a==="function"){a=s[t]=r?[i,a]:[a,i]}else{if(r){a.unshift(i)}else{a.push(i)}}if(!a.warned){n=qs(e);if(n&&n>0&&a.length>n){a.warned=true;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+t+" listeners added. "+"Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning";o.emitter=e;o.type=t;o.count=a.length;Ks(o)}}}return e}function Ks(e){typeof console.warn==="function"?console.warn(e):console.log(e)}Fs.prototype.addListener=function e(t,i){return Xs(this,t,i,false)};Fs.prototype.on=Fs.prototype.addListener;Fs.prototype.prependListener=function e(t,i){return Xs(this,t,i,true)};function Gs(e,t,i){var r=false;function n(){e.removeListener(t,n);if(!r){r=true;i.apply(e,arguments)}}n.listener=i;return n}Fs.prototype.once=function e(t,i){if(typeof i!=="function")throw new TypeError('"listener" argument must be a function');this.on(t,Gs(this,t,i));return this};Fs.prototype.prependOnceListener=function e(t,i){if(typeof i!=="function")throw new TypeError('"listener" argument must be a function');this.prependListener(t,Gs(this,t,i));return this};Fs.prototype.removeListener=function e(t,i){var r,n,s,a,o;if(typeof i!=="function")throw new TypeError('"listener" argument must be a function');n=this._events;if(!n)return this;r=n[t];if(!r)return this;if(r===i||r.listener&&r.listener===i){if(--this._eventsCount===0)this._events=new Ms;else{delete n[t];if(n.removeListener)this.emit("removeListener",t,r.listener||i)}}else if(typeof r!=="function"){s=-1;for(a=r.length;a-- >0;){if(r[a]===i||r[a].listener&&r[a].listener===i){o=r[a].listener;s=a;break}}if(s<0)return this;if(r.length===1){r[0]=undefined;if(--this._eventsCount===0){this._events=new Ms;return this}else{delete n[t]}}else{Js(r,s)}if(n.removeListener)this.emit("removeListener",t,o||i)}return this};Fs.prototype.removeAllListeners=function e(t){var i,r;r=this._events;if(!r)return this;if(!r.removeListener){if(arguments.length===0){this._events=new Ms;this._eventsCount=0}else if(r[t]){if(--this._eventsCount===0)this._events=new Ms;else delete r[t]}return this}if(arguments.length===0){var n=Object.keys(r);for(var s=0,a;s<n.length;++s){a=n[s];if(a==="removeListener")continue;this.removeAllListeners(a)}this.removeAllListeners("removeListener");this._events=new Ms;this._eventsCount=0;return this}i=r[t];if(typeof i==="function"){this.removeListener(t,i)}else if(i){do{this.removeListener(t,i[i.length-1])}while(i[0])}return this};Fs.prototype.listeners=function e(t){var i;var r;var n=this._events;if(!n)r=[];else{i=n[t];if(!i)r=[];else if(typeof i==="function")r=[i.listener||i];else r=ea(i)}return r};Fs.listenerCount=function(e,t){if(typeof e.listenerCount==="function"){return e.listenerCount(t)}else{return $s.call(e,t)}};Fs.prototype.listenerCount=$s;function $s(e){var t=this._events;if(t){var i=t[e];if(typeof i==="function"){return 1}else if(i){return i.length}}return 0}Fs.prototype.eventNames=function e(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function Js(e,t){for(var i=t,r=i+1,n=e.length;r<n;i+=1,r+=1)e[i]=e[r];e.pop()}function Qs(e,t){var i=new Array(t);while(t--)i[t]=e[t];return i}function ea(e){var t=new Array(e.length);for(var i=0;i<t.length;++i){t[i]=e[i].listener||e[i]}return t}function ta(){throw new Error("setTimeout has not been defined")}function ia(){throw new Error("clearTimeout has not been defined")}var ra=ta;var na=ia;if(typeof Tn.setTimeout==="function"){ra=setTimeout}if(typeof Tn.clearTimeout==="function"){na=clearTimeout}function sa(e){if(ra===setTimeout){return setTimeout(e,0)}if((ra===ta||!ra)&&setTimeout){ra=setTimeout;return setTimeout(e,0)}try{return ra(e,0)}catch(Ng){try{return ra.call(null,e,0)}catch(Ng){return ra.call(this,e,0)}}}function aa(e){if(na===clearTimeout){return clearTimeout(e)}if((na===ia||!na)&&clearTimeout){na=clearTimeout;return clearTimeout(e)}try{return na(e)}catch(Ng){try{return na.call(null,e)}catch(Ng){return na.call(this,e)}}}var oa=[];var ha=false;var fa;var ua=-1;function la(){if(!ha||!fa){return}ha=false;if(fa.length){oa=fa.concat(oa)}else{ua=-1}if(oa.length){ca()}}function ca(){if(ha){return}var e=sa(la);ha=true;var t=oa.length;while(t){fa=oa;oa=[];while(++ua<t){if(fa){fa[ua].run()}}ua=-1;t=oa.length}fa=null;ha=false;aa(e)}function da(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){t[i-1]=arguments[i]}}oa.push(new pa(e,t));if(oa.length===1&&!ha){sa(ca)}}function pa(e,t){this.fun=e;this.array=t}pa.prototype.run=function(){this.fun.apply(null,this.array)};var va;if(typeof Object.create==="function"){va=function e(t,i){t.super_=i;t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}})}}else{va=function e(t,i){t.super_=i;var r=function(){};r.prototype=i.prototype;t.prototype=new r;t.prototype.constructor=t}}var ga=va;var ma=/%[sdj%]/g;function ya(e){if(!Ba(e)){var t=[];for(var i=0;i<arguments.length;i++){t.push(Ea(arguments[i]))}return t.join(" ")}var i=1;var r=arguments;var n=r.length;var s=String(e).replace(ma,(function(e){if(e==="%%")return"%";if(i>=n)return e;switch(e){case"%s":return String(r[i++]);case"%d":return Number(r[i++]);case"%j":try{return JSON.stringify(r[i++])}catch(t){return"[Circular]"}default:return e}}));for(var a=r[i];i<n;a=r[++i]){if(za(a)||!Ma(a)){s+=" "+a}else{s+=" "+Ea(a)}}return s}function wa(e,t){if(ja(Tn.process)){return function(){return wa(e,t).apply(this,arguments)}}var i=false;function r(){if(!i){{console.error(t)}i=true}return e.apply(this,arguments)}return r}var ba={};var _a;function xa(e){if(ja(_a))_a="";e=e.toUpperCase();if(!ba[e]){if(new RegExp("\\b"+e+"\\b","i").test(_a)){var t=0;ba[e]=function(){var i=ya.apply(null,arguments);console.error("%s %d: %s",e,t,i)}}else{ba[e]=function(){}}}return ba[e]}function Ea(e,t){var i={seen:[],stylize:Sa};if(arguments.length>=3)i.depth=arguments[2];if(arguments.length>=4)i.colors=arguments[3];if(Da(t)){i.showHidden=t}else if(t){Ya(i,t)}if(ja(i.showHidden))i.showHidden=false;if(ja(i.depth))i.depth=2;if(ja(i.colors))i.colors=false;if(ja(i.customInspect))i.customInspect=true;if(i.colors)i.stylize=ka;return Ta(i,e,i.depth)}Ea.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Ea.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function ka(e,t){var i=Ea.styles[t];if(i){return"["+Ea.colors[i][0]+"m"+e+"["+Ea.colors[i][1]+"m"}else{return e}}function Sa(e,t){return e}function Ca(e){var t={};e.forEach((function(e,i){t[e]=true}));return t}function Ta(e,t,i){if(e.customInspect&&t&&Wa(t.inspect)&&t.inspect!==Ea&&!(t.constructor&&t.constructor.prototype===t)){var r=t.inspect(i,e);if(!Ba(r)){r=Ta(e,r,i)}return r}var n=Ra(e,t);if(n){return n}var s=Object.keys(t);var a=Ca(s);if(e.showHidden){s=Object.getOwnPropertyNames(t)}if(qa(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0)){return Aa(t)}if(s.length===0){if(Wa(t)){var o=t.name?": "+t.name:"";return e.stylize("[Function"+o+"]","special")}if(Ua(t)){return e.stylize(RegExp.prototype.toString.call(t),"regexp")}if(Fa(t)){return e.stylize(Date.prototype.toString.call(t),"date")}if(qa(t)){return Aa(t)}}var h="",f=false,u=["{","}"];if(Ia(t)){f=true;u=["[","]"]}if(Wa(t)){var l=t.name?": "+t.name:"";h=" [Function"+l+"]"}if(Ua(t)){h=" "+RegExp.prototype.toString.call(t)}if(Fa(t)){h=" "+Date.prototype.toUTCString.call(t)}if(qa(t)){h=" "+Aa(t)}if(s.length===0&&(!f||t.length==0)){return u[0]+h+u[1]}if(i<0){if(Ua(t)){return e.stylize(RegExp.prototype.toString.call(t),"regexp")}else{return e.stylize("[Object]","special")}}e.seen.push(t);var c;if(f){c=Na(e,t,i,a,s)}else{c=s.map((function(r){return Oa(e,t,i,a,r,f)}))}e.seen.pop();return La(c,h,u)}function Ra(e,t){if(ja(t))return e.stylize("undefined","undefined");if(Ba(t)){var i="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(i,"string")}if(Pa(t))return e.stylize(""+t,"number");if(Da(t))return e.stylize(""+t,"boolean");if(za(t))return e.stylize("null","null")}function Aa(e){return"["+Error.prototype.toString.call(e)+"]"}function Na(e,t,i,r,n){var s=[];for(var a=0,o=t.length;a<o;++a){if(Za(t,String(a))){s.push(Oa(e,t,i,r,String(a),true))}else{s.push("")}}n.forEach((function(n){if(!n.match(/^\d+$/)){s.push(Oa(e,t,i,r,n,true))}}));return s}function Oa(e,t,i,r,n,s){var a,o,h;h=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]};if(h.get){if(h.set){o=e.stylize("[Getter/Setter]","special")}else{o=e.stylize("[Getter]","special")}}else{if(h.set){o=e.stylize("[Setter]","special")}}if(!Za(r,n)){a="["+n+"]"}if(!o){if(e.seen.indexOf(h.value)<0){if(za(i)){o=Ta(e,h.value,null)}else{o=Ta(e,h.value,i-1)}if(o.indexOf("\n")>-1){if(s){o=o.split("\n").map((function(e){return"  "+e})).join("\n").substr(2)}else{o="\n"+o.split("\n").map((function(e){return"   "+e})).join("\n")}}}else{o=e.stylize("[Circular]","special")}}if(ja(a)){if(s&&n.match(/^\d+$/)){return o}a=JSON.stringify(""+n);if(a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){a=a.substr(1,a.length-2);a=e.stylize(a,"name")}else{a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");a=e.stylize(a,"string")}}return a+": "+o}function La(e,t,i){var r=e.reduce((function(e,t){if(t.indexOf("\n")>=0);return e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(r>60){return i[0]+(t===""?"":t+"\n ")+" "+e.join(",\n  ")+" "+i[1]}return i[0]+t+" "+e.join(", ")+" "+i[1]}function Ia(e){return Array.isArray(e)}function Da(e){return typeof e==="boolean"}function za(e){return e===null}function Pa(e){return typeof e==="number"}function Ba(e){return typeof e==="string"}function ja(e){return e===void 0}function Ua(e){return Ma(e)&&Ha(e)==="[object RegExp]"}function Ma(e){return typeof e==="object"&&e!==null}function Fa(e){return Ma(e)&&Ha(e)==="[object Date]"}function qa(e){return Ma(e)&&(Ha(e)==="[object Error]"||e instanceof Error)}function Wa(e){return typeof e==="function"}function Ha(e){return Object.prototype.toString.call(e)}function Ya(e,t){if(!t||!Ma(t))return e;var i=Object.keys(t);var r=i.length;while(r--){e[i[r]]=t[i[r]]}return e}function Za(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Va(){this.head=null;this.tail=null;this.length=0}Va.prototype.push=function(e){var t={data:e,next:null};if(this.length>0)this.tail.next=t;else this.head=t;this.tail=t;++this.length};Va.prototype.unshift=function(e){var t={data:e,next:this.head};if(this.length===0)this.tail=t;this.head=t;++this.length};Va.prototype.shift=function(){if(this.length===0)return;var e=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;--this.length;return e};Va.prototype.clear=function(){this.head=this.tail=null;this.length=0};Va.prototype.join=function(e){if(this.length===0)return"";var t=this.head;var i=""+t.data;while(t=t.next){i+=e+t.data}return i};Va.prototype.concat=function(e){if(this.length===0)return Hn.alloc(0);if(this.length===1)return this.head.data;var t=Hn.allocUnsafe(e>>>0);var i=this.head;var r=0;while(i){i.data.copy(t,r);r+=i.data.length;i=i.next}return t};var Xa=Hn.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return true;default:return false}};function Ka(e){if(e&&!Xa(e)){throw new Error("Unknown encoding: "+e)}}function Ga(e){this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,"");Ka(e);switch(this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2;this.detectIncompleteChar=Ja;break;case"base64":this.surrogateSize=3;this.detectIncompleteChar=Qa;break;default:this.write=$a;return}this.charBuffer=new Hn(6);this.charReceived=0;this.charLength=0}Ga.prototype.write=function(e){var t="";while(this.charLength){var i=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;e.copy(this.charBuffer,this.charReceived,0,i);this.charReceived+=i;if(this.charReceived<this.charLength){return""}e=e.slice(i,e.length);t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=t.charCodeAt(t.length-1);if(r>=55296&&r<=56319){this.charLength+=this.surrogateSize;t="";continue}this.charReceived=this.charLength=0;if(e.length===0){return t}break}this.detectIncompleteChar(e);var n=e.length;if(this.charLength){e.copy(this.charBuffer,0,e.length-this.charReceived,n);n-=this.charReceived}t+=e.toString(this.encoding,0,n);var n=t.length-1;var r=t.charCodeAt(n);if(r>=55296&&r<=56319){var s=this.surrogateSize;this.charLength+=s;this.charReceived+=s;this.charBuffer.copy(this.charBuffer,s,0,s);e.copy(this.charBuffer,0,0,s);return t.substring(0,n)}return t};Ga.prototype.detectIncompleteChar=function(e){var t=e.length>=3?3:e.length;for(;t>0;t--){var i=e[e.length-t];if(t==1&&i>>5==6){this.charLength=2;break}if(t<=2&&i>>4==14){this.charLength=3;break}if(t<=3&&i>>3==30){this.charLength=4;break}}this.charReceived=t};Ga.prototype.end=function(e){var t="";if(e&&e.length)t=this.write(e);if(this.charReceived){var i=this.charReceived;var r=this.charBuffer;var n=this.encoding;t+=r.slice(0,i).toString(n)}return t};function $a(e){return e.toString(this.encoding)}function Ja(e){this.charReceived=e.length%2;this.charLength=this.charReceived?2:0}function Qa(e){this.charReceived=e.length%3;this.charLength=this.charReceived?3:0}no.ReadableState=ro;var eo=xa("stream");ga(no,Fs);function to(e,t,i){if(typeof e.prependListener==="function"){return e.prependListener(t,i)}else{if(!e._events||!e._events[t])e.on(t,i);else if(Array.isArray(e._events[t]))e._events[t].unshift(i);else e._events[t]=[i,e._events[t]]}}function io(e,t){return e.listeners(t).length}function ro(e,t){e=e||{};this.objectMode=!!e.objectMode;if(t instanceof Qo)this.objectMode=this.objectMode||!!e.readableObjectMode;var i=e.highWaterMark;var r=this.objectMode?16:16*1024;this.highWaterMark=i||i===0?i:r;this.highWaterMark=~~this.highWaterMark;this.buffer=new Va;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.defaultEncoding=e.defaultEncoding||"utf8";this.ranOut=false;this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(e.encoding){this.decoder=new Ga(e.encoding);this.encoding=e.encoding}}function no(e){if(!(this instanceof no))return new no(e);this._readableState=new ro(e,this);this.readable=true;if(e&&typeof e.read==="function")this._read=e.read;Fs.call(this)}no.prototype.push=function(e,t){var i=this._readableState;if(!i.objectMode&&typeof e==="string"){t=t||i.defaultEncoding;if(t!==i.encoding){e=Hn.from(e,t);t=""}}return so(this,i,e,t,false)};no.prototype.unshift=function(e){var t=this._readableState;return so(this,t,e,"",true)};no.prototype.isPaused=function(){return this._readableState.flowing===false};function so(e,t,i,r,n){var s=uo(t,i);if(s){e.emit("error",s)}else if(i===null){t.reading=false;lo(e,t)}else if(t.objectMode||i&&i.length>0){if(t.ended&&!n){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&n){var o=new Error("stream.unshift() after end event");e.emit("error",o)}else{var h;if(t.decoder&&!n&&!r){i=t.decoder.write(i);h=!t.objectMode&&i.length===0}if(!n)t.reading=false;if(!h){if(t.flowing&&t.length===0&&!t.sync){e.emit("data",i);e.read(0)}else{t.length+=t.objectMode?1:i.length;if(n)t.buffer.unshift(i);else t.buffer.push(i);if(t.needReadable)co(e)}}vo(e,t)}}else if(!n){t.reading=false}return ao(t)}function ao(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}no.prototype.setEncoding=function(e){this._readableState.decoder=new Ga(e);this._readableState.encoding=e;return this};var oo=8388608;function ho(e){if(e>=oo){e=oo}else{e--;e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;e++}return e}function fo(e,t){if(e<=0||t.length===0&&t.ended)return 0;if(t.objectMode)return 1;if(e!==e){if(t.flowing&&t.length)return t.buffer.head.data.length;else return t.length}if(e>t.highWaterMark)t.highWaterMark=ho(e);if(e<=t.length)return e;if(!t.ended){t.needReadable=true;return 0}return t.length}no.prototype.read=function(e){eo("read",e);e=parseInt(e,10);var t=this._readableState;var i=e;if(e!==0)t.emittedReadable=false;if(e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended)){eo("read: emitReadable",t.length,t.ended);if(t.length===0&&t.ended)Co(this);else co(this);return null}e=fo(e,t);if(e===0&&t.ended){if(t.length===0)Co(this);return null}var r=t.needReadable;eo("need readable",r);if(t.length===0||t.length-e<t.highWaterMark){r=true;eo("length less than watermark",r)}if(t.ended||t.reading){r=false;eo("reading or ended",r)}else if(r){eo("do read");t.reading=true;t.sync=true;if(t.length===0)t.needReadable=true;this._read(t.highWaterMark);t.sync=false;if(!t.reading)e=fo(i,t)}var n;if(e>0)n=xo(e,t);else n=null;if(n===null){t.needReadable=true;e=0}else{t.length-=e}if(t.length===0){if(!t.ended)t.needReadable=true;if(i!==e&&t.ended)Co(this)}if(n!==null)this.emit("data",n);return n};function uo(e,t){var i=null;if(!Hn.isBuffer(t)&&typeof t!=="string"&&t!==null&&t!==undefined&&!e.objectMode){i=new TypeError("Invalid non-string/buffer chunk")}return i}function lo(e,t){if(t.ended)return;if(t.decoder){var i=t.decoder.end();if(i&&i.length){t.buffer.push(i);t.length+=t.objectMode?1:i.length}}t.ended=true;co(e)}function co(e){var t=e._readableState;t.needReadable=false;if(!t.emittedReadable){eo("emitReadable",t.flowing);t.emittedReadable=true;if(t.sync)da(po,e);else po(e)}}function po(e){eo("emit readable");e.emit("readable");_o(e)}function vo(e,t){if(!t.readingMore){t.readingMore=true;da(go,e,t)}}function go(e,t){var i=t.length;while(!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark){eo("maybeReadMore read 0");e.read(0);if(i===t.length)break;else i=t.length}t.readingMore=false}no.prototype._read=function(e){this.emit("error",new Error("not implemented"))};no.prototype.pipe=function(e,t){var i=this;var r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e);break}r.pipesCount+=1;eo("pipe count=%d opts=%j",r.pipesCount,t);var n=!t||t.end!==false;var s=n?o:u;if(r.endEmitted)da(s);else i.once("end",s);e.on("unpipe",a);function a(e){eo("onunpipe");if(e===i){u()}}function o(){eo("onend");e.end()}var h=mo(i);e.on("drain",h);var f=false;function u(){eo("cleanup");e.removeListener("close",p);e.removeListener("finish",v);e.removeListener("drain",h);e.removeListener("error",d);e.removeListener("unpipe",a);i.removeListener("end",o);i.removeListener("end",u);i.removeListener("data",c);f=true;if(r.awaitDrain&&(!e._writableState||e._writableState.needDrain))h()}var l=false;i.on("data",c);function c(t){eo("ondata");l=false;var n=e.write(t);if(false===n&&!l){if((r.pipesCount===1&&r.pipes===e||r.pipesCount>1&&Ao(r.pipes,e)!==-1)&&!f){eo("false write response, pause",i._readableState.awaitDrain);i._readableState.awaitDrain++;l=true}i.pause()}}function d(t){eo("onerror",t);g();e.removeListener("error",d);if(io(e,"error")===0)e.emit("error",t)}to(e,"error",d);function p(){e.removeListener("finish",v);g()}e.once("close",p);function v(){eo("onfinish");e.removeListener("close",p);g()}e.once("finish",v);function g(){eo("unpipe");i.unpipe(e)}e.emit("pipe",i);if(!r.flowing){eo("pipe resume");i.resume()}return e};function mo(e){return function(){var t=e._readableState;eo("pipeOnDrain",t.awaitDrain);if(t.awaitDrain)t.awaitDrain--;if(t.awaitDrain===0&&e.listeners("data").length){t.flowing=true;_o(e)}}}no.prototype.unpipe=function(e){var t=this._readableState;if(t.pipesCount===0)return this;if(t.pipesCount===1){if(e&&e!==t.pipes)return this;if(!e)e=t.pipes;t.pipes=null;t.pipesCount=0;t.flowing=false;if(e)e.emit("unpipe",this);return this}if(!e){var i=t.pipes;var r=t.pipesCount;t.pipes=null;t.pipesCount=0;t.flowing=false;for(var n=0;n<r;n++){i[n].emit("unpipe",this)}return this}var s=Ao(t.pipes,e);if(s===-1)return this;t.pipes.splice(s,1);t.pipesCount-=1;if(t.pipesCount===1)t.pipes=t.pipes[0];e.emit("unpipe",this);return this};no.prototype.on=function(e,t){var i=Fs.prototype.on.call(this,e,t);if(e==="data"){if(this._readableState.flowing!==false)this.resume()}else if(e==="readable"){var r=this._readableState;if(!r.endEmitted&&!r.readableListening){r.readableListening=r.needReadable=true;r.emittedReadable=false;if(!r.reading){da(yo,this)}else if(r.length){co(this)}}}return i};no.prototype.addListener=no.prototype.on;function yo(e){eo("readable nexttick read 0");e.read(0)}no.prototype.resume=function(){var e=this._readableState;if(!e.flowing){eo("resume");e.flowing=true;wo(this,e)}return this};function wo(e,t){if(!t.resumeScheduled){t.resumeScheduled=true;da(bo,e,t)}}function bo(e,t){if(!t.reading){eo("resume read 0");e.read(0)}t.resumeScheduled=false;t.awaitDrain=0;e.emit("resume");_o(e);if(t.flowing&&!t.reading)e.read(0)}no.prototype.pause=function(){eo("call pause flowing=%j",this._readableState.flowing);if(false!==this._readableState.flowing){eo("pause");this._readableState.flowing=false;this.emit("pause")}return this};function _o(e){var t=e._readableState;eo("flow",t.flowing);while(t.flowing&&e.read()!==null){}}no.prototype.wrap=function(e){var t=this._readableState;var i=false;var r=this;e.on("end",(function(){eo("wrapped end");if(t.decoder&&!t.ended){var e=t.decoder.end();if(e&&e.length)r.push(e)}r.push(null)}));e.on("data",(function(n){eo("wrapped data");if(t.decoder)n=t.decoder.write(n);if(t.objectMode&&(n===null||n===undefined))return;else if(!t.objectMode&&(!n||!n.length))return;var s=r.push(n);if(!s){i=true;e.pause()}}));for(var n in e){if(this[n]===undefined&&typeof e[n]==="function"){this[n]=function(t){return function(){return e[t].apply(e,arguments)}}(n)}}var s=["error","close","destroy","pause","resume"];Ro(s,(function(t){e.on(t,r.emit.bind(r,t))}));r._read=function(t){eo("wrapped _read",t);if(i){i=false;e.resume()}};return r};no._fromList=xo;function xo(e,t){if(t.length===0)return null;var i;if(t.objectMode)i=t.buffer.shift();else if(!e||e>=t.length){if(t.decoder)i=t.buffer.join("");else if(t.buffer.length===1)i=t.buffer.head.data;else i=t.buffer.concat(t.length);t.buffer.clear()}else{i=Eo(e,t.buffer,t.decoder)}return i}function Eo(e,t,i){var r;if(e<t.head.data.length){r=t.head.data.slice(0,e);t.head.data=t.head.data.slice(e)}else if(e===t.head.data.length){r=t.shift()}else{r=i?ko(e,t):So(e,t)}return r}function ko(e,t){var i=t.head;var r=1;var n=i.data;e-=n.length;while(i=i.next){var s=i.data;var a=e>s.length?s.length:e;if(a===s.length)n+=s;else n+=s.slice(0,e);e-=a;if(e===0){if(a===s.length){++r;if(i.next)t.head=i.next;else t.head=t.tail=null}else{t.head=i;i.data=s.slice(a)}break}++r}t.length-=r;return n}function So(e,t){var i=Hn.allocUnsafe(e);var r=t.head;var n=1;r.data.copy(i);e-=r.data.length;while(r=r.next){var s=r.data;var a=e>s.length?s.length:e;s.copy(i,i.length-e,0,a);e-=a;if(e===0){if(a===s.length){++n;if(r.next)t.head=r.next;else t.head=t.tail=null}else{t.head=r;r.data=s.slice(a)}break}++n}t.length-=n;return i}function Co(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');if(!t.endEmitted){t.ended=true;da(To,t,e)}}function To(e,t){if(!e.endEmitted&&e.length===0){e.endEmitted=true;t.readable=false;t.emit("end")}}function Ro(e,t){for(var i=0,r=e.length;i<r;i++){t(e[i],i)}}function Ao(e,t){for(var i=0,r=e.length;i<r;i++){if(e[i]===t)return i}return-1}Io.WritableState=Lo;ga(Io,Fs);function No(){}function Oo(e,t,i){this.chunk=e;this.encoding=t;this.callback=i;this.next=null}function Lo(e,t){Object.defineProperty(this,"buffer",{get:wa((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.")});e=e||{};this.objectMode=!!e.objectMode;if(t instanceof Qo)this.objectMode=this.objectMode||!!e.writableObjectMode;var i=e.highWaterMark;var r=this.objectMode?16:16*1024;this.highWaterMark=i||i===0?i:r;this.highWaterMark=~~this.highWaterMark;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;var n=e.decodeStrings===false;this.decodeStrings=!n;this.defaultEncoding=e.defaultEncoding||"utf8";this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(e){Fo(t,e)};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.bufferedRequestCount=0;this.corkedRequestsFree=new Ko(this)}Lo.prototype.getBuffer=function e(){var t=this.bufferedRequest;var i=[];while(t){i.push(t);t=t.next}return i};function Io(e){if(!(this instanceof Io)&&!(this instanceof Qo))return new Io(e);this._writableState=new Lo(e,this);this.writable=true;if(e){if(typeof e.write==="function")this._write=e.write;if(typeof e.writev==="function")this._writev=e.writev}Fs.call(this)}Io.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function Do(e,t){var i=new Error("write after end");e.emit("error",i);da(t,i)}function zo(e,t,i,r){var n=true;var s=false;if(i===null){s=new TypeError("May not write null values to stream")}else if(!Hn.isBuffer(i)&&typeof i!=="string"&&i!==undefined&&!t.objectMode){s=new TypeError("Invalid non-string/buffer chunk")}if(s){e.emit("error",s);da(r,s);n=false}return n}Io.prototype.write=function(e,t,i){var r=this._writableState;var n=false;if(typeof t==="function"){i=t;t=null}if(Hn.isBuffer(e))t="buffer";else if(!t)t=r.defaultEncoding;if(typeof i!=="function")i=No;if(r.ended)Do(this,i);else if(zo(this,r,e,i)){r.pendingcb++;n=Bo(this,r,e,t,i)}return n};Io.prototype.cork=function(){var e=this._writableState;e.corked++};Io.prototype.uncork=function(){var e=this._writableState;if(e.corked){e.corked--;if(!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest)Ho(this,e)}};Io.prototype.setDefaultEncoding=function e(t){if(typeof t==="string")t=t.toLowerCase();if(!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);this._writableState.defaultEncoding=t;return this};function Po(e,t,i){if(!e.objectMode&&e.decodeStrings!==false&&typeof t==="string"){t=Hn.from(t,i)}return t}function Bo(e,t,i,r,n){i=Po(t,i,r);if(Hn.isBuffer(i))r="buffer";var s=t.objectMode?1:i.length;t.length+=s;var a=t.length<t.highWaterMark;if(!a)t.needDrain=true;if(t.writing||t.corked){var o=t.lastBufferedRequest;t.lastBufferedRequest=new Oo(i,r,n);if(o){o.next=t.lastBufferedRequest}else{t.bufferedRequest=t.lastBufferedRequest}t.bufferedRequestCount+=1}else{jo(e,t,false,s,i,r,n)}return a}function jo(e,t,i,r,n,s,a){t.writelen=r;t.writecb=a;t.writing=true;t.sync=true;if(i)e._writev(n,t.onwrite);else e._write(n,s,t.onwrite);t.sync=false}function Uo(e,t,i,r,n){--t.pendingcb;if(i)da(n,r);else n(r);e._writableState.errorEmitted=true;e.emit("error",r)}function Mo(e){e.writing=false;e.writecb=null;e.length-=e.writelen;e.writelen=0}function Fo(e,t){var i=e._writableState;var r=i.sync;var n=i.writecb;Mo(i);if(t)Uo(e,i,r,t,n);else{var s=Yo(i);if(!s&&!i.corked&&!i.bufferProcessing&&i.bufferedRequest){Ho(e,i)}if(r){da(qo,e,i,s,n)}else{qo(e,i,s,n)}}}function qo(e,t,i,r){if(!i)Wo(e,t);t.pendingcb--;r();Vo(e,t)}function Wo(e,t){if(t.length===0&&t.needDrain){t.needDrain=false;e.emit("drain")}}function Ho(e,t){t.bufferProcessing=true;var i=t.bufferedRequest;if(e._writev&&i&&i.next){var r=t.bufferedRequestCount;var n=new Array(r);var s=t.corkedRequestsFree;s.entry=i;var a=0;while(i){n[a]=i;i=i.next;a+=1}jo(e,t,true,t.length,n,"",s.finish);t.pendingcb++;t.lastBufferedRequest=null;if(s.next){t.corkedRequestsFree=s.next;s.next=null}else{t.corkedRequestsFree=new Ko(t)}}else{while(i){var o=i.chunk;var h=i.encoding;var f=i.callback;var u=t.objectMode?1:o.length;jo(e,t,false,u,o,h,f);i=i.next;if(t.writing){break}}if(i===null)t.lastBufferedRequest=null}t.bufferedRequestCount=0;t.bufferedRequest=i;t.bufferProcessing=false}Io.prototype._write=function(e,t,i){i(new Error("not implemented"))};Io.prototype._writev=null;Io.prototype.end=function(e,t,i){var r=this._writableState;if(typeof e==="function"){i=e;e=null;t=null}else if(typeof t==="function"){i=t;t=null}if(e!==null&&e!==undefined)this.write(e,t);if(r.corked){r.corked=1;this.uncork()}if(!r.ending&&!r.finished)Xo(this,r,i)};function Yo(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function Zo(e,t){if(!t.prefinished){t.prefinished=true;e.emit("prefinish")}}function Vo(e,t){var i=Yo(t);if(i){if(t.pendingcb===0){Zo(e,t);t.finished=true;e.emit("finish")}else{Zo(e,t)}}return i}function Xo(e,t,i){t.ending=true;Vo(e,t);if(i){if(t.finished)da(i);else e.once("finish",i)}t.ended=true;e.writable=false}function Ko(e){var t=this;this.next=null;this.entry=null;this.finish=function(i){var r=t.entry;t.entry=null;while(r){var n=r.callback;e.pendingcb--;n(i);r=r.next}if(e.corkedRequestsFree){e.corkedRequestsFree.next=t}else{e.corkedRequestsFree=t}}}ga(Qo,no);var Go=Object.keys(Io.prototype);for(var $o=0;$o<Go.length;$o++){var Jo=Go[$o];if(!Qo.prototype[Jo])Qo.prototype[Jo]=Io.prototype[Jo]}function Qo(e){if(!(this instanceof Qo))return new Qo(e);no.call(this,e);Io.call(this,e);if(e&&e.readable===false)this.readable=false;if(e&&e.writable===false)this.writable=false;this.allowHalfOpen=true;if(e&&e.allowHalfOpen===false)this.allowHalfOpen=false;this.once("end",eh)}function eh(){if(this.allowHalfOpen||this._writableState.ended)return;da(th,this)}function th(e){e.end()}ga(nh,Qo);function ih(e){this.afterTransform=function(t,i){return rh(e,t,i)};this.needTransform=false;this.transforming=false;this.writecb=null;this.writechunk=null;this.writeencoding=null}function rh(e,t,i){var r=e._transformState;r.transforming=false;var n=r.writecb;if(!n)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null;r.writecb=null;if(i!==null&&i!==undefined)e.push(i);n(t);var s=e._readableState;s.reading=false;if(s.needReadable||s.length<s.highWaterMark){e._read(s.highWaterMark)}}function nh(e){if(!(this instanceof nh))return new nh(e);Qo.call(this,e);this._transformState=new ih(this);var t=this;this._readableState.needReadable=true;this._readableState.sync=false;if(e){if(typeof e.transform==="function")this._transform=e.transform;if(typeof e.flush==="function")this._flush=e.flush}this.once("prefinish",(function(){if(typeof this._flush==="function")this._flush((function(e){sh(t,e)}));else sh(t)}))}nh.prototype.push=function(e,t){this._transformState.needTransform=false;return Qo.prototype.push.call(this,e,t)};nh.prototype._transform=function(e,t,i){throw new Error("Not implemented")};nh.prototype._write=function(e,t,i){var r=this._transformState;r.writecb=i;r.writechunk=e;r.writeencoding=t;if(!r.transforming){var n=this._readableState;if(r.needTransform||n.needReadable||n.length<n.highWaterMark)this._read(n.highWaterMark)}};nh.prototype._read=function(e){var t=this._transformState;if(t.writechunk!==null&&t.writecb&&!t.transforming){t.transforming=true;this._transform(t.writechunk,t.writeencoding,t.afterTransform)}else{t.needTransform=true}};function sh(e,t){if(t)return e.emit("error",t);var i=e._writableState;var r=e._transformState;if(i.length)throw new Error("Calling transform done when ws.length != 0");if(r.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}ga(ah,nh);function ah(e){if(!(this instanceof ah))return new ah(e);nh.call(this,e)}ah.prototype._transform=function(e,t,i){i(null,e)};ga(oh,Fs);oh.Readable=no;oh.Writable=Io;oh.Duplex=Qo;oh.Transform=nh;oh.PassThrough=ah;oh.Stream=oh;function oh(){Fs.call(this)}oh.prototype.pipe=function(e,t){var i=this;function r(t){if(e.writable){if(false===e.write(t)&&i.pause){i.pause()}}}i.on("data",r);function n(){if(i.readable&&i.resume){i.resume()}}e.on("drain",n);if(!e._isStdio&&(!t||t.end!==false)){i.on("end",a);i.on("close",o)}var s=false;function a(){if(s)return;s=true;e.end()}function o(){if(s)return;s=true;if(typeof e.destroy==="function")e.destroy()}function h(e){f();if(Fs.listenerCount(this,"error")===0){throw e}}i.on("error",h);e.on("error",h);function f(){i.removeListener("data",r);e.removeListener("drain",n);i.removeListener("end",a);i.removeListener("close",o);i.removeListener("error",h);e.removeListener("error",h);i.removeListener("end",f);i.removeListener("close",f);e.removeListener("close",f)}i.on("end",f);i.on("close",f);e.on("close",f);e.emit("pipe",i);return e};var hh=oh;var fh=o((function(e,t){t.base64=true;t.array=true;t.string=true;t.arraybuffer=typeof ArrayBuffer!=="undefined"&&typeof Uint8Array!=="undefined";t.nodebuffer=typeof Hn!=="undefined";t.uint8array=typeof Uint8Array!=="undefined";if(typeof ArrayBuffer==="undefined"){t.blob=false}else{var i=new ArrayBuffer(0);try{t.blob=new Blob([i],{type:"application/zip"}).size===0}catch(Ng){try{var r=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;var n=new r;n.append(i);t.blob=n.getBlob("application/zip").size===0}catch(Ng){t.blob=false}}}try{t.nodestream=!!hh.Readable}catch(Ng){t.nodestream=false}}));var uh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var lh=function(e){var t=[];var i,r,n,s,a,o,h;var f=0,u=e.length,l=u;var c=Yh.getTypeOf(e)!=="string";while(f<e.length){l=u-f;if(!c){i=e.charCodeAt(f++);r=f<u?e.charCodeAt(f++):0;n=f<u?e.charCodeAt(f++):0}else{i=e[f++];r=f<u?e[f++]:0;n=f<u?e[f++]:0}s=i>>2;a=(i&3)<<4|r>>4;o=l>1?(r&15)<<2|n>>6:64;h=l>2?n&63:64;t.push(uh.charAt(s)+uh.charAt(a)+uh.charAt(o)+uh.charAt(h))}return t.join("")};var ch=function(e){var t,i,r;var n,s,a,o;var h=0,f=0;var u="data:";if(e.substr(0,u.length)===u){throw new Error("Invalid base64 input, it looks like a data url.")}e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");var l=e.length*3/4;if(e.charAt(e.length-1)===uh.charAt(64)){l--}if(e.charAt(e.length-2)===uh.charAt(64)){l--}if(l%1!==0){throw new Error("Invalid base64 input, bad content length.")}var c;if(fh.uint8array){c=new Uint8Array(l|0)}else{c=new Array(l|0)}while(h<e.length){n=uh.indexOf(e.charAt(h++));s=uh.indexOf(e.charAt(h++));a=uh.indexOf(e.charAt(h++));o=uh.indexOf(e.charAt(h++));t=n<<2|s>>4;i=(s&15)<<4|a>>2;r=(a&3)<<6|o;c[f++]=t;if(a!==64){c[f++]=i}if(o!==64){c[f++]=r}}return c};var dh={encode:lh,decode:ch};var ph={isNode:typeof Hn!=="undefined",newBufferFrom:function(e,t){if(Hn.from&&Hn.from!==Uint8Array.from){return Hn.from(e,t)}else{if(typeof e==="number"){throw new Error('The "data" argument must not be a number')}return new Hn(e,t)}},allocBuffer:function(e){if(Hn.alloc){return Hn.alloc(e)}else{var t=new Hn(e);t.fill(0);return t}},isBuffer:function(e){return Hn.isBuffer(e)},isStream:function(e){return e&&typeof e.on==="function"&&typeof e.pause==="function"&&typeof e.resume==="function"}};var vh=typeof setImmediate==="function"?setImmediate:function e(){var t=[].slice.apply(arguments);t.splice(1,0,0);setTimeout.apply(null,t)};var gh=s.MutationObserver||s.WebKitMutationObserver;var mh;{if(gh){var yh=0;var wh=new gh(kh);var bh=s.document.createTextNode("");wh.observe(bh,{characterData:true});mh=function(){bh.data=yh=++yh%2}}else if(!s.setImmediate&&typeof s.MessageChannel!=="undefined"){var _h=new s.MessageChannel;_h.port1.onmessage=kh;mh=function(){_h.port2.postMessage(0)}}else if("document"in s&&"onreadystatechange"in s.document.createElement("script")){mh=function(){var e=s.document.createElement("script");e.onreadystatechange=function(){kh();e.onreadystatechange=null;e.parentNode.removeChild(e);e=null};s.document.documentElement.appendChild(e)}}else{mh=function(){setTimeout(kh,0)}}}var xh;var Eh=[];function kh(){xh=true;var e,t;var i=Eh.length;while(i){t=Eh;Eh=[];e=-1;while(++e<i){t[e]()}i=Eh.length}xh=false}var Sh=Ch;function Ch(e){if(Eh.push(e)===1&&!xh){mh()}}function Th(){}var Rh={};var Ah=["REJECTED"];var Nh=["FULFILLED"];var Oh=["PENDING"];var Lh=Ih;function Ih(e){if(typeof e!=="function"){throw new TypeError("resolver must be a function")}this.state=Oh;this.queue=[];this.outcome=void 0;if(e!==Th){Bh(this,e)}}Ih.prototype["finally"]=function(e){if(typeof e!=="function"){return this}var t=this.constructor;return this.then(i,r);function i(i){function r(){return i}return t.resolve(e()).then(r)}function r(i){function r(){throw i}return t.resolve(e()).then(r)}};Ih.prototype["catch"]=function(e){return this.then(null,e)};Ih.prototype.then=function(e,t){if(typeof e!=="function"&&this.state===Nh||typeof t!=="function"&&this.state===Ah){return this}var i=new this.constructor(Th);if(this.state!==Oh){var r=this.state===Nh?e:t;zh(i,r,this.outcome)}else{this.queue.push(new Dh(i,e,t))}return i};function Dh(e,t,i){this.promise=e;if(typeof t==="function"){this.onFulfilled=t;this.callFulfilled=this.otherCallFulfilled}if(typeof i==="function"){this.onRejected=i;this.callRejected=this.otherCallRejected}}Dh.prototype.callFulfilled=function(e){Rh.resolve(this.promise,e)};Dh.prototype.otherCallFulfilled=function(e){zh(this.promise,this.onFulfilled,e)};Dh.prototype.callRejected=function(e){Rh.reject(this.promise,e)};Dh.prototype.otherCallRejected=function(e){zh(this.promise,this.onRejected,e)};function zh(e,t,i){Sh((function(){var r;try{r=t(i)}catch(Ng){return Rh.reject(e,Ng)}if(r===e){Rh.reject(e,new TypeError("Cannot resolve promise with itself"))}else{Rh.resolve(e,r)}}))}Rh.resolve=function(e,t){var i=jh(Ph,t);if(i.status==="error"){return Rh.reject(e,i.value)}var r=i.value;if(r){Bh(e,r)}else{e.state=Nh;e.outcome=t;var n=-1;var s=e.queue.length;while(++n<s){e.queue[n].callFulfilled(t)}}return e};Rh.reject=function(e,t){e.state=Ah;e.outcome=t;var i=-1;var r=e.queue.length;while(++i<r){e.queue[i].callRejected(t)}return e};function Ph(e){var t=e&&e.then;if(e&&(typeof e==="object"||typeof e==="function")&&typeof t==="function"){return function i(){t.apply(e,arguments)}}}function Bh(e,t){var i=false;function r(t){if(i){return}i=true;Rh.reject(e,t)}function n(t){if(i){return}i=true;Rh.resolve(e,t)}function s(){t(n,r)}var a=jh(s);if(a.status==="error"){r(a.value)}}function jh(e,t){var i={};try{i.value=e(t);i.status="success"}catch(Ng){i.status="error";i.value=Ng}return i}Ih.resolve=Uh;function Uh(e){if(e instanceof this){return e}return Rh.resolve(new this(Th),e)}Ih.reject=Mh;function Mh(e){var t=new this(Th);return Rh.reject(t,e)}Ih.all=Fh;function Fh(e){var t=this;if(Object.prototype.toString.call(e)!=="[object Array]"){return this.reject(new TypeError("must be an array"))}var i=e.length;var r=false;if(!i){return this.resolve([])}var n=new Array(i);var s=0;var a=-1;var o=new this(Th);while(++a<i){h(e[a],a)}return o;function h(e,a){t.resolve(e).then(h,(function(e){if(!r){r=true;Rh.reject(o,e)}}));function h(e){n[a]=e;if(++s===i&&!r){r=true;Rh.resolve(o,n)}}}}Ih.race=qh;function qh(e){var t=this;if(Object.prototype.toString.call(e)!=="[object Array]"){return this.reject(new TypeError("must be an array"))}var i=e.length;var r=false;if(!i){return this.resolve([])}var n=-1;var s=new this(Th);while(++n<i){a(e[n])}return s;function a(e){t.resolve(e).then((function(e){if(!r){r=true;Rh.resolve(s,e)}}),(function(e){if(!r){r=true;Rh.reject(s,e)}}))}}var Wh=null;if(typeof Promise!=="undefined"){Wh=Promise}else{Wh=Lh}var Hh={Promise:Wh};var Yh=o((function(e,t){function i(e){var t=null;if(fh.uint8array){t=new Uint8Array(e.length)}else{t=new Array(e.length)}return n(e,t)}t.newBlob=function(e,i){t.checkSupport("blob");try{return new Blob([e],{type:i})}catch(Ng){try{var r=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;var n=new r;n.append(e);return n.getBlob(i)}catch(Ng){throw new Error("Bug : can't construct the Blob.")}}};function r(e){return e}function n(e,t){for(var i=0;i<e.length;++i){t[i]=e.charCodeAt(i)&255}return t}var s={stringifyByChunk:function(e,t,i){var r=[],n=0,s=e.length;if(s<=i){return String.fromCharCode.apply(null,e)}while(n<s){if(t==="array"||t==="nodebuffer"){r.push(String.fromCharCode.apply(null,e.slice(n,Math.min(n+i,s))))}else{r.push(String.fromCharCode.apply(null,e.subarray(n,Math.min(n+i,s))))}n+=i}return r.join("")},stringifyByChar:function(e){var t="";for(var i=0;i<e.length;i++){t+=String.fromCharCode(e[i])}return t},applyCanBeUsed:{uint8array:function(){try{return fh.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch(Ng){return false}}(),nodebuffer:function(){try{return fh.nodebuffer&&String.fromCharCode.apply(null,ph.allocBuffer(1)).length===1}catch(Ng){return false}}()}};function a(e){var i=65536,r=t.getTypeOf(e),n=true;if(r==="uint8array"){n=s.applyCanBeUsed.uint8array}else if(r==="nodebuffer"){n=s.applyCanBeUsed.nodebuffer}if(n){while(i>1){try{return s.stringifyByChunk(e,r,i)}catch(Ng){i=Math.floor(i/2)}}}return s.stringifyByChar(e)}t.applyFromCharCode=a;function o(e,t){for(var i=0;i<e.length;i++){t[i]=e[i]}return t}var h={};h["string"]={string:r,array:function(e){return n(e,new Array(e.length))},arraybuffer:function(e){return h["string"]["uint8array"](e).buffer},uint8array:function(e){return n(e,new Uint8Array(e.length))},nodebuffer:function(e){return n(e,ph.allocBuffer(e.length))}};h["array"]={string:a,array:r,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return ph.newBufferFrom(e)}};h["arraybuffer"]={string:function(e){return a(new Uint8Array(e))},array:function(e){return o(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:r,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return ph.newBufferFrom(new Uint8Array(e))}};h["uint8array"]={string:a,array:function(e){return o(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:r,nodebuffer:function(e){return ph.newBufferFrom(e)}};h["nodebuffer"]={string:a,array:function(e){return o(e,new Array(e.length))},arraybuffer:function(e){return h["nodebuffer"]["uint8array"](e).buffer},uint8array:function(e){return o(e,new Uint8Array(e.length))},nodebuffer:r};t.transformTo=function(e,i){if(!i){i=""}if(!e){return i}t.checkSupport(e);var r=t.getTypeOf(i);var n=h[r][e](i);return n};t.getTypeOf=function(e){if(typeof e==="string"){return"string"}if(Object.prototype.toString.call(e)==="[object Array]"){return"array"}if(fh.nodebuffer&&ph.isBuffer(e)){return"nodebuffer"}if(fh.uint8array&&e instanceof Uint8Array){return"uint8array"}if(fh.arraybuffer&&e instanceof ArrayBuffer){return"arraybuffer"}};t.checkSupport=function(e){var t=fh[e.toLowerCase()];if(!t){throw new Error(e+" is not supported by this platform")}};t.MAX_VALUE_16BITS=65535;t.MAX_VALUE_32BITS=-1;t.pretty=function(e){var t="",i,r;for(r=0;r<(e||"").length;r++){i=e.charCodeAt(r);t+="\\x"+(i<16?"0":"")+i.toString(16).toUpperCase()}return t};t.delay=function(e,t,i){vh((function(){e.apply(i||null,t||[])}))};t.inherits=function(e,t){var i=function(){};i.prototype=t.prototype;e.prototype=new i};t.extend=function(){var e={},t,i;for(t=0;t<arguments.length;t++){for(i in arguments[t]){if(arguments[t].hasOwnProperty(i)&&typeof e[i]==="undefined"){e[i]=arguments[t][i]}}}return e};t.prepareContent=function(e,r,n,s,a){var o=Hh.Promise.resolve(r).then((function(e){var t=fh.blob&&(e instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e))!==-1);if(t&&typeof FileReader!=="undefined"){return new Hh.Promise((function(t,i){var r=new FileReader;r.onload=function(e){t(e.target.result)};r.onerror=function(e){i(e.target.error)};r.readAsArrayBuffer(e)}))}else{return e}}));return o.then((function(r){var o=t.getTypeOf(r);if(!o){return Hh.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it "+"in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}if(o==="arraybuffer"){r=t.transformTo("uint8array",r)}else if(o==="string"){if(a){r=dh.decode(r)}else if(n){if(s!==true){r=i(r)}}}return r}))}}));function Zh(e){this.name=e||"default";this.streamInfo={};this.generatedError=null;this.extraStreamInfo={};this.isPaused=true;this.isFinished=false;this.isLocked=false;this._listeners={data:[],end:[],error:[]};this.previous=null}Zh.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished){return false}this.flush();try{this.emit("end");this.cleanUp();this.isFinished=true}catch(Ng){this.emit("error",Ng)}return true},error:function(e){if(this.isFinished){return false}if(this.isPaused){this.generatedError=e}else{this.isFinished=true;this.emit("error",e);if(this.previous){this.previous.error(e)}this.cleanUp()}return true},on:function(e,t){this._listeners[e].push(t);return this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null;this._listeners=[]},emit:function(e,t){if(this._listeners[e]){for(var i=0;i<this._listeners[e].length;i++){this._listeners[e][i].call(this,t)}}},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked){throw new Error("The stream '"+this+"' has already been used.")}this.streamInfo=e.streamInfo;this.mergeStreamInfo();this.previous=e;var t=this;e.on("data",(function(e){t.processChunk(e)}));e.on("end",(function(){t.end()}));e.on("error",(function(e){t.error(e)}));return this},pause:function(){if(this.isPaused||this.isFinished){return false}this.isPaused=true;if(this.previous){this.previous.pause()}return true},resume:function(){if(!this.isPaused||this.isFinished){return false}this.isPaused=false;var e=false;if(this.generatedError){this.error(this.generatedError);e=true}if(this.previous){this.previous.resume()}return!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){this.extraStreamInfo[e]=t;this.mergeStreamInfo();return this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo){if(!this.extraStreamInfo.hasOwnProperty(e)){continue}this.streamInfo[e]=this.extraStreamInfo[e]}},lock:function(){if(this.isLocked){throw new Error("The stream '"+this+"' has already been used.")}this.isLocked=true;if(this.previous){this.previous.lock()}},toString:function(){var e="Worker "+this.name;if(this.previous){return this.previous+" -> "+e}else{return e}}};var Vh=Zh;var Xh=o((function(e,t){var i=new Array(256);for(var r=0;r<256;r++){i[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1}i[254]=i[254]=1;var n=function(e){var t,i,r,n,s,a=e.length,o=0;for(n=0;n<a;n++){i=e.charCodeAt(n);if((i&64512)===55296&&n+1<a){r=e.charCodeAt(n+1);if((r&64512)===56320){i=65536+(i-55296<<10)+(r-56320);n++}}o+=i<128?1:i<2048?2:i<65536?3:4}if(fh.uint8array){t=new Uint8Array(o)}else{t=new Array(o)}for(s=0,n=0;s<o;n++){i=e.charCodeAt(n);if((i&64512)===55296&&n+1<a){r=e.charCodeAt(n+1);if((r&64512)===56320){i=65536+(i-55296<<10)+(r-56320);n++}}if(i<128){t[s++]=i}else if(i<2048){t[s++]=192|i>>>6;t[s++]=128|i&63}else if(i<65536){t[s++]=224|i>>>12;t[s++]=128|i>>>6&63;t[s++]=128|i&63}else{t[s++]=240|i>>>18;t[s++]=128|i>>>12&63;t[s++]=128|i>>>6&63;t[s++]=128|i&63}}return t};var s=function(e,t){var r;t=t||e.length;if(t>e.length){t=e.length}r=t-1;while(r>=0&&(e[r]&192)===128){r--}if(r<0){return t}if(r===0){return t}return r+i[e[r]]>t?r:t};var a=function(e){var t,r,n,s;var a=e.length;var o=new Array(a*2);for(r=0,t=0;t<a;){n=e[t++];if(n<128){o[r++]=n;continue}s=i[n];if(s>4){o[r++]=65533;t+=s-1;continue}n&=s===2?31:s===3?15:7;while(s>1&&t<a){n=n<<6|e[t++]&63;s--}if(s>1){o[r++]=65533;continue}if(n<65536){o[r++]=n}else{n-=65536;o[r++]=55296|n>>10&1023;o[r++]=56320|n&1023}}if(o.length!==r){if(o.subarray){o=o.subarray(0,r)}else{o.length=r}}return Yh.applyFromCharCode(o)};t.utf8encode=function e(t){if(fh.nodebuffer){return ph.newBufferFrom(t,"utf-8")}return n(t)};t.utf8decode=function e(t){if(fh.nodebuffer){return Yh.transformTo("nodebuffer",t).toString("utf-8")}t=Yh.transformTo(fh.uint8array?"uint8array":"array",t);return a(t)};function o(){Vh.call(this,"utf-8 decode");this.leftOver=null}Yh.inherits(o,Vh);o.prototype.processChunk=function(e){var i=Yh.transformTo(fh.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(fh.uint8array){var r=i;i=new Uint8Array(r.length+this.leftOver.length);i.set(this.leftOver,0);i.set(r,this.leftOver.length)}else{i=this.leftOver.concat(i)}this.leftOver=null}var n=s(i);var a=i;if(n!==i.length){if(fh.uint8array){a=i.subarray(0,n);this.leftOver=i.subarray(n,i.length)}else{a=i.slice(0,n);this.leftOver=i.slice(n,i.length)}}this.push({data:t.utf8decode(a),meta:e.meta})};o.prototype.flush=function(){if(this.leftOver&&this.leftOver.length){this.push({data:t.utf8decode(this.leftOver),meta:{}});this.leftOver=null}};t.Utf8DecodeWorker=o;function h(){Vh.call(this,"utf-8 encode")}Yh.inherits(h,Vh);h.prototype.processChunk=function(e){this.push({data:t.utf8encode(e.data),meta:e.meta})};t.Utf8EncodeWorker=h}));function Kh(e){Vh.call(this,"ConvertWorker to "+e);this.destType=e}Yh.inherits(Kh,Vh);Kh.prototype.processChunk=function(e){this.push({data:Yh.transformTo(this.destType,e.data),meta:e.meta})};var Gh=Kh;var $h=hh.Readable;Yh.inherits(Jh,$h);function Jh(e,t,i){$h.call(this,t);this._helper=e;var r=this;e.on("data",(function(e,t){if(!r.push(e)){r._helper.pause()}if(i){i(t)}})).on("error",(function(e){r.emit("error",e)})).on("end",(function(){r.push(null)}))}Jh.prototype._read=function(){this._helper.resume()};var Qh=Jh;var ef=null;if(fh.nodestream){try{ef=Qh}catch(Ng){}}function tf(e,t,i){switch(e){case"blob":return Yh.newBlob(Yh.transformTo("arraybuffer",t),i);case"base64":return dh.encode(t);default:return Yh.transformTo(e,t)}}function rf(e,t){var i,r=0,n=null,s=0;for(i=0;i<t.length;i++){s+=t[i].length}switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":n=new Uint8Array(s);for(i=0;i<t.length;i++){n.set(t[i],r);r+=t[i].length}return n;case"nodebuffer":return Hn.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}function nf(e,t){return new Hh.Promise((function(i,r){var n=[];var s=e._internalType,a=e._outputType,o=e._mimeType;e.on("data",(function(e,i){n.push(e);if(t){t(i)}})).on("error",(function(e){n=[];r(e)})).on("end",(function(){try{var e=tf(a,rf(s,n),o);i(e)}catch(Ng){r(Ng)}n=[]})).resume()}))}function sf(e,t,i){var r=t;switch(t){case"blob":case"arraybuffer":r="uint8array";break;case"base64":r="string";break}try{this._internalType=r;this._outputType=t;this._mimeType=i;Yh.checkSupport(r);this._worker=e.pipe(new Gh(r));e.lock()}catch(Ng){this._worker=new Vh("error");this._worker.error(Ng)}}sf.prototype={accumulate:function(e){return nf(this,e)},on:function(e,t){var i=this;if(e==="data"){this._worker.on(e,(function(e){t.call(i,e.data,e.meta)}))}else{this._worker.on(e,(function(){Yh.delay(t,arguments,i)}))}return this},resume:function(){Yh.delay(this._worker.resume,[],this._worker);return this},pause:function(){this._worker.pause();return this},toNodejsStream:function(e){Yh.checkSupport("nodestream");if(this._outputType!=="nodebuffer"){throw new Error(this._outputType+" is not supported by this method")}return new ef(this,{objectMode:this._outputType!=="nodebuffer"},e)}};var af=sf;var of=false;var hf=false;var ff=false;var uf=true;var lf=null;var cf=null;var df=null;var pf=null;var vf=null;var gf=null;var mf={base64:of,binary:hf,dir:ff,createFolders:uf,date:lf,compression:cf,compressionOptions:df,comment:pf,unixPermissions:vf,dosPermissions:gf};var yf=16*1024;function wf(e){Vh.call(this,"DataWorker");var t=this;this.dataIsReady=false;this.index=0;this.max=0;this.data=null;this.type="";this._tickScheduled=false;e.then((function(e){t.dataIsReady=true;t.data=e;t.max=e&&e.length||0;t.type=Yh.getTypeOf(e);if(!t.isPaused){t._tickAndRepeat()}}),(function(e){t.error(e)}))}Yh.inherits(wf,Vh);wf.prototype.cleanUp=function(){Vh.prototype.cleanUp.call(this);this.data=null};wf.prototype.resume=function(){if(!Vh.prototype.resume.call(this)){return false}if(!this._tickScheduled&&this.dataIsReady){this._tickScheduled=true;Yh.delay(this._tickAndRepeat,[],this)}return true};wf.prototype._tickAndRepeat=function(){this._tickScheduled=false;if(this.isPaused||this.isFinished){return}this._tick();if(!this.isFinished){Yh.delay(this._tickAndRepeat,[],this);this._tickScheduled=true}};wf.prototype._tick=function(){if(this.isPaused||this.isFinished){return false}var e=yf;var t=null,i=Math.min(this.max,this.index+e);if(this.index>=this.max){return this.end()}else{switch(this.type){case"string":t=this.data.substring(this.index,i);break;case"uint8array":t=this.data.subarray(this.index,i);break;case"array":case"nodebuffer":t=this.data.slice(this.index,i);break}this.index=i;return this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})}};var bf=wf;function _f(e){Vh.call(this,"DataLengthProbe for "+e);this.propName=e;this.withStreamInfo(e,0)}Yh.inherits(_f,Vh);_f.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}Vh.prototype.processChunk.call(this,e)};var xf=_f;function Ef(){var e,t=[];for(var i=0;i<256;i++){e=i;for(var r=0;r<8;r++){e=e&1?3988292384^e>>>1:e>>>1}t[i]=e}return t}var kf=Ef();function Sf(e,t,i,r){var n=kf,s=r+i;e=e^-1;for(var a=r;a<s;a++){e=e>>>8^n[(e^t[a])&255]}return e^-1}function Cf(e,t,i,r){var n=kf,s=r+i;e=e^-1;for(var a=r;a<s;a++){e=e>>>8^n[(e^t.charCodeAt(a))&255]}return e^-1}var Tf=function e(t,i){if(typeof t==="undefined"||!t.length){return 0}var r=Yh.getTypeOf(t)!=="string";if(r){return Sf(i|0,t,t.length,0)}else{return Cf(i|0,t,t.length,0)}};function Rf(){Vh.call(this,"Crc32Probe");this.withStreamInfo("crc32",0)}Yh.inherits(Rf,Vh);Rf.prototype.processChunk=function(e){this.streamInfo.crc32=Tf(e.data,this.streamInfo.crc32||0);this.push(e)};var Af=Rf;function Nf(e,t,i,r,n){this.compressedSize=e;this.uncompressedSize=t;this.crc32=i;this.compression=r;this.compressedContent=n}Nf.prototype={getContentWorker:function(){var e=new bf(Hh.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new xf("data_length"));var t=this;e.on("end",(function(){if(this.streamInfo["data_length"]!==t.uncompressedSize){throw new Error("Bug : uncompressed data size mismatch")}}));return e},getCompressedWorker:function(){return new bf(Hh.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}};Nf.createWorkerFrom=function(e,t,i){return e.pipe(new Af).pipe(new xf("uncompressedSize")).pipe(t.compressWorker(i)).pipe(new xf("compressedSize")).withStreamInfo("compression",t)};var Of=Nf;var Lf=function(e,t,i){this.name=e;this.dir=i.dir;this.date=i.date;this.comment=i.comment;this.unixPermissions=i.unixPermissions;this.dosPermissions=i.dosPermissions;this._data=t;this._dataBinary=i.binary;this.options={compression:i.compression,compressionOptions:i.compressionOptions}};Lf.prototype={internalStream:function(e){var t=null,i="string";try{if(!e){throw new Error("No output type specified.")}i=e.toLowerCase();var r=i==="string"||i==="text";if(i==="binarystring"||i==="text"){i="string"}t=this._decompressWorker();var n=!this._dataBinary;if(n&&!r){t=t.pipe(new Xh.Utf8EncodeWorker)}if(!n&&r){t=t.pipe(new Xh.Utf8DecodeWorker)}}catch(Ng){t=new Vh("error");t.error(Ng)}return new af(t,i,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof Of&&this._data.compression.magic===e.magic){return this._data.getCompressedWorker()}else{var i=this._decompressWorker();if(!this._dataBinary){i=i.pipe(new Xh.Utf8EncodeWorker)}return Of.createWorkerFrom(i,e,t)}},_decompressWorker:function(){if(this._data instanceof Of){return this._data.getContentWorker()}else if(this._data instanceof Vh){return this._data}else{return new bf(this._data)}}};var If=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"];var Df=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")};for(var zf=0;zf<If.length;zf++){Lf.prototype[If[zf]]=Df}var Pf=Lf;var Bf=o((function(e,t){var i=typeof Uint8Array!=="undefined"&&typeof Uint16Array!=="undefined"&&typeof Int32Array!=="undefined";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){var t=Array.prototype.slice.call(arguments,1);while(t.length){var i=t.shift();if(!i){continue}if(typeof i!=="object"){throw new TypeError(i+"must be non-object")}for(var n in i){if(r(i,n)){e[n]=i[n]}}}return e};t.shrinkBuf=function(e,t){if(e.length===t){return e}if(e.subarray){return e.subarray(0,t)}e.length=t;return e};var n={arraySet:function(e,t,i,r,n){if(t.subarray&&e.subarray){e.set(t.subarray(i,i+r),n);return}for(var s=0;s<r;s++){e[n+s]=t[i+s]}},flattenChunks:function(e){var t,i,r,n,s,a;r=0;for(t=0,i=e.length;t<i;t++){r+=e[t].length}a=new Uint8Array(r);n=0;for(t=0,i=e.length;t<i;t++){s=e[t];a.set(s,n);n+=s.length}return a}};var s={arraySet:function(e,t,i,r,n){for(var s=0;s<r;s++){e[n+s]=t[i+s]}},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){if(e){t.Buf8=Uint8Array;t.Buf16=Uint16Array;t.Buf32=Int32Array;t.assign(t,n)}else{t.Buf8=Array;t.Buf16=Array;t.Buf32=Array;t.assign(t,s)}};t.setTyped(i)}));var jf=4;var Uf=0;var Mf=1;var Ff=2;function qf(e){var t=e.length;while(--t>=0){e[t]=0}}var Wf=0;var Hf=1;var Yf=2;var Zf=3;var Vf=258;var Xf=29;var Kf=256;var Gf=Kf+1+Xf;var $f=30;var Jf=19;var Qf=2*Gf+1;var eu=15;var tu=16;var iu=7;var ru=256;var nu=16;var su=17;var au=18;var ou=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];var hu=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];var fu=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];var uu=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var lu=512;var cu=new Array((Gf+2)*2);qf(cu);var du=new Array($f*2);qf(du);var pu=new Array(lu);qf(pu);var vu=new Array(Vf-Zf+1);qf(vu);var gu=new Array(Xf);qf(gu);var mu=new Array($f);qf(mu);function yu(e,t,i,r,n){this.static_tree=e;this.extra_bits=t;this.extra_base=i;this.elems=r;this.max_length=n;this.has_stree=e&&e.length}var wu;var bu;var _u;function xu(e,t){this.dyn_tree=e;this.max_code=0;this.stat_desc=t}function Eu(e){return e<256?pu[e]:pu[256+(e>>>7)]}function ku(e,t){e.pending_buf[e.pending++]=t&255;e.pending_buf[e.pending++]=t>>>8&255}function Su(e,t,i){if(e.bi_valid>tu-i){e.bi_buf|=t<<e.bi_valid&65535;ku(e,e.bi_buf);e.bi_buf=t>>tu-e.bi_valid;e.bi_valid+=i-tu}else{e.bi_buf|=t<<e.bi_valid&65535;e.bi_valid+=i}}function Cu(e,t,i){Su(e,i[t*2],i[t*2+1])}function Tu(e,t){var i=0;do{i|=e&1;e>>>=1;i<<=1}while(--t>0);return i>>>1}function Ru(e){if(e.bi_valid===16){ku(e,e.bi_buf);e.bi_buf=0;e.bi_valid=0}else if(e.bi_valid>=8){e.pending_buf[e.pending++]=e.bi_buf&255;e.bi_buf>>=8;e.bi_valid-=8}}function Au(e,t){var i=t.dyn_tree;var r=t.max_code;var n=t.stat_desc.static_tree;var s=t.stat_desc.has_stree;var a=t.stat_desc.extra_bits;var o=t.stat_desc.extra_base;var h=t.stat_desc.max_length;var f;var u,l;var c;var d;var p;var v=0;for(c=0;c<=eu;c++){e.bl_count[c]=0}i[e.heap[e.heap_max]*2+1]=0;for(f=e.heap_max+1;f<Qf;f++){u=e.heap[f];c=i[i[u*2+1]*2+1]+1;if(c>h){c=h;v++}i[u*2+1]=c;if(u>r){continue}e.bl_count[c]++;d=0;if(u>=o){d=a[u-o]}p=i[u*2];e.opt_len+=p*(c+d);if(s){e.static_len+=p*(n[u*2+1]+d)}}if(v===0){return}do{c=h-1;while(e.bl_count[c]===0){c--}e.bl_count[c]--;e.bl_count[c+1]+=2;e.bl_count[h]--;v-=2}while(v>0);for(c=h;c!==0;c--){u=e.bl_count[c];while(u!==0){l=e.heap[--f];if(l>r){continue}if(i[l*2+1]!==c){e.opt_len+=(c-i[l*2+1])*i[l*2];i[l*2+1]=c}u--}}}function Nu(e,t,i){var r=new Array(eu+1);var n=0;var s;var a;for(s=1;s<=eu;s++){r[s]=n=n+i[s-1]<<1}for(a=0;a<=t;a++){var o=e[a*2+1];if(o===0){continue}e[a*2]=Tu(r[o]++,o)}}function Ou(){var e;var t;var i;var r;var n;var s=new Array(eu+1);i=0;for(r=0;r<Xf-1;r++){gu[r]=i;for(e=0;e<1<<ou[r];e++){vu[i++]=r}}vu[i-1]=r;n=0;for(r=0;r<16;r++){mu[r]=n;for(e=0;e<1<<hu[r];e++){pu[n++]=r}}n>>=7;for(;r<$f;r++){mu[r]=n<<7;for(e=0;e<1<<hu[r]-7;e++){pu[256+n++]=r}}for(t=0;t<=eu;t++){s[t]=0}e=0;while(e<=143){cu[e*2+1]=8;e++;s[8]++}while(e<=255){cu[e*2+1]=9;e++;s[9]++}while(e<=279){cu[e*2+1]=7;e++;s[7]++}while(e<=287){cu[e*2+1]=8;e++;s[8]++}Nu(cu,Gf+1,s);for(e=0;e<$f;e++){du[e*2+1]=5;du[e*2]=Tu(e,5)}wu=new yu(cu,ou,Kf+1,Gf,eu);bu=new yu(du,hu,0,$f,eu);_u=new yu(new Array(0),fu,0,Jf,iu)}function Lu(e){var t;for(t=0;t<Gf;t++){e.dyn_ltree[t*2]=0}for(t=0;t<$f;t++){e.dyn_dtree[t*2]=0}for(t=0;t<Jf;t++){e.bl_tree[t*2]=0}e.dyn_ltree[ru*2]=1;e.opt_len=e.static_len=0;e.last_lit=e.matches=0}function Iu(e){if(e.bi_valid>8){ku(e,e.bi_buf)}else if(e.bi_valid>0){e.pending_buf[e.pending++]=e.bi_buf}e.bi_buf=0;e.bi_valid=0}function Du(e,t,i,r){Iu(e);if(r){ku(e,i);ku(e,~i)}Bf.arraySet(e.pending_buf,e.window,t,i,e.pending);e.pending+=i}function zu(e,t,i,r){var n=t*2;var s=i*2;return e[n]<e[s]||e[n]===e[s]&&r[t]<=r[i]}function Pu(e,t,i){var r=e.heap[i];var n=i<<1;while(n<=e.heap_len){if(n<e.heap_len&&zu(t,e.heap[n+1],e.heap[n],e.depth)){n++}if(zu(t,r,e.heap[n],e.depth)){break}e.heap[i]=e.heap[n];i=n;n<<=1}e.heap[i]=r}function Bu(e,t,i){var r;var n;var s=0;var a;var o;if(e.last_lit!==0){do{r=e.pending_buf[e.d_buf+s*2]<<8|e.pending_buf[e.d_buf+s*2+1];n=e.pending_buf[e.l_buf+s];s++;if(r===0){Cu(e,n,t)}else{a=vu[n];Cu(e,a+Kf+1,t);o=ou[a];if(o!==0){n-=gu[a];Su(e,n,o)}r--;a=Eu(r);Cu(e,a,i);o=hu[a];if(o!==0){r-=mu[a];Su(e,r,o)}}}while(s<e.last_lit)}Cu(e,ru,t)}function ju(e,t){var i=t.dyn_tree;var r=t.stat_desc.static_tree;var n=t.stat_desc.has_stree;var s=t.stat_desc.elems;var a,o;var h=-1;var f;e.heap_len=0;e.heap_max=Qf;for(a=0;a<s;a++){if(i[a*2]!==0){e.heap[++e.heap_len]=h=a;e.depth[a]=0}else{i[a*2+1]=0}}while(e.heap_len<2){f=e.heap[++e.heap_len]=h<2?++h:0;i[f*2]=1;e.depth[f]=0;e.opt_len--;if(n){e.static_len-=r[f*2+1]}}t.max_code=h;for(a=e.heap_len>>1;a>=1;a--){Pu(e,i,a)}f=s;do{a=e.heap[1];e.heap[1]=e.heap[e.heap_len--];Pu(e,i,1);o=e.heap[1];e.heap[--e.heap_max]=a;e.heap[--e.heap_max]=o;i[f*2]=i[a*2]+i[o*2];e.depth[f]=(e.depth[a]>=e.depth[o]?e.depth[a]:e.depth[o])+1;i[a*2+1]=i[o*2+1]=f;e.heap[1]=f++;Pu(e,i,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1];Au(e,t);Nu(i,h,e.bl_count)}function Uu(e,t,i){var r;var n=-1;var s;var a=t[0*2+1];var o=0;var h=7;var f=4;if(a===0){h=138;f=3}t[(i+1)*2+1]=65535;for(r=0;r<=i;r++){s=a;a=t[(r+1)*2+1];if(++o<h&&s===a){continue}else if(o<f){e.bl_tree[s*2]+=o}else if(s!==0){if(s!==n){e.bl_tree[s*2]++}e.bl_tree[nu*2]++}else if(o<=10){e.bl_tree[su*2]++}else{e.bl_tree[au*2]++}o=0;n=s;if(a===0){h=138;f=3}else if(s===a){h=6;f=3}else{h=7;f=4}}}function Mu(e,t,i){var r;var n=-1;var s;var a=t[0*2+1];var o=0;var h=7;var f=4;if(a===0){h=138;f=3}for(r=0;r<=i;r++){s=a;a=t[(r+1)*2+1];if(++o<h&&s===a){continue}else if(o<f){do{Cu(e,s,e.bl_tree)}while(--o!==0)}else if(s!==0){if(s!==n){Cu(e,s,e.bl_tree);o--}Cu(e,nu,e.bl_tree);Su(e,o-3,2)}else if(o<=10){Cu(e,su,e.bl_tree);Su(e,o-3,3)}else{Cu(e,au,e.bl_tree);Su(e,o-11,7)}o=0;n=s;if(a===0){h=138;f=3}else if(s===a){h=6;f=3}else{h=7;f=4}}}function Fu(e){var t;Uu(e,e.dyn_ltree,e.l_desc.max_code);Uu(e,e.dyn_dtree,e.d_desc.max_code);ju(e,e.bl_desc);for(t=Jf-1;t>=3;t--){if(e.bl_tree[uu[t]*2+1]!==0){break}}e.opt_len+=3*(t+1)+5+5+4;return t}function qu(e,t,i,r){var n;Su(e,t-257,5);Su(e,i-1,5);Su(e,r-4,4);for(n=0;n<r;n++){Su(e,e.bl_tree[uu[n]*2+1],3)}Mu(e,e.dyn_ltree,t-1);Mu(e,e.dyn_dtree,i-1)}function Wu(e){var t=4093624447;var i;for(i=0;i<=31;i++,t>>>=1){if(t&1&&e.dyn_ltree[i*2]!==0){return Uf}}if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0){return Mf}for(i=32;i<Kf;i++){if(e.dyn_ltree[i*2]!==0){return Mf}}return Uf}var Hu=false;function Yu(e){if(!Hu){Ou();Hu=true}e.l_desc=new xu(e.dyn_ltree,wu);e.d_desc=new xu(e.dyn_dtree,bu);e.bl_desc=new xu(e.bl_tree,_u);e.bi_buf=0;e.bi_valid=0;Lu(e)}function Zu(e,t,i,r){Su(e,(Wf<<1)+(r?1:0),3);Du(e,t,i,true)}function Vu(e){Su(e,Hf<<1,3);Cu(e,ru,cu);Ru(e)}function Xu(e,t,i,r){var n,s;var a=0;if(e.level>0){if(e.strm.data_type===Ff){e.strm.data_type=Wu(e)}ju(e,e.l_desc);ju(e,e.d_desc);a=Fu(e);n=e.opt_len+3+7>>>3;s=e.static_len+3+7>>>3;if(s<=n){n=s}}else{n=s=i+5}if(i+4<=n&&t!==-1){Zu(e,t,i,r)}else if(e.strategy===jf||s===n){Su(e,(Hf<<1)+(r?1:0),3);Bu(e,cu,du)}else{Su(e,(Yf<<1)+(r?1:0),3);qu(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1);Bu(e,e.dyn_ltree,e.dyn_dtree)}Lu(e);if(r){Iu(e)}}function Ku(e,t,i){e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255;e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255;e.pending_buf[e.l_buf+e.last_lit]=i&255;e.last_lit++;if(t===0){e.dyn_ltree[i*2]++}else{e.matches++;t--;e.dyn_ltree[(vu[i]+Kf+1)*2]++;e.dyn_dtree[Eu(t)*2]++}return e.last_lit===e.lit_bufsize-1}var Gu=Yu;var $u=Zu;var Ju=Xu;var Qu=Ku;var el=Vu;var tl={_tr_init:Gu,_tr_stored_block:$u,_tr_flush_block:Ju,_tr_tally:Qu,_tr_align:el};function il(e,t,i,r){var n=e&65535|0,s=e>>>16&65535|0,a=0;while(i!==0){a=i>2e3?2e3:i;i-=a;do{n=n+t[r++]|0;s=s+n|0}while(--a);n%=65521;s%=65521}return n|s<<16|0}var rl=il;function nl(){var e,t=[];for(var i=0;i<256;i++){e=i;for(var r=0;r<8;r++){e=e&1?3988292384^e>>>1:e>>>1}t[i]=e}return t}var sl=nl();function al(e,t,i,r){var n=sl,s=r+i;e^=-1;for(var a=r;a<s;a++){e=e>>>8^n[(e^t[a])&255]}return e^-1}var ol=al;var hl={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};var fl=0;var ul=1;var ll=3;var cl=4;var dl=5;var pl=0;var vl=1;var gl=-2;var ml=-3;var yl=-5;var wl=-1;var bl=1;var _l=2;var xl=3;var El=4;var kl=0;var Sl=2;var Cl=8;var Tl=9;var Rl=15;var Al=8;var Nl=29;var Ol=256;var Ll=Ol+1+Nl;var Il=30;var Dl=19;var zl=2*Ll+1;var Pl=15;var Bl=3;var jl=258;var Ul=jl+Bl+1;var Ml=32;var Fl=42;var ql=69;var Wl=73;var Hl=91;var Yl=103;var Zl=113;var Vl=666;var Xl=1;var Kl=2;var Gl=3;var $l=4;var Jl=3;function Ql(e,t){e.msg=hl[t];return t}function ec(e){return(e<<1)-(e>4?9:0)}function tc(e){var t=e.length;while(--t>=0){e[t]=0}}function ic(e){var t=e.state;var i=t.pending;if(i>e.avail_out){i=e.avail_out}if(i===0){return}Bf.arraySet(e.output,t.pending_buf,t.pending_out,i,e.next_out);e.next_out+=i;t.pending_out+=i;e.total_out+=i;e.avail_out-=i;t.pending-=i;if(t.pending===0){t.pending_out=0}}function rc(e,t){tl._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t);e.block_start=e.strstart;ic(e.strm)}function nc(e,t){e.pending_buf[e.pending++]=t}function sc(e,t){e.pending_buf[e.pending++]=t>>>8&255;e.pending_buf[e.pending++]=t&255}function ac(e,t,i,r){var n=e.avail_in;if(n>r){n=r}if(n===0){return 0}e.avail_in-=n;Bf.arraySet(t,e.input,e.next_in,n,i);if(e.state.wrap===1){e.adler=rl(e.adler,t,n,i)}else if(e.state.wrap===2){e.adler=ol(e.adler,t,n,i)}e.next_in+=n;e.total_in+=n;return n}function oc(e,t){var i=e.max_chain_length;var r=e.strstart;var n;var s;var a=e.prev_length;var o=e.nice_match;var h=e.strstart>e.w_size-Ul?e.strstart-(e.w_size-Ul):0;var f=e.window;var u=e.w_mask;var l=e.prev;var c=e.strstart+jl;var d=f[r+a-1];var p=f[r+a];if(e.prev_length>=e.good_match){i>>=2}if(o>e.lookahead){o=e.lookahead}do{n=t;if(f[n+a]!==p||f[n+a-1]!==d||f[n]!==f[r]||f[++n]!==f[r+1]){continue}r+=2;n++;do{}while(f[++r]===f[++n]&&f[++r]===f[++n]&&f[++r]===f[++n]&&f[++r]===f[++n]&&f[++r]===f[++n]&&f[++r]===f[++n]&&f[++r]===f[++n]&&f[++r]===f[++n]&&r<c);s=jl-(c-r);r=c-jl;if(s>a){e.match_start=t;a=s;if(s>=o){break}d=f[r+a-1];p=f[r+a]}}while((t=l[t&u])>h&&--i!==0);if(a<=e.lookahead){return a}return e.lookahead}function hc(e){var t=e.w_size;var i,r,n,s,a;do{s=e.window_size-e.lookahead-e.strstart;if(e.strstart>=t+(t-Ul)){Bf.arraySet(e.window,e.window,t,t,0);e.match_start-=t;e.strstart-=t;e.block_start-=t;r=e.hash_size;i=r;do{n=e.head[--i];e.head[i]=n>=t?n-t:0}while(--r);r=t;i=r;do{n=e.prev[--i];e.prev[i]=n>=t?n-t:0}while(--r);s+=t}if(e.strm.avail_in===0){break}r=ac(e.strm,e.window,e.strstart+e.lookahead,s);e.lookahead+=r;if(e.lookahead+e.insert>=Bl){a=e.strstart-e.insert;e.ins_h=e.window[a];e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;while(e.insert){e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+Bl-1])&e.hash_mask;e.prev[a&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=a;a++;e.insert--;if(e.lookahead+e.insert<Bl){break}}}}while(e.lookahead<Ul&&e.strm.avail_in!==0)}function fc(e,t){var i=65535;if(i>e.pending_buf_size-5){i=e.pending_buf_size-5}for(;;){if(e.lookahead<=1){hc(e);if(e.lookahead===0&&t===fl){return Xl}if(e.lookahead===0){break}}e.strstart+=e.lookahead;e.lookahead=0;var r=e.block_start+i;if(e.strstart===0||e.strstart>=r){e.lookahead=e.strstart-r;e.strstart=r;rc(e,false);if(e.strm.avail_out===0){return Xl}}if(e.strstart-e.block_start>=e.w_size-Ul){rc(e,false);if(e.strm.avail_out===0){return Xl}}}e.insert=0;if(t===cl){rc(e,true);if(e.strm.avail_out===0){return Gl}return $l}if(e.strstart>e.block_start){rc(e,false);if(e.strm.avail_out===0){return Xl}}return Xl}function uc(e,t){var i;var r;for(;;){if(e.lookahead<Ul){hc(e);if(e.lookahead<Ul&&t===fl){return Xl}if(e.lookahead===0){break}}i=0;if(e.lookahead>=Bl){e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Bl-1])&e.hash_mask;i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=e.strstart}if(i!==0&&e.strstart-i<=e.w_size-Ul){e.match_length=oc(e,i)}if(e.match_length>=Bl){r=tl._tr_tally(e,e.strstart-e.match_start,e.match_length-Bl);e.lookahead-=e.match_length;if(e.match_length<=e.max_lazy_match&&e.lookahead>=Bl){e.match_length--;do{e.strstart++;e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Bl-1])&e.hash_mask;i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=e.strstart}while(--e.match_length!==0);e.strstart++}else{e.strstart+=e.match_length;e.match_length=0;e.ins_h=e.window[e.strstart];e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask}}else{r=tl._tr_tally(e,0,e.window[e.strstart]);e.lookahead--;e.strstart++}if(r){rc(e,false);if(e.strm.avail_out===0){return Xl}}}e.insert=e.strstart<Bl-1?e.strstart:Bl-1;if(t===cl){rc(e,true);if(e.strm.avail_out===0){return Gl}return $l}if(e.last_lit){rc(e,false);if(e.strm.avail_out===0){return Xl}}return Kl}function lc(e,t){var i;var r;var n;for(;;){if(e.lookahead<Ul){hc(e);if(e.lookahead<Ul&&t===fl){return Xl}if(e.lookahead===0){break}}i=0;if(e.lookahead>=Bl){e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Bl-1])&e.hash_mask;i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=e.strstart}e.prev_length=e.match_length;e.prev_match=e.match_start;e.match_length=Bl-1;if(i!==0&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-Ul){e.match_length=oc(e,i);if(e.match_length<=5&&(e.strategy===bl||e.match_length===Bl&&e.strstart-e.match_start>4096)){e.match_length=Bl-1}}if(e.prev_length>=Bl&&e.match_length<=e.prev_length){n=e.strstart+e.lookahead-Bl;r=tl._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-Bl);e.lookahead-=e.prev_length-1;e.prev_length-=2;do{if(++e.strstart<=n){e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Bl-1])&e.hash_mask;i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=e.strstart}}while(--e.prev_length!==0);e.match_available=0;e.match_length=Bl-1;e.strstart++;if(r){rc(e,false);if(e.strm.avail_out===0){return Xl}}}else if(e.match_available){r=tl._tr_tally(e,0,e.window[e.strstart-1]);if(r){rc(e,false)}e.strstart++;e.lookahead--;if(e.strm.avail_out===0){return Xl}}else{e.match_available=1;e.strstart++;e.lookahead--}}if(e.match_available){r=tl._tr_tally(e,0,e.window[e.strstart-1]);e.match_available=0}e.insert=e.strstart<Bl-1?e.strstart:Bl-1;if(t===cl){rc(e,true);if(e.strm.avail_out===0){return Gl}return $l}if(e.last_lit){rc(e,false);if(e.strm.avail_out===0){return Xl}}return Kl}function cc(e,t){var i;var r;var n,s;var a=e.window;for(;;){if(e.lookahead<=jl){hc(e);if(e.lookahead<=jl&&t===fl){return Xl}if(e.lookahead===0){break}}e.match_length=0;if(e.lookahead>=Bl&&e.strstart>0){n=e.strstart-1;r=a[n];if(r===a[++n]&&r===a[++n]&&r===a[++n]){s=e.strstart+jl;do{}while(r===a[++n]&&r===a[++n]&&r===a[++n]&&r===a[++n]&&r===a[++n]&&r===a[++n]&&r===a[++n]&&r===a[++n]&&n<s);e.match_length=jl-(s-n);if(e.match_length>e.lookahead){e.match_length=e.lookahead}}}if(e.match_length>=Bl){i=tl._tr_tally(e,1,e.match_length-Bl);e.lookahead-=e.match_length;e.strstart+=e.match_length;e.match_length=0}else{i=tl._tr_tally(e,0,e.window[e.strstart]);e.lookahead--;e.strstart++}if(i){rc(e,false);if(e.strm.avail_out===0){return Xl}}}e.insert=0;if(t===cl){rc(e,true);if(e.strm.avail_out===0){return Gl}return $l}if(e.last_lit){rc(e,false);if(e.strm.avail_out===0){return Xl}}return Kl}function dc(e,t){var i;for(;;){if(e.lookahead===0){hc(e);if(e.lookahead===0){if(t===fl){return Xl}break}}e.match_length=0;i=tl._tr_tally(e,0,e.window[e.strstart]);e.lookahead--;e.strstart++;if(i){rc(e,false);if(e.strm.avail_out===0){return Xl}}}e.insert=0;if(t===cl){rc(e,true);if(e.strm.avail_out===0){return Gl}return $l}if(e.last_lit){rc(e,false);if(e.strm.avail_out===0){return Xl}}return Kl}function pc(e,t,i,r,n){this.good_length=e;this.max_lazy=t;this.nice_length=i;this.max_chain=r;this.func=n}var vc;vc=[new pc(0,0,0,0,fc),new pc(4,4,8,4,uc),new pc(4,5,16,8,uc),new pc(4,6,32,32,uc),new pc(4,4,16,16,lc),new pc(8,16,32,32,lc),new pc(8,16,128,128,lc),new pc(8,32,128,256,lc),new pc(32,128,258,1024,lc),new pc(32,258,258,4096,lc)];function gc(e){e.window_size=2*e.w_size;tc(e.head);e.max_lazy_match=vc[e.level].max_lazy;e.good_match=vc[e.level].good_length;e.nice_match=vc[e.level].nice_length;e.max_chain_length=vc[e.level].max_chain;e.strstart=0;e.block_start=0;e.lookahead=0;e.insert=0;e.match_length=e.prev_length=Bl-1;e.match_available=0;e.ins_h=0}function mc(){this.strm=null;this.status=0;this.pending_buf=null;this.pending_buf_size=0;this.pending_out=0;this.pending=0;this.wrap=0;this.gzhead=null;this.gzindex=0;this.method=Cl;this.last_flush=-1;this.w_size=0;this.w_bits=0;this.w_mask=0;this.window=null;this.window_size=0;this.prev=null;this.head=null;this.ins_h=0;this.hash_size=0;this.hash_bits=0;this.hash_mask=0;this.hash_shift=0;this.block_start=0;this.match_length=0;this.prev_match=0;this.match_available=0;this.strstart=0;this.match_start=0;this.lookahead=0;this.prev_length=0;this.max_chain_length=0;this.max_lazy_match=0;this.level=0;this.strategy=0;this.good_match=0;this.nice_match=0;this.dyn_ltree=new Bf.Buf16(zl*2);this.dyn_dtree=new Bf.Buf16((2*Il+1)*2);this.bl_tree=new Bf.Buf16((2*Dl+1)*2);tc(this.dyn_ltree);tc(this.dyn_dtree);tc(this.bl_tree);this.l_desc=null;this.d_desc=null;this.bl_desc=null;this.bl_count=new Bf.Buf16(Pl+1);this.heap=new Bf.Buf16(2*Ll+1);tc(this.heap);this.heap_len=0;this.heap_max=0;this.depth=new Bf.Buf16(2*Ll+1);tc(this.depth);this.l_buf=0;this.lit_bufsize=0;this.last_lit=0;this.d_buf=0;this.opt_len=0;this.static_len=0;this.matches=0;this.insert=0;this.bi_buf=0;this.bi_valid=0}function yc(e){var t;if(!e||!e.state){return Ql(e,gl)}e.total_in=e.total_out=0;e.data_type=Sl;t=e.state;t.pending=0;t.pending_out=0;if(t.wrap<0){t.wrap=-t.wrap}t.status=t.wrap?Fl:Zl;e.adler=t.wrap===2?0:1;t.last_flush=fl;tl._tr_init(t);return pl}function wc(e){var t=yc(e);if(t===pl){gc(e.state)}return t}function bc(e,t){if(!e||!e.state){return gl}if(e.state.wrap!==2){return gl}e.state.gzhead=t;return pl}function _c(e,t,i,r,n,s){if(!e){return gl}var a=1;if(t===wl){t=6}if(r<0){a=0;r=-r}else if(r>15){a=2;r-=16}if(n<1||n>Tl||i!==Cl||r<8||r>15||t<0||t>9||s<0||s>El){return Ql(e,gl)}if(r===8){r=9}var o=new mc;e.state=o;o.strm=e;o.wrap=a;o.gzhead=null;o.w_bits=r;o.w_size=1<<o.w_bits;o.w_mask=o.w_size-1;o.hash_bits=n+7;o.hash_size=1<<o.hash_bits;o.hash_mask=o.hash_size-1;o.hash_shift=~~((o.hash_bits+Bl-1)/Bl);o.window=new Bf.Buf8(o.w_size*2);o.head=new Bf.Buf16(o.hash_size);o.prev=new Bf.Buf16(o.w_size);o.lit_bufsize=1<<n+6;o.pending_buf_size=o.lit_bufsize*4;o.pending_buf=new Bf.Buf8(o.pending_buf_size);o.d_buf=1*o.lit_bufsize;o.l_buf=(1+2)*o.lit_bufsize;o.level=t;o.strategy=s;o.method=i;return wc(e)}function xc(e,t){return _c(e,t,Cl,Rl,Al,kl)}function Ec(e,t){var i,r;var n,s;if(!e||!e.state||t>dl||t<0){return e?Ql(e,gl):gl}r=e.state;if(!e.output||!e.input&&e.avail_in!==0||r.status===Vl&&t!==cl){return Ql(e,e.avail_out===0?yl:gl)}r.strm=e;i=r.last_flush;r.last_flush=t;if(r.status===Fl){if(r.wrap===2){e.adler=0;nc(r,31);nc(r,139);nc(r,8);if(!r.gzhead){nc(r,0);nc(r,0);nc(r,0);nc(r,0);nc(r,0);nc(r,r.level===9?2:r.strategy>=_l||r.level<2?4:0);nc(r,Jl);r.status=Zl}else{nc(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(!r.gzhead.extra?0:4)+(!r.gzhead.name?0:8)+(!r.gzhead.comment?0:16));nc(r,r.gzhead.time&255);nc(r,r.gzhead.time>>8&255);nc(r,r.gzhead.time>>16&255);nc(r,r.gzhead.time>>24&255);nc(r,r.level===9?2:r.strategy>=_l||r.level<2?4:0);nc(r,r.gzhead.os&255);if(r.gzhead.extra&&r.gzhead.extra.length){nc(r,r.gzhead.extra.length&255);nc(r,r.gzhead.extra.length>>8&255)}if(r.gzhead.hcrc){e.adler=ol(e.adler,r.pending_buf,r.pending,0)}r.gzindex=0;r.status=ql}}else{var a=Cl+(r.w_bits-8<<4)<<8;var o=-1;if(r.strategy>=_l||r.level<2){o=0}else if(r.level<6){o=1}else if(r.level===6){o=2}else{o=3}a|=o<<6;if(r.strstart!==0){a|=Ml}a+=31-a%31;r.status=Zl;sc(r,a);if(r.strstart!==0){sc(r,e.adler>>>16);sc(r,e.adler&65535)}e.adler=1}}if(r.status===ql){if(r.gzhead.extra){n=r.pending;while(r.gzindex<(r.gzhead.extra.length&65535)){if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n){e.adler=ol(e.adler,r.pending_buf,r.pending-n,n)}ic(e);n=r.pending;if(r.pending===r.pending_buf_size){break}}nc(r,r.gzhead.extra[r.gzindex]&255);r.gzindex++}if(r.gzhead.hcrc&&r.pending>n){e.adler=ol(e.adler,r.pending_buf,r.pending-n,n)}if(r.gzindex===r.gzhead.extra.length){r.gzindex=0;r.status=Wl}}else{r.status=Wl}}if(r.status===Wl){if(r.gzhead.name){n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n){e.adler=ol(e.adler,r.pending_buf,r.pending-n,n)}ic(e);n=r.pending;if(r.pending===r.pending_buf_size){s=1;break}}if(r.gzindex<r.gzhead.name.length){s=r.gzhead.name.charCodeAt(r.gzindex++)&255}else{s=0}nc(r,s)}while(s!==0);if(r.gzhead.hcrc&&r.pending>n){e.adler=ol(e.adler,r.pending_buf,r.pending-n,n)}if(s===0){r.gzindex=0;r.status=Hl}}else{r.status=Hl}}if(r.status===Hl){if(r.gzhead.comment){n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n){e.adler=ol(e.adler,r.pending_buf,r.pending-n,n)}ic(e);n=r.pending;if(r.pending===r.pending_buf_size){s=1;break}}if(r.gzindex<r.gzhead.comment.length){s=r.gzhead.comment.charCodeAt(r.gzindex++)&255}else{s=0}nc(r,s)}while(s!==0);if(r.gzhead.hcrc&&r.pending>n){e.adler=ol(e.adler,r.pending_buf,r.pending-n,n)}if(s===0){r.status=Yl}}else{r.status=Yl}}if(r.status===Yl){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size){ic(e)}if(r.pending+2<=r.pending_buf_size){nc(r,e.adler&255);nc(r,e.adler>>8&255);e.adler=0;r.status=Zl}}else{r.status=Zl}}if(r.pending!==0){ic(e);if(e.avail_out===0){r.last_flush=-1;return pl}}else if(e.avail_in===0&&ec(t)<=ec(i)&&t!==cl){return Ql(e,yl)}if(r.status===Vl&&e.avail_in!==0){return Ql(e,yl)}if(e.avail_in!==0||r.lookahead!==0||t!==fl&&r.status!==Vl){var h=r.strategy===_l?dc(r,t):r.strategy===xl?cc(r,t):vc[r.level].func(r,t);if(h===Gl||h===$l){r.status=Vl}if(h===Xl||h===Gl){if(e.avail_out===0){r.last_flush=-1}return pl}if(h===Kl){if(t===ul){tl._tr_align(r)}else if(t!==dl){tl._tr_stored_block(r,0,0,false);if(t===ll){tc(r.head);if(r.lookahead===0){r.strstart=0;r.block_start=0;r.insert=0}}}ic(e);if(e.avail_out===0){r.last_flush=-1;return pl}}}if(t!==cl){return pl}if(r.wrap<=0){return vl}if(r.wrap===2){nc(r,e.adler&255);nc(r,e.adler>>8&255);nc(r,e.adler>>16&255);nc(r,e.adler>>24&255);nc(r,e.total_in&255);nc(r,e.total_in>>8&255);nc(r,e.total_in>>16&255);nc(r,e.total_in>>24&255)}else{sc(r,e.adler>>>16);sc(r,e.adler&65535)}ic(e);if(r.wrap>0){r.wrap=-r.wrap}return r.pending!==0?pl:vl}function kc(e){var t;if(!e||!e.state){return gl}t=e.state.status;if(t!==Fl&&t!==ql&&t!==Wl&&t!==Hl&&t!==Yl&&t!==Zl&&t!==Vl){return Ql(e,gl)}e.state=null;return t===Zl?Ql(e,ml):pl}function Sc(e,t){var i=t.length;var r;var n,s;var a;var o;var h;var f;var u;if(!e||!e.state){return gl}r=e.state;a=r.wrap;if(a===2||a===1&&r.status!==Fl||r.lookahead){return gl}if(a===1){e.adler=rl(e.adler,t,i,0)}r.wrap=0;if(i>=r.w_size){if(a===0){tc(r.head);r.strstart=0;r.block_start=0;r.insert=0}u=new Bf.Buf8(r.w_size);Bf.arraySet(u,t,i-r.w_size,r.w_size,0);t=u;i=r.w_size}o=e.avail_in;h=e.next_in;f=e.input;e.avail_in=i;e.next_in=0;e.input=t;hc(r);while(r.lookahead>=Bl){n=r.strstart;s=r.lookahead-(Bl-1);do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+Bl-1])&r.hash_mask;r.prev[n&r.w_mask]=r.head[r.ins_h];r.head[r.ins_h]=n;n++}while(--s);r.strstart=n;r.lookahead=Bl-1;hc(r)}r.strstart+=r.lookahead;r.block_start=r.strstart;r.insert=r.lookahead;r.lookahead=0;r.match_length=r.prev_length=Bl-1;r.match_available=0;e.next_in=h;e.input=f;e.avail_in=o;r.wrap=a;return pl}var Cc=xc;var Tc=_c;var Rc=wc;var Ac=yc;var Nc=bc;var Oc=Ec;var Lc=kc;var Ic=Sc;var Dc="pako deflate (from Nodeca project)";var zc={deflateInit:Cc,deflateInit2:Tc,deflateReset:Rc,deflateResetKeep:Ac,deflateSetHeader:Nc,deflate:Oc,deflateEnd:Lc,deflateSetDictionary:Ic,deflateInfo:Dc};var Pc=true;var Bc=true;try{String.fromCharCode.apply(null,[0])}catch(Og){Pc=false}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(Og){Bc=false}var jc=new Bf.Buf8(256);for(var Uc=0;Uc<256;Uc++){jc[Uc]=Uc>=252?6:Uc>=248?5:Uc>=240?4:Uc>=224?3:Uc>=192?2:1}jc[254]=jc[254]=1;var Mc=function(e){var t,i,r,n,s,a=e.length,o=0;for(n=0;n<a;n++){i=e.charCodeAt(n);if((i&64512)===55296&&n+1<a){r=e.charCodeAt(n+1);if((r&64512)===56320){i=65536+(i-55296<<10)+(r-56320);n++}}o+=i<128?1:i<2048?2:i<65536?3:4}t=new Bf.Buf8(o);for(s=0,n=0;s<o;n++){i=e.charCodeAt(n);if((i&64512)===55296&&n+1<a){r=e.charCodeAt(n+1);if((r&64512)===56320){i=65536+(i-55296<<10)+(r-56320);n++}}if(i<128){t[s++]=i}else if(i<2048){t[s++]=192|i>>>6;t[s++]=128|i&63}else if(i<65536){t[s++]=224|i>>>12;t[s++]=128|i>>>6&63;t[s++]=128|i&63}else{t[s++]=240|i>>>18;t[s++]=128|i>>>12&63;t[s++]=128|i>>>6&63;t[s++]=128|i&63}}return t};function Fc(e,t){if(t<65534){if(e.subarray&&Bc||!e.subarray&&Pc){return String.fromCharCode.apply(null,Bf.shrinkBuf(e,t))}}var i="";for(var r=0;r<t;r++){i+=String.fromCharCode(e[r])}return i}var qc=function(e){return Fc(e,e.length)};var Wc=function(e){var t=new Bf.Buf8(e.length);for(var i=0,r=t.length;i<r;i++){t[i]=e.charCodeAt(i)}return t};var Hc=function(e,t){var i,r,n,s;var a=t||e.length;var o=new Array(a*2);for(r=0,i=0;i<a;){n=e[i++];if(n<128){o[r++]=n;continue}s=jc[n];if(s>4){o[r++]=65533;i+=s-1;continue}n&=s===2?31:s===3?15:7;while(s>1&&i<a){n=n<<6|e[i++]&63;s--}if(s>1){o[r++]=65533;continue}if(n<65536){o[r++]=n}else{n-=65536;o[r++]=55296|n>>10&1023;o[r++]=56320|n&1023}}return Fc(o,r)};var Yc=function(e,t){var i;t=t||e.length;if(t>e.length){t=e.length}i=t-1;while(i>=0&&(e[i]&192)===128){i--}if(i<0){return t}if(i===0){return t}return i+jc[e[i]]>t?i:t};var Zc={string2buf:Mc,buf2binstring:qc,binstring2buf:Wc,buf2string:Hc,utf8border:Yc};function Vc(){this.input=null;this.next_in=0;this.avail_in=0;this.total_in=0;this.output=null;this.next_out=0;this.avail_out=0;this.total_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}var Xc=Vc;var Kc=Object.prototype.toString;var Gc=0;var $c=4;var Jc=0;var Qc=1;var ed=2;var td=-1;var id=0;var rd=8;function nd(e){if(!(this instanceof nd))return new nd(e);this.options=Bf.assign({level:td,method:rd,chunkSize:16384,windowBits:15,memLevel:8,strategy:id,to:""},e||{});var t=this.options;if(t.raw&&t.windowBits>0){t.windowBits=-t.windowBits}else if(t.gzip&&t.windowBits>0&&t.windowBits<16){t.windowBits+=16}this.err=0;this.msg="";this.ended=false;this.chunks=[];this.strm=new Xc;this.strm.avail_out=0;var i=zc.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(i!==Jc){throw new Error(hl[i])}if(t.header){zc.deflateSetHeader(this.strm,t.header)}if(t.dictionary){var r;if(typeof t.dictionary==="string"){r=Zc.string2buf(t.dictionary)}else if(Kc.call(t.dictionary)==="[object ArrayBuffer]"){r=new Uint8Array(t.dictionary)}else{r=t.dictionary}i=zc.deflateSetDictionary(this.strm,r);if(i!==Jc){throw new Error(hl[i])}this._dict_set=true}}nd.prototype.push=function(e,t){var i=this.strm;var r=this.options.chunkSize;var n,s;if(this.ended){return false}s=t===~~t?t:t===true?$c:Gc;if(typeof e==="string"){i.input=Zc.string2buf(e)}else if(Kc.call(e)==="[object ArrayBuffer]"){i.input=new Uint8Array(e)}else{i.input=e}i.next_in=0;i.avail_in=i.input.length;do{if(i.avail_out===0){i.output=new Bf.Buf8(r);i.next_out=0;i.avail_out=r}n=zc.deflate(i,s);if(n!==Qc&&n!==Jc){this.onEnd(n);this.ended=true;return false}if(i.avail_out===0||i.avail_in===0&&(s===$c||s===ed)){if(this.options.to==="string"){this.onData(Zc.buf2binstring(Bf.shrinkBuf(i.output,i.next_out)))}else{this.onData(Bf.shrinkBuf(i.output,i.next_out))}}}while((i.avail_in>0||i.avail_out===0)&&n!==Qc);if(s===$c){n=zc.deflateEnd(this.strm);this.onEnd(n);this.ended=true;return n===Jc}if(s===ed){this.onEnd(Jc);i.avail_out=0;return true}return true};nd.prototype.onData=function(e){this.chunks.push(e)};nd.prototype.onEnd=function(e){if(e===Jc){if(this.options.to==="string"){this.result=this.chunks.join("")}else{this.result=Bf.flattenChunks(this.chunks)}}this.chunks=[];this.err=e;this.msg=this.strm.msg};function sd(e,t){var i=new nd(t);i.push(e,true);if(i.err){throw i.msg||hl[i.err]}return i.result}function ad(e,t){t=t||{};t.raw=true;return sd(e,t)}function od(e,t){t=t||{};t.gzip=true;return sd(e,t)}var hd=nd;var fd=sd;var ud=ad;var ld=od;var cd={Deflate:hd,deflate:fd,deflateRaw:ud,gzip:ld};var dd=30;var pd=12;var vd=function e(t,i){var r;var n;var s;var a;var o;var h;var f;var u;var l;var c;var d;var p;var v;var g;var m;var y;var w;var b;var _;var x;var E;var k;var S;var C,T;r=t.state;n=t.next_in;C=t.input;s=n+(t.avail_in-5);a=t.next_out;T=t.output;o=a-(i-t.avail_out);h=a+(t.avail_out-257);f=r.dmax;u=r.wsize;l=r.whave;c=r.wnext;d=r.window;p=r.hold;v=r.bits;g=r.lencode;m=r.distcode;y=(1<<r.lenbits)-1;w=(1<<r.distbits)-1;e:do{if(v<15){p+=C[n++]<<v;v+=8;p+=C[n++]<<v;v+=8}b=g[p&y];t:for(;;){_=b>>>24;p>>>=_;v-=_;_=b>>>16&255;if(_===0){T[a++]=b&65535}else if(_&16){x=b&65535;_&=15;if(_){if(v<_){p+=C[n++]<<v;v+=8}x+=p&(1<<_)-1;p>>>=_;v-=_}if(v<15){p+=C[n++]<<v;v+=8;p+=C[n++]<<v;v+=8}b=m[p&w];i:for(;;){_=b>>>24;p>>>=_;v-=_;_=b>>>16&255;if(_&16){E=b&65535;_&=15;if(v<_){p+=C[n++]<<v;v+=8;if(v<_){p+=C[n++]<<v;v+=8}}E+=p&(1<<_)-1;if(E>f){t.msg="invalid distance too far back";r.mode=dd;break e}p>>>=_;v-=_;_=a-o;if(E>_){_=E-_;if(_>l){if(r.sane){t.msg="invalid distance too far back";r.mode=dd;break e}}k=0;S=d;if(c===0){k+=u-_;if(_<x){x-=_;do{T[a++]=d[k++]}while(--_);k=a-E;S=T}}else if(c<_){k+=u+c-_;_-=c;if(_<x){x-=_;do{T[a++]=d[k++]}while(--_);k=0;if(c<x){_=c;x-=_;do{T[a++]=d[k++]}while(--_);k=a-E;S=T}}}else{k+=c-_;if(_<x){x-=_;do{T[a++]=d[k++]}while(--_);k=a-E;S=T}}while(x>2){T[a++]=S[k++];T[a++]=S[k++];T[a++]=S[k++];x-=3}if(x){T[a++]=S[k++];if(x>1){T[a++]=S[k++]}}}else{k=a-E;do{T[a++]=T[k++];T[a++]=T[k++];T[a++]=T[k++];x-=3}while(x>2);if(x){T[a++]=T[k++];if(x>1){T[a++]=T[k++]}}}}else if((_&64)===0){b=m[(b&65535)+(p&(1<<_)-1)];continue i}else{t.msg="invalid distance code";r.mode=dd;break e}break}}else if((_&64)===0){b=g[(b&65535)+(p&(1<<_)-1)];continue t}else if(_&32){r.mode=pd;break e}else{t.msg="invalid literal/length code";r.mode=dd;break e}break}}while(n<s&&a<h);x=v>>3;n-=x;v-=x<<3;p&=(1<<v)-1;t.next_in=n;t.next_out=a;t.avail_in=n<s?5+(s-n):5-(n-s);t.avail_out=a<h?257+(h-a):257-(a-h);r.hold=p;r.bits=v;return};var gd=15;var md=852;var yd=592;var wd=0;var bd=1;var _d=2;var xd=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0];var Ed=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78];var kd=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0];var Sd=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];var Cd=function e(t,i,r,n,s,a,o,h){var f=h.bits;var u=0;var l=0;var c=0,d=0;var p=0;var v=0;var g=0;var m=0;var y=0;var w=0;var b;var _;var x;var E;var k;var S=null;var C=0;var T;var R=new Bf.Buf16(gd+1);var A=new Bf.Buf16(gd+1);var N=null;var O=0;var L,I,D;for(u=0;u<=gd;u++){R[u]=0}for(l=0;l<n;l++){R[i[r+l]]++}p=f;for(d=gd;d>=1;d--){if(R[d]!==0){break}}if(p>d){p=d}if(d===0){s[a++]=1<<24|64<<16|0;s[a++]=1<<24|64<<16|0;h.bits=1;return 0}for(c=1;c<d;c++){if(R[c]!==0){break}}if(p<c){p=c}m=1;for(u=1;u<=gd;u++){m<<=1;m-=R[u];if(m<0){return-1}}if(m>0&&(t===wd||d!==1)){return-1}A[1]=0;for(u=1;u<gd;u++){A[u+1]=A[u]+R[u]}for(l=0;l<n;l++){if(i[r+l]!==0){o[A[i[r+l]]++]=l}}if(t===wd){S=N=o;T=19}else if(t===bd){S=xd;C-=257;N=Ed;O-=257;T=256}else{S=kd;N=Sd;T=-1}w=0;l=0;u=c;k=a;v=p;g=0;x=-1;y=1<<p;E=y-1;if(t===bd&&y>md||t===_d&&y>yd){return 1}for(;;){L=u-g;if(o[l]<T){I=0;D=o[l]}else if(o[l]>T){I=N[O+o[l]];D=S[C+o[l]]}else{I=32+64;D=0}b=1<<u-g;_=1<<v;c=_;do{_-=b;s[k+(w>>g)+_]=L<<24|I<<16|D|0}while(_!==0);b=1<<u-1;while(w&b){b>>=1}if(b!==0){w&=b-1;w+=b}else{w=0}l++;if(--R[u]===0){if(u===d){break}u=i[r+o[l]]}if(u>p&&(w&E)!==x){if(g===0){g=p}k+=c;v=u-g;m=1<<v;while(v+g<d){m-=R[v+g];if(m<=0){break}v++;m<<=1}y+=1<<v;if(t===bd&&y>md||t===_d&&y>yd){return 1}x=w&E;s[x]=p<<24|v<<16|k-a|0}}if(w!==0){s[k+w]=u-g<<24|64<<16|0}h.bits=p;return 0};var Td=0;var Rd=1;var Ad=2;var Nd=4;var Od=5;var Ld=6;var Id=0;var Dd=1;var zd=2;var Pd=-2;var Bd=-3;var jd=-4;var Ud=-5;var Md=8;var Fd=1;var qd=2;var Wd=3;var Hd=4;var Yd=5;var Zd=6;var Vd=7;var Xd=8;var Kd=9;var Gd=10;var $d=11;var Jd=12;var Qd=13;var ep=14;var tp=15;var ip=16;var rp=17;var np=18;var sp=19;var ap=20;var op=21;var hp=22;var fp=23;var up=24;var lp=25;var cp=26;var dp=27;var pp=28;var vp=29;var gp=30;var mp=31;var yp=32;var wp=852;var bp=592;var _p=15;var xp=_p;function Ep(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function kp(){this.mode=0;this.last=false;this.wrap=0;this.havedict=false;this.flags=0;this.dmax=0;this.check=0;this.total=0;this.head=null;this.wbits=0;this.wsize=0;this.whave=0;this.wnext=0;this.window=null;this.hold=0;this.bits=0;this.length=0;this.offset=0;this.extra=0;this.lencode=null;this.distcode=null;this.lenbits=0;this.distbits=0;this.ncode=0;this.nlen=0;this.ndist=0;this.have=0;this.next=null;this.lens=new Bf.Buf16(320);this.work=new Bf.Buf16(288);this.lendyn=null;this.distdyn=null;this.sane=0;this.back=0;this.was=0}function Sp(e){var t;if(!e||!e.state){return Pd}t=e.state;e.total_in=e.total_out=t.total=0;e.msg="";if(t.wrap){e.adler=t.wrap&1}t.mode=Fd;t.last=0;t.havedict=0;t.dmax=32768;t.head=null;t.hold=0;t.bits=0;t.lencode=t.lendyn=new Bf.Buf32(wp);t.distcode=t.distdyn=new Bf.Buf32(bp);t.sane=1;t.back=-1;return Id}function Cp(e){var t;if(!e||!e.state){return Pd}t=e.state;t.wsize=0;t.whave=0;t.wnext=0;return Sp(e)}function Tp(e,t){var i;var r;if(!e||!e.state){return Pd}r=e.state;if(t<0){i=0;t=-t}else{i=(t>>4)+1;if(t<48){t&=15}}if(t&&(t<8||t>15)){return Pd}if(r.window!==null&&r.wbits!==t){r.window=null}r.wrap=i;r.wbits=t;return Cp(e)}function Rp(e,t){var i;var r;if(!e){return Pd}r=new kp;e.state=r;r.window=null;i=Tp(e,t);if(i!==Id){e.state=null}return i}function Ap(e){return Rp(e,xp)}var Np=true;var Op,Lp;function Ip(e){if(Np){var t;Op=new Bf.Buf32(512);Lp=new Bf.Buf32(32);t=0;while(t<144){e.lens[t++]=8}while(t<256){e.lens[t++]=9}while(t<280){e.lens[t++]=7}while(t<288){e.lens[t++]=8}Cd(Rd,e.lens,0,288,Op,0,e.work,{bits:9});t=0;while(t<32){e.lens[t++]=5}Cd(Ad,e.lens,0,32,Lp,0,e.work,{bits:5});Np=false}e.lencode=Op;e.lenbits=9;e.distcode=Lp;e.distbits=5}function Dp(e,t,i,r){var n;var s=e.state;if(s.window===null){s.wsize=1<<s.wbits;s.wnext=0;s.whave=0;s.window=new Bf.Buf8(s.wsize)}if(r>=s.wsize){Bf.arraySet(s.window,t,i-s.wsize,s.wsize,0);s.wnext=0;s.whave=s.wsize}else{n=s.wsize-s.wnext;if(n>r){n=r}Bf.arraySet(s.window,t,i-r,n,s.wnext);r-=n;if(r){Bf.arraySet(s.window,t,i-r,r,0);s.wnext=r;s.whave=s.wsize}else{s.wnext+=n;if(s.wnext===s.wsize){s.wnext=0}if(s.whave<s.wsize){s.whave+=n}}}return 0}function zp(e,t){var i;var r,n;var s;var a;var o,h;var f;var u;var l,c;var d;var p;var v;var g=0;var m,y,w;var b,_,x;var E;var k;var S=new Bf.Buf8(4);var C;var T;var R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0){return Pd}i=e.state;if(i.mode===Jd){i.mode=Qd}a=e.next_out;n=e.output;h=e.avail_out;s=e.next_in;r=e.input;o=e.avail_in;f=i.hold;u=i.bits;l=o;c=h;k=Id;e:for(;;){switch(i.mode){case Fd:if(i.wrap===0){i.mode=Qd;break}while(u<16){if(o===0){break e}o--;f+=r[s++]<<u;u+=8}if(i.wrap&2&&f===35615){i.check=0;S[0]=f&255;S[1]=f>>>8&255;i.check=ol(i.check,S,2,0);f=0;u=0;i.mode=qd;break}i.flags=0;if(i.head){i.head.done=false}if(!(i.wrap&1)||(((f&255)<<8)+(f>>8))%31){e.msg="incorrect header check";i.mode=gp;break}if((f&15)!==Md){e.msg="unknown compression method";i.mode=gp;break}f>>>=4;u-=4;E=(f&15)+8;if(i.wbits===0){i.wbits=E}else if(E>i.wbits){e.msg="invalid window size";i.mode=gp;break}i.dmax=1<<E;e.adler=i.check=1;i.mode=f&512?Gd:Jd;f=0;u=0;break;case qd:while(u<16){if(o===0){break e}o--;f+=r[s++]<<u;u+=8}i.flags=f;if((i.flags&255)!==Md){e.msg="unknown compression method";i.mode=gp;break}if(i.flags&57344){e.msg="unknown header flags set";i.mode=gp;break}if(i.head){i.head.text=f>>8&1}if(i.flags&512){S[0]=f&255;S[1]=f>>>8&255;i.check=ol(i.check,S,2,0)}f=0;u=0;i.mode=Wd;case Wd:while(u<32){if(o===0){break e}o--;f+=r[s++]<<u;u+=8}if(i.head){i.head.time=f}if(i.flags&512){S[0]=f&255;S[1]=f>>>8&255;S[2]=f>>>16&255;S[3]=f>>>24&255;i.check=ol(i.check,S,4,0)}f=0;u=0;i.mode=Hd;case Hd:while(u<16){if(o===0){break e}o--;f+=r[s++]<<u;u+=8}if(i.head){i.head.xflags=f&255;i.head.os=f>>8}if(i.flags&512){S[0]=f&255;S[1]=f>>>8&255;i.check=ol(i.check,S,2,0)}f=0;u=0;i.mode=Yd;case Yd:if(i.flags&1024){while(u<16){if(o===0){break e}o--;f+=r[s++]<<u;u+=8}i.length=f;if(i.head){i.head.extra_len=f}if(i.flags&512){S[0]=f&255;S[1]=f>>>8&255;i.check=ol(i.check,S,2,0)}f=0;u=0}else if(i.head){i.head.extra=null}i.mode=Zd;case Zd:if(i.flags&1024){d=i.length;if(d>o){d=o}if(d){if(i.head){E=i.head.extra_len-i.length;if(!i.head.extra){i.head.extra=new Array(i.head.extra_len)}Bf.arraySet(i.head.extra,r,s,d,E)}if(i.flags&512){i.check=ol(i.check,r,d,s)}o-=d;s+=d;i.length-=d}if(i.length){break e}}i.length=0;i.mode=Vd;case Vd:if(i.flags&2048){if(o===0){break e}d=0;do{E=r[s+d++];if(i.head&&E&&i.length<65536){i.head.name+=String.fromCharCode(E)}}while(E&&d<o);if(i.flags&512){i.check=ol(i.check,r,d,s)}o-=d;s+=d;if(E){break e}}else if(i.head){i.head.name=null}i.length=0;i.mode=Xd;case Xd:if(i.flags&4096){if(o===0){break e}d=0;do{E=r[s+d++];if(i.head&&E&&i.length<65536){i.head.comment+=String.fromCharCode(E)}}while(E&&d<o);if(i.flags&512){i.check=ol(i.check,r,d,s)}o-=d;s+=d;if(E){break e}}else if(i.head){i.head.comment=null}i.mode=Kd;case Kd:if(i.flags&512){while(u<16){if(o===0){break e}o--;f+=r[s++]<<u;u+=8}if(f!==(i.check&65535)){e.msg="header crc mismatch";i.mode=gp;break}f=0;u=0}if(i.head){i.head.hcrc=i.flags>>9&1;i.head.done=true}e.adler=i.check=0;i.mode=Jd;break;case Gd:while(u<32){if(o===0){break e}o--;f+=r[s++]<<u;u+=8}e.adler=i.check=Ep(f);f=0;u=0;i.mode=$d;case $d:if(i.havedict===0){e.next_out=a;e.avail_out=h;e.next_in=s;e.avail_in=o;i.hold=f;i.bits=u;return zd}e.adler=i.check=1;i.mode=Jd;case Jd:if(t===Od||t===Ld){break e}case Qd:if(i.last){f>>>=u&7;u-=u&7;i.mode=dp;break}while(u<3){if(o===0){break e}o--;f+=r[s++]<<u;u+=8}i.last=f&1;f>>>=1;u-=1;switch(f&3){case 0:i.mode=ep;break;case 1:Ip(i);i.mode=ap;if(t===Ld){f>>>=2;u-=2;break e}break;case 2:i.mode=rp;break;case 3:e.msg="invalid block type";i.mode=gp}f>>>=2;u-=2;break;case ep:f>>>=u&7;u-=u&7;while(u<32){if(o===0){break e}o--;f+=r[s++]<<u;u+=8}if((f&65535)!==(f>>>16^65535)){e.msg="invalid stored block lengths";i.mode=gp;break}i.length=f&65535;f=0;u=0;i.mode=tp;if(t===Ld){break e}case tp:i.mode=ip;case ip:d=i.length;if(d){if(d>o){d=o}if(d>h){d=h}if(d===0){break e}Bf.arraySet(n,r,s,d,a);o-=d;s+=d;h-=d;a+=d;i.length-=d;break}i.mode=Jd;break;case rp:while(u<14){if(o===0){break e}o--;f+=r[s++]<<u;u+=8}i.nlen=(f&31)+257;f>>>=5;u-=5;i.ndist=(f&31)+1;f>>>=5;u-=5;i.ncode=(f&15)+4;f>>>=4;u-=4;if(i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols";i.mode=gp;break}i.have=0;i.mode=np;case np:while(i.have<i.ncode){while(u<3){if(o===0){break e}o--;f+=r[s++]<<u;u+=8}i.lens[R[i.have++]]=f&7;f>>>=3;u-=3}while(i.have<19){i.lens[R[i.have++]]=0}i.lencode=i.lendyn;i.lenbits=7;C={bits:i.lenbits};k=Cd(Td,i.lens,0,19,i.lencode,0,i.work,C);i.lenbits=C.bits;if(k){e.msg="invalid code lengths set";i.mode=gp;break}i.have=0;i.mode=sp;case sp:while(i.have<i.nlen+i.ndist){for(;;){g=i.lencode[f&(1<<i.lenbits)-1];m=g>>>24;y=g>>>16&255;w=g&65535;if(m<=u){break}if(o===0){break e}o--;f+=r[s++]<<u;u+=8}if(w<16){f>>>=m;u-=m;i.lens[i.have++]=w}else{if(w===16){T=m+2;while(u<T){if(o===0){break e}o--;f+=r[s++]<<u;u+=8}f>>>=m;u-=m;if(i.have===0){e.msg="invalid bit length repeat";i.mode=gp;break}E=i.lens[i.have-1];d=3+(f&3);f>>>=2;u-=2}else if(w===17){T=m+3;while(u<T){if(o===0){break e}o--;f+=r[s++]<<u;u+=8}f>>>=m;u-=m;E=0;d=3+(f&7);f>>>=3;u-=3}else{T=m+7;while(u<T){if(o===0){break e}o--;f+=r[s++]<<u;u+=8}f>>>=m;u-=m;E=0;d=11+(f&127);f>>>=7;u-=7}if(i.have+d>i.nlen+i.ndist){e.msg="invalid bit length repeat";i.mode=gp;break}while(d--){i.lens[i.have++]=E}}}if(i.mode===gp){break}if(i.lens[256]===0){e.msg="invalid code -- missing end-of-block";i.mode=gp;break}i.lenbits=9;C={bits:i.lenbits};k=Cd(Rd,i.lens,0,i.nlen,i.lencode,0,i.work,C);i.lenbits=C.bits;if(k){e.msg="invalid literal/lengths set";i.mode=gp;break}i.distbits=6;i.distcode=i.distdyn;C={bits:i.distbits};k=Cd(Ad,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,C);i.distbits=C.bits;if(k){e.msg="invalid distances set";i.mode=gp;break}i.mode=ap;if(t===Ld){break e}case ap:i.mode=op;case op:if(o>=6&&h>=258){e.next_out=a;e.avail_out=h;e.next_in=s;e.avail_in=o;i.hold=f;i.bits=u;vd(e,c);a=e.next_out;n=e.output;h=e.avail_out;s=e.next_in;r=e.input;o=e.avail_in;f=i.hold;u=i.bits;if(i.mode===Jd){i.back=-1}break}i.back=0;for(;;){g=i.lencode[f&(1<<i.lenbits)-1];m=g>>>24;y=g>>>16&255;w=g&65535;if(m<=u){break}if(o===0){break e}o--;f+=r[s++]<<u;u+=8}if(y&&(y&240)===0){b=m;_=y;x=w;for(;;){g=i.lencode[x+((f&(1<<b+_)-1)>>b)];m=g>>>24;y=g>>>16&255;w=g&65535;if(b+m<=u){break}if(o===0){break e}o--;f+=r[s++]<<u;u+=8}f>>>=b;u-=b;i.back+=b}f>>>=m;u-=m;i.back+=m;i.length=w;if(y===0){i.mode=cp;break}if(y&32){i.back=-1;i.mode=Jd;break}if(y&64){e.msg="invalid literal/length code";i.mode=gp;break}i.extra=y&15;i.mode=hp;case hp:if(i.extra){T=i.extra;while(u<T){if(o===0){break e}o--;f+=r[s++]<<u;u+=8}i.length+=f&(1<<i.extra)-1;f>>>=i.extra;u-=i.extra;i.back+=i.extra}i.was=i.length;i.mode=fp;case fp:for(;;){g=i.distcode[f&(1<<i.distbits)-1];m=g>>>24;y=g>>>16&255;w=g&65535;if(m<=u){break}if(o===0){break e}o--;f+=r[s++]<<u;u+=8}if((y&240)===0){b=m;_=y;x=w;for(;;){g=i.distcode[x+((f&(1<<b+_)-1)>>b)];m=g>>>24;y=g>>>16&255;w=g&65535;if(b+m<=u){break}if(o===0){break e}o--;f+=r[s++]<<u;u+=8}f>>>=b;u-=b;i.back+=b}f>>>=m;u-=m;i.back+=m;if(y&64){e.msg="invalid distance code";i.mode=gp;break}i.offset=w;i.extra=y&15;i.mode=up;case up:if(i.extra){T=i.extra;while(u<T){if(o===0){break e}o--;f+=r[s++]<<u;u+=8}i.offset+=f&(1<<i.extra)-1;f>>>=i.extra;u-=i.extra;i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back";i.mode=gp;break}i.mode=lp;case lp:if(h===0){break e}d=c-h;if(i.offset>d){d=i.offset-d;if(d>i.whave){if(i.sane){e.msg="invalid distance too far back";i.mode=gp;break}}if(d>i.wnext){d-=i.wnext;p=i.wsize-d}else{p=i.wnext-d}if(d>i.length){d=i.length}v=i.window}else{v=n;p=a-i.offset;d=i.length}if(d>h){d=h}h-=d;i.length-=d;do{n[a++]=v[p++]}while(--d);if(i.length===0){i.mode=op}break;case cp:if(h===0){break e}n[a++]=i.length;h--;i.mode=op;break;case dp:if(i.wrap){while(u<32){if(o===0){break e}o--;f|=r[s++]<<u;u+=8}c-=h;e.total_out+=c;i.total+=c;if(c){e.adler=i.check=i.flags?ol(i.check,n,c,a-c):rl(i.check,n,c,a-c)}c=h;if((i.flags?f:Ep(f))!==i.check){e.msg="incorrect data check";i.mode=gp;break}f=0;u=0}i.mode=pp;case pp:if(i.wrap&&i.flags){while(u<32){if(o===0){break e}o--;f+=r[s++]<<u;u+=8}if(f!==(i.total&4294967295)){e.msg="incorrect length check";i.mode=gp;break}f=0;u=0}i.mode=vp;case vp:k=Dd;break e;case gp:k=Bd;break e;case mp:return jd;case yp:default:return Pd}}e.next_out=a;e.avail_out=h;e.next_in=s;e.avail_in=o;i.hold=f;i.bits=u;if(i.wsize||c!==e.avail_out&&i.mode<gp&&(i.mode<dp||t!==Nd)){if(Dp(e,e.output,e.next_out,c-e.avail_out));}l-=e.avail_in;c-=e.avail_out;e.total_in+=l;e.total_out+=c;i.total+=c;if(i.wrap&&c){e.adler=i.check=i.flags?ol(i.check,n,c,e.next_out-c):rl(i.check,n,c,e.next_out-c)}e.data_type=i.bits+(i.last?64:0)+(i.mode===Jd?128:0)+(i.mode===ap||i.mode===tp?256:0);if((l===0&&c===0||t===Nd)&&k===Id){k=Ud}return k}function Pp(e){if(!e||!e.state){return Pd}var t=e.state;if(t.window){t.window=null}e.state=null;return Id}function Bp(e,t){var i;if(!e||!e.state){return Pd}i=e.state;if((i.wrap&2)===0){return Pd}i.head=t;t.done=false;return Id}function jp(e,t){var i=t.length;var r;var n;var s;if(!e||!e.state){return Pd}r=e.state;if(r.wrap!==0&&r.mode!==$d){return Pd}if(r.mode===$d){n=1;n=rl(n,t,i,0);if(n!==r.check){return Bd}}s=Dp(e,t,i,i);if(s){r.mode=mp;return jd}r.havedict=1;return Id}var Up=Cp;var Mp=Tp;var Fp=Sp;var qp=Ap;var Wp=Rp;var Hp=zp;var Yp=Pp;var Zp=Bp;var Vp=jp;var Xp="pako inflate (from Nodeca project)";var Kp={inflateReset:Up,inflateReset2:Mp,inflateResetKeep:Fp,inflateInit:qp,inflateInit2:Wp,inflate:Hp,inflateEnd:Yp,inflateGetHeader:Zp,inflateSetDictionary:Vp,inflateInfo:Xp};var Gp={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function $p(){this.text=0;this.time=0;this.xflags=0;this.os=0;this.extra=null;this.extra_len=0;this.name="";this.comment="";this.hcrc=0;this.done=false}var Jp=$p;var Qp=Object.prototype.toString;function ev(e){if(!(this instanceof ev))return new ev(e);this.options=Bf.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;if(t.raw&&t.windowBits>=0&&t.windowBits<16){t.windowBits=-t.windowBits;if(t.windowBits===0){t.windowBits=-15}}if(t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)){t.windowBits+=32}if(t.windowBits>15&&t.windowBits<48){if((t.windowBits&15)===0){t.windowBits|=15}}this.err=0;this.msg="";this.ended=false;this.chunks=[];this.strm=new Xc;this.strm.avail_out=0;var i=Kp.inflateInit2(this.strm,t.windowBits);if(i!==Gp.Z_OK){throw new Error(hl[i])}this.header=new Jp;Kp.inflateGetHeader(this.strm,this.header);if(t.dictionary){if(typeof t.dictionary==="string"){t.dictionary=Zc.string2buf(t.dictionary)}else if(Qp.call(t.dictionary)==="[object ArrayBuffer]"){t.dictionary=new Uint8Array(t.dictionary)}if(t.raw){i=Kp.inflateSetDictionary(this.strm,t.dictionary);if(i!==Gp.Z_OK){throw new Error(hl[i])}}}}ev.prototype.push=function(e,t){var i=this.strm;var r=this.options.chunkSize;var n=this.options.dictionary;var s,a;var o,h,f;var u=false;if(this.ended){return false}a=t===~~t?t:t===true?Gp.Z_FINISH:Gp.Z_NO_FLUSH;if(typeof e==="string"){i.input=Zc.binstring2buf(e)}else if(Qp.call(e)==="[object ArrayBuffer]"){i.input=new Uint8Array(e)}else{i.input=e}i.next_in=0;i.avail_in=i.input.length;do{if(i.avail_out===0){i.output=new Bf.Buf8(r);i.next_out=0;i.avail_out=r}s=Kp.inflate(i,Gp.Z_NO_FLUSH);if(s===Gp.Z_NEED_DICT&&n){s=Kp.inflateSetDictionary(this.strm,n)}if(s===Gp.Z_BUF_ERROR&&u===true){s=Gp.Z_OK;u=false}if(s!==Gp.Z_STREAM_END&&s!==Gp.Z_OK){this.onEnd(s);this.ended=true;return false}if(i.next_out){if(i.avail_out===0||s===Gp.Z_STREAM_END||i.avail_in===0&&(a===Gp.Z_FINISH||a===Gp.Z_SYNC_FLUSH)){if(this.options.to==="string"){o=Zc.utf8border(i.output,i.next_out);h=i.next_out-o;f=Zc.buf2string(i.output,o);i.next_out=h;i.avail_out=r-h;if(h){Bf.arraySet(i.output,i.output,o,h,0)}this.onData(f)}else{this.onData(Bf.shrinkBuf(i.output,i.next_out))}}}if(i.avail_in===0&&i.avail_out===0){u=true}}while((i.avail_in>0||i.avail_out===0)&&s!==Gp.Z_STREAM_END);if(s===Gp.Z_STREAM_END){a=Gp.Z_FINISH}if(a===Gp.Z_FINISH){s=Kp.inflateEnd(this.strm);this.onEnd(s);this.ended=true;return s===Gp.Z_OK}if(a===Gp.Z_SYNC_FLUSH){this.onEnd(Gp.Z_OK);i.avail_out=0;return true}return true};ev.prototype.onData=function(e){this.chunks.push(e)};ev.prototype.onEnd=function(e){if(e===Gp.Z_OK){if(this.options.to==="string"){this.result=this.chunks.join("")}else{this.result=Bf.flattenChunks(this.chunks)}}this.chunks=[];this.err=e;this.msg=this.strm.msg};function tv(e,t){var i=new ev(t);i.push(e,true);if(i.err){throw i.msg||hl[i.err]}return i.result}function iv(e,t){t=t||{};t.raw=true;return tv(e,t)}var rv=ev;var nv=tv;var sv=iv;var av=tv;var ov={Inflate:rv,inflate:nv,inflateRaw:sv,ungzip:av};var hv=Bf.assign;var fv={};hv(fv,cd,ov,Gp);var uv=fv;var lv=typeof Uint8Array!=="undefined"&&typeof Uint16Array!=="undefined"&&typeof Uint32Array!=="undefined";var cv=lv?"uint8array":"array";var dv="\b\0";function pv(e,t){Vh.call(this,"FlateWorker/"+e);this._pako=null;this._pakoAction=e;this._pakoOptions=t;this.meta={}}Yh.inherits(pv,Vh);pv.prototype.processChunk=function(e){this.meta=e.meta;if(this._pako===null){this._createPako()}this._pako.push(Yh.transformTo(cv,e.data),false)};pv.prototype.flush=function(){Vh.prototype.flush.call(this);if(this._pako===null){this._createPako()}this._pako.push([],true)};pv.prototype.cleanUp=function(){Vh.prototype.cleanUp.call(this);this._pako=null};pv.prototype._createPako=function(){this._pako=new uv[this._pakoAction]({raw:true,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}};var vv=function(e){return new pv("Deflate",e)};var gv=function(){return new pv("Inflate",{})};var mv={magic:dv,compressWorker:vv,uncompressWorker:gv};var yv={magic:"\0\0",compressWorker:function(e){return new Vh("STORE compression")},uncompressWorker:function(){return new Vh("STORE decompression")}};var wv=mv;var bv={STORE:yv,DEFLATE:wv};var _v="PK";var xv="PK";var Ev="PK";var kv="PK";var Sv="PK";var Cv="PK\b";var Tv={LOCAL_FILE_HEADER:_v,CENTRAL_FILE_HEADER:xv,CENTRAL_DIRECTORY_END:Ev,ZIP64_CENTRAL_DIRECTORY_LOCATOR:kv,ZIP64_CENTRAL_DIRECTORY_END:Sv,DATA_DESCRIPTOR:Cv};var Rv=function(e,t){var i="",r;for(r=0;r<t;r++){i+=String.fromCharCode(e&255);e=e>>>8}return i};var Av=function(e,t){var i=e;if(!e){i=t?16893:33204}return(i&65535)<<16};var Nv=function(e,t){return(e||0)&63};var Ov=function(e,t,i,r,n,s){var a=e["file"],o=e["compression"],h=s!==Xh.utf8encode,f=Yh.transformTo("string",s(a.name)),u=Yh.transformTo("string",Xh.utf8encode(a.name)),l=a.comment,c=Yh.transformTo("string",s(l)),d=Yh.transformTo("string",Xh.utf8encode(l)),p=u.length!==a.name.length,v=d.length!==l.length,g,m,y="",w="",b="",_=a.dir,x=a.date;var E={crc32:0,compressedSize:0,uncompressedSize:0};if(!t||i){E.crc32=e["crc32"];E.compressedSize=e["compressedSize"];E.uncompressedSize=e["uncompressedSize"]}var k=0;if(t){k|=8}if(!h&&(p||v)){k|=2048}var S=0;var C=0;if(_){S|=16}if(n==="UNIX"){C=798;S|=Av(a.unixPermissions,_)}else{C=20;S|=Nv(a.dosPermissions)}g=x.getUTCHours();g=g<<6;g=g|x.getUTCMinutes();g=g<<5;g=g|x.getUTCSeconds()/2;m=x.getUTCFullYear()-1980;m=m<<4;m=m|x.getUTCMonth()+1;m=m<<5;m=m|x.getUTCDate();if(p){w=Rv(1,1)+Rv(Tf(f),4)+u;y+="up"+Rv(w.length,2)+w}if(v){b=Rv(1,1)+Rv(Tf(c),4)+d;y+="uc"+Rv(b.length,2)+b}var T="";T+="\n\0";T+=Rv(k,2);T+=o.magic;T+=Rv(g,2);T+=Rv(m,2);T+=Rv(E.crc32,4);T+=Rv(E.compressedSize,4);T+=Rv(E.uncompressedSize,4);T+=Rv(f.length,2);T+=Rv(y.length,2);var R=Tv.LOCAL_FILE_HEADER+T+f+y;var A=Tv.CENTRAL_FILE_HEADER+Rv(C,2)+T+Rv(c.length,2)+"\0\0"+"\0\0"+Rv(S,4)+Rv(r,4)+f+y+c;return{fileRecord:R,dirRecord:A}};var Lv=function(e,t,i,r,n){var s="";var a=Yh.transformTo("string",n(r));s=Tv.CENTRAL_DIRECTORY_END+"\0\0"+"\0\0"+Rv(e,2)+Rv(e,2)+Rv(t,4)+Rv(i,4)+Rv(a.length,2)+a;return s};var Iv=function(e){var t="";t=Tv.DATA_DESCRIPTOR+Rv(e["crc32"],4)+Rv(e["compressedSize"],4)+Rv(e["uncompressedSize"],4);return t};function Dv(e,t,i,r){Vh.call(this,"ZipFileWorker");this.bytesWritten=0;this.zipComment=t;this.zipPlatform=i;this.encodeFileName=r;this.streamFiles=e;this.accumulate=false;this.contentBuffer=[];this.dirRecords=[];this.currentSourceOffset=0;this.entriesCount=0;this.currentFile=null;this._sources=[]}Yh.inherits(Dv,Vh);Dv.prototype.push=function(e){var t=e.meta.percent||0;var i=this.entriesCount;var r=this._sources.length;if(this.accumulate){this.contentBuffer.push(e)}else{this.bytesWritten+=e.data.length;Vh.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:i?(t+100*(i-r-1))/i:100}})}};Dv.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten;this.currentFile=e["file"].name;var t=this.streamFiles&&!e["file"].dir;if(t){var i=Ov(e,t,false,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:i.fileRecord,meta:{percent:0}})}else{this.accumulate=true}};Dv.prototype.closedSource=function(e){this.accumulate=false;var t=this.streamFiles&&!e["file"].dir;var i=Ov(e,t,true,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.dirRecords.push(i.dirRecord);if(t){this.push({data:Iv(e),meta:{percent:100}})}else{this.push({data:i.fileRecord,meta:{percent:0}});while(this.contentBuffer.length){this.push(this.contentBuffer.shift())}}this.currentFile=null};Dv.prototype.flush=function(){var e=this.bytesWritten;for(var t=0;t<this.dirRecords.length;t++){this.push({data:this.dirRecords[t],meta:{percent:100}})}var i=this.bytesWritten-e;var r=Lv(this.dirRecords.length,i,e,this.zipComment,this.encodeFileName);this.push({data:r,meta:{percent:100}})};Dv.prototype.prepareNextSource=function(){this.previous=this._sources.shift();this.openedSource(this.previous.streamInfo);if(this.isPaused){this.previous.pause()}else{this.previous.resume()}};Dv.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;e.on("data",(function(e){t.processChunk(e)}));e.on("end",(function(){t.closedSource(t.previous.streamInfo);if(t._sources.length){t.prepareNextSource()}else{t.end()}}));e.on("error",(function(e){t.error(e)}));return this};Dv.prototype.resume=function(){if(!Vh.prototype.resume.call(this)){return false}if(!this.previous&&this._sources.length){this.prepareNextSource();return true}if(!this.previous&&!this._sources.length&&!this.generatedError){this.end();return true}};Dv.prototype.error=function(e){var t=this._sources;if(!Vh.prototype.error.call(this,e)){return false}for(var i=0;i<t.length;i++){try{t[i].error(e)}catch(e){}}return true};Dv.prototype.lock=function(){Vh.prototype.lock.call(this);var e=this._sources;for(var t=0;t<e.length;t++){e[t].lock()}};var zv=Dv;var Pv=function(e,t){var i=e||t;var r=bv[i];if(!r){throw new Error(i+" is not a valid compression method !")}return r};var Bv=function(e,t,i){var r=new zv(t.streamFiles,i,t.platform,t.encodeFileName);var n=0;try{e.forEach((function(e,i){n++;var s=Pv(i.options.compression,t.compression);var a=i.options.compressionOptions||t.compressionOptions||{};var o=i.dir,h=i.date;i._compressWorker(s,a).withStreamInfo("file",{name:e,dir:o,date:h,comment:i.comment||"",unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions}).pipe(r)}));r.entriesCount=n}catch(Ng){r.error(Ng)}return r};var jv={generateWorker:Bv};function Uv(e,t){Vh.call(this,"Nodejs stream input adapter for "+e);this._upstreamEnded=false;this._bindStream(t)}Yh.inherits(Uv,Vh);Uv.prototype._bindStream=function(e){var t=this;this._stream=e;e.pause();e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){if(t.isPaused){this.generatedError=e}else{t.error(e)}})).on("end",(function(){if(t.isPaused){t._upstreamEnded=true}else{t.end()}}))};Uv.prototype.pause=function(){if(!Vh.prototype.pause.call(this)){return false}this._stream.pause();return true};Uv.prototype.resume=function(){if(!Vh.prototype.resume.call(this)){return false}if(this._upstreamEnded){this.end()}else{this._stream.resume()}return true};var Mv=Uv;var Fv=function(e,t,i){var r=Yh.getTypeOf(t),n;var s=Yh.extend(i||{},mf);s.date=s.date||new Date;if(s.compression!==null){s.compression=s.compression.toUpperCase()}if(typeof s.unixPermissions==="string"){s.unixPermissions=parseInt(s.unixPermissions,8)}if(s.unixPermissions&&s.unixPermissions&16384){s.dir=true}if(s.dosPermissions&&s.dosPermissions&16){s.dir=true}if(s.dir){e=Wv(e)}if(s.createFolders&&(n=qv(e))){Hv.call(this,n,true)}var a=r==="string"&&s.binary===false&&s.base64===false;if(!i||typeof i.binary==="undefined"){s.binary=!a}var o=t instanceof Of&&t.uncompressedSize===0;if(o||s.dir||!t||t.length===0){s.base64=false;s.binary=true;t="";s.compression="STORE";r="string"}var h=null;if(t instanceof Of||t instanceof Vh){h=t}else if(ph.isNode&&ph.isStream(t)){h=new Mv(e,t)}else{h=Yh.prepareContent(e,t,s.binary,s.optimizedBinaryString,s.base64)}var f=new Pf(e,h,s);this.files[e]=f};var qv=function(e){if(e.slice(-1)==="/"){e=e.substring(0,e.length-1)}var t=e.lastIndexOf("/");return t>0?e.substring(0,t):""};var Wv=function(e){if(e.slice(-1)!=="/"){e+="/"}return e};var Hv=function(e,t){t=typeof t!=="undefined"?t:mf.createFolders;e=Wv(e);if(!this.files[e]){Fv.call(this,e,null,{dir:true,createFolders:t})}return this.files[e]};function Yv(e){return Object.prototype.toString.call(e)==="[object RegExp]"}var Zv={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,i,r;for(t in this.files){if(!this.files.hasOwnProperty(t)){continue}r=this.files[t];i=t.slice(this.root.length,t.length);if(i&&t.slice(0,this.root.length)===this.root){e(i,r)}}},filter:function(e){var t=[];this.forEach((function(i,r){if(e(i,r)){t.push(r)}}));return t},file:function(e,t,i){if(arguments.length===1){if(Yv(e)){var r=e;return this.filter((function(e,t){return!t.dir&&r.test(e)}))}else{var n=this.files[this.root+e];if(n&&!n.dir){return n}else{return null}}}else{e=this.root+e;Fv.call(this,e,t,i)}return this},folder:function(e){if(!e){return this}if(Yv(e)){return this.filter((function(t,i){return i.dir&&e.test(t)}))}var t=this.root+e;var i=Hv.call(this,t);var r=this.clone();r.root=i.name;return r},remove:function(e){e=this.root+e;var t=this.files[e];if(!t){if(e.slice(-1)!=="/"){e+="/"}t=this.files[e]}if(t&&!t.dir){delete this.files[e]}else{var i=this.filter((function(t,i){return i.name.slice(0,e.length)===e}));for(var r=0;r<i.length;r++){delete this.files[i[r].name]}}return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,i={};try{i=Yh.extend(e||{},{streamFiles:false,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:Xh.utf8encode});i.type=i.type.toLowerCase();i.compression=i.compression.toUpperCase();if(i.type==="binarystring"){i.type="string"}if(!i.type){throw new Error("No output type specified.")}Yh.checkSupport(i.type);if(i.platform==="darwin"||i.platform==="freebsd"||i.platform==="linux"||i.platform==="sunos"){i.platform="UNIX"}if(i.platform==="win32"){i.platform="DOS"}var r=i.comment||this.comment||"";t=jv.generateWorker(this,i,r)}catch(Ng){t=new Vh("error");t.error(Ng)}return new af(t,i.type||"string",i.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){e=e||{};if(!e.type){e.type="nodebuffer"}return this.generateInternalStream(e).toNodejsStream(t)}};var Vv=Zv;function Xv(e){this.data=e;this.length=e.length;this.index=0;this.zero=0}Xv.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0){throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")}},setIndex:function(e){this.checkIndex(e);this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t=0,i;this.checkOffset(e);for(i=this.index+e-1;i>=this.index;i--){t=(t<<8)+this.byteAt(i)}this.index+=e;return t},readString:function(e){return Yh.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC((e>>25&127)+1980,(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(e&31)<<1))}};var Kv=Xv;function Gv(e){Kv.call(this,e);for(var t=0;t<this.data.length;t++){e[t]=e[t]&255}}Yh.inherits(Gv,Kv);Gv.prototype.byteAt=function(e){return this.data[this.zero+e]};Gv.prototype.lastIndexOfSignature=function(e){var t=e.charCodeAt(0),i=e.charCodeAt(1),r=e.charCodeAt(2),n=e.charCodeAt(3);for(var s=this.length-4;s>=0;--s){if(this.data[s]===t&&this.data[s+1]===i&&this.data[s+2]===r&&this.data[s+3]===n){return s-this.zero}}return-1};Gv.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),i=e.charCodeAt(1),r=e.charCodeAt(2),n=e.charCodeAt(3),s=this.readData(4);return t===s[0]&&i===s[1]&&r===s[2]&&n===s[3]};Gv.prototype.readData=function(e){this.checkOffset(e);if(e===0){return[]}var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);this.index+=e;return t};var $v=Gv;function Jv(e){Kv.call(this,e)}Yh.inherits(Jv,Kv);Jv.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)};Jv.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero};Jv.prototype.readAndCheckSignature=function(e){var t=this.readData(4);return e===t};Jv.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);this.index+=e;return t};var Qv=Jv;function eg(e){$v.call(this,e)}Yh.inherits(eg,$v);eg.prototype.readData=function(e){this.checkOffset(e);if(e===0){return new Uint8Array(0)}var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);this.index+=e;return t};var tg=eg;function ig(e){tg.call(this,e)}Yh.inherits(ig,tg);ig.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);this.index+=e;return t};var rg=ig;var ng=function(e){var t=Yh.getTypeOf(e);Yh.checkSupport(t);if(t==="string"&&!fh.uint8array){return new Qv(e)}if(t==="nodebuffer"){return new rg(e)}if(fh.uint8array){return new tg(Yh.transformTo("uint8array",e))}return new $v(Yh.transformTo("array",e))};var sg=0;var ag=3;var og=function(e){for(var t in bv){if(!bv.hasOwnProperty(t)){continue}if(bv[t].magic===e){return bv[t]}}return null};function hg(e,t){this.options=e;this.loadOptions=t}hg.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},readLocalPart:function(e){var t,i;e.skip(22);this.fileNameLength=e.readInt(2);i=e.readInt(2);this.fileName=e.readData(this.fileNameLength);e.skip(i);if(this.compressedSize===-1||this.uncompressedSize===-1){throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory "+"(compressedSize === -1 || uncompressedSize === -1)")}t=og(this.compressionMethod);if(t===null){throw new Error("Corrupted zip : compression "+Yh.pretty(this.compressionMethod)+" unknown (inner file : "+Yh.transformTo("string",this.fileName)+")")}this.decompressed=new Of(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2);e.skip(2);this.bitFlag=e.readInt(2);this.compressionMethod=e.readString(2);this.date=e.readDate();this.crc32=e.readInt(4);this.compressedSize=e.readInt(4);this.uncompressedSize=e.readInt(4);var t=e.readInt(2);this.extraFieldsLength=e.readInt(2);this.fileCommentLength=e.readInt(2);this.diskNumberStart=e.readInt(2);this.internalFileAttributes=e.readInt(2);this.externalFileAttributes=e.readInt(4);this.localHeaderOffset=e.readInt(4);if(this.isEncrypted()){throw new Error("Encrypted zip are not supported")}e.skip(t);this.readExtraFields(e);this.parseZIP64ExtraField(e);this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null;this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=this.externalFileAttributes&16?true:false;if(e===sg){this.dosPermissions=this.externalFileAttributes&63}if(e===ag){this.unixPermissions=this.externalFileAttributes>>16&65535}if(!this.dir&&this.fileNameStr.slice(-1)==="/"){this.dir=true}},parseZIP64ExtraField:function(e){if(!this.extraFields[1]){return}var t=ng(this.extraFields[1].value);if(this.uncompressedSize===Yh.MAX_VALUE_32BITS){this.uncompressedSize=t.readInt(8)}if(this.compressedSize===Yh.MAX_VALUE_32BITS){this.compressedSize=t.readInt(8)}if(this.localHeaderOffset===Yh.MAX_VALUE_32BITS){this.localHeaderOffset=t.readInt(8)}if(this.diskNumberStart===Yh.MAX_VALUE_32BITS){this.diskNumberStart=t.readInt(4)}},readExtraFields:function(e){var t=e.index+this.extraFieldsLength,i,r,n;if(!this.extraFields){this.extraFields={}}while(e.index<t){i=e.readInt(2);r=e.readInt(2);n=e.readData(r);this.extraFields[i]={id:i,length:r,value:n}}},handleUTF8:function(){var e=fh.uint8array?"uint8array":"array";if(this.useUTF8()){this.fileNameStr=Xh.utf8decode(this.fileName);this.fileCommentStr=Xh.utf8decode(this.fileComment)}else{var t=this.findExtraFieldUnicodePath();if(t!==null){this.fileNameStr=t}else{var i=Yh.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(i)}var r=this.findExtraFieldUnicodeComment();if(r!==null){this.fileCommentStr=r}else{var n=Yh.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(n)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=ng(e.value);if(t.readInt(1)!==1){return null}if(Tf(this.fileName)!==t.readInt(4)){return null}return Xh.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=ng(e.value);if(t.readInt(1)!==1){return null}if(Tf(this.fileComment)!==t.readInt(4)){return null}return Xh.utf8decode(t.readData(e.length-5))}return null}};var fg=hg;function ug(e){this.files=[];this.loadOptions=e}ug.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature "+"("+Yh.pretty(t)+", expected "+Yh.pretty(e)+")")}},isSignature:function(e,t){var i=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4);var n=r===t;this.reader.setIndex(i);return n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2);this.diskWithCentralDirStart=this.reader.readInt(2);this.centralDirRecordsOnThisDisk=this.reader.readInt(2);this.centralDirRecords=this.reader.readInt(2);this.centralDirSize=this.reader.readInt(4);this.centralDirOffset=this.reader.readInt(4);this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength);var t=fh.uint8array?"uint8array":"array";var i=Yh.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(i)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8);this.reader.skip(4);this.diskNumber=this.reader.readInt(4);this.diskWithCentralDirStart=this.reader.readInt(4);this.centralDirRecordsOnThisDisk=this.reader.readInt(8);this.centralDirRecords=this.reader.readInt(8);this.centralDirSize=this.reader.readInt(8);this.centralDirOffset=this.reader.readInt(8);this.zip64ExtensibleData={};var e=this.zip64EndOfCentralSize-44,t=0,i,r,n;while(t<e){i=this.reader.readInt(2);r=this.reader.readInt(4);n=this.reader.readData(r);this.zip64ExtensibleData[i]={id:i,length:r,value:n}}},readBlockZip64EndOfCentralLocator:function(){this.diskWithZip64CentralDirStart=this.reader.readInt(4);this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8);this.disksCount=this.reader.readInt(4);if(this.disksCount>1){throw new Error("Multi-volumes zip are not supported")}},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++){t=this.files[e];this.reader.setIndex(t.localHeaderOffset);this.checkSignature(Tv.LOCAL_FILE_HEADER);t.readLocalPart(this.reader);t.handleUTF8();t.processAttributes()}},readCentralDir:function(){var e;this.reader.setIndex(this.centralDirOffset);while(this.reader.readAndCheckSignature(Tv.CENTRAL_FILE_HEADER)){e=new fg({zip64:this.zip64},this.loadOptions);e.readCentralPart(this.reader);this.files.push(e)}if(this.centralDirRecords!==this.files.length){if(this.centralDirRecords!==0&&this.files.length===0){throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)}}},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(Tv.CENTRAL_DIRECTORY_END);if(e<0){var t=!this.isSignature(0,Tv.LOCAL_FILE_HEADER);if(t){throw new Error("Can't find end of central directory : is this a zip file ? "+"If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html")}else{throw new Error("Corrupted zip: can't find end of central directory")}}this.reader.setIndex(e);var i=e;this.checkSignature(Tv.CENTRAL_DIRECTORY_END);this.readBlockEndOfCentral();if(this.diskNumber===Yh.MAX_VALUE_16BITS||this.diskWithCentralDirStart===Yh.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===Yh.MAX_VALUE_16BITS||this.centralDirRecords===Yh.MAX_VALUE_16BITS||this.centralDirSize===Yh.MAX_VALUE_32BITS||this.centralDirOffset===Yh.MAX_VALUE_32BITS){this.zip64=true;e=this.reader.lastIndexOfSignature(Tv.ZIP64_CENTRAL_DIRECTORY_LOCATOR);if(e<0){throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator")}this.reader.setIndex(e);this.checkSignature(Tv.ZIP64_CENTRAL_DIRECTORY_LOCATOR);this.readBlockZip64EndOfCentralLocator();if(!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,Tv.ZIP64_CENTRAL_DIRECTORY_END)){this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(Tv.ZIP64_CENTRAL_DIRECTORY_END);if(this.relativeOffsetEndOfZip64CentralDir<0){throw new Error("Corrupted zip: can't find the ZIP64 end of central directory")}}this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir);this.checkSignature(Tv.ZIP64_CENTRAL_DIRECTORY_END);this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;if(this.zip64){r+=20;r+=12+this.zip64EndOfCentralSize}var n=i-r;if(n>0){if(this.isSignature(i,Tv.CENTRAL_FILE_HEADER));else{this.reader.zero=n}}else if(n<0){throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")}},prepareReader:function(e){this.reader=ng(e)},load:function(e){this.prepareReader(e);this.readEndOfCentral();this.readCentralDir();this.readLocalFiles()}};var lg=ug;function cg(e){return new Hh.Promise((function(t,i){var r=e.decompressed.getContentWorker().pipe(new Af);r.on("error",(function(e){i(e)})).on("end",(function(){if(r.streamInfo.crc32!==e.decompressed.crc32){i(new Error("Corrupted zip : CRC32 mismatch"))}else{t()}})).resume()}))}var dg=function(e,t){var i=this;t=Yh.extend(t||{},{base64:false,checkCRC32:false,optimizedBinaryString:false,createFolders:false,decodeFileName:Xh.utf8decode});if(ph.isNode&&ph.isStream(e)){return Hh.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file."))}return Yh.prepareContent("the loaded zip file",e,true,t.optimizedBinaryString,t.base64).then((function(e){var i=new lg(t);i.load(e);return i})).then((function e(i){var r=[Hh.Promise.resolve(i)];var n=i.files;if(t.checkCRC32){for(var s=0;s<n.length;s++){r.push(cg(n[s]))}}return Hh.Promise.all(r)})).then((function e(r){var n=r.shift();var s=n.files;for(var a=0;a<s.length;a++){var o=s[a];i.file(o.fileNameStr,o.decompressed,{binary:true,optimizedBinaryString:true,date:o.date,dir:o.dir,comment:o.fileCommentStr.length?o.fileCommentStr:null,unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions,createFolders:t.createFolders})}if(n.zipComment.length){i.comment=n.zipComment}return i}))};function pg(){if(!(this instanceof pg)){return new pg}if(arguments.length){throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.")}this.files={};this.comment=null;this.root="";this.clone=function(){var e=new pg;for(var t in this){if(typeof this[t]!=="function"){e[t]=this[t]}}return e}}pg.prototype=Vv;pg.prototype.loadAsync=dg;pg.support=fh;pg.defaults=mf;pg.version="3.2.0";pg.loadAsync=function(e,t){return(new pg).loadAsync(e,t)};pg.external=Hh;var vg=pg;var gg=function(){function e(){this.zip=new vg;this.urlCache={}}e.prototype.checkRequirements=function(){console.log("check for jszip");try{if(typeof vg==="undefined"){var e=require("jszip");this.zip=new e}else{this.zip=new vg}}catch(Ng){throw new Error("JSZip lib not loaded")}};e.prototype.open=function(e,t){return this.zip.loadAsync(e,{base64:t})};e.prototype.openUrl=function(e,t){return Cn(e,"binary").then(function(e){return this.zip.loadAsync(e,{base64:t})}.bind(this))};e.prototype.request=function(e,t){var i=new Ee;var r;var n=new Be(e);if(!t){t=n.extension}if(t=="blob"){r=this.getBlob(e)}else{r=this.getText(e)}if(r){r.then(function(e){var r=this.handleResponse(e,t);i.resolve(r)}.bind(this))}else{i.reject({message:"File not found in the epub: "+e,stack:(new Error).stack})}return i.promise};e.prototype.handleResponse=function(e,t){var i;if(t=="json"){i=JSON.parse(e)}else if(fe(t)){i=ve(e,"text/xml")}else if(t=="xhtml"){i=ve(e,"application/xhtml+xml")}else if(t=="html"||t=="htm"){i=ve(e,"text/html")}else{i=e}return i};e.prototype.getBlob=function(e,t){var i=window.decodeURIComponent(e.substr(1));var r=this.zip.file(i);if(r){t=t||nr.lookup(r.name);return r.async("uint8array").then((function(e){return new Blob([e],{type:t})}))}};e.prototype.getText=function(e,t){var i=window.decodeURIComponent(e.substr(1));var r=this.zip.file(i);if(r){return r.async("string").then((function(e){return e}))}};e.prototype.getBase64=function(e,t){var i=window.decodeURIComponent(e.substr(1));var r=this.zip.file(i);if(r){t=t||nr.lookup(r.name);return r.async("base64").then((function(e){return"data:"+t+";base64,"+e}))}};e.prototype.createUrl=function(e,t){var i=new Ee;var r=window.URL||window.webkitURL||window.mozURL;var n;var s;var a=t&&t.base64;if(e in this.urlCache){i.resolve(this.urlCache[e]);return i.promise}if(a){s=this.getBase64(e);if(s){s.then(function(t){this.urlCache[e]=t;i.resolve(t)}.bind(this))}}else{s=this.getBlob(e);if(s){s.then(function(t){n=r.createObjectURL(t);this.urlCache[e]=n;i.resolve(n)}.bind(this))}}if(!s){i.reject({message:"File not found in the epub: "+e,stack:(new Error).stack})}return i.promise};e.prototype.revokeUrl=function(e){var t=window.URL||window.webkitURL||window.mozURL;var i=this.urlCache[e];if(i)t.revokeObjectURL(i)};e.prototype.destroy=function(){var e=window.URL||window.webkitURL||window.mozURL;for(var t in this.urlCache){e.revokeObjectURL(t)}this.zip=undefined;this.urlCache={}};return e}();var mg=function(){function e(e,t,i){this.urlCache={};this.storage=undefined;this.name=e;this.requester=t||Cn;this.resolver=i;this.online=true;this.checkRequirements();this.addListeners()}e.prototype.checkRequirements=function(){try{var e=void 0;if(typeof localforage==="undefined"){e=require("localforage")}else{e=localforage}this.storage=e.createInstance({name:this.name})}catch(Ng){throw new Error("localForage lib not loaded")}};e.prototype.addListeners=function(){this._status=this.status.bind(this);window.addEventListener("online",this._status);window.addEventListener("offline",this._status)};e.prototype.removeListeners=function(){window.removeEventListener("online",this._status);window.removeEventListener("offline",this._status);this._status=undefined};e.prototype.status=function(e){var t=navigator.onLine;this.online=t;if(t){this.emit("online",this)}else{this.emit("offline",this)}};e.prototype.add=function(e,t){var i=this;var r=e.resources.map((function(e){var r=e.href;var n=i.resolver(r);var s=window.encodeURIComponent(n);return i.storage.getItem(s).then((function(e){if(!e||t){return i.requester(n,"binary").then((function(e){return i.storage.setItem(s,e)}))}else{return e}}))}));return Promise.all(r)};e.prototype.put=function(e,t,i){var r=this;var n=window.encodeURIComponent(e);return this.storage.getItem(n).then((function(s){if(!s){return r.requester(e,"binary",t,i).then((function(e){return r.storage.setItem(n,e)}))}return s}))};e.prototype.request=function(e,t,i,r){var n=this;if(this.online){return this.requester(e,t,i,r).then((function(t){n.put(e);return t}))}else{return this.retrieve(e,t)}};e.prototype.retrieve=function(e,t){var i=this;var r=new Ee;var n;var s=new Be(e);if(!t){t=s.extension}if(t=="blob"){n=this.getBlob(e)}else{n=this.getText(e)}return n.then((function(r){var n=new Ee;var s;if(r){s=i.handleResponse(r,t);n.resolve(s)}else{n.reject({message:"File not found in storage: "+e,stack:(new Error).stack})}return n.promise}))};e.prototype.handleResponse=function(e,t){var i;if(t=="json"){i=JSON.parse(e)}else if(fe(t)){i=ve(e,"text/xml")}else if(t=="xhtml"){i=ve(e,"application/xhtml+xml")}else if(t=="html"||t=="htm"){i=ve(e,"text/html")}else{i=e}return i};e.prototype.getBlob=function(e,t){var i=window.encodeURIComponent(e);return this.storage.getItem(i).then((function(i){if(!i)return;t=t||nr.lookup(e);return new Blob([i],{type:t})}))};e.prototype.getText=function(e,t){var i=window.encodeURIComponent(e);t=t||nr.lookup(e);return this.storage.getItem(i).then((function(e){var i=new Ee;var r=new FileReader;var n;if(!e)return;n=new Blob([e],{type:t});r.addEventListener("loadend",(function(){i.resolve(r.result)}));r.readAsText(n,t);return i.promise}))};e.prototype.getBase64=function(e,t){var i=window.encodeURIComponent(e);t=t||nr.lookup(e);return this.storage.getItem(i).then((function(e){var i=new Ee;var r=new FileReader;var n;if(!e)return;n=new Blob([e],{type:t});r.addEventListener("loadend",(function(){i.resolve(r.result)}));r.readAsDataURL(n,t);return i.promise}))};e.prototype.createUrl=function(e,t){var i=new Ee;var r=window.URL||window.webkitURL||window.mozURL;var n;var s;var a=t&&t.base64;if(e in this.urlCache){i.resolve(this.urlCache[e]);return i.promise}if(a){s=this.getBase64(e);if(s){s.then(function(t){this.urlCache[e]=t;i.resolve(t)}.bind(this))}}else{s=this.getBlob(e);if(s){s.then(function(t){n=r.createObjectURL(t);this.urlCache[e]=n;i.resolve(n)}.bind(this))}}if(!s){i.reject({message:"File not found in storage: "+e,stack:(new Error).stack})}return i.promise};e.prototype.revokeUrl=function(e){var t=window.URL||window.webkitURL||window.mozURL;var i=this.urlCache[e];if(i)t.revokeObjectURL(i)};e.prototype.destroy=function(){var e=window.URL||window.webkitURL||window.mozURL;for(var t in this.urlCache){e.revokeObjectURL(t)}this.urlCache={};this.removeListeners()};return e}();M(mg.prototype);var yg=function(){function e(e){this.interactive="";this.fixedLayout="";this.openToSpread="";this.orientationLock="";if(e){this.parse(e)}}e.prototype.parse=function(e){var t=this;if(!e){return this}var i=ge(e,"display_options");if(!i){return this}var r=me(i,"option");r.forEach((function(e){var i="";if(e.childNodes.length){i=e.childNodes[0].nodeValue}switch(e.attributes.name.value){case"interactive":t.interactive=i;break;case"fixed-layout":t.fixedLayout=i;break;case"open-to-spread":t.openToSpread=i;break;case"orientation-lock":t.orientationLock=i;break}}));return this};e.prototype.destroy=function(){this.interactive=undefined;this.fixedLayout=undefined;this.openToSpread=undefined;this.orientationLock=undefined};return e}();var wg="META-INF/container.xml";var bg="META-INF/com.apple.ibooks.display-options.xml";var _g={BINARY:"binary",BASE64:"base64",EPUB:"epub",OPF:"opf",MANIFEST:"json",DIRECTORY:"directory"};var xg=function(){function e(e,t){var i=this;if(typeof t==="undefined"&&typeof e!=="string"&&e instanceof Blob===false){t=e;e=undefined}this.settings=J(this.settings||{},{requestMethod:undefined,requestCredentials:undefined,requestHeaders:undefined,encoding:undefined,replacements:undefined,canonical:undefined,openAs:undefined,store:undefined});J(this.settings,t);this.opening=new Ee;this.opened=this.opening.promise;this.isOpen=false;this.loading={manifest:new Ee,spine:new Ee,metadata:new Ee,cover:new Ee,navigation:new Ee,pageList:new Ee,resources:new Ee,displayOptions:new Ee};this.loaded={manifest:this.loading.manifest.promise,spine:this.loading.spine.promise,metadata:this.loading.metadata.promise,cover:this.loading.cover.promise,navigation:this.loading.navigation.promise,pageList:this.loading.pageList.promise,resources:this.loading.resources.promise,displayOptions:this.loading.displayOptions.promise};this.ready=Promise.all([this.loaded.manifest,this.loaded.spine,this.loaded.metadata,this.loaded.cover,this.loaded.navigation,this.loaded.resources,this.loaded.displayOptions]);this.isRendered=false;this.request=this.settings.requestMethod||Cn;this.spine=new Yi;this.locations=new Gi(this.spine,this.load.bind(this));this.navigation=undefined;this.pageList=undefined;this.url=undefined;this.path=undefined;this.archived=false;this.archive=undefined;this.storage=undefined;this.resources=undefined;this.rendition=undefined;this.container=undefined;this.packaging=undefined;this.displayOptions=undefined;if(this.settings.store){this.store(this.settings.store)}if(e){this.open(e,this.settings.openAs).catch((function(t){var r=new Error("Cannot load book at "+e);i.emit(Ki.BOOK.OPEN_FAILED,r)}))}}e.prototype.open=function(e,t){var i;var r=t||this.determineType(e);if(r===_g.BINARY){this.archived=true;this.url=new je("/","");i=this.openEpub(e)}else if(r===_g.BASE64){this.archived=true;this.url=new je("/","");i=this.openEpub(e,r)}else if(r===_g.EPUB){this.archived=true;this.url=new je("/","");i=this.request(e,"binary",this.settings.requestCredentials).then(this.openEpub.bind(this))}else if(r==_g.OPF){this.url=new je(e);i=this.openPackaging(this.url.Path.toString())}else if(r==_g.MANIFEST){this.url=new je(e);i=this.openManifest(this.url.Path.toString())}else{this.url=new je(e);i=this.openContainer(wg).then(this.openPackaging.bind(this))}return i};e.prototype.openEpub=function(e,t){var i=this;return this.unarchive(e,t||this.settings.encoding).then((function(){return i.openContainer(wg)})).then((function(e){return i.openPackaging(e)}))};e.prototype.openContainer=function(e){var t=this;return this.load(e).then((function(e){t.container=new $i(e);return t.resolve(t.container.packagePath)}))};e.prototype.openPackaging=function(e){var t=this;this.path=new Be(e);return this.load(e).then((function(e){t.packaging=new Ji(e);return t.unpack(t.packaging)}))};e.prototype.openManifest=function(e){var t=this;this.path=new Be(e);return this.load(e).then((function(e){t.packaging=new Ji;t.packaging.load(e);return t.unpack(t.packaging)}))};e.prototype.load=function(e){var t=this.resolve(e);if(this.archived){return this.archive.request(t)}else{return this.request(t,null,this.settings.requestCredentials,this.settings.requestHeaders)}};e.prototype.resolve=function(e,t){if(!e){return}var i=e;var r=e.indexOf("://")>-1;if(r){return e}if(this.path){i=this.path.resolve(e)}if(t!=false&&this.url){i=this.url.resolve(i)}return i};e.prototype.canonical=function(e){var t=e;if(!e){return""}if(this.settings.canonical){t=this.settings.canonical(e)}else{t=this.resolve(e,true)}return t};e.prototype.determineType=function(e){var t;var i;var r;if(this.settings.encoding==="base64"){return _g.BASE64}if(typeof e!="string"){return _g.BINARY}t=new je(e);i=t.path();r=i.extension;if(!r){return _g.DIRECTORY}if(r==="epub"){return _g.EPUB}if(r==="opf"){return _g.OPF}if(r==="json"){return _g.MANIFEST}};e.prototype.unpack=function(e){var t=this;this.package=e;if(this.packaging.metadata.layout===""){this.load(this.url.resolve(bg)).then((function(e){t.displayOptions=new yg(e);t.loading.displayOptions.resolve(t.displayOptions)})).catch((function(e){t.displayOptions=new yg;t.loading.displayOptions.resolve(t.displayOptions)}))}else{this.displayOptions=new yg;this.loading.displayOptions.resolve(this.displayOptions)}this.spine.unpack(this.packaging,this.resolve.bind(this),this.canonical.bind(this));this.resources=new sr(this.packaging.manifest,{archive:this.archive,resolver:this.resolve.bind(this),request:this.request.bind(this),replacements:this.settings.replacements||(this.archived?"blobUrl":"base64")});this.loadNavigation(this.packaging).then((function(){t.loading.navigation.resolve(t.navigation)}));if(this.packaging.coverPath){this.cover=this.resolve(this.packaging.coverPath)}this.loading.manifest.resolve(this.packaging.manifest);this.loading.metadata.resolve(this.packaging.metadata);this.loading.spine.resolve(this.spine);this.loading.cover.resolve(this.cover);this.loading.resources.resolve(this.resources);this.loading.pageList.resolve(this.pageList);this.isOpen=true;if(this.archived||this.settings.replacements&&this.settings.replacements!="none"){this.replacements().then((function(){t.loaded.displayOptions.then((function(){t.opening.resolve(t)}))})).catch((function(e){console.error(e)}))}else{this.loaded.displayOptions.then((function(){t.opening.resolve(t)}))}};e.prototype.loadNavigation=function(e){var t=this;var i=e.navPath||e.ncxPath;var r=e.toc;if(r){return new Promise((function(i,n){t.navigation=new Qi(r);if(e.pageList){t.pageList=new ar(e.pageList)}i(t.navigation)}))}if(!i){return new Promise((function(e,i){t.navigation=new Qi;t.pageList=new ar;e(t.navigation)}))}return this.load(i,"xml").then((function(e){t.navigation=new Qi(e);t.pageList=new ar(e);return t.navigation}))};e.prototype.section=function(e){return this.spine.get(e)};e.prototype.renderTo=function(e,t){this.rendition=new Sn(this,t);this.rendition.attachTo(e);return this.rendition};e.prototype.setRequestCredentials=function(e){this.settings.requestCredentials=e};e.prototype.setRequestHeaders=function(e){this.settings.requestHeaders=e};e.prototype.unarchive=function(e,t){this.archive=new gg;return this.archive.open(e,t)};e.prototype.store=function(e){var t=this;var i=this.settings.replacements&&this.settings.replacements!=="none";var r=this.url;var n=this.settings.requestMethod||Cn.bind(this);this.storage=new mg(e,n,this.resolve.bind(this));this.request=this.storage.request.bind(this.storage);this.opened.then((function(){if(t.archived){t.storage.requester=t.archive.request.bind(t.archive)}var e=function(e,i){i.output=t.resources.substitute(e,i.url)};t.resources.settings.replacements=i||"blobUrl";t.resources.replacements().then((function(){return t.resources.replaceCss()}));t.storage.on("offline",(function(){t.url=new je("/","");t.spine.hooks.serialize.register(e)}));t.storage.on("online",(function(){t.url=r;t.spine.hooks.serialize.deregister(e)}))}));return this.storage};e.prototype.coverUrl=function(){var e=this;var t=this.loaded.cover.then((function(t){if(e.archived){return e.resources.get(e.cover)}else{return e.cover}}));return t};e.prototype.replacements=function(){var e=this;this.spine.hooks.serialize.register((function(t,i){i.output=e.resources.substitute(t,i.url)}));return this.resources.replacements().then((function(){return e.resources.replaceCss()}))};e.prototype.getRange=function(e){var t=new qe(e);var i=this.spine.get(t.spinePos);var r=this.load.bind(this);if(!i){return new Promise((function(e,t){t("CFI could not be found")}))}return i.load(r).then((function(e){var r=t.toRange(i.document);return r}))};e.prototype.key=function(e){var t=e||this.packaging.metadata.identifier||this.url.filename;return"epubjs:"+Vi+":"+t};e.prototype.destroy=function(){this.opened=undefined;this.loading=undefined;this.loaded=undefined;this.ready=undefined;this.isOpen=false;this.isRendered=false;this.spine&&this.spine.destroy();this.locations&&this.locations.destroy();this.pageList&&this.pageList.destroy();this.archive&&this.archive.destroy();this.resources&&this.resources.destroy();this.container&&this.container.destroy();this.packaging&&this.packaging.destroy();this.rendition&&this.rendition.destroy();this.displayOptions&&this.displayOptions.destroy();this.spine=undefined;this.locations=undefined;this.pageList=undefined;this.archive=undefined;this.resources=undefined;this.container=undefined;this.packaging=undefined;this.rendition=undefined;this.navigation=undefined;this.url=undefined;this.path=undefined;this.archived=false};return e}();M(xg.prototype);(function(e){var t=function(){try{return!!Symbol.iterator}catch(e){return false}};var i=t();var r=function(e){var t={next:function(){var t=e.shift();return{done:t===void 0,value:t}}};if(i){t[Symbol.iterator]=function(){return t}}return t};var n=function(e){return encodeURIComponent(e).replace(/%20/g,"+")};var s=function(e){return decodeURIComponent(String(e).replace(/\+/g," "))};var a=function(){var t=function(e){Object.defineProperty(this,"_entries",{writable:true,value:{}});var i=typeof e;if(i==="undefined");else if(i==="string"){if(e!==""){this._fromString(e)}}else if(e instanceof t){var r=this;e.forEach((function(e,t){r.append(t,e)}))}else if(e!==null&&i==="object"){if(Object.prototype.toString.call(e)==="[object Array]"){for(var n=0;n<e.length;n++){var s=e[n];if(Object.prototype.toString.call(s)==="[object Array]"||s.length!==2){this.append(s[0],s[1])}else{throw new TypeError("Expected [string, any] as entry at index "+n+" of URLSearchParams's input")}}}else{for(var a in e){if(e.hasOwnProperty(a)){this.append(a,e[a])}}}}else{throw new TypeError("Unsupported input's type for URLSearchParams")}};var s=t.prototype;s.append=function(e,t){if(e in this._entries){this._entries[e].push(String(t))}else{this._entries[e]=[String(t)]}};s.delete=function(e){delete this._entries[e]};s.get=function(e){return e in this._entries?this._entries[e][0]:null};s.getAll=function(e){return e in this._entries?this._entries[e].slice(0):[]};s.has=function(e){return e in this._entries};s.set=function(e,t){this._entries[e]=[String(t)]};s.forEach=function(e,t){var i;for(var r in this._entries){if(this._entries.hasOwnProperty(r)){i=this._entries[r];for(var n=0;n<i.length;n++){e.call(t,i[n],r,this)}}}};s.keys=function(){var e=[];this.forEach((function(t,i){e.push(i)}));return r(e)};s.values=function(){var e=[];this.forEach((function(t){e.push(t)}));return r(e)};s.entries=function(){var e=[];this.forEach((function(t,i){e.push([i,t])}));return r(e)};if(i){s[Symbol.iterator]=s.entries}s.toString=function(){var e=[];this.forEach((function(t,i){e.push(n(i)+"="+n(t))}));return e.join("&")};e.URLSearchParams=t};var o=function(){try{var t=e.URLSearchParams;return new t("?a=1").toString()==="a=1"&&typeof t.prototype.set==="function"}catch(Ng){return false}};if(!o()){a()}var h=e.URLSearchParams.prototype;if(typeof h.sort!=="function"){h.sort=function(){var e=this;var t=[];this.forEach((function(i,r){t.push([r,i]);if(!e._entries){e.delete(r)}}));t.sort((function(e,t){if(e[0]<t[0]){return-1}else if(e[0]>t[0]){return+1}else{return 0}}));if(e._entries){e._entries={}}for(var i=0;i<t.length;i++){this.append(t[i][0],t[i][1])}}}if(typeof h._fromString!=="function"){Object.defineProperty(h,"_fromString",{enumerable:false,configurable:false,writable:false,value:function(e){if(this._entries){this._entries={}}else{var t=[];this.forEach((function(e,i){t.push(i)}));for(var i=0;i<t.length;i++){this.delete(t[i])}}e=e.replace(/^\?/,"");var r=e.split("&");var n;for(var i=0;i<r.length;i++){n=r[i].split("=");this.append(s(n[0]),n.length>1?s(n[1]):"")}}})}})(typeof s!=="undefined"?s:typeof window!=="undefined"?window:typeof self!=="undefined"?self:s);(function(e){var t=function(){try{var t=new e.URL("b","http://a");t.pathname="c%20d";return t.href==="http://a/c%20d"&&t.searchParams}catch(Ng){return false}};var i=function(){var t=e.URL;var i=function(t,i){if(typeof t!=="string")t=String(t);var r=document,n;if(i&&(e.location===void 0||i!==e.location.href)){r=document.implementation.createHTMLDocument("");n=r.createElement("base");n.href=i;r.head.appendChild(n);try{if(n.href.indexOf(i)!==0)throw new Error(n.href)}catch(Ql){throw new Error("URL unable to set base "+i+" due to "+Ql)}}var s=r.createElement("a");s.href=t;if(n){r.body.appendChild(s);s.href=s.href}if(s.protocol===":"||!/:/.test(s.href)){throw new TypeError("Invalid URL")}Object.defineProperty(this,"_anchorElement",{value:s});var a=new e.URLSearchParams(this.search);var o=true;var h=true;var f=this;["append","delete","set"].forEach((function(e){var t=a[e];a[e]=function(){t.apply(a,arguments);if(o){h=false;f.search=a.toString();h=true}}}));Object.defineProperty(this,"searchParams",{value:a,enumerable:true});var u=void 0;Object.defineProperty(this,"_updateSearchParams",{enumerable:false,configurable:false,writable:false,value:function(){if(this.search!==u){u=this.search;if(h){o=false;this.searchParams._fromString(this.search);o=true}}}})};var r=i.prototype;var n=function(e){Object.defineProperty(r,e,{get:function(){return this._anchorElement[e]},set:function(t){this._anchorElement[e]=t},enumerable:true})};["hash","host","hostname","port","protocol"].forEach((function(e){n(e)}));Object.defineProperty(r,"search",{get:function(){return this._anchorElement["search"]},set:function(e){this._anchorElement["search"]=e;this._updateSearchParams()},enumerable:true});Object.defineProperties(r,{toString:{get:function(){var e=this;return function(){return e.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(e){this._anchorElement.href=e;this._updateSearchParams()},enumerable:true},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(e){this._anchorElement.pathname=e},enumerable:true},origin:{get:function(){var e={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol];var t=this._anchorElement.port!=e&&this._anchorElement.port!=="";return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(t?":"+this._anchorElement.port:"")},enumerable:true},password:{get:function(){return""},set:function(e){},enumerable:true},username:{get:function(){return""},set:function(e){},enumerable:true}});i.createObjectURL=function(e){return t.createObjectURL.apply(t,arguments)};i.revokeObjectURL=function(e){return t.revokeObjectURL.apply(t,arguments)};e.URL=i};if(!t()){i()}if(e.location!==void 0&&!("origin"in e.location)){var r=function(){return e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:"")};try{Object.defineProperty(e.location,"origin",{get:r,enumerable:true})}catch(Ng){setInterval((function(){e.location.origin=r()}),100)}}})(typeof s!=="undefined"?s:typeof window!=="undefined"?window:typeof self!=="undefined"?self:s);function Eg(e,t){return new xg(e,t)}Eg.VERSION=Vi;if(typeof Tn!=="undefined"){Tn.EPUBJS_VERSION=Vi}Eg.Book=xg;Eg.Rendition=Sn;Eg.Contents=pr;Eg.CFI=qe;Eg.utils=Ne;var kg;(function(e){e["LTR"]="ltr";e["RTL"]="rtl"})(kg||(kg={}));var Sg=o((function(e){
/*!
                  Copyright (c) 2017 Jed Watson.
                  Licensed under the MIT License (MIT), see
                  http://jedwatson.github.io/classnames
                */
(function(){var t={}.hasOwnProperty;function i(){var e=[];for(var r=0;r<arguments.length;r++){var n=arguments[r];if(!n)continue;var s=typeof n;if(s==="string"||s==="number"){e.push(n)}else if(Array.isArray(n)&&n.length){var a=i.apply(null,n);if(a){e.push(a)}}else if(s==="object"){for(var o in n){if(t.call(n,o)&&n[o]){e.push(o)}}}}return e.join(" ")}if(e.exports){i.default=i;e.exports=i}else{window.classNames=i}})()}));function Cg(e){if(e.startsWith("../")){e=e.split("../")[1]}if(e.indexOf("#")!==-1){e=e.split("#")[0]}return e}function Tg(e,t,i,r,n,s){if(!r){r=200}if(!n){n=100}if(!s){s=0}s+=1;if(s>n){if(i){i()}}else if(e()){t()}else{setTimeout((function(){Tg(e,t,i,r,n,s)}),r)}}var Rg=e("uv_ebook_reader",function(){function e(e){t(this,e);this._book=null;this._rendition=null;this._href=null;this._bookReady=false;this._prevEnabled=true;this._mobile=false;this._nextEnabled=true;this._showDivider=false;this.width="100%";this.height="100%";this.mobileWidth=300;this.minSpreadWidth=800;this.bookReady=i(this,"bookReady",7);this.loadedBookMetadata=i(this,"loadedBookMetadata",7);this.loadedNavigation=i(this,"loadedNavigation",7);this.relocated=i(this,"relocated",7);this.renditionAttached=i(this,"renditionAttached",7)}e.prototype.load=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){if(this._book){this._book.destroy();this._book=null;this._rendition=null;this._bookReady=false;this._href=null}this._bookPath=e;return[2]}))}))};e.prototype.resize=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){if(this._bookReady){this._rendition.resize(this._viewer.clientWidth,this._viewer.clientHeight)}return[2]}))}))};e.prototype.display=function(e){return __awaiter(this,void 0,void 0,(function(){var t=this;return __generator(this,(function(i){if(this._href!==e){Tg((function(){return t._bookReady}),(function(){t._href=e;try{t._rendition.display(e)}catch(Ng){console.warn("unable to display",e)}}))}return[2]}))}))};e.prototype.handleKeyDown=function(e){switch(e.key){case"ArrowLeft":this._prev();break;case"ArrowRight":this._next();break}};e.prototype._prev=function(){if(!this._bookReady){return}if(this._book.package.metadata.direction===kg.RTL){this._rendition.next()}else{this._rendition.prev()}};e.prototype._next=function(){if(!this._bookReady){return}if(this._book.package.metadata.direction===kg.RTL){this._rendition.prev()}else{this._rendition.next()}};e.prototype._prevButtonClickedHandler=function(e){this._prev();e.preventDefault()};e.prototype._nextButtonClickedHandler=function(e){this._next();e.preventDefault()};e.prototype.render=function(){var e=this;var t=Sg({show:this._bookReady&&this._showDivider});var i=Sg({arrow:true,disabled:!this._prevEnabled&&!this._bookReady,small:this._mobile});var n=Sg({twoup:this._showDivider});var s=Sg({arrow:true,disabled:!this._nextEnabled&&!this._bookReady,small:this._mobile});return r("div",{id:"main"},r("div",{id:"titlebar"}),r("div",{id:"divider",class:t}),r("div",{id:"prev",class:i,onClick:function(t){return e._prevButtonClickedHandler(t)}},"<"),r("div",{id:"viewer",class:n,ref:function(t){return e._viewer=t}}),this._nextEnabled?r("div",{id:"next",class:s,onClick:function(t){return e._nextButtonClickedHandler(t)}},">"):null,!this._bookReady&&r("div",{id:"spinner"},r("div",{class:"square"})))};e.prototype._renderBook=function(){var e=this;if(this._bookPath&&!this._rendition){this._book=Eg(this._bookPath);this._rendition=this._book.renderTo("viewer",{width:this.width,height:this.height,minSpreadWidth:this.minSpreadWidth});this._rendition.display();this._rendition.on("attached",(function(){e.renditionAttached.emit()}));this._rendition.on("layout",(function(){if(e._viewer.clientWidth>=e.minSpreadWidth){e._showDivider=true}else{e._showDivider=false}e._mobile=e._viewer.clientWidth<=e.mobileWidth}));this._rendition.on("relocated",(function(t){e._prevEnabled=!t.atStart;e._nextEnabled=!t.atEnd;e.relocated.emit(t)}));this._book.ready.then((function(){e._bookReady=true;e.bookReady.emit(e._bookPath)}));this._book.loaded.metadata.then((function(t){e.loadedBookMetadata.emit(t)}));this._book.loaded.navigation.then((function(t){e.loadedNavigation.emit(t)}))}};e.prototype.componentDidUpdate=function(){this._renderBook()};Object.defineProperty(e,"assetsDirs",{get:function(){return["assets"]},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"el",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(e,"style",{get:function(){return"#main{position:absolute;width:100%;height:100%;right:0;overflow:hidden}#titlebar{height:10%}#viewer{width:75%;height:80%;margin:0 auto;max-width:1250px;z-index:2;position:relative;overflow:hidden}#viewer iframe{border:none}#prev{left:20px}#next{right:20px}.arrow{position:absolute;top:50%;margin-top:-50px;font-size:64px;color:var(--reader-arrow-color);font-family:monospace,sans-serif;font-weight:700;cursor:pointer;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.arrow.small{font-size:50px}#prev.small{left:4px}#next.small{right:4px}.arrow:hover{color:var(--reader-arrow-hover-color)}.arrow.active,.arrow:active{color:#000}#divider{position:absolute;width:1px;border-right:1px solid #000;height:80%;z-index:1;left:50%;margin-left:-1px;top:10%;opacity:.15;-webkit-box-shadow:-2px 0 15px #000;box-shadow:-2px 0 15px #000;display:none}#divider.show{display:block}#spinner{position:absolute;z-index:10;left:50%;top:calc(50% - 15px)}#spinner .square{background-color:var(--reader-spinner-color,#fff);margin:0 0 0 -15px;width:30px;height:30px;-webkit-animation:sk-rotateplane 1.2s ease-in-out infinite;-moz-animation:sk-rotateplane 1.2s infinite ease-in-out;animation:sk-rotateplane 1.2s ease-in-out infinite}\@-webkit-keyframes sk-rotateplane{0%{-webkit-transform:perspective(120px)}50%{-webkit-transform:perspective(120px) rotateY(180deg)}to{-webkit-transform:perspective(120px) rotateY(180deg) rotateX(180deg)}}\@keyframes sk-rotateplane{0%{transform:perspective(120px) rotateX(0deg) rotateY(0deg);-webkit-transform:perspective(120px) rotateX(0deg) rotateY(0deg)}50%{transform:perspective(120px) rotateX(-180.1deg) rotateY(0deg);-webkit-transform:perspective(120px) rotateX(-180.1deg) rotateY(0deg)}to{transform:perspective(120px) rotateX(-180deg) rotateY(-179.9deg);-webkit-transform:perspective(120px) rotateX(-180deg) rotateY(-179.9deg)}}.highlight{background-color:#ff0}.md-show,.md-show~.overlay{visibility:visible}.md-show~.overlay{opacity:1}.md-content{color:#fff;background:#6b6b6b;position:relative;border-radius:3px;margin:0 auto;height:320px}.md-content h3{margin:0;padding:6px;text-align:center;font-size:22px;font-weight:300;opacity:.8;background:rgba(0,0,0,.1);border-radius:3px 3px 0 0}.md-content>div{padding:15px 40px 30px;margin:0;font-weight:300;font-size:14px}.md-content>div p{margin:0;padding:10px 0}.md-content>div ul{margin:0;padding:0 0 30px 20px}.md-content>div ul li{padding:5px 0}.md-content button{display:block;margin:0 auto;font-size:.8em}.md-effect-1 .md-content{-webkit-transform:scale(.7);-moz-transform:scale(.7);-ms-transform:scale(.7);transform:scale(.7);opacity:0;-webkit-transition:all .3s;-moz-transition:all .3s;-ms-transition:all .3s;transition:all .3s}.md-show.md-effect-1 .md-content{-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1);opacity:1}.md-content>.closer{font-size:18px;position:absolute;right:0;top:0;font-size:24px;padding:4px}"},enumerable:true,configurable:true});return e}());var Ag=e("uv_ebook_toc",function(){function e(e){t(this,e);this.toc=[];this.selected=null;this.disabled=false;this.itemClicked=i(this,"itemClicked",7)}e.prototype._itemClickedHandler=function(e){var t=e.currentTarget;var i=t.getAttribute("href");this.selected=t.parentElement.id;this.itemClicked.emit(i);e.preventDefault()};e.prototype.render=function(){var e=this;var t=Sg({disabled:this.disabled});return r("div",{id:"toc",class:t},r("ul",null,this.toc.map((function(t){return r("li",{id:t.id,class:Sg({selected:e.selected===t.href||e.selected&&e.selected.indexOf(Cg(t.href))!==-1})},r("a",{href:t.href,onClick:function(t){return e._itemClickedHandler(t)}},t.label))}))))};Object.defineProperty(e,"assetsDirs",{get:function(){return["assets"]},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"el",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(e,"style",{get:function(){return"#toc ul{margin:var(--toc-margin);padding:var(--toc-padding);list-style-type:var(--toc-list-style-type)}#toc ul li{padding:var(--toc-link-padding)}#toc ul li a{color:var(--toc-link-color)}#toc ul li.selected a{color:var(--toc-link-selected-color)}"},enumerable:true,configurable:true});return e}())}}}));